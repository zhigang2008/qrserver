/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"esri/layers/TiledMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojox/collections/ArrayList","dojox/gfx/matrix","esri/kernel","esri/config","esri/sniff","esri/domUtils","esri/tileUtils","esri/geometry/Point","esri/geometry/Rect","esri/layers/layer"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12){var _13=_c.defaults.map.zoomDuration;var _14=_1(_12,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(url,_15){_2.connect(this,"onLoad",this,"_initTiledLayer");this._displayLevels=_15?_15.displayLevels:null;var dh=_3.hitch;this._addImage=dh(this,this._addImage);this._tileLoadHandler=dh(this,this._tileLoadHandler);this._tileErrorHandler=dh(this,this._tileErrorHandler);this._tilePopPop=dh(this,this._tilePopPop);this._cleanUpRemovedImages=dh(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=dh(this,this._fireOnUpdateEvent);this._transitionEnd=dh(this,this._transitionEnd);},opacity:1,isPNG32:false,_initTiledLayer:function(){var ti=this.tileInfo,_16=ti.lods;this._tileW=ti.width;this._tileH=ti.height;var _17=(this.scales=[]),dl=this._displayLevels,_18=(this.declaredClass==="esri.layers.WMTSLayer"&&ti.dpi!=96),_19=-Infinity,_1a=Infinity,fe=this.fullExtent,ul=new _10(fe.xmin,fe.ymax),lr=new _10(fe.xmax,fe.ymin),_1b=_f.getContainingTileCoords,_1c,lod,i,len=_16.length;for(i=0;i<len;i++){lod=_16[i];if(_18){lod.scale=lod.scale*96/ti.dpi;}_1c=_1b(ti,ul,lod);lod.startTileRow=_1c.row<0?0:_1c.row;lod.startTileCol=_1c.col<0?0:_1c.col;_1c=_1b(ti,lr,lod);lod.endTileRow=_1c.row;lod.endTileCol=_1c.col;if(!dl||_4.indexOf(dl,lod.level)!==-1){_17[i]=lod.scale;_19=(lod.scale>_19)?lod.scale:_19;_1a=(lod.scale<_1a)?lod.scale:_1a;}}if(_18){ti.dpi=96;}if(_19!==-Infinity&&!this._hasMin){this.setMinScale(_19);}if(_1a!==Infinity&&!this._hasMax){this.setMaxScale(_1a);}this._patchIE=_d("ie")>=6&&_d("ie")<7&&(this.isPNG32||ti.format==="Mixed");},_isMapAtVisibleScale:function(){var _1d=this.inherited(arguments);if(_1d){var i,map=this._map,_1e=this.scales,_1f=map.getScale(),_20=false,_21=(map.width>map.height)?map.width:map.height;for(i=0;i<_1e.length;i++){if((Math.abs(_1e[i]-_1f)/_1e[i])<(1/_21)){_20=true;break;}}_1d=_20;}return _1d;},_setMap:function(map,_22,_23,lod){this.inherited(arguments);this._map=map;var d=(this._div=_5.create("div",null,_22)),_24=map.__visibleDelta,dc=_2.connect,_25=_b._css.names,css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};if(map.navigationMode==="css-transforms"){css[_25.transform]=_b._css.translate(-_24.x,-_24.y);_8.set(d,css);delete css[_25.transform];css[_25.transition]=_25.transformName+" "+_13+"ms ease";_8.set((this._active=_5.create("div",null,d)),css);this._active._remove=0;this._passives=[];}else{css.left=-_24.x+"px";css.top=-_24.y+"px";_8.set(d,css);}this._onResizeHandler_connect=dc(map,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=dc(this,"onOpacityChange",this,"_opacityChangeHandler");var _26=this.tileInfo,sr=_26.spatialReference,_27=sr._getInfo();this._wrap=map.wrapAround180&&sr._isWrappable()&&Math.abs(_27.origin[0]-_26.origin.x)<=_27.dx;if(this._wrap){_f._addFrameInfo(_26,_27);}this.evaluateSuspension();if(this.suspended&&!map.loaded){var _28=_2.connect(map,"onLoad",this,function(){_2.disconnect(_28);_28=null;this.evaluateSuspension();});}return d;},_unsetMap:function(map,_29){if(!this.suspended){this._suspendImpl();}_5.destroy(this._div);this._map=this._div=null;var dd=_2.disconnect;dd(this._onResizeHandler_connect);dd(this._opacityChangeHandler_connect);this.inherited(arguments);},onSuspend:function(){this.inherited(arguments);this._suspendImpl();},_suspendImpl:function(){_e.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var _2a=this._tiles,_2b=this._tileIds,_2c=this._loadingList,img,i,id,_2d=_2.disconnect,_2e=_5.destroy;if(_2c&&_2c.count>0){_2c.forEach(function(_2f){img=_2a[_2f];if(img){_2d(img._onload_connect);_2d(img._onerror_connect);_2d(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;}});_2c.clear();this._fireUpdateEnd();}this._removeList.clear();for(i=_2b.length-1;i>=0;i--){id=_2b[i];img=id&&_2a[id];if(img){_2e(img);}}if(this._map.navigationMode==="css-transforms"){var _30=this._active,_31=this._passives,_32;this._noDom=0;for(i=_31.length-1;i>=0;i--){_32=_31[i];if(_32._endHandle){_2d(_32._endHandle);}_32._matrix=_32._multiply=_32._endHandle=null;_32._marked=_32._remove=0;_31.splice(i,1);_2e(_32);}_30._matrix=_30._multiply=null;_30._marked=_30._remove=0;}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null;},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new _9();this._loadingList=new _9();_e.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(_3.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent,null,true,this._map.__LOD);}}),0);},_enableDrawConnectors:function(){var map=this._map,_33=_2.connect;if(map.navigationMode==="css-transforms"){this._onScaleHandler_connect=_33(map,"onScale",this,this._onScaleHandler);if(_d("esri-touch")||_d("esri-pointer")){this._standby=[];var _34=this,_35=function(){_34._noDom=1;};this._onPanStartHandler_connect=_33(map,"onPanStart",_35);this._onZoomStartHandler_connect=_33(map,"onZoomStart",_35);}}else{this._onZoomHandler_connect=_33(map,"onZoom",this,"_onZoomHandler");}this._onPanHandler_connect=_33(map,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=_33(map,"onExtentChange",this,"_onExtentChangeHandler");},_disableDrawConnectors:function(){var _36=_2.disconnect;_36(this._onPanHandler_connect);_36(this._onZoomHandler_connect);_36(this._onScaleHandler_connect);_36(this._onExtentChangeHandler_connect);_36(this._onPanStartHandler_connect);_36(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null;},_onResizeHandler:function(_37,_38,_39){var css={width:_38+"px",height:_39+"px"},ds=_8.set,i;ds(this._div,css);if(this._map.navigationMode==="css-transforms"){if(this._active){ds(this._active,css);}for(i=this._passives.length-1;i>=0;i--){ds(this._passives[i],css);}}},_onExtentChangeHandler:function(_3a,_3b,_3c,lod){var map=this._map,i,_3d=this._standby,img,_3e;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(map._isPanningOrZooming()){return;}if(map.navigationMode==="css-transforms"){if(_3c){for(i=this._passives.length-1;i>=0;i--){_3e=this._passives[i];_8.set(_3e,_b._css.names.transition,"none");if(_3e._marked){this._passives.splice(i,1);if(_3e.parentNode){_3e.parentNode.removeChild(_3e);}_5.destroy(_3e);}else{if(_3e.childNodes.length>0){_3e._multiply=_3e._multiply?_a.multiply(_3e._matrix,_3e._multiply):_3e._matrix;}}}}this._noDom=0;if(_3d&&_3d.length){for(i=_3d.length-1;i>=0;i--){img=_3d[i];_8.set(img,"visibility","visible");this._tilePopPop(img);_3d.splice(i,1);}}}this._fireUpdateStart();this._rrIndex=0;var ct=_f.getCandidateTileInfo(map,this.tileInfo,_3a),mv=map.__visibleDelta,id;if(!this._ct||ct.lod.level!==this._ct.lod.level||_3c){var _3f=(ct&&this._ct&&ct.lod.level!==this._ct.lod.level);this._ct=ct;var _40=this._tiles,_41=this._tileIds,_42=this._tileBounds,_43=this._removeList,_44,il=_41.length;this._cleanUpRemovedImages();for(i=0;i<il;i++){id=_41[i];_44=_40[id];_42[id]=_41[i]=null;if((map.navigationMode==="css-transforms")&&_3f&&_44.parentNode&&map.fadeOnZoom){_44._fadeOut=_3f;_44.parentNode._remove++;}_43.add(_44);}if(_3c){this._tileIds=[];this._tiles=[];this._tileBounds=[];}}var mx=mv.x,my=mv.y;if(map.navigationMode==="css-transforms"){var css={};css[_b._css.names.transform]=_b._css.translate(mx,my);_8.set(this._div,css);}else{_8.set(this._div,{left:mx+"px",top:my+"px"});}this.__coords_dx=mx;this.__coords_dy=my;this._updateImages(new _11(0,0,mv.width,mv.height));if(this._loadingList.count===0){this.onUpdate();this._fireUpdateEnd();}else{this._fireOnUpdate=true;}var _45,_46,_47=this._tileW,_48=this._tileH;mv=new _11(-mv.x,-mv.y,mv.width,mv.height);for(i=this._tileIds.length-1;i>=0;i--){id=this._tileIds[i];if(id){img=this._tiles[id];_45=_7.getMarginBox(img);_46=new _11(_45.l,_45.t,_47,_48);if(map.navigationMode==="css-transforms"){_46.x=img._left;_46.y=img._top;}if(mv.intersects(_46)){this._tileBounds[id]=_46;}else{if(this._loadingList.contains(id)){this._tilePopPop(img);}_5.destroy(img);this._tileIds.splice(i,1);delete this._tileBounds[id];delete this._tiles[id];}}else{this._tileIds.splice(i,1);delete this._tileBounds[id];delete this._tiles[id];}}},_onPanHandler:function(_49,_4a){var map=this._map,mv=map.__visibleDelta.offset(_4a.x,_4a.y);this.__coords_dx=this.__coords_dy=0;if(map.navigationMode==="css-transforms"){var css={};css[_b._css.names.transform]=_b._css.translate(mv.x,mv.y);_8.set(this._div,css);if(!_d("esri-touch")&&!_d("esri-pointer")){this._updateImages({x:-mv.x,y:-mv.y,width:mv.width,height:mv.height});}}else{_8.set(this._div,{left:mv.x+"px",top:mv.y+"px"});this._updateImages({x:-mv.x,y:-mv.y,width:mv.width,height:mv.height});}if(this._loadingList.count>0){this._fireUpdateStart();this._fireOnUpdate=true;}},_onScaleHandler:function(mtx,_4b){var i,css={},_4c=_b._css.names,map=this._map;for(i=this._passives.length-1;i>=0;i--){var _4d=this._passives[i];if(_4d.childNodes.length===0){this._passives.splice(i,1);_5.destroy(_4d);}else{if(_4d.style[_4c.transition]==="none"){_8.set(_4d,_4c.transition,_4c.transformName+" "+_13+"ms ease");}_8.set(_4d,_4c.transition,_4b?"none":(_4c.transformName+" "+_13+"ms ease"));_4d._matrix=mtx;css[_4c.transform]=_b._css.matrix(_4d._multiply?_a.multiply(mtx,_4d._multiply):mtx);_8.set(_4d,css);}}if(this._active&&this._active.childNodes.length===0){return;}_8.set(this._active,_4c.transition,_4b?"none":(_4c.transformName+" "+_13+"ms ease"));this._active._matrix=mtx;css[_4c.transform]=_b._css.matrix(this._active._matrix);_8.set(this._active,css);this._passives.push(this._active);css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};css[_4c.transition]=_4c.transformName+" "+_13+"ms ease";_8.set((this._active=_5.create("div",null,this._div)),css);this._active._remove=0;if(map.fadeOnZoom){_5.place(this._active,this._div,"first");}},_onZoomHandler:function(_4e,_4f,_50){var _51=_7.getMarginBox(this._div);_50=_50.offset(-_51.l,-_51.t);var _52,_53=this._tileW*_4f,_54=this._tileH*_4f,_55=this._tileBounds,_56=this._tiles,es=_8.set;var _57=_d("ie");if(_57&&_57<8){_4.forEach(this._tileIds,function(id){_52=_55[id];es(_56[id],{left:(_52.x-((_53-_52.width)*(_50.x-_52.x)/_52.width))+"px",top:(_52.y-((_54-_52.height)*(_50.y-_52.y)/_52.height))+"px",zoom:_4f});});}else{_4.forEach(this._tileIds,function(id){_52=_55[id];es(_56[id],{left:(_52.x-((_53-_52.width)*(_50.x-_52.x)/_52.width))+"px",top:(_52.y-((_54-_52.height)*(_50.y-_52.y)/_52.height))+"px",width:_53+"px",height:_54+"px"});});}},_updateImages:function(_58){if(!this._ct){return;}var id,_59=this._tileW,_5a=this._tileH,_5b=this._ct,lod=_5b.lod,_5c=_5b.tile,off=_5c.offsets,_5d=_5c.coords,cr=_5d.row,cc=_5d.col,_5e=lod.level,_5f=this.opacity,_60=this._tileIds,_61=this._loadingList,_62=this._addImage,mId=this._map.id,tId=this.id,rx=_58.x,ry=_58.y,str=lod.startTileRow,etr=lod.endTileRow,stc=lod.startTileCol,etc=lod.endTileCol,_63=_4.indexOf,r,c,mvx=-_58.x,mvy=-_58.y,_64=off.x-this.__coords_dx,_65=off.y-this.__coords_dy,vx=((_59-_64)+mvx),vy=((_5a-_65)+mvy),_66=Math.ceil,_67=(vx>0)?(vx%_59):((_59-(Math.abs(vx)%_59))),_68=(vy>0)?(vy%_5a):((_5a-(Math.abs(vy)%_5a))),_69=(rx>0)?Math.floor((rx+_64)/_59):_66((rx-(_59-_64))/_59),_6a=(ry>0)?Math.floor((ry+_65)/_5a):_66((ry-(_5a-_65))/_5a),_6b=_69+_66((_58.width-_67)/_59),_6c=_6a+_66((_58.height-_68)/_5a),_6d,_6e,_6f,_70,col,row;if(this._wrap){_6d=lod._frameInfo;_6e=_6d[0];_6f=_6d[1];_70=_6d[2];}for(col=_69;col<=_6b;col++){for(row=_6a;row<=_6c;row++){r=cr+row;c=cc+col;if(this._wrap){if(c<_6f){c=c%_6e;c=c<_6f?c+_6e:c;}else{if(c>_70){c=c%_6e;}}}if(r>=str&&r<=etr&&c>=stc&&c<=etc){id=mId+"_"+tId+"_tile_"+_5e+"_"+row+"_"+col;if(_63(_60,id)===-1){_61.add(id);_60.push(id);_62(_5e,row,r,col,c,id,_59,_5a,_5f,_5c,off);}}}}},_cleanUpRemovedImages:function(){var _71=this._removeList,dd=_5.destroy,i,_72=_b._css.names;_71.forEach(function(img){if(!img._fadeOut){img.style.filter="";img.style.zoom=1;dd(img);}});if(this._map.navigationMode==="css-transforms"){for(i=this._passives.length-1;i>=0;i--){var _73=this._passives[i];if(_73.childNodes.length===0){this._passives.splice(i,1);dd(_73);}else{if(this._map.fadeOnZoom&&!_73._marked&&(_73._remove===_73.childNodes.length)){_8.set(_73,_72.transition,"opacity 0.65s");_8.set(_73,"opacity",0);_73._marked=1;if(_d("ie")>=10){_73.addEventListener(_72.endEvent,this._transitionEnd,false);}else{_73._endHandle=_2.connect(_73,_72.endEvent,this._transitionEnd);}}}}}_71.clear();},_transitionEnd:function(evt){var _74=evt.target,idx;if(evt.propertyName!=="opacity"){return;}if(_d("ie")>=10){_74.removeEventListener(_b._css.names.endEvent,this._transitionEnd,false);}else{_2.disconnect(_74._endHandle);_74._endHandle=null;}idx=_4.indexOf(this._passives,_74);if(idx>-1){this._passives.splice(idx,1);}if(_74.parentNode){_74.parentNode.removeChild(_74);}_5.destroy(_74);},_addImage:function(_75,row,r,col,c,id,_76,_77,_78,_79,_7a){if(this._patchIE){var div=(this._tiles[id]=_5.create("div"));div.id=id;_6.add(div,"layerTile");_8.set(div,{left:((_76*col)-_7a.x)+"px",top:((_77*row)-_7a.y)+"px",width:_76+"px",height:_77+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this.getTileUrl(_75,r,c)+"', sizingMethod='scale')"});if(_78<1){_8.set(div,"opacity",_78);}var _7b=div.appendChild(_5.create("div"));_8.set(_7b,{opacity:0,width:_76+"px",height:_77+"px"});this._div.appendChild(div);div=null;this._loadingList.remove(id);this._fireOnUpdateEvent();}else{var img=(this._tiles[id]=_5.create("img")),dc=_2.connect;img.id=id;_6.add(img,"layerTile");var _7c=(_76*col)-_7a.x,top=(_77*row)-_7a.y,map=this._map,_7d=_b._css.names,css={width:_76+"px",height:_77+"px",visibility:"hidden"};if(map.navigationMode==="css-transforms"){css[_7d.transform]=_b._css.translate(_7c,top);_8.set(img,css);img._left=_7c;img._top=top;}else{css.left=_7c+"px";css.top=top+"px";_8.set(img,css);}if(_78<1){_8.set(img,"opacity",_78);}img._onload_connect=dc(img,"onload",this,"_tileLoadHandler");img._onerror_connect=dc(img,"onerror",this,"_tileErrorHandler");img._onabort_connect=dc(img,"onabort",this,"_tileErrorHandler");var url=this.getTileUrl(_75,r,c,img);if(url){img.src=url;}if(map.navigationMode==="css-transforms"){this._active.appendChild(img);}else{this._div.appendChild(img);}img=null;}},getTileUrl:function(_7e,row,col){},refresh:function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent,null,true,this._map.__LOD);}},_tilePopPop:function(img){var dd=_2.disconnect;dd(img._onload_connect);dd(img._onerror_connect);dd(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;this._loadingList.remove(img.id);this._fireOnUpdateEvent();},_tileLoadHandler:function(evt){var img=evt.currentTarget;if(this._noDom){this._standby.push(img);return;}_8.set(img,"visibility","visible");this._tilePopPop(img);},_tileErrorHandler:function(evt){var img=evt.currentTarget;this.onError(new Error("Unable to load tile: "+img.src));_8.set(img,"visibility","hidden");this._tilePopPop(img);},_fireOnUpdateEvent:function(){if(this._loadingList.count===0){this._cleanUpRemovedImages();if(this._fireOnUpdate){this._fireOnUpdate=false;this.onUpdate();this._fireUpdateEnd();}}},setOpacity:function(o){if(this.opacity!=o){this.onOpacityChange(this.opacity=o);}},onOpacityChange:function(){},_opacityChangeHandler:function(_7f){var djs=_8.set,i,j,_80;if(this._map.navigationMode==="css-transforms"){if(this._active){_80=this._active.childNodes;for(i=_80.length-1;i>=0;i--){djs(_80[i],"opacity",_7f);}}for(i=this._passives.length-1;i>=0;i--){_80=this._passives[i].childNodes;for(j=_80.length-1;j>=0;j--){djs(_80[j],"opacity",_7f);}}return;}_80=this._div.childNodes;for(i=_80.length-1;i>=0;i--){djs(_80[i],"opacity",_7f);}}});if(_d("extend-esri")){_3.setObject("layers.TiledMapServiceLayer",_14,_b);}return _14;});},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point"],function(_81,has,_82,_83){function _84(pt1,pt2){var dx=pt2.x-pt1.x,dy=pt2.y-pt1.y;return Math.sqrt(dx*dx+dy*dy);};function _85(pt1,pt2){var dx=pt2[0]-pt1[0],dy=pt2[1]-pt1[1];return Math.sqrt(dx*dx+dy*dy);};function _86(pt0,pt1,_87){if(pt0 instanceof _83){return new _83(pt0.x+_87*(pt1.x-pt0.x),pt0.y+_87*(pt1.y-pt0.y));}else{return [pt0[0]+_87*(pt1[0]-pt0[0]),pt0[1]+_87*(pt1[1]-pt0[1])];}};function _88(pt0,pt1){return _86(pt0,pt1,0.5);};function _89(n1,n2){return Math.abs(n1-n2)<1e-8;};function _8a(p0,p1,p2,p3){var _8b=10000000000,x,y,a0=_89(p0[0],p1[0])?_8b:(p0[1]-p1[1])/(p0[0]-p1[0]),a1=_89(p2[0],p3[0])?_8b:(p2[1]-p3[1])/(p2[0]-p3[0]),b0=p0[1]-a0*p0[0],b1=p2[1]-a1*p2[0];if(_89(a0,a1)){if(!_89(b0,b1)){return null;}else{if(_89(p0[0],p1[0])){if(Math.min(p0[1],p1[1])<Math.max(p2[1],p3[1])||Math.max(p0[1],p1[1])>Math.min(p2[1],p3[1])){y=(p0[1]+p1[1]+p2[1]+p3[1]-Math.min(p0[1],p1[1],p2[1],p3[1])-Math.max(p0[1],p1[1],p2[1],p3[1]))/2;x=(y-b0)/a0;}else{return null;}}else{if(Math.min(p0[0],p1[0])<Math.max(p2[0],p3[0])||Math.max(p0[0],p1[0])>Math.min(p2[0],p3[0])){x=(p0[0]+p1[0]+p2[0]+p3[0]-Math.min(p0[0],p1[0],p2[0],p3[0])-Math.max(p0[0],p1[0],p2[0],p3[0]))/2;y=a0*x+b0;}else{return null;}}return [x,y];}}if(_89(a0,_8b)){x=p0[0];y=a1*x+b1;}else{if(_89(a1,_8b)){x=p2[0];y=a0*x+b0;}else{x=-(b0-b1)/(a0-a1);y=a0*x+b0;}}return [x,y];};function _8c(_8d,_8e,_8f,_90,sr){var pt=_8a([_8d.x,_8d.y],[_8e.x,_8e.y],[_8f.x,_8f.y],[_90.x,_90.y]);if(pt){pt=new _83(pt[0],pt[1],sr);}return pt;};function _91(_92,_93){var p1=_92[0],p2=_92[1],p3=_93[0],p4=_93[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=p3[0],y3=p3[1],x4=p4[0],y4=p4[1],x43=x4-x3,x13=x1-x3,x21=x2-x1,y43=y4-y3,y13=y1-y3,y21=y2-y1,_94=(y43*x21)-(x43*y21),ua,ub,px,py;if(_94===0){return false;}ua=((x43*y13)-(y43*x13))/_94;ub=((x21*y13)-(y21*x13))/_94;if(ua>=0&&ua<=1&&ub>=0&&ub<=1){px=x1+(ua*(x2-x1));py=y1+(ua*(y2-y1));return [px,py];}else{return false;}};function _95(_96,_97){var p1=_97[0],p2=_97[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=_96[0],y3=_96[1],x21=x2-x1,y21=y2-y1,x31=x3-x1,y31=y3-y1,_98=Math.sqrt,pow=Math.pow,mag=_98(pow(x21,2)+pow(y21,2)),u=((x31*x21)+(y31*y21))/(mag*mag),x=x1+u*x21,y=y1+u*y21;return _98(pow(x3-x,2)+pow(y3-y,2));};var _99={getLength:_84,_getLength:_85,getPointOnLine:_86,getMidpoint:_88,_equals:_89,_getLineIntersection:_8a,getLineIntersection:_8c,_getLineIntersection2:_91,_pointLineDistance:_95};if(has("extend-esri")){_81.mixin(_81.getObject("geometry",true,_82),_99);}return _99;});},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(_9a,_9b,_9c,has,_9d){var _9e=_9d.doc.documentElement,ie=has("ie"),_9f=has("opera"),maj=Math.floor,ff=has("ff"),_a0=_9a.boxModel.replace(/-/,""),_a1={"dj_quirks":has("quirks"),"dj_opera":_9f,"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_gecko":has("mozilla")};if(ie){_a1["dj_ie"]=true;_a1["dj_ie"+maj(ie)]=true;_a1["dj_iequirks"]=has("quirks");}if(ff){_a1["dj_ff"+maj(ff)]=true;}_a1["dj_"+_a0]=true;var _a2="";for(var clz in _a1){if(_a1[clz]){_a2+=clz+" ";}}_9e.className=_9b.trim(_9e.className+" "+_a2);_9c(90,function(){if(!_9a.isBodyLtr()){var _a3="dj_rtl dijitRtl "+_a2.replace(/ /g,"-rtl ");_9e.className=_9b.trim(_9e.className+" "+_a3+"dj_rtl dijitRtl "+_a2.replace(/ /g,"-rtl "));}});return has;});},"esri/symbols/SimpleMarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/MarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_a4,_a5,_a6,has,_a7,_a8,_a9,_aa,_ab){var _ac={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"};var _ad={style:_ac.STYLE_CIRCLE,color:[255,255,255,0.25],size:12,angle:0,xoffset:0,yoffset:0};var SMS=_a4(_aa,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(_ae,_af,_b0,_b1){if(_ae){if(_a5.isString(_ae)){this.style=_ae;if(_af){this.size=_af;}if(_b0){this.outline=_b0;}if(_b1){this.color=_b1;}}else{this.style=_a9.valueOf(this._styles,this.style);if(_ae.outline){this.outline=new _ab(_ae.outline);}}}else{_a5.mixin(this,_ad);this.size=_a7.pt2px(this.size);this.outline=new _ab(this.outline);this.color=new _a6(this.color);}if(!this.style){this.style=_ac.STYLE_CIRCLE;}},setStyle:function(_b2){this.style=_b2;return this;},setPath:function(_b3){this.path=_b3;this.setStyle(_ac.STYLE_PATH);return this;},setOutline:function(_b4){this.outline=_b4;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return this.color;},_setDim:function(_b5,_b6,_b7){this._targetWidth=_b5;this._targetHeight=_b6;this._spikeSize=_b7;},getShapeDescriptors:function(){var _b8,_b9,_ba;var _bb=this.style,_bc=this.size||_a7.pt2px(_ad.size),cx=0,cy=0,_bd=_bc/2,_be=cx-_bd,_bf=cx+_bd,top=cy-_bd,_c0=cy+_bd;switch(_bb){case _ac.STYLE_CIRCLE:_b8={type:"circle",cx:cx,cy:cy,r:_bd};_b9=this.getFill();_ba=this.getStroke();if(_ba){_ba.style=_ba.style||"Solid";}break;case _ac.STYLE_CROSS:_b8={type:"path",path:"M "+_be+",0 L "+_bf+",0 M 0,"+top+" L 0,"+_c0+" E"};_b9=null;_ba=this.getStroke();break;case _ac.STYLE_DIAMOND:_b8={type:"path",path:"M "+_be+",0 L 0,"+top+" L "+_bf+",0 L 0,"+_c0+" L "+_be+",0 E"};_b9=this.getFill();_ba=this.getStroke();break;case _ac.STYLE_SQUARE:_b8={type:"path",path:"M "+_be+","+_c0+" L "+_be+","+top+" L "+_bf+","+top+" L "+_bf+","+_c0+" L "+_be+","+_c0+" E"};_b9=this.getFill();_ba=this.getStroke();break;case _ac.STYLE_X:_b8={type:"path",path:"M "+_be+","+_c0+" L "+_bf+","+top+" M "+_be+","+top+" L "+_bf+","+_c0+" E"};_b9=null;_ba=this.getStroke();break;case _ac.STYLE_PATH:_b8={type:"path",path:this.path||""};_b9=this.getFill();_ba=this.getStroke();break;}return {defaultShape:_b8,fill:_b9,stroke:_ba};},toJson:function(){var _c1=_a5.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),_c2=this.outline;if(_c2){_c1.outline=_c2.toJson();}_c1.path=this.path;return _a9.fixJson(_c1);}});_a5.mixin(SMS,_ac);SMS.defaultProps=_ad;if(has("extend-esri")){_a5.setObject("symbol.SimpleMarkerSymbol",SMS,_a8);_a8.symbol.defaultSimpleMarkerSymbol=_ad;}return SMS;});},"esri/layers/agstiled":function(){define(["esri/layers/agscommon","esri/layers/ArcGISTiledMapServiceLayer"],function(){return {};});},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point"],function(_c3,_c4,has,_c5,_c6){var _c7=_c3(_c6,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});if(has("extend-esri")){_c4.setObject("geometry.ScreenPoint",_c7,_c5);}return _c7;});},"esri/sniff":function(){define(["dojo/_base/sniff","esri/kernel"],function(has,_c8){var _c9=has("ff"),_ca=has("ie"),_cb=has("webkit"),_cc=has("opera"),_cd=has("chrome"),_ce=has("safari");var nua=navigator.userAgent,_cf;_cf=nua.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i);if(_cf){has.add("esri-iphone",parseFloat(_cf[2].replace("_",".")));}_cf=nua.match(/Android\s+(\d+\.\d+)/i);if(_cf){has.add("esri-android",parseFloat(_cf[1]));}_cf=nua.match(/Fennec\/(\d+\.\d+)/i);if(_cf){has.add("esri-fennec",parseFloat(_cf[1]));}if(nua.indexOf("BlackBerry")>=0){if(nua.indexOf("WebKit")>=0){has.add("esri-blackberry",1);}}has.add("esri-touch",(has("esri-iphone")||has("esri-android")||has("esri-blackberry")||(has("esri-fennec")>=6)||((_c9||_cb)&&document.createTouch))?true:false);has.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled);_c8._getDOMAccessor=function(_d0){var _d1="";if(_c9){_d1="Moz";}else{if(_cb){_d1="Webkit";}else{if(_ca){_d1="ms";}else{if(_cc){_d1="O";}}}}return _d1+_d0.charAt(0).toUpperCase()+_d0.substr(1);};has.add("esri-cors",_cd>=4||_c9>=3.5||_ce>=4||_ca>=10);has.add("esri-file-upload",(window.FormData&&window.FileList)?true:false);has.add("esri-transforms",_ca>=9||_c9>=3.5||_cd>=4||_ce>=3.1||_cc>=10.5||has("esri-iphone")>=3.2||has("esri-android")>=2.1);has.add("esri-transitions",_ca>=10||_c9>=4||_cd>=4||_ce>=3.1||_cc>=10.5||has("esri-iphone")>=3.2||has("esri-android")>=2.1);has.add("esri-transforms3d",_ca>=11||_c9>=10||_cd>=12||_ce>=4||has("esri-iphone")>=3.2||has("esri-android")>=3);if(has("esri-android")<3){has.add("esri-transforms",false,false,true);has.add("esri-transitions",false,false,true);has.add("esri-transforms3d",false,false,true);}_c8._css=function(_d2){var _d3=has("esri-transforms3d");if(_d2!==undefined&&_d2!==null){_d3=_d2;}else{if(_d3){if(_cd||(_ce&&!has("esri-iphone"))){_d3=false;}}}var _d4=_d3?"translate3d(":"translate(",_d5=_d3?(_cd?",-1px)":",0px)"):")",_d6=_d3?"scale3d(":"scale(",_d7=_d3?",1)":")",_d8=_d3?"rotate3d(0,0,1,":"rotate(",_d9=_d3?"matrix3d(":"matrix(",_da=_d3?",0,0,":",",_db=_d3?",0,0,0,0,1,0,":",",_dc=_d3?",0,1)":")";return {names:{transition:(_cb&&"-webkit-transition")||(_c9&&"MozTransition")||(_cc&&"OTransition")||(_ca&&"msTransition"),transform:(_cb&&"-webkit-transform")||(_c9&&"MozTransform")||(_cc&&"OTransform")||(_ca&&"msTransform"),transformName:(_cb&&"-webkit-transform")||(_c9&&"-moz-transform")||(_cc&&"-o-transform")||(_ca&&"-ms-transform"),origin:(_cb&&"-webkit-transform-origin")||(_c9&&"MozTransformOrigin")||(_cc&&"OTransformOrigin")||(_ca&&"msTransformOrigin"),endEvent:(_cb&&"webkitTransitionEnd")||(_c9&&"transitionend")||(_cc&&"oTransitionEnd")||(_ca&&"MSTransitionEnd")},translate:function(x,y){return _d4+x+"px,"+y+"px"+_d5;},scale:function(_dd){return _d6+_dd+","+_dd+_d7;},rotate:function(_de){return _d8+_de+"deg)";},matrix:function(m){return _d9+m.xx+","+m.xy+_da+m.yx+","+m.yy+_db+m.dx.toFixed(10)+(_c9?"px,":",")+m.dy.toFixed(10)+(_c9?"px":"")+_dc;}};};if(has("extend-esri")){_c8.isiPhone=has("esri-iphone");_c8.isAndroid=has("esri-android");_c8.isFennec=has("esri-fennec");_c8.isBlackBerry=has("esri-blackberry");_c8.isTouchEnabled=has("esri-touch");_c8.isPointerEnabled=has("esri-pointer");_c8._hasCors=has("esri-cors");_c8._hasFileUpload=has("esri-file-upload");_c8._hasTransforms=has("esri-transforms");_c8._hasTransitions=has("esri-transitions");_c8._has3DTransforms=has("esri-transforms3d");}return has;});},"esri/layers/Field":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/RangeDomain","esri/layers/CodedValueDomain"],function(_df,_e0,has,_e1,_e2,_e3){var _e4=_df(null,{declaredClass:"esri.layers.Field",constructor:function(_e5){if(_e5&&_e0.isObject(_e5)){this.name=_e5.name;this.type=_e5.type;this.alias=_e5.alias;this.length=_e5.length;this.editable=_e5.editable;this.nullable=_e5.nullable;var _e6=_e5.domain;if(_e6&&_e0.isObject(_e6)){switch(_e6.type){case "range":this.domain=new _e2(_e6);break;case "codedValue":this.domain=new _e3(_e6);break;}}}}});if(has("extend-esri")){_e0.setObject("layers.Field",_e4,_e1);}return _e4;});},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(_e7,_e8,has){var _e9=window.location,_ea=_e9.pathname,_eb={version:3.5,_appBaseUrl:_e9.protocol+"//"+_e9.host+_ea.substring(0,_ea.lastIndexOf(_ea.split("/")[_ea.split("/").length-1]))};if(!_e8.noGlobals){window.esri=_eb;}if(!_e7.isAsync){has.add("extend-esri",1);}var _ec=_eb.dijit=(_eb.dijit||{});_ec._arcgisUrl=_e9.protocol+"//www.arcgis.com/sharing/rest";return _eb;});},"esri/symbols/jsonUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/CartographicLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/PictureFillSymbol","esri/symbols/TextSymbol"],function(_ed,has,_ee,_ef,_f0,_f1,_f2,_f3,_f4,_f5){var _f6={fromJson:function(_f7){var _f8=_f7.type,_f9=null;switch(_f8.substring(0,"esriXX".length)){case "esriSM":_f9=new _ef(_f7);break;case "esriPM":_f9=new _f0(_f7);break;case "esriTS":_f9=new _f5(_f7);break;case "esriSL":if(_f7.cap!==undefined){_f9=new _f2(_f7);}else{_f9=new _f1(_f7);}break;case "esriSF":_f9=new _f3(_f7);break;case "esriPF":_f9=new _f4(_f7);break;}return _f9;},getShapeDescriptors:function(_fa){return (_fa&&_fa.getShapeDescriptors)?_fa.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null};}};if(has("extend-esri")){_ed.mixin(_ed.getObject("symbol",true,_ee),_f6);}return _f6;});},"dojox/gfx/matrix":function(){define("dojox/gfx/matrix",["./_base","dojo/_base/lang"],function(g,_fb){var m=g.matrix={};var _fc={};m._degToRad=function(_fd){return _fc[_fd]||(_fc[_fd]=(Math.PI*_fd/180));};m._radToDeg=function(_fe){return _fe/Math.PI*180;};m.Matrix2D=function(arg){if(arg){if(typeof arg=="number"){this.xx=this.yy=arg;}else{if(arg instanceof Array){if(arg.length>0){var _ff=m.normalize(arg[0]);for(var i=1;i<arg.length;++i){var l=_ff,r=m.normalize(arg[i]);_ff=new m.Matrix2D();_ff.xx=l.xx*r.xx+l.xy*r.yx;_ff.xy=l.xx*r.xy+l.xy*r.yy;_ff.yx=l.yx*r.xx+l.yy*r.yx;_ff.yy=l.yx*r.xy+l.yy*r.yy;_ff.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_ff.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}_fb.mixin(this,_ff);}}else{_fb.mixin(this,arg);}}}};_fb.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});_fb.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(_100){var c=Math.cos(_100);var s=Math.sin(_100);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_101){return m.rotate(m._degToRad(_101));},skewX:function(_102){return new m.Matrix2D({xy:Math.tan(_102)});},skewXg:function(_103){return m.skewX(m._degToRad(_103));},skewY:function(_104){return new m.Matrix2D({yx:Math.tan(_104)});},skewYg:function(_105){return m.skewY(m._degToRad(_105));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_106){return (_106 instanceof m.Matrix2D)?_106:new m.Matrix2D(_106);},isIdentity:function(_107){return _107.xx==1&&_107.xy==0&&_107.yx==0&&_107.yy==1&&_107.dx==0&&_107.dy==0;},clone:function(_108){var obj=new m.Matrix2D();for(var i in _108){if(typeof (_108[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_108[i]){obj[i]=_108[i];}}return obj;},invert:function(_109){var M=m.normalize(_109),D=M.xx*M.yy-M.xy*M.yx;M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_10a,x,y){return {x:_10a.xx*x+_10a.xy*y+_10a.dx,y:_10a.yx*x+_10a.yy*y+_10a.dy};},multiplyPoint:function(_10b,a,b){var M=m.normalize(_10b);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiplyRectangle:function(_10c,rect){var M=m.normalize(_10c);rect=rect||{x:0,y:0,width:0,height:0};if(m.isIdentity(M)){return {x:rect.x,y:rect.y,width:rect.width,height:rect.height};}var p0=m.multiplyPoint(M,rect.x,rect.y),p1=m.multiplyPoint(M,rect.x,rect.y+rect.height),p2=m.multiplyPoint(M,rect.x+rect.width,rect.y),p3=m.multiplyPoint(M,rect.x+rect.width,rect.y+rect.height),minx=Math.min(p0.x,p1.x,p2.x,p3.x),miny=Math.min(p0.y,p1.y,p2.y,p3.y),maxx=Math.max(p0.x,p1.x,p2.x,p3.x),maxy=Math.max(p0.y,p1.y,p2.y,p3.y);return {x:minx,y:miny,width:maxx-minx,height:maxy-miny};},multiply:function(_10d){var M=m.normalize(_10d);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_10e,x,y){return m.multiply(m.translate(x,y),_10e,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(_10f,a,b){if(arguments.length>2){return m._sandwich(m.rotate(_10f),a,b);}return m._sandwich(m.rotate(_10f),a.x,a.y);},rotategAt:function(_110,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_110),a,b);}return m._sandwich(m.rotateg(_110),a.x,a.y);},skewXAt:function(_111,a,b){if(arguments.length>2){return m._sandwich(m.skewX(_111),a,b);}return m._sandwich(m.skewX(_111),a.x,a.y);},skewXgAt:function(_112,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_112),a,b);}return m._sandwich(m.skewXg(_112),a.x,a.y);},skewYAt:function(_113,a,b){if(arguments.length>2){return m._sandwich(m.skewY(_113),a,b);}return m._sandwich(m.skewY(_113),a.x,a.y);},skewYgAt:function(_114,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_114),a,b);}return m._sandwich(m.skewYg(_114),a.x,a.y);}});g.Matrix2D=m.Matrix2D;return m;});},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_115,lang,has,_116){var _117=_115(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(_118,_119){},_setSymbolSize:function(_11a,size){switch(_11a.type){case "simplemarkersymbol":_11a.setSize(size);break;case "picturemarkersymbol":_11a.setWidth(size);_11a.setHeight(size);break;case "simplelinesymbol":case "cartographiclinesymbol":_11a.setWidth(size);break;case "simplefillsymbol":case "picturefillsymbol":if(_11a.outline){_11a.outline.setWidth(size);}break;}}});if(has("extend-esri")){lang.setObject("renderer.SymbolAger",_117,_116);}return _117;});},"esri/geometry/normalizeUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/has","esri/kernel","esri/config","esri/deferredUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/webMercatorUtils","esri/geometry/jsonUtils"],function(_11b,lang,_11c,has,_11d,_11e,_11f,_120,_121,_122,_123){function _124(_125,_126){return Math.ceil((_125-_126)/(_126*2));};function _127(_128,_129){var _12a=_128.paths||_128.rings,i,j,il=_12a.length,jl;for(i=0;i<il;i++){var _12b=_12a[i];jl=_12b.length;for(j=0;j<jl;j++){var _12c=_128.getPoint(i,j);_128.setPoint(i,j,_12c.offset(_129,0));}}return _128;};function _12d(geom,_12e){if(!(geom instanceof _120||geom instanceof _121)){var msg="_straightLineDensify: the input geometry is neither polyline nor polygon";console.error(msg);throw new Error(msg);}var _12f=geom instanceof _120,_130=_12f?geom.paths:geom.rings,_131=[],_132;_11b.forEach(_130,function(ring){_131.push(_132=[]);_132.push([ring[0][0],ring[0][1]]);var x1,y1,x2,y2;var i,j,_133,_134,_135,_136,xj,yj;for(i=0;i<ring.length-1;i++){x1=ring[i][0];y1=ring[i][1];x2=ring[i+1][0];y2=ring[i+1][1];_133=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));_134=(y2-y1)/_133;_135=(x2-x1)/_133;_136=_133/_12e;if(_136>1){for(j=1;j<=_136-1;j++){var _137=j*_12e;xj=_135*_137+x1;yj=_134*_137+y1;_132.push([xj,yj]);}var _138=(_133+Math.floor(_136-1)*_12e)/2;xj=_135*_138+x1;yj=_134*_138+y1;_132.push([xj,yj]);}_132.push([x2,y2]);}});if(_12f){return new _120({paths:_131,spatialReference:geom.spatialReference});}else{return new _121({rings:_131,spatialReference:geom.spatialReference});}};function _139(_13a,_13b,_13c){var _13d=1000000;if(_13b){var _13e=_12d(_13a,_13d);_13a=_122.webMercatorToGeographic(_13e,true);}if(_13c){_13a=_127(_13a,_13c);}return _13a;};function _13f(_140,maxX,minX){var _141=_140.x||_140[0];var _142;if(_141>maxX){_142=_124(_141,maxX);if(_140.x){_140=_140.offset(_142*(-2*maxX),0);}else{_140[0]=_141+(_142*(-2*maxX));}}else{if(_141<minX){_142=_124(_141,minX);if(_140.x){_140=_140.offset(_142*(-2*minX),0);}else{_140[0]=_141+(_142*(-2*minX));}}}return _140;};function _143(_144,_145){var _146=-1;_11b.forEach(_145.cutIndexes,function(_147,i){var _148=_145.geometries[i];var _149=_148.rings||_148.paths;_11b.forEach(_149,function(_14a,_14b){_11b.some(_14a,function(_14c){if(_14c[0]<180){return true;}else{var _14d=0,j,jl=_14a.length,ptX;for(j=0;j<jl;j++){ptX=_14a[j][0];_14d=ptX>_14d?ptX:_14d;}var _14e=_124(_14d,180),_14f=_14e*-360,_150,_151=_14a.length;for(_150=0;_150<_151;_150++){var _152=_148.getPoint(_14b,_150);_148.setPoint(_14b,_150,_152.offset(_14f,0));}return true;}});});if(_147===_146){if(_148.rings){_11b.forEach(_148.rings,function(ring,j){_144[_147]=_144[_147].addRing(ring);});}else{_11b.forEach(_148.paths,function(path,j){_144[_147]=_144[_147].addPath(path);});}}else{_146=_147;_144[_147]=_148;}});return _144;};function _153(_154,_155,_156,_157){var dfd=new _11c();dfd.addCallbacks(_156,_157);var _158=[],_159=[],_15a,info,_15b,maxX,minX,wkid,_15c,_15d,_15e=0;_11b.forEach(_154,function(_15f){if(!_15f){_158.push(_15f);return;}if(!_15a){_15a=_15f.spatialReference;info=_15a._getInfo();_15b=_15a._isWebMercator();maxX=_15b?20037508.342788905:180;minX=_15b?-20037508.342788905:-180;wkid=_15b?102100:4326;_15c=new _120({"paths":[[[maxX,minX],[maxX,maxX]]],"spatialReference":{"wkid":wkid}});_15d=new _120({"paths":[[[minX,minX],[minX,maxX]]],"spatialReference":{"wkid":wkid}});}if(!info){_158.push(_15f);return;}var _160=_123.fromJson(_15f.toJson()),_161=_15f.getExtent();if(_15f.type==="point"){_158.push(_13f(_160,maxX,minX));}else{if(_15f.type==="multipoint"){_160.points=_11b.map(_160.points,function(_162){return _13f(_162,maxX,minX);});_158.push(_160);}else{if(_15f.type==="extent"){var _163=_161._normalize(null,null,info);_158.push(_163.rings?new _121(_163):_163);}else{var _164=_124(_161.xmin,minX),_165=_164*(2*maxX);_160=(_165===0)?_160:_127(_160,_165);_161=_161.offset(_165,0);if(_161.intersects(_15c)&&(_161.xmax!==maxX)){_15e=(_161.xmax>_15e)?_161.xmax:_15e;_160=_139(_160,_15b);_159.push(_160);_158.push("cut");}else{if(_161.intersects(_15d)&&(_161.xmin!==minX)){_15e=(_161.xmax*(2*maxX)>_15e)?_161.xmax*(2*maxX):_15e;_160=_139(_160,_15b,360);_159.push(_160);_158.push("cut");}else{_158.push(_160);}}}}}});var _166=new _120(),_167=_124(_15e,maxX),_168=-90,_169=_167;while(_167>0){var _16a=-180+(360*_167);_166.addPath([[_16a,_168],[_16a,_168*-1]]);_168=_168*-1;_167--;}if(_159.length>0&&_169>0){if(_155){_155.cut(_159,_166,function(_16b){_159=_143(_159,_16b);var _16c=[];_11b.forEach(_158,function(_16d,i){if(_16d==="cut"){var _16e=_159.shift();if((_154[i].rings)&&(_154[i].rings.length>1)&&(_16e.rings.length>=_154[i].rings.length)){_158[i]="simplify";_16c.push(_16e);}else{_158[i]=(_15b===true)?_122.geographicToWebMercator(_16e):_16e;}}});if(_16c.length>0){_155.simplify(_16c,function(_16f){_11b.forEach(_158,function(_170,i){if(_170==="simplify"){_158[i]=(_15b===true)?_122.geographicToWebMercator(_16f.shift()):_16f.shift();}});dfd.callback(_158);},function(_171){dfd.errback(_171);});}else{dfd.callback(_158);}},function(_172){dfd.errback(_172);});}else{dfd.errback(new Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing."));}}else{_11b.forEach(_158,function(_173,i){if(_173==="cut"){var _174=_159.shift();_158[i]=(_15b===true)?_122.geographicToWebMercator(_174):_174;}});dfd.callback(_158);}return dfd;};function _175(_176,_177,_178,_179){var flag=false,_17a;if(lang.isObject(_176)&&_176){if(lang.isArray(_176)){if(_176.length){_17a=_176[0]&&_176[0].declaredClass;if(_17a&&_17a.indexOf("Graphic")!==-1){_176=_11b.map(_176,function(_17b){return _17b.geometry;});flag=_176.length?true:false;}else{if(_17a&&_17a.indexOf("esri.geometry.")!==-1){flag=true;}}}}else{_17a=_176.declaredClass;if(_17a&&_17a.indexOf("FeatureSet")!==-1){_176=_11b.map(_176.features||[],function(_17c){return _17c.geometry;});flag=_176.length?true:false;}else{if(_17a&&_17a.indexOf("esri.geometry.")!==-1){flag=true;}}}}if(flag){_177.push({index:_178,property:_179,value:_176});}};function _17d(_17e,_17f){var _180=[];_11b.forEach(_17f,function(_181){var _182=_181.i,arg=_17e[_182],_183=_181.p,prop;if(!lang.isObject(arg)||!arg){return;}if(_183){if(_183[0]==="*"){for(prop in arg){if(arg.hasOwnProperty(prop)){_175(arg[prop],_180,_182,prop);}}}else{_11b.forEach(_183,function(prop){_175(lang.getObject(prop,false,arg),_180,_182,prop);});}}else{_175(arg,_180,_182);}});return _180;};function _184(_185,_186){var idx=0,_187={};_11b.forEach(_186,function(comp){var _188=comp.index,_189=comp.property,_18a=comp.value,len=_18a.length||1;var _18b=_185.slice(idx,idx+len);if(!lang.isArray(_18a)){_18b=_18b[0];}idx+=len;delete comp.value;if(_189){_187[_188]=_187[_188]||{};_187[_188][_189]=_18b;}else{_187[_188]=_18b;}});return _187;};function _18c(_18d){var _18e=(lang.isObject(_18d))?_18d.prototype:lang.getObject(_18d+".prototype");_11b.forEach(_18e.__msigns,function(sig){var _18f=_18e[sig.n];_18e[sig.n]=function(){var self=this,_190=[],i,_191=new _11c(_11f._dfdCanceller);if(sig.f){_11f._fixDfd(_191);}for(i=0;i<sig.c;i++){_190[i]=arguments[i];}var _192={dfd:_191};_190.push(_192);var _193,_194=[],_195;if(self.normalization&&!self._isTable){_193=_17d(_190,sig.a);_11b.forEach(_193,function(comp){_194=_194.concat(comp.value);});if(_194.length){_195=_153(_194,_11e.defaults.geometryService);}}if(_195){_191._pendingDfd=_195;_195.addCallbacks(function(_196){if(_191.canceled){return;}_192.assembly=_184(_196,_193);_191._pendingDfd=_18f.apply(self,_190);},function(err){var _197=self.declaredClass;if(_197&&_197.indexOf("FeatureLayer")!==-1){self._resolve([err],null,_190[sig.e],_191,true);}else{self._errorHandler(err,_190[sig.e],_191);}});}else{_191._pendingDfd=_18f.apply(self,_190);}return _191;};});};var _198={normalizeCentralMeridian:_153,_foldCutResults:_143,_prepareGeometryForCut:_139,_offsetMagnitude:_124,_pointNormalization:_13f,_updatePolyGeometry:_127,_straightLineDensify:_12d,_createWrappers:_18c,_disassemble:_17d,_addToBucket:_175,_reassemble:_184};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_11d),_198);}return _198;});},"dojo/request/iframe":function(){define(["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window"],function(_199,_19a,_19b,util,_19c,lang,_19d,_19e,has,dom,_19f,win){var mid=_199.id.replace(/[\/\.\-]/g,"_"),_1a0=mid+"_onload";if(!win.global[_1a0]){win.global[_1a0]=function(){var dfd=_1a1._currentDfd;if(!dfd){_1a1._fireNextRequest();return;}var _1a2=dfd.response,_1a3=_1a2.options,_1a4=dom.byId(_1a3.form)||dfd._tmpForm;if(_1a4){var _1a5=dfd._contentToClean;for(var i=0;i<_1a5.length;i++){var key=_1a5[i];for(var j=0;j<_1a4.childNodes.length;j++){var _1a6=_1a4.childNodes[j];if(_1a6.name===key){_19f.destroy(_1a6);break;}}}dfd._originalAction&&_1a4.setAttribute("action",dfd._originalAction);if(dfd._originalMethod){_1a4.setAttribute("method",dfd._originalMethod);_1a4.method=dfd._originalMethod;}if(dfd._originalTarget){_1a4.setAttribute("target",dfd._originalTarget);_1a4.target=dfd._originalTarget;}}if(dfd._tmpForm){_19f.destroy(dfd._tmpForm);delete dfd._tmpForm;}dfd._finished=true;};}function _1a7(name,_1a8,uri){if(win.global[name]){return win.global[name];}if(win.global.frames[name]){return win.global.frames[name];}if(!uri){if(has("config-useXDomain")&&!has("config-dojoBlankHtmlUrl")){console.warn("dojo/request/iframe: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}uri=(has("config-dojoBlankHtmlUrl")||_19a.toUrl("dojo/resources/blank.html"));}var _1a9=_19f.place("<iframe id=\""+name+"\" name=\""+name+"\" src=\""+uri+"\" onload=\""+_1a8+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",win.body());win.global[name]=_1a9;return _1a9;};function _1aa(_1ab,src,_1ac){var _1ad=win.global.frames[_1ab.name];if(_1ad.contentWindow){_1ad=_1ad.contentWindow;}try{if(!_1ac){_1ad.location=src;}else{_1ad.location.replace(src);}}catch(e){console.log("dojo/request/iframe.setSrc: ",e);}};function doc(_1ae){if(_1ae.contentDocument){return _1ae.contentDocument;}var name=_1ae.name;if(name){var _1af=win.doc.getElementsByTagName("iframe");if(_1ae.document&&_1af[name].contentWindow&&_1af[name].contentWindow.document){return _1af[name].contentWindow.document;}else{if(win.doc.frames[name]&&win.doc.frames[name].document){return win.doc.frames[name].document;}}}return null;};function _1b0(){return _19f.create("form",{name:mid+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},win.body());};function _1b1(){var dfd;try{if(_1a1._currentDfd||!_1a1._dfdQueue.length){return;}do{dfd=_1a1._currentDfd=_1a1._dfdQueue.shift();}while(dfd&&(dfd.canceled||(dfd.isCanceled&&dfd.isCanceled()))&&_1a1._dfdQueue.length);if(!dfd||dfd.canceled||(dfd.isCanceled&&dfd.isCanceled())){_1a1._currentDfd=null;return;}var _1b2=dfd.response,_1b3=_1b2.options,c2c=dfd._contentToClean=[],_1b4=dom.byId(_1b3.form),_1b5=util.notify,data=_1b3.data||null,_1b6;if(!dfd._legacy&&_1b3.method==="POST"&&!_1b4){_1b4=dfd._tmpForm=_1b0();}else{if(_1b3.method==="GET"&&_1b4&&_1b2.url.indexOf("?")>-1){_1b6=_1b2.url.slice(_1b2.url.indexOf("?")+1);data=lang.mixin(_19d.queryToObject(_1b6),data);}}if(_1b4){if(!dfd._legacy){var _1b7=_1b4;do{_1b7=_1b7.parentNode;}while(_1b7!==win.doc.documentElement);if(!_1b7){_1b4.style.position="absolute";_1b4.style.left="-1000px";_1b4.style.top="-1000px";win.body().appendChild(_1b4);}if(!_1b4.name){_1b4.name=mid+"_form";}}if(data){var _1b8=function(name,_1b9){_19f.create("input",{type:"hidden",name:name,value:_1b9},_1b4);c2c.push(name);};for(var x in data){var val=data[x];if(lang.isArray(val)&&val.length>1){for(var i=0;i<val.length;i++){_1b8(x,val[i]);}}else{if(!_1b4[x]){_1b8(x,val);}else{_1b4[x].value=val;}}}}var _1ba=_1b4.getAttributeNode("action"),_1bb=_1b4.getAttributeNode("method"),_1bc=_1b4.getAttributeNode("target");if(_1b2.url){dfd._originalAction=_1ba?_1ba.value:null;if(_1ba){_1ba.value=_1b2.url;}else{_1b4.setAttribute("action",_1b2.url);}}if(!dfd._legacy){dfd._originalMethod=_1bb?_1bb.value:null;if(_1bb){_1bb.value=_1b3.method;}else{_1b4.setAttribute("method",_1b3.method);}}else{if(!_1bb||!_1bb.value){if(mthdNode){mthdNode.value=_1b3.method;}else{fn.setAttribute("method",_1b3.method);}}}dfd._originalTarget=_1bc?_1bc.value:null;if(_1bc){_1bc.value=_1a1._iframeName;}else{_1b4.setAttribute("target",_1a1._iframeName);}_1b4.target=_1a1._iframeName;_1b5&&_1b5.emit("send",_1b2,dfd.promise.cancel);_1a1._notifyStart(_1b2);_1b4.submit();}else{var _1bd="";if(_1b2.options.data){_1bd=_1b2.options.data;if(typeof _1bd!=="string"){_1bd=_19d.objectToQuery(_1bd);}}var _1be=_1b2.url+(_1b2.url.indexOf("?")>-1?"&":"?")+_1bd;_1b5&&_1b5.emit("send",_1b2,dfd.promise.cancel);_1a1._notifyStart(_1b2);_1a1.setSrc(_1a1._frame,_1be,true);}}catch(e){dfd.reject(e);}};function _1bf(_1c0){return !this.isFulfilled();};function _1c1(_1c2){return !!this._finished;};function _1c3(_1c4,_1c5){if(!_1c5){try{var _1c6=_1c4.options,doc=_1a1.doc(_1a1._frame),_1c7=_1c6.handleAs;if(_1c7!=="html"){if(_1c7==="xml"){if(doc.documentElement.tagName.toLowerCase()==="html"){_19e("a",doc.documentElement).orphan();var _1c8=doc.documentElement.innerText;_1c8=_1c8.replace(/>\s+</g,"><");_1c4.text=lang.trim(_1c8);}else{_1c4.data=doc;}}else{_1c4.text=doc.getElementsByTagName("textarea")[0].value;}_19c(_1c4);}else{_1c4.data=doc;}}catch(e){_1c5=e;}}if(_1c5){this.reject(_1c5);}else{if(this._finished){this.resolve(_1c4);}else{this.reject(new Error("Invalid dojo/request/iframe request state"));}}};function last(_1c9){this._callNext();};var _1ca={method:"POST"};function _1a1(url,_1cb,_1cc){var _1cd=util.parseArgs(url,util.deepCreate(_1ca,_1cb),true);url=_1cd.url;_1cb=_1cd.options;if(_1cb.method!=="GET"&&_1cb.method!=="POST"){throw new Error(_1cb.method+" not supported by dojo/request/iframe");}if(!_1a1._frame){_1a1._frame=_1a1.create(_1a1._iframeName,_1a0+"();");}var dfd=util.deferred(_1cd,null,_1bf,_1c1,_1c3,last);dfd._callNext=function(){if(!this._calledNext){this._calledNext=true;_1a1._currentDfd=null;_1a1._fireNextRequest();}};dfd._legacy=_1cc;_1a1._dfdQueue.push(dfd);_1a1._fireNextRequest();_19b(dfd);return _1cc?dfd:dfd.promise;};_1a1.create=_1a7;_1a1.doc=doc;_1a1.setSrc=_1aa;_1a1._iframeName=mid+"_IoIframe";_1a1._notifyStart=function(){};_1a1._dfdQueue=[];_1a1._currentDfd=null;_1a1._fireNextRequest=_1b1;util.addCommonMethods(_1a1,["GET","POST"]);return _1a1;});},"esri/symbols/CartographicLineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/SimpleLineSymbol"],function(_1ce,lang,_1cf,has,_1d0,_1d1,_1d2,_1d3){var _1d4={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"};var _1d5={color:[0,0,0,1],style:_1d4.STYLE_SOLID,width:1,cap:_1d4.CAP_BUTT,join:_1d4.JOIN_MITER,miterLimit:10};var CLS=_1ce(_1d3,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(json,_1d6,_1d7,cap,join,_1d8){if(json){if(lang.isString(json)){this.style=json;if(_1d6){this.color=_1d6;}if(_1d7!==undefined){this.width=_1d7;}if(cap){this.cap=cap;}if(join){this.join=join;}if(_1d8!==undefined){this.miterLimit=_1d8;}}else{this.cap=_1d2.valueOf(this._caps,json.cap);this.join=_1d2.valueOf(this._joins,json.join);this.width=_1d0.pt2px(json.width);this.miterLimit=_1d0.pt2px(json.miterLimit);}}else{lang.mixin(this,_1d5);this.color=new _1cf(this.color);this.width=_1d0.pt2px(this.width);this.miterLimit=_1d0.pt2px(this.miterLimit);}},setCap:function(cap){this.cap=cap;return this;},setJoin:function(join){this.join=join;return this;},setMiterLimit:function(_1d9){this.miterLimit=_1d9;return this;},getStroke:function(){return lang.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:(this.join===_1d4.JOIN_MITER?this.miterLimit:this.join)});},getFill:function(){return null;},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()};},toJson:function(){var _1da=_1d0.px2pt(this.miterLimit);_1da=isNaN(_1da)?undefined:_1da;return _1d2.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:_1da}));}});lang.mixin(CLS,_1d4);CLS.defaultProps=_1d5;if(has("extend-esri")){lang.setObject("symbol.CartographicLineSymbol",CLS,_1d1);_1d1.symbol.defaultCartographicLineSymbol=_1d5;}return CLS;});},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(lang,i18n){var _1db={};lang.setObject("dojo.cldr.supplemental",_1db);_1db.getFirstDayOfWeek=function(_1dc){var _1dd={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0};var _1de=_1db._region(_1dc);var dow=_1dd[_1de];return (dow===undefined)?1:dow;};_1db._region=function(_1df){_1df=i18n.normalizeLocale(_1df);var tags=_1df.split("-");var _1e0=tags[1];if(!_1e0){_1e0={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_1e0.length==4){_1e0=tags[2];}}return _1e0;};_1db.getWeekend=function(_1e1){var _1e2={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},_1e3={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},_1e4=_1db._region(_1e1),_1e5=_1e2[_1e4],end=_1e3[_1e4];if(_1e5===undefined){_1e5=6;}if(end===undefined){end=0;}return {start:_1e5,end:end};};return _1db;});},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/config","esri/lang","esri/WKIDUnitConversion"],function(lang,has,esri,_1e6,_1e7,_1e8){var _1e9=39.37,_1ea=20015077/180,ecd=_1e6.defaults,_1eb=_1e8;function _1ec(_1ed,_1ee,_1ef){return (_1ed&&_1ee)?((_1ed.getWidth()/_1ee)*(_1ef||_1ea)*_1e9*ecd.screenDPI):0;};function _1f0(_1f1,_1f2,wkid,_1f3,_1f4){var _1f5;if(_1f4){_1f5=wkid;}else{_1f5=_1eb.values[_1eb[wkid]];}return _1f1.expand(((_1f3*_1f2)/((_1f5||_1ea)*_1e9*ecd.screenDPI))/_1f1.getWidth());};var _1f6={getScale:function(map,_1f7,wkid){var _1f8,_1f9,wkt;if(arguments.length>1&&(_1e7.isDefined(_1f7)&&!_1f7.declaredClass)){_1f8=map;_1f9=_1f7;_1f7=null;}else{_1f8=map.extent;_1f9=map.width;var sr=map.spatialReference;if(sr){wkid=sr.wkid;wkt=sr.wkt;}}var _1fa;if(wkid){_1fa=_1eb.values[_1eb[wkid]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _1fb=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_1fb&&_1fb[1]){_1fa=parseFloat(_1fb[1].split(",")[1]);}}}return _1ec(_1f7||_1f8,_1f9,_1fa);},getExtentForScale:function(map,_1fc,_1fd){var wkid,wkt,sr=map.spatialReference;if(sr){wkid=sr.wkid;wkt=sr.wkt;}var _1fe;if(wkid){_1fe=_1eb.values[_1eb[wkid]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _1ff=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_1ff&&_1ff[1]){_1fe=parseFloat(_1ff[1].split(",")[1]);}}}return _1f0(_1fd||map.extent,map.width,_1fe,_1fc,true);}};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,esri),_1f6);esri.geometry._getScale=_1ec;esri.geometry._getExtentForScale=_1f0;}return _1f6;});},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel"],function(lang,has,_200){var _201={_dfdCanceller:function(dfd){dfd.canceled=true;var _202=dfd._pendingDfd;if(dfd.fired===-1&&_202&&_202.fired===-1){_202.cancel();}dfd._pendingDfd=null;},_fixDfd:function(dfd){var _203=dfd.then;dfd.then=function(_204,b,c){if(_204){var _205=_204;_204=function(_206){if(_206&&_206._argsArray){return _205.apply(null,_206);}return _205(_206);};}return _203.call(this,_204,b,c);};return dfd;},_resDfd:function(dfd,args,_207){var _208=args.length;if(_208===1){if(_207){dfd.errback(args[0]);}else{dfd.callback(args[0]);}}else{if(_208>1){args._argsArray=true;dfd.callback(args);}else{dfd.callback();}}}};if(has("extend-esri")){lang.mixin(_200,_201);}return _201;});},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Extent"],function(lang,_209,has,_20a,_20b){var _20c={graphicsExtent:function(_20d){var g=_20d[0].geometry,_20e=g.getExtent(),ext,i,il=_20d.length;if(_20e===null){_20e=new _20b(g.x,g.y,g.x,g.y,g.spatialReference);}for(i=1;i<il;i++){ext=(g=_20d[i].geometry).getExtent();if(ext===null){ext=new _20b(g.x,g.y,g.x,g.y,g.spatialReference);}_20e=_20e.union(ext);}if(_20e.getWidth()<=0&&_20e.getHeight()<=0){return null;}return _20e;},getGeometries:function(_20f){return _209.map(_20f,function(_210){return _210.geometry;});},_encodeGraphics:function(_211,_212){var _213=[],json,enc,norm;_209.forEach(_211,function(g,i){json=g.toJson();enc={};if(json.geometry){norm=_212&&_212[i];enc.geometry=norm&&norm.toJson()||json.geometry;}if(json.attributes){enc.attributes=json.attributes;}_213[i]=enc;});return _213;}};if(has("extend-esri")){lang.mixin(_20a,_20c);}return _20c;});},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_214,lang,has,_215,_216){var _217=_214(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(json){lang.mixin(this,json);},toJson:function(){var json={defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds};return _216.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerInfo",_217,_215);}return _217;});},"esri/geometry/jsonUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/Extent"],function(lang,has,_218,_219,_21a,_21b,_21c,_21d){function _21e(json){if(json.x!==undefined&&json.y!==undefined){return new _219(json);}else{if(json.paths!==undefined){return new _21a(json);}else{if(json.rings!==undefined){return new _21b(json);}else{if(json.points!==undefined){return new _21c(json);}else{if(json.xmin!==undefined&&json.ymin!==undefined&&json.xmax!==undefined&&json.ymax!==undefined){return new _21d(json);}}}}}};function _21f(_220){if(_220 instanceof _219){return "esriGeometryPoint";}else{if(_220 instanceof _21a){return "esriGeometryPolyline";}else{if(_220 instanceof _21b){return "esriGeometryPolygon";}else{if(_220 instanceof _21d){return "esriGeometryEnvelope";}else{if(_220 instanceof _21c){return "esriGeometryMultipoint";}}}}}return null;};function _221(_222){if(_222==="esriGeometryPoint"){return _219;}else{if(_222==="esriGeometryPolyline"){return _21a;}else{if(_222==="esriGeometryPolygon"){return _21b;}else{if(_222==="esriGeometryEnvelope"){return _21d;}else{if(_222==="esriGeometryMultipoint"){return _21c;}}}}}return null;};var _223={fromJson:_21e,getJsonType:_21f,getGeometryType:_221};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_218),_223);}return _223;});},"esri/MapNavigationManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/mouse","dojo/keys","esri/kernel","esri/MouseEvents","esri/TouchEvents","esri/PointerEvents","esri/config","esri/sniff","esri/lang","esri/fx","esri/graphic","esri/tileUtils","esri/geometry/ScreenPoint","esri/geometry/Extent","esri/geometry/Rect","esri/geometry/mathUtils","esri/symbols/SimpleFillSymbol"],function(_224,lang,_225,_226,_227,_228,keys,_229,_22a,_22b,_22c,_22d,has,_22e,_22f,_230,_231,_232,_233,Rect,_234,_235){var _236=_226.connect,_237=_226.disconnect,_238=1,_239=-1,_23a=100,_23b=10,_23c=[keys.NUMPAD_PLUS,61,keys.NUMPAD_MINUS,keys.UP_ARROW,keys.NUMPAD_8,keys.RIGHT_ARROW,keys.NUMPAD_6,keys.DOWN_ARROW,keys.NUMPAD_2,keys.LEFT_ARROW,keys.NUMPAD_4,keys.PAGE_UP,keys.NUMPAD_9,keys.PAGE_DOWN,keys.NUMPAD_3,keys.END,keys.NUMPAD_1,keys.HOME,keys.NUMPAD_7];var _23d=_224(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(map,_23e){this.map=map;lang.mixin(this,_23e);var node=map.__container;if(has("esri-touch")){this.touchEvents=new _22b(node,{map:map});this.eventModel="touch";}else{if(has("esri-pointer")){this.pointerEvents=new _22c(node,{map:map});this.eventModel="pointer";}else{this.mouseEvents=new _22a(node,{map:map});this.eventModel="mouse";this._zoomRect=new _230(null,new _235(_22d.defaults.map.zoomSymbol));}}this._keyDx=this._keyDy=0;this._adjustPinch=lang.hitch(this,this._adjustPinch);this._adjustPinchEnd=lang.hitch(this,this._adjustPinchEnd);},_panInit:function(evt){var _23f=this.mouseEvents;if(_228.isLeft(evt)&&this.map.isPan&&!evt.shiftKey){this._dragOrigin=new _232(0,0);lang.mixin(this._dragOrigin,evt.screenPoint);this._panStartHandle=_236(_23f,"onMouseDragStart",this,this._panStart);this._panHandle=_236(_23f,"onMouseDrag",this,this._pan);this._panEndHandle=_236(_23f,"onMouseUp",this,this._panEnd);if(has("chrome")){evt.preventDefault();}}},_panStart:function(evt){this.map.setCursor("move");this.map.__panStart(evt.screenPoint.x,evt.screenPoint.y);},_pan:function(evt){this.map.__pan(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);},_panEnd:function(evt){_237(this._panStartHandle);_237(this._panHandle);_237(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var map=this.map;if(map.__panning){map.__panEnd(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);map.resetMapCursor();}},_zoomInit:function(evt){var map=this.map,_240=this.mouseEvents;if(_228.isLeft(evt)&&map.isRubberBandZoom&&evt.shiftKey){map.setCursor("crosshair");this._dragOrigin=lang.mixin({},evt.screenPoint);this._zoomDir=(evt.ctrlKey||evt.metaKey)?_239:_238;this._zoomHandle=_236(_240,"onMouseDrag",this,this._zoom);this._zoomEndHandle=_236(_240,"onMouseUp",this,this._zoomEnd);if(has("chrome")){evt.preventDefault();}}},_zoom:function(evt){var map=this.map,rect=this._normalizeRect(evt).offset(map.__visibleRect.x,map.__visibleRect.y),g=map.graphics,_241=this._zoomRect;if(!_241.geometry){map.setCursor("crosshair");}if(_241.geometry){g.remove(_241,true);}var tl=map.toMap(new _232(rect.x,rect.y)),br=map.toMap(new _232(rect.x+rect.width,rect.y+rect.height));rect=new Rect(tl.x,tl.y,br.x-tl.x,tl.y-br.y,map.spatialReference);rect._originOnly=true;_241.setGeometry(rect);g.add(_241,true);},_zoomEnd:function(evt){var _242=this._zoomRect,map=this.map,ext=map.extent,sr=map.spatialReference;_237(this._zoomHandle);_237(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(map._canZoom(this._zoomDir)&&_242.getDojoShape()){map.graphics.remove(_242);_242.geometry=null;var rect=this._normalizeRect(evt);rect.x+=map.__visibleRect.x;rect.y+=map.__visibleRect.y;var _243;if(this._zoomDir===_239){var _244=ext.getWidth(),_245=(_244*map.width)/rect.width,_246=(_245-_244)/2;_243=new _233(ext.xmin-_246,ext.ymin-_246,ext.xmax+_246,ext.ymax+_246,sr);}else{var min=map.toMap({x:rect.x,y:(rect.y+rect.height)}),max=map.toMap({x:(rect.x+rect.width),y:rect.y});_243=new _233(min.x,min.y,max.x,max.y,sr);}map._extentUtil(null,null,_243);}if(_242.getDojoShape()){map.graphics.remove(_242,true);}this._zoomDir=0;map.resetMapCursor();},_wheelZoom:function(evt,_247){var map=this.map;if(!_247){if(map.smartNavigation&&!evt.shiftKey&&!map._isPanningOrZooming()){map.disableScrollWheelZoom();this._setScrollWheelPan(true);this._wheelPan(evt);return;}var _248=evt.timeStamp;if(!_22e.isDefined(_248)||_248<=0){_248=(new Date()).getTime();}var _249=this._mwts?(_248-this._mwts):_248;if(_249<_23a){return;}this._mwts=_248;}if(!map._canZoom(evt.value)){return;}map._extentUtil({numLevels:evt.value,mapAnchor:evt.mapPoint,screenAnchor:evt.screenPoint});},_wheelPan:function(evt){var map=this.map;if(evt.shiftKey&&!map._isPanningOrZooming()){this._setScrollWheelPan(false);map.enableScrollWheelZoom();this._wheelZoom(evt);return;}var dx=0,dy=0;if(has("ff")){if(evt.axis===evt.HORIZONTAL_AXIS){dx=-evt.detail;}else{dy=-evt.detail;}}else{dx=evt.wheelDeltaX;dy=evt.wheelDeltaY;}map.translate(dx,dy);},_setScrollWheelPan:function(_24a){var map=this.map;map.isScrollWheelPan=_24a;this.mouseEvents.enableMouseWheel(_24a);_237(this._mwMacHandle);this._mwMacHandle=null;if(_24a){this._mwMacHandle=_236(this.mouseEvents,"onMouseWheel",this,this._wheelPan);}},_recenter:function(evt){if(evt.shiftKey&&!this.map._isPanningOrZooming()){this.map.centerAt(evt.mapPoint);}},_recenterZoom:function(evt){if(evt.shiftKey&&!this.map._isPanningOrZooming()){evt.value=(evt.ctrlKey||evt.metaKey)?_239:_238;this._wheelZoom(evt,true);}},_dblClickZoom:function(evt){if(!this.map._isPanningOrZooming()){evt.value=1;this._wheelZoom(evt,true);}},_twoFingerTap:function(evt){if(!this.map._isPanningOrZooming()){evt.value=-1;this._wheelZoom(evt,true);}},_keyDown:function(evt){var code=evt.keyCode,map=this.map;if(_225.indexOf(_23c,code)!==-1){if(code===keys.NUMPAD_PLUS||code===61){map._extentUtil({numLevels:1});}else{if(code===keys.NUMPAD_MINUS){map._extentUtil({numLevels:-1});}else{if(!map.__panning){map.__panStart(0,0);}switch(code){case keys.UP_ARROW:case keys.NUMPAD_8:this._keyDy+=_23b;break;case keys.RIGHT_ARROW:case keys.NUMPAD_6:this._keyDx-=_23b;break;case keys.DOWN_ARROW:case keys.NUMPAD_2:this._keyDy-=_23b;break;case keys.LEFT_ARROW:case keys.NUMPAD_4:this._keyDx+=_23b;break;case keys.PAGE_UP:case keys.NUMPAD_9:this._keyDx-=_23b;this._keyDy+=_23b;break;case keys.PAGE_DOWN:case keys.NUMPAD_3:this._keyDx-=_23b;this._keyDy-=_23b;break;case keys.END:case keys.NUMPAD_1:this._keyDx+=_23b;this._keyDy-=_23b;break;case keys.HOME:case keys.NUMPAD_7:this._keyDx+=_23b;this._keyDy+=_23b;break;default:return;}map.__pan(this._keyDx,this._keyDy);}}_227.stop(evt);}},_keyEnd:function(evt){var map=this.map;if(map.__panning&&(evt.keyCode!==keys.SHIFT)){map.__panEnd(this._keyDx,this._keyDy);this._keyDx=this._keyDy=0;}},_swipeInit:function(evt){var map=this.map,_24b=map._zoomAnim||map._panAnim;if(_24b&&_24b._active){_24b.stop();_24b._fire("onEnd",[_24b.node]);}this._dragOrigin=new _232(0,0);lang.mixin(this._dragOrigin,evt.screenPoint);_237(this._swipeHandle);_237(this._swipeEndHandle);this._swipeHandle=_236(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=_236(this.touchEvents||this.pointerEvents,"onSwipeEnd",this,this._swipeEnd);},_swipe:function(evt){var map=this.map;if(map.__panning){this._panX=evt.screenPoint.x;this._panY=evt.screenPoint.y;map.__pan(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);}else{map.setCursor("move");map.__panStart(evt.screenPoint.x,evt.screenPoint.y);}},_swipeEnd:function(evt){_237(this._swipeHandle);_237(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var map=this.map;if(map.__panning){map.resetMapCursor();map.__panEnd(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);}},_pinchInit:function(evt){var map=this.map,_24c=map._zoomAnim||map._panAnim;if(_24c&&_24c._active){_24c.stop();_24c._fire("onEnd",[_24c.node]);}else{if(map.__panning){evt.screenPoint=new _232(this._panX,this._panY);evt.mapPoint=map.toMap(evt.screenPoint);this._swipeEnd(evt);}}_237(this._pinchHandle);_237(this._pinchEndHandle);this._pinchHandle=_236(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=_236(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd);},_pinch:function(evt){var map=this.map;if(evt.screenPoints){this.currLength=_234.getLength(evt.screenPoints[0],evt.screenPoints[1]);if(map.__zooming){var _24d=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(map.extent,_24d,this._dragOrigin);map.__zoom(this._zoomStartExtent,_24d,this._dragOrigin);}else{this._dragOrigin=new _232((evt.screenPoints[0].x+evt.screenPoints[1].x)/2,(evt.screenPoints[0].y+evt.screenPoints[1].y)/2);this._length=this.currLength;map.__zoomStart(map.extent,this._dragOrigin);}map._fireOnScale(this.currLength/this._length,this._dragOrigin,true);}},_pinchEnd:function(evt){var map=this.map;_237(this._pinchHandle);_237(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;if(map.__zooming&&map._zoomAnim===null){var _24e=this.currLength/this._length,_24f=map.extent.getWidth();this._zoomAnimAnchor=map.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(map.extent,1/_24e,this._zoomAnimAnchor);if(map.__tileInfo){var ct=_231.getCandidateTileInfo(map,map.__tileInfo,this._zoomStartExtent),_250=map.__getExtentForLevel(ct.lod.level,this._zoomAnimAnchor),_251=map.getMinZoom(),_252=map.getMaxZoom(),_253=_250.extent,_254=_250.lod,_255=_24f/_253.getWidth(),_256=ct.lod.level;if(_24e<1){if(_255>_24e){_256--;}}else{if(_255<_24e){_256++;}}if(_256<_251){_256=_251;}else{if(_256>_252){_256=_252;}}if(_256!==ct.lod.level){_250=map.__getExtentForLevel(_256,this._zoomAnimAnchor);_253=_250.extent;_254=_250.lod;}this._zoomEndExtent=_253;this._zoomEndLod=_254;map._zoomAnim=_22f.animateRange({range:{start:(_24f/this._zoomStartExtent.getWidth()),end:_255},duration:_22d.defaults.map.zoomDuration,rate:_22d.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});map._zoomAnim.play();map._fireOnScale(map.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin);}else{this._zoomEndExtent=this._zoomStartExtent;map._fireOnScale(map.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin);this._adjustPinchEnd();}}},_adjustPinch:function(_257){var _258=this.__scaleExtent(this.map.extent,_257,this._zoomAnimAnchor);this.map.__zoom(_258,_257,this._dragOrigin);},_adjustPinchEnd:function(){var map=this.map,_259=map.extent.getWidth()/this._zoomEndExtent.getWidth(),_25a=this.__scaleExtent(map.extent,1/_259,this._zoomAnimAnchor),_25b=this._dragOrigin,lod=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=map._zoomAnim=this._zoomAnimAnchor=null;map.__zoomEnd(_25a,_259,_25b,lod,true);},__scaleExtent:function(_25c,_25d,_25e){var _25f=_25e||_25c.getCenter(),_260=_25c.expand(_25d),xmin=_25c.xmin-((_260.getWidth()-_25c.getWidth())*(_25f.x-_25c.xmin)/_25c.getWidth()),ymax=_25c.ymax-((_260.getHeight()-_25c.getHeight())*(_25f.y-_25c.ymax)/_25c.getHeight());return new _233(xmin,ymax-_260.getHeight(),xmin+_260.getWidth(),ymax,_25c.spatialReference);},_normalizeRect:function(evt){var xy=evt.screenPoint,dx=this._dragOrigin.x,dy=this._dragOrigin.y,rect=new Rect((xy.x<dx?xy.x:dx)-this.map.__visibleRect.x,(xy.y<dy?xy.y:dy)-this.map.__visibleRect.y,Math.abs(xy.x-dx),Math.abs(xy.y-dy));delete rect.spatialReference;if(rect.width===0){rect.width=1;}if(rect.height===0){rect.height=1;}return rect;},setImmediateClick:function(_261){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(_261);break;case "touch":case "pointer":(this.touchEvents||this.pointerEvents).setImmediateTap(_261);break;}},enablePan:function(){this.disablePan();switch(this.eventModel){case "mouse":this._panInitHandle=_236(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":case "pointer":this._swipeInitHandle=_236(this.touchEvents||this.pointerEvents,"onSwipeStart",this,this._swipeInit);break;}},disablePan:function(){_237(this._panInitHandle);this._panInitHandle=null;_237(this._swipeInitHandle);this._swipeInitHandle=null;},enableRubberBandZoom:function(){this.disableRubberBandZoom();if(this.eventModel==="mouse"){this._zoomInitHandle=_236(this.mouseEvents,"onMouseDown",this,this._zoomInit);}},disableRubberBandZoom:function(){_237(this._zoomInitHandle);this._zoomInitHandle=null;},enablePinchZoom:function(){this.disablePinchZoom();if(this.eventModel==="touch"||this.eventModel==="pointer"){this._pinchInitHandle=_236(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit);}},disablePinchZoom:function(){_237(this._pinchInitHandle);this._pinchInitHandle=null;},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();if(this.eventModel==="mouse"||this.eventModel==="pointer"){this._wheelHandle=_236(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom);}},disableScrollWheelZoom:function(){_237(this._wheelHandle);this._wheelHandle=null;},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=_236(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":case "pointer":this._dblClickHandle=_236(this.touchEvents||this.pointerEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=_236(this.touchEvents||this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap);break;}},disableDoubleClickZoom:function(){_237(this._dblClickHandle);_237(this._zoomOutHandle);this._dblClickHandle=this._zoomOutHandle=null;},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();if(this.eventModel==="mouse"){this._sDblClickHandle=_236(this.mouseEvents,"onDblClick",this,this._recenterZoom);}},disableShiftDoubleClickZoom:function(){_237(this._sDblClickHandle);this._sDblClickHandle=null;},enableClickRecenter:function(){this.disableClickRecenter();if(this.eventModel==="mouse"){this._recenterHandle=_236(this.mouseEvents,"onClick",this,this._recenter);}},disableClickRecenter:function(){_237(this._recenterHandle);this._recenterHandle=null;},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();if(this.eventModel==="mouse"){this._keyHandle=_236(this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=_236(this.mouseEvents,"onKeyUp",this,this._keyEnd);}},disableKeyboardNavigation:function(){_237(this._keyHandle);_237(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null;},enableNavigation:function(){var map=this.map;if(map&&map.loaded){map.enableDoubleClickZoom();map.enableClickRecenter();map.enablePan();map.enableRubberBandZoom();this.enablePinchZoom();map.enableKeyboardNavigation();if(map.smartNavigation){this._setScrollWheelPan(true);}else{map.enableScrollWheelZoom();}}},disableNavigation:function(){var map=this.map;if(map&&map.loaded){map.disableDoubleClickZoom();map.disableClickRecenter();map.disablePan();map.disableRubberBandZoom();this.disablePinchZoom();map.disableKeyboardNavigation();map.disableScrollWheelZoom();if(map.smartNavigation){this._setScrollWheelPan(false);}}},destroy:function(){if(this.touchEvents){this.touchEvents.destroy();}if(this.mouseEvents){this.mouseEvents.destroy();}if(this.pointerEvents){this.pointerEvents.destroy();}var i,_262=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(i=0;i<_262.length;i++){_237(_262[i]);}this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null;}});if(has("extend-esri")){_229.MapNavigationManager=_23d;}return _23d;});},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/renderers/Renderer"],function(_263,lang,has,_264,_265){var _266=_263(_265,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(_267,_268,_269,_26a){this.observationRenderer=_267;this.latestObservationRenderer=_268;this.trackRenderer=_269;this.observationAger=_26a;},getSymbol:function(_26b){var _26c=_26b.getLayer();var kind=_26c._getKind(_26b);var _26d=(kind===0)?this.observationRenderer:(this.latestObservationRenderer||this.observationRenderer);var _26e=(_26d&&_26d.getSymbol(_26b));var ager=this.observationAger;if(_26c.timeInfo&&_26c._map.timeExtent&&(_26d===this.observationRenderer)&&ager&&_26e){_26e=ager.getAgedSymbol(_26e,_26b);}return _26e;}});if(has("extend-esri")){lang.setObject("renderer.TemporalRenderer",_266,_264);}return _266;});},"esri/symbols/PictureFillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","esri/kernel","esri/lang","esri/urlUtils","esri/symbols/FillSymbol"],function(_26f,lang,has,_270,_271,_272,_273,_274){var _275={xoffset:0,yoffset:0,width:12,height:12};var PFS=_26f(_274,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(json,_276,_277,_278){if(json){if(lang.isString(json)){this.url=json;if(_276!==undefined){this.outline=_276;}if(_277!==undefined){this.width=_277;}if(_278!==undefined){this.height=_278;}}else{this.xoffset=_270.pt2px(json.xoffset);this.yoffset=_270.pt2px(json.yoffset);this.width=_270.pt2px(json.width);this.height=_270.pt2px(json.height);var _279=json.imageData;if((!(has("ie")<9))&&_279){var temp=this.url;this.url="data:"+(json.contentType||"image")+";base64,"+_279;this.imageData=temp;}}}else{lang.mixin(this,_275);this.width=_270.pt2px(this.width);this.height=_270.pt2px(this.height);}},setWidth:function(_27a){this.width=_27a;return this;},setHeight:function(_27b){this.height=_27b;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},setXScale:function(_27c){this.xscale=_27c;return this;},setYScale:function(_27d){this.yscale=_27d;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return lang.mixin({},_270.defaultPattern,{src:this.url,width:(this.width*this.xscale),height:(this.height*this.yscale),x:this.xoffset,y:this.yoffset});},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()};},toJson:function(){var url=this.url,_27e=this.imageData;if(url.indexOf("data:")===0){var temp=url;url=_27e;var _27f=temp.indexOf(";base64,")+8;_27e=temp.substr(_27f);}url=_273.getAbsoluteUrl(url);var _280=_270.px2pt(this.width);_280=isNaN(_280)?undefined:_280;var _281=_270.px2pt(this.height);_281=isNaN(_281)?undefined:_281;var xoff=_270.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_270.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;var json=_272.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:url,imageData:_27e,contentType:this.contentType,width:_280,height:_281,xoffset:xoff,yoffset:yoff,xscale:this.xscale,yscale:this.yscale}));if(!json.imageData){delete json.imageData;}return json;}});PFS.defaultProps=_275;if(has("extend-esri")){lang.setObject("symbol.PictureFillSymbol",PFS,_271);_271.symbol.defaultPictureFillSymbol=_275;}return PFS;});},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_282,lang,has,_283,_284){var LOD=_282(null,{declaredClass:"esri.layers.LOD",constructor:function(json){lang.mixin(this,json);},toJson:function(){return _284.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale});}});if(has("extend-esri")){lang.setObject("layers.LOD",LOD,_283);}return LOD;});},"esri/renderers/Renderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_285,lang,has,_286){var _287=_285(null,{declaredClass:"esri.renderer.Renderer",constructor:function(){this.getSymbol=lang.hitch(this,this.getSymbol);},getSymbol:function(_288){},toJson:function(){}});if(has("extend-esri")){lang.setObject("renderer.Renderer",_287,_286);}return _287;});},"esri/layers/DynamicMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","dojox/xml/parser","dojox/gfx/matrix","esri/kernel","esri/config","esri/sniff","esri/request","esri/domUtils","esri/layers/layer","esri/layers/MapImage"],function(_289,_28a,lang,_28b,_28c,_28d,_28e,_28f,_290,has,_291,_292,_293,_294){var _295=_290.defaults.map.zoomDuration;var _296=_289(_293,{declaredClass:"esri.layers.DynamicMapServiceLayer",constructor:function(url,_297){this.useMapTime=(_297&&_297.hasOwnProperty("useMapTime"))?(!!_297.useMapTime):true;var _298=lang.hitch;this._exportMapImageHandler=_298(this,this._exportMapImageHandler);this._imgSrcFunc=_298(this,this._imgSrcFunc);this._divAlphaImageFunc=_298(this,this._divAlphaImageFunc);this._tileLoadHandler=_298(this,this._tileLoadHandler);this._tileErrorHandler=_298(this,this._tileErrorHandler);this.registerConnectEvents("esri.layers.DynamicMapServiceLayer",{"map-image-export":["mapImage"]});},opacity:1,isPNG32:false,_setMap:function(map,_299,_29a){this.inherited(arguments);this._map=map;var d=(this._div=_28b.create("div",null,_299)),_29b=_28f._css.names,css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible",opacity:this.opacity},isIE=has("ie"),_29c=_28a.connect,vd=map.__visibleDelta;if(isIE&&isIE>7){delete css.opacity;}if(map.navigationMode==="css-transforms"){css[_29b.transform]=_28f._css.translate(vd.x,vd.y);_28c.set(d,css);this._left=vd.x;this._top=vd.y;}else{css.left="0px";css.top="0px";_28c.set(d,css);this._left=this._top=0;}_28c.set(d,css);this._onResizeHandler_connect=_29c(map,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=_29c(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!map.loaded){var _29d=_28a.connect(map,"onLoad",this,function(){_28a.disconnect(_29d);_29d=null;this.evaluateSuspension();});}return d;},_unsetMap:function(map,_29e){_28b.destroy(this._div);this._map=this._div=null;var _29f=_28a.disconnect;_29f(this._onResizeHandler_connect);_29f(this._opacityChangeHandler_connect);this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments);},_onResizeHandler:function(_2a0,_2a1,_2a2){_28c.set(this._div,{width:_2a1+"px",height:_2a2+"px"});this._onExtentChangeHandler(_2a0);},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();_292.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();},onResume:function(){this.inherited(arguments);var map=this._map;this._toggleTime();if(map.navigationMode==="css-transforms"){var vd=map.__visibleDelta;this._left=vd.x;this._top=vd.y;_28c.set(this._div,_28f._css.names.transform,_28f._css.translate(this._left,this._top));}this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(lang.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent);}}),0);},_enableDrawConnectors:function(){var _2a3=_28a.connect,map=this._map;if(map){this._onPanHandler_connect=_2a3(map,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=_2a3(map,"onExtentChange",this,"_onExtentChangeHandler");if(map.navigationMode==="css-transforms"){this._onScaleHandler_connect=_2a3(map,"onScale",this,this._onScaleHandler);}else{this._onZoomHandler_connect=_2a3(map,"onZoom",this,"_onZoomHandler");}}},_disableDrawConnectors:function(){var _2a4=_28a.disconnect;_2a4(this._onPanHandler_connect);_2a4(this._onExtentChangeHandler_connect);_2a4(this._onZoomHandler_connect);_2a4(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null;},_toggleTime:function(){var map=this._map;if(this.timeInfo&&this.useMapTime&&map&&!this.suspended){if(!this._timeConnect){this._timeConnect=_28a.connect(map,"onTimeExtentChange",this,this._onTimeExtentChangeHandler);}this._setTime(map.timeExtent);}else{_28a.disconnect(this._timeConnect);this._timeConnect=null;this._setTime(null);}},_setTime:function(_2a5){if(this._params){this._params.time=_2a5?_2a5.toJson().join(","):null;}},_onPanHandler:function(_2a6,_2a7){this._panDx=_2a7.x;this._panDy=_2a7.y;var _2a8=this._dragOrigin,vd=this._map.__visibleDelta,img=this._img;if(img){if(this._map.navigationMode==="css-transforms"){this._left=vd.x+_2a7.x;this._top=vd.y+_2a7.y;_28c.set(this._div,_28f._css.names.transform,_28f._css.translate(this._left,this._top));}else{_28c.set(img,{left:(_2a8.x+_2a7.x)+"px",top:(_2a8.y+_2a7.y)+"px"});}}},_onExtentChangeHandler:function(_2a9,_2aa,_2ab){if(this.suspended){return;}clearTimeout(this._wakeTimer);this._wakeTimer=null;var _2ac=this._map,_2ad=this._img,_2ae=_2ad&&_2ad.style,_2af=this._dragOrigin;if(_2aa&&!_2ab&&_2ad&&(_2aa.x!==this._panDx||_2aa.y!==this._panDy)){if(_2ac.navigationMode==="css-transforms"){var vd=_2ac.__visibleDelta;this._left=vd.x;this._top=vd.y;_28c.set(this._div,_28f._css.names.transform,_28f._css.translate(this._left,this._top));}else{_28c.set(_2ad,{left:(_2af.x+_2aa.x)+"px",top:(_2af.y+_2aa.y)+"px"});}}if(_2ad){_2af.x=parseInt(_2ae.left,10);_2af.y=parseInt(_2ae.top,10);}else{_2af.x=(_2af.y=0);}if(_2ac.navigationMode==="css-transforms"){if(_2ab&&_2ad){_28c.set(_2ad,_28f._css.names.transition,"none");_2ad._multiply=_2ad._multiply?_28e.multiply(_2ad._matrix,_2ad._multiply):_2ad._matrix;}}this._fireUpdateStart();var _2b0=this._img_loading;if(_2b0){_28a.disconnect(_2b0._onload_connect);_28a.disconnect(_2b0._onerror_connect);_28a.disconnect(_2b0._onabort_connect);_28b.destroy(_2b0);this._img_loading=null;var _2b1=this._jsonRequest;if(_2b1){try{_2b1.cancel();}catch(e){}this._jsonRequest=null;}}if(this.version>=10&&_2ac.wrapAround180){_2a9=_2a9._normalize(true);}if(this.isPNG32){var div=(this._img_loading=_28b.create("div"));div.id=_2ac.id+"_"+this.id+"_"+new Date().getTime();_28c.set(div,{position:"absolute",left:"0px",top:"0px",width:_2ac.width+"px",height:_2ac.height+"px"});var _2b2=div.appendChild(_28b.create("div"));_28c.set(_2b2,{opacity:0,width:_2ac.width+"px",height:_2ac.height+"px"});this.getImageUrl(_2a9,_2ac.width,_2ac.height,this._divAlphaImageFunc);div=null;}else{var img=(this._img_loading=_28b.create("img")),_2b3=_28f._css.names,isIE=has("ie"),css={position:"absolute",width:_2ac.width+"px",height:_2ac.height+"px"};if(isIE&&isIE>7){css.opacity=this.opacity;}if(_2ac.navigationMode==="css-transforms"){css[_2b3.transform]=_28f._css.translate(-this._left,-this._top);img._tdx=-this._left;img._tdy=-this._top;css[_2b3.transition]=_2b3.transformName+" "+_295+"ms ease";}else{css.left="0px";css.top="0px";}img.id=_2ac.id+"_"+this.id+"_"+new Date().getTime();_28c.set(img,css);img._onload_connect=_28a.connect(img,"onload",this,"_onLoadHandler");img._onerror_connect=_28a.connect(img,"onerror",this,"_onErrorHandler");img._onabort_connect=_28a.connect(img,"onabort",this,"_onErrorHandler");this._startRect={left:_2af.x,top:_2af.y,width:_2ad?parseInt(_2ae.width,10):_2ac.width,height:_2ad?parseInt(_2ae.height,10):_2ac.height,zoom:(_2ae&&_2ae.zoom)?parseFloat(_2ae.zoom):1};this.getImageUrl(_2a9,_2ac.width,_2ac.height,this._imgSrcFunc);img=null;}},_onTimeExtentChangeHandler:function(_2b4){if(this.suspended){return;}this._setTime(_2b4);this.refresh(true);},getImageUrl:function(_2b5,wd,ht,_2b6){},_imgSrcFunc:function(src){this._img_loading.src=src;},_divAlphaImageFunc:function(src){_28c.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"', sizingMethod='scale')");this._onLoadHandler({currentTarget:this._img_loading});},_onLoadHandler:function(evt){var img=evt.currentTarget,_2b7=_28a.disconnect,_2b8=this._map;_2b7(img._onload_connect);_2b7(img._onerror_connect);_2b7(img._onabort_connect);if(!_2b8||_2b8.__panning||_2b8.__zooming){_28b.destroy(img);this._fireUpdateEnd();return;}_28d.removeChildren(this._div);this._img=img;this._startRect={left:0,top:0,width:_2b8.width,height:_2b8.height,zoom:1};this._div.appendChild(img);if(!this.suspended){_292.show(this._div);}img._onload_connect=img._onerror_connect=img._onabort_connect=this._img_loading=null;var _2b9=this._dragOrigin;_2b9.x=(_2b9.y=0);this.onUpdate();this._fireUpdateEnd();},_onErrorHandler:function(evt){var img=evt.currentTarget,_2ba=_28a.disconnect;_28c.set(img,"visibility","hidden");_2ba(img._onload_connect);_2ba(img._onerror_connect);_2ba(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;var _2bb=new Error("Unable to load image: "+img.src);this.onError(_2bb);this._fireUpdateEnd(_2bb);},setUseMapTime:function(use,_2bc){this.useMapTime=use;this._toggleTime();if(!_2bc){this.refresh(true);}},refresh:function(){if(this._map){this._onExtentChangeHandler(this._map.extent);}},_onScaleHandler:function(mtx,_2bd){var css={},_2be=_28f._css.names,img=this._img;if(!img){return;}_28c.set(img,_2be.transition,_2bd?"none":(_2be.transformName+" "+_295+"ms ease"));img._matrix=mtx;mtx=img._multiply?_28e.multiply(mtx,img._multiply):mtx;if(img._tdx||img._tdy){mtx=_28e.multiply(mtx,{"xx":1,"xy":0,"yx":0,"yy":1,"dx":img._tdx,"dy":img._tdy});}css[_2be.transform]=_28f._css.matrix(mtx);_28c.set(img,css);},_onZoomHandler:function(_2bf,_2c0,_2c1){var _2c2=this._startRect,_2c3=_2c2.width*_2c0,_2c4=_2c2.height*_2c0,img=this._img,isIE=has("ie");if(img){if(isIE&&isIE<8){_28c.set(img,{left:(_2c2.left-((_2c3-_2c2.width)*(_2c1.x-_2c2.left)/_2c2.width))+"px",top:(_2c2.top-((_2c4-_2c2.height)*(_2c1.y-_2c2.top)/_2c2.height))+"px",zoom:_2c0*_2c2.zoom});}else{_28c.set(img,{left:(_2c2.left-((_2c3-_2c2.width)*(_2c1.x-_2c2.left)/_2c2.width))+"px",top:(_2c2.top-((_2c4-_2c2.height)*(_2c1.y-_2c2.top)/_2c2.height))+"px",width:_2c3+"px",height:_2c4+"px"});}}},_exportMapImage:function(url,_2c5,_2c6){var _2c7=this._exportMapImageHandler;_2c5.token=this._getToken();_291({url:url,content:_2c5,callbackParamName:"callback",load:function(){_2c7(arguments[0],arguments[1],_2c6);},error:_290.defaults.io.errorHandler});},_exportMapImageHandler:function(_2c8,io,_2c9){var _2ca=new _294(_2c8);this.onMapImageExport(_2ca);if(_2c9){_2c9(_2ca);}},onMapImageExport:function(){},setOpacity:function(o){if(this.opacity!=o){this.onOpacityChange(this.opacity=o);}},onOpacityChange:function(){},_opacityChangeHandler:function(_2cb){_28c.set(this._div,"opacity",_2cb);}});if(has("extend-esri")){lang.setObject("layers.DynamicMapServiceLayer",_296,_28f);}return _296;});},"dojo/fx":function(){define(["./_base/lang","./Evented","./_base/kernel","./_base/array","./_base/connect","./_base/fx","./dom","./dom-style","./dom-geometry","./ready","require"],function(lang,_2cc,dojo,_2cd,_2ce,_2cf,dom,_2d0,geom,_2d1,_2d2){if(!dojo.isAsync){_2d1(0,function(){var _2d3=["./fx/Toggler"];_2d2(_2d3);});}var _2d4=dojo.fx={};var _2d5={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _2d6=function(_2d7){this._index=-1;this._animations=_2d7||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;_2cd.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};_2d6.prototype=new _2cc();lang.extend(_2d6,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){_2ce.disconnect(this._onAnimateCtx);_2ce.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=_2ce.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=_2ce.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_2d8,_2d9){if(!this._current){this._current=this._animations[this._index=0];}if(!_2d9&&this._current.status()=="playing"){return this;}var _2da=_2ce.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_2db=_2ce.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_2dc=_2ce.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);_2ce.disconnect(_2da);_2ce.disconnect(_2db);_2ce.disconnect(_2dc);});if(this._onAnimateCtx){_2ce.disconnect(this._onAnimateCtx);}this._onAnimateCtx=_2ce.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){_2ce.disconnect(this._onEndCtx);}this._onEndCtx=_2ce.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=_2ce.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);_2ce.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_2dd,_2de){this.pause();var _2df=this.duration*_2dd;this._current=null;_2cd.some(this._animations,function(a){if(a.duration<=_2df){this._current=a;return true;}_2df-=a.duration;return false;});if(this._current){this._current.gotoPercent(_2df/this._current.duration,_2de);}return this;},stop:function(_2e0){if(this._current){if(_2e0){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=_2ce.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);_2ce.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){_2ce.disconnect(this._onAnimateCtx);}if(this._onEndCtx){_2ce.disconnect(this._onEndCtx);}}});lang.extend(_2d6,_2d5);_2d4.chain=function(_2e1){return new _2d6(_2e1);};var _2e2=function(_2e3){this._animations=_2e3||[];this._connects=[];this._finished=0;this.duration=0;_2cd.forEach(_2e3,function(a){var _2e4=a.duration;if(a.delay){_2e4+=a.delay;}if(this.duration<_2e4){this.duration=_2e4;}this._connects.push(_2ce.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new _2cf.Animation({curve:[0,1],duration:this.duration});var self=this;_2cd.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(_2ce.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};lang.extend(_2e2,{_doAction:function(_2e5,args){_2cd.forEach(this._animations,function(a){a[_2e5].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_2e6,args){var t=this._pseudoAnimation;t[_2e6].apply(t,args);},play:function(_2e7,_2e8){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_2e9,_2ea){var ms=this.duration*_2e9;_2cd.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_2ea);});this._call("gotoPercent",arguments);return this;},stop:function(_2eb){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){_2cd.forEach(this._connects,_2ce.disconnect);}});lang.extend(_2e2,_2d5);_2d4.combine=function(_2ec){return new _2e2(_2ec);};_2d4.wipeIn=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=_2cf.animateProperty(lang.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _2ed=_2d0.get(node,"height");return Math.max(_2ed,1);}},end:function(){return node.scrollHeight;}}}},args));var fini=function(){s.height="auto";s.overflow=o;};_2ce.connect(anim,"onStop",fini);_2ce.connect(anim,"onEnd",fini);return anim;};_2d4.wipeOut=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=_2cf.animateProperty(lang.mixin({properties:{height:{end:1}}},args));_2ce.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});var fini=function(){s.overflow=o;s.height="auto";s.display="none";};_2ce.connect(anim,"onStop",fini);_2ce.connect(anim,"onEnd",fini);return anim;};_2d4.slideTo=function(args){var node=args.node=dom.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=_2d0.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=geom.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=_2cf.animateProperty(lang.mixin({properties:{top:args.top||0,left:args.left||0}},args));_2ce.connect(anim,"beforeBegin",anim,init);return anim;};return _2d4;});},"esri/layers/TableDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource"],function(_2ee,lang,has,_2ef,_2f0,_2f1){var _2f2=_2ee(_2f1,{declaredClass:"esri.layers.TableDataSource",toJson:function(){var json={type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion};return _2f0.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.TableDataSource",_2f2,_2ef);}return _2f2;});},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../_base/connect"],function(lang,_2f3,_2f4,_2f5){return _2f3("dojo.fx.Toggler",null,{node:null,showFunc:_2f4.fadeIn,hideFunc:_2f4.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _2f6=this;lang.mixin(_2f6,args);_2f6.node=args.node;_2f6._showArgs=lang.mixin({},args);_2f6._showArgs.node=_2f6.node;_2f6._showArgs.duration=_2f6.showDuration;_2f6.showAnim=_2f6.showFunc(_2f6._showArgs);_2f6._hideArgs=lang.mixin({},args);_2f6._hideArgs.node=_2f6.node;_2f6._hideArgs.duration=_2f6.hideDuration;_2f6.hideAnim=_2f6.hideFunc(_2f6._hideArgs);_2f5.connect(_2f6.showAnim,"beforeBegin",lang.hitch(_2f6.hideAnim,"stop",true));_2f5.connect(_2f6.hideAnim,"beforeBegin",lang.hitch(_2f6.showAnim,"stop",true));},show:function(_2f7){return this.showAnim.play(_2f7||0);},hide:function(_2f8){return this.hideAnim.play(_2f8||0);}});});},"esri/geometry/webMercatorUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Point"],function(_2f9,lang,has,_2fa,_2fb,_2fc){function _2fd(geom,func,sr,_2fe){if(geom.type==="point"){var pt=func(geom.x,geom.y,_2fe);return new geom.constructor(pt[0],pt[1],new _2fb(sr));}else{if(geom.type==="extent"){var min=func(geom.xmin,geom.ymin,_2fe),max=func(geom.xmax,geom.ymax,_2fe);return new geom.constructor(min[0],min[1],max[0],max[1],new _2fb(sr));}else{if(geom.type==="polyline"||geom.type==="polygon"){var _2ff=(geom.type==="polyline"),_300=_2ff?geom.paths:geom.rings,_301=[],_302;_2f9.forEach(_300,function(_303){_301.push(_302=[]);_2f9.forEach(_303,function(iPt){_302.push(func(iPt[0],iPt[1],_2fe));});});if(_2ff){return new geom.constructor({paths:_301,spatialReference:sr});}else{return new geom.constructor({rings:_301,spatialReference:sr});}}else{if(geom.type==="multipoint"){var oPts=[];_2f9.forEach(geom.points,function(iPt){oPts.push(func(iPt[0],iPt[1],_2fe));});return new geom.constructor({points:oPts,spatialReference:sr});}}}}};var _304={lngLatToXY:_2fc.lngLatToXY,xyToLngLat:_2fc.xyToLngLat,geographicToWebMercator:function(geom){return _2fd(geom,_2fc.lngLatToXY,{wkid:102100});},webMercatorToGeographic:function(geom,_305){return _2fd(geom,_2fc.xyToLngLat,{wkid:4326},_305);}};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_2fa),_304);}return _304;});},"dojo/date/locale":function(){define(["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(lang,_306,date,_307,i18n,_308,_309,_30a,_30b){var _30c={};lang.setObject(_30b.id.replace(/\//g,"."),_30c);function _30d(_30e,_30f,_310,_311){return _311.replace(/([a-z])\1*/ig,function(_312){var s,pad,c=_312.charAt(0),l=_312.length,_313=["abbr","wide","narrow"];switch(c){case "G":s=_30f[(l<4)?"eraAbbr":"eraNames"][_30e.getFullYear()<0?0:1];break;case "y":s=_30e.getFullYear();switch(l){case 1:break;case 2:if(!_310.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_30e.getMonth()+1)/3);pad=true;break;case "M":case "L":var m=_30e.getMonth();if(l<3){s=m+1;pad=true;}else{var _314=["months",c=="L"?"standAlone":"format",_313[l-3]].join("-");s=_30f[_314][m];}break;case "w":var _315=0;s=_30c._getWeekOfYear(_30e,_315);pad=true;break;case "d":s=_30e.getDate();pad=true;break;case "D":s=_30c._getDayOfYear(_30e);pad=true;break;case "e":case "c":var d=_30e.getDay();if(l<2){s=(d-_307.getFirstDayOfWeek(_310.locale)+8)%7;break;}case "E":d=_30e.getDay();if(l<3){s=d+1;pad=true;}else{var _316=["days",c=="c"?"standAlone":"format",_313[l-3]].join("-");s=_30f[_316][d];}break;case "a":var _317=_30e.getHours()<12?"am":"pm";s=_310[_317]||_30f["dayPeriods-format-wide-"+_317];break;case "h":case "H":case "K":case "k":var h=_30e.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_30e.getMinutes();pad=true;break;case "s":s=_30e.getSeconds();pad=true;break;case "S":s=Math.round(_30e.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=_30c._getZone(_30e,true,_310);if(s){break;}l=4;case "Z":var _318=_30c._getZone(_30e,false,_310);var tz=[(_318<=0?"+":"-"),_309.pad(Math.floor(Math.abs(_318)/60),2),_309.pad(Math.abs(_318)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_311);}if(pad){s=_309.pad(s,l);}return s;});};_30c._getZone=function(_319,_31a,_31b){if(_31a){return date.getTimezoneName(_319);}else{return _319.getTimezoneOffset();}};_30c.format=function(_31c,_31d){_31d=_31d||{};var _31e=i18n.normalizeLocale(_31d.locale),_31f=_31d.formatLength||"short",_320=_30c._getGregorianBundle(_31e),str=[],_321=lang.hitch(this,_30d,_31c,_320,_31d);if(_31d.selector=="year"){return _322(_320["dateFormatItem-yyyy"]||"yyyy",_321);}var _323;if(_31d.selector!="date"){_323=_31d.timePattern||_320["timeFormat-"+_31f];if(_323){str.push(_322(_323,_321));}}if(_31d.selector!="time"){_323=_31d.datePattern||_320["dateFormat-"+_31f];if(_323){str.push(_322(_323,_321));}}return str.length==1?str[0]:_320["dateTimeFormat-"+_31f].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(_324,key){return str[key];});};_30c.regexp=function(_325){return _30c._parseInfo(_325).regexp;};_30c._parseInfo=function(_326){_326=_326||{};var _327=i18n.normalizeLocale(_326.locale),_328=_30c._getGregorianBundle(_327),_329=_326.formatLength||"short",_32a=_326.datePattern||_328["dateFormat-"+_329],_32b=_326.timePattern||_328["timeFormat-"+_329],_32c;if(_326.selector=="date"){_32c=_32a;}else{if(_326.selector=="time"){_32c=_32b;}else{_32c=_328["dateTimeFormat-"+_329].replace(/\{(\d+)\}/g,function(_32d,key){return [_32b,_32a][key];});}}var _32e=[],re=_322(_32c,lang.hitch(this,_32f,_32e,_328,_326));return {regexp:re,tokens:_32e,bundle:_328};};_30c.parse=function(_330,_331){var _332=/[\u200E\u200F\u202A\u202E]/g,info=_30c._parseInfo(_331),_333=info.tokens,_334=info.bundle,re=new RegExp("^"+info.regexp.replace(_332,"")+"$",info.strict?"":"i"),_335=re.exec(_330&&_330.replace(_332,""));if(!_335){return null;}var _336=["abbr","wide","narrow"],_337=[1970,0,1,0,0,0,0],amPm="",_338=_306.every(_335,function(v,i){if(!i){return true;}var _339=_333[i-1],l=_339.length,c=_339.charAt(0);switch(c){case "y":if(l!=2&&_331.strict){_337[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_33a=year.substring(0,2)*100,_33b=Math.min(Number(year.substring(2,4))+20,99);_337[0]=(v<_33b)?_33a+v:_33a-100+v;}else{if(_331.strict){return false;}_337[0]=v;}}break;case "M":case "L":if(l>2){var _33c=_334["months-"+(c=="L"?"standAlone":"format")+"-"+_336[l-3]].concat();if(!_331.strict){v=v.replace(".","").toLowerCase();_33c=_306.map(_33c,function(s){return s.replace(".","").toLowerCase();});}v=_306.indexOf(_33c,v);if(v==-1){return false;}}else{v--;}_337[1]=v;break;case "E":case "e":case "c":var days=_334["days-"+(c=="c"?"standAlone":"format")+"-"+_336[l-3]].concat();if(!_331.strict){v=v.toLowerCase();days=_306.map(days,function(d){return d.toLowerCase();});}v=_306.indexOf(days,v);if(v==-1){return false;}break;case "D":_337[1]=0;case "d":_337[2]=v;break;case "a":var am=_331.am||_334["dayPeriods-format-wide-am"],pm=_331.pm||_334["dayPeriods-format-wide-pm"];if(!_331.strict){var _33d=/\./g;v=v.replace(_33d,"").toLowerCase();am=am.replace(_33d,"").toLowerCase();pm=pm.replace(_33d,"").toLowerCase();}if(_331.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_337[3]=v;break;case "m":_337[4]=v;break;case "s":_337[5]=v;break;case "S":_337[6]=v;}return true;});var _33e=+_337[3];if(amPm==="p"&&_33e<12){_337[3]=_33e+12;}else{if(amPm==="a"&&_33e==12){_337[3]=0;}}var _33f=new Date(_337[0],_337[1],_337[2],_337[3],_337[4],_337[5],_337[6]);if(_331.strict){_33f.setFullYear(_337[0]);}var _340=_333.join(""),_341=_340.indexOf("d")!=-1,_342=_340.indexOf("M")!=-1;if(!_338||(_342&&_33f.getMonth()>_337[1])||(_341&&_33f.getDate()>_337[2])){return null;}if((_342&&_33f.getMonth()<_337[1])||(_341&&_33f.getDate()<_337[2])){_33f=date.add(_33f,"hour",1);}return _33f;};function _322(_343,_344,_345,_346){var _347=function(x){return x;};_344=_344||_347;_345=_345||_347;_346=_346||_347;var _348=_343.match(/(''|[^'])+/g),_349=_343.charAt(0)=="'";_306.forEach(_348,function(_34a,i){if(!_34a){_348[i]="";}else{_348[i]=(_349?_345:_344)(_34a.replace(/''/g,"'"));_349=!_349;}});return _346(_348.join(""));};function _32f(_34b,_34c,_34d,_34e){_34e=_308.escapeString(_34e);if(!_34d.strict){_34e=_34e.replace(" a"," ?a");}return _34e.replace(/([a-z])\1*/ig,function(_34f){var s,c=_34f.charAt(0),l=_34f.length,p2="",p3="";if(_34d.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":case "L":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":case "e":case "c":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_34d.am||_34c["dayPeriods-format-wide-am"],pm=_34d.pm||_34c["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_34d.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_34b){_34b.push(_34f);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _350=[];_30c.addCustomFormats=function(_351,_352){_350.push({pkg:_351,name:_352});};_30c._getGregorianBundle=function(_353){var _354={};_306.forEach(_350,function(desc){var _355=i18n.getLocalization(desc.pkg,desc.name,_353);_354=lang.mixin(_354,_355);},this);return _354;};_30c.addCustomFormats(_30b.id.replace(/\/date\/locale$/,".cldr"),"gregorian");_30c.getNames=function(item,type,_356,_357){var _358,_359=_30c._getGregorianBundle(_357),_35a=[item,_356,type];if(_356=="standAlone"){var key=_35a.join("-");_358=_359[key];if(_358[0]==1){_358=undefined;}}_35a[1]="format";return (_358||_359[_35a.join("-")]).concat();};_30c.isWeekend=function(_35b,_35c){var _35d=_307.getWeekend(_35c),day=(_35b||new Date()).getDay();if(_35d.end<_35d.start){_35d.end+=7;if(day<_35d.start){day+=7;}}return day>=_35d.start&&day<=_35d.end;};_30c._getDayOfYear=function(_35e){return date.difference(new Date(_35e.getFullYear(),0,1,_35e.getHours()),_35e)+1;};_30c._getWeekOfYear=function(_35f,_360){if(arguments.length==1){_360=0;}var _361=new Date(_35f.getFullYear(),0,1).getDay(),adj=(_361-_360+7)%7,week=Math.floor((_30c._getDayOfYear(_35f)+adj-1)/7);if(_361==_360){week++;}return week;};return _30c;});},"esri/symbols/MarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","esri/kernel","esri/symbols/Symbol"],function(_362,lang,has,_363,_364,_365){var _366=_362(_365,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(json){if(json&&lang.isObject(json)){this.size=_363.pt2px(this.size);this.xoffset=_363.pt2px(this.xoffset);this.yoffset=_363.pt2px(this.yoffset);}},setAngle:function(_367){this.angle=_367;return this;},setSize:function(size){this.size=size;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},toJson:function(){var size=_363.px2pt(this.size);size=isNaN(size)?undefined:size;var xoff=_363.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_363.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;return lang.mixin(this.inherited("toJson",arguments),{size:size,angle:this.angle,xoffset:xoff,yoffset:yoff});}});if(has("extend-esri")){lang.setObject("symbol.MarkerSymbol",_366,_364);}return _366;});},"esri/_time":function(){define(["esri/TimeExtent"],function(){return {};});},"esri/symbols/FillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/symbols/Symbol","esri/symbols/SimpleLineSymbol"],function(_368,lang,has,_369,_36a,_36b){var _36c=_368(_36a,{declaredClass:"esri.symbol.FillSymbol",constructor:function(json){if(json&&lang.isObject(json)&&json.outline){this.outline=new _36b(json.outline);}},setOutline:function(_36d){this.outline=_36d;return this;},toJson:function(){var json=this.inherited("toJson",arguments);if(this.outline){json.outline=this.outline.toJson();}return json;}});if(has("extend-esri")){lang.setObject("symbol.FillSymbol",_36c,_369);}return _36c;});},"esri/request":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/Deferred","dojo/_base/lang","dojo/_base/url","dojo/_base/xhr","dojo/io/script","dojo/io/iframe","dojo/dom-construct","dojo/io-query","esri/kernel","esri/config","esri/sniff","esri/lang","esri/urlUtils","esri/deferredUtils"],function(_36e,_36f,_370,lang,Url,xhr,_371,_372,_373,ioq,_374,_375,has,_376,_377,_378){var _379;function _37a(req,_37b,_37c,_37d){var _37e=false,_37f=false;if(_376.isDefined(_37b)){if(lang.isObject(_37b)){_37e=!!_37b.useProxy;_37f=!!_37b.usePost;}else{_37e=!!_37b;}}req=lang.mixin({},req);if(req._ssl){req.url=req.url.replace(/^http:/i,"https:");}var _380=req.content,path=req.url,form=_37c&&req.form,_381=_375.defaults.io;req.load=function(_382){var err;if(_382){if(_382.error){err=lang.mixin(new Error(),_382.error);err.log=_36f.isDebug;}else{if(_382.status==="error"){err=lang.mixin(new Error(),_382);err.log=_36f.isDebug;}}}return err||_382;};req.error=function(_383,io){if(io&&io.xhr){io.xhr.abort();}if(!(_383 instanceof Error)){_383=lang.mixin(new Error(),_383);}_383.log=_36f.isDebug;_381.errorHandler(_383,io);return _383;};if(req._token){req.content=req.content||{};req.content.token=req._token;}var len=0;if(_380&&path){len=ioq.objectToQuery(_380).length+path.length+1;}req.timeout=_376.isDefined(req.timeout)?req.timeout:_381.timeout;req.handleAs=req.handleAs||"json";try{var _384,_385,_386=_377.canUseXhr(req.url)&&!(/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(req.url)),_387=(_377.hasSameOrigin(req.url,window.location.href)||_386),_388=(_37f||_37c||len>_381.postLength)?true:false,_389=(!_387&&req.handleAs.indexOf("json")!==-1&&req.callbackParamName&&!_37c)?true:false,_38a=(!!_377.getProxyRule(req.url)||_381.alwaysUseProxy||_37e||((!_389||_388)&&!_387))?true:false;if(_37c&&!has("esri-file-upload")&&!_38a&&_386){_38a=true;}if(_38a){_384=_377.getProxyUrl(path);_385=_384.path;if(_384._xo){_386=true;}if(!_388&&(_385.length+1+len)>_381.postLength){_388=true;}req.url=_385+"?"+path;if(_388){req.content=lang.mixin(_384.query||{},_380);}else{var _38b=ioq.objectToQuery(lang.mixin(_384.query||{},_380));if(_38b){req.url+=("?"+_38b);}req.content=null;}}if(_389&&!_388){if(!_376.isDefined(req.isAsync)&&has("ff")<4){req.isAsync=true;}return _371.get(_379?_379(req):req);}else{var hdrs=req.headers;if(_386&&(!hdrs||!hdrs.hasOwnProperty("X-Requested-With"))){hdrs=req.headers=(hdrs||{});hdrs["X-Requested-With"]=null;}if(_37c){var _38c=req.callbackParamName||"callback.html",_38d=req.callbackElementName||"textarea",_38e,_38f,_390,i,il=form.elements?form.elements.length:0,el;_380=req.content;if(_380){for(_38e in _380){_390=_380[_38e];if(_376.isDefined(_390)){_38f=null;for(i=0;i<il;i++){el=form.elements[i];if(el.name===_38e){_38f=el;break;}}if(_38f){_38f.value=_390;}else{if(_37d){form.append(_38e,_390);}else{form.appendChild(_373.create("input",{type:"hidden",name:_38e,value:_390}));}}}}}if(has("esri-file-upload")){_36e.forEach(form.elements,function(el){if(el.name===_38c){form.removeChild(el);}});req.contentType=false;req.postData=_37d?form:new FormData(form);delete req.form;}else{form.enctype="multipart/form-data";if(has("ie")<9){form.encoding="multipart/form-data";}form.method="post";if(!_36e.some(form.elements,function(el){return el.name===_38c;})){form.appendChild(_373.create("input",{type:"hidden",name:_38c,value:_38d}));}if(path.toLowerCase().indexOf("addattachment")!==-1||path.toLowerCase().indexOf("updateattachment")!==-1){req.url=path+((path.indexOf("?")===-1)?"?":"&")+_38c+"="+_38d;if(_38a){req.url=_385+"?"+req.url;}}delete req.content;}}req=_379?_379(req):req;if(_388){if(_37c&&!has("esri-file-upload")){return _372.send(req);}else{return xhr.post(req);}}else{return xhr.get(req);}}}catch(e){var dfd=new _370();dfd.errback(req.error(e));return dfd;}};function _391(url){var _392=_375.defaults.io,_393=_392._processedCorsServers,_394=new Url(url),_395=-1;_394=(_394.host+(_394.port?(":"+_394.port):"")).toLowerCase();_395=_377.canUseXhr(url,true);if(_395>-1){_392.corsEnabledServers.splice(_395,1);}_393[_394]=1;return _395;};function _396(url){var _397=_375.defaults.io,_398=_397._processedCorsServers;if(!_397.corsDetection){return;}try{var _399=new Url(url);_399=(_399.host+(_399.port?(":"+_399.port):"")).toLowerCase();if(has("esri-cors")&&(url&&url.toLowerCase().indexOf("/rest/services")!==-1)&&(!_377.hasSameOrigin(url,window.location.href)&&!_377.canUseXhr(url))&&!_398[_399]){_398[_399]=-1;xhr.get({url:url.substring(0,url.toLowerCase().indexOf("/rest/")+"/rest/".length)+"info",content:{f:"json"},failOk:true,handleAs:"json",headers:{"X-Requested-With":null}}).then(function(_39a){if(_39a){_398[_399]=2;if(!_377.canUseXhr(url)){_397.corsEnabledServers.push(_399);}}else{_398[_399]=1;}},function(_39b){_398[_399]=1;});}}catch(e){console.log("esri._detectCors: an unknown error occurred while detecting CORS support");}};function _39c(_39d){_379=_39d;};function _39e(req,_39f){var dfd,form=req.form,_3a0=_39f&&_39f.disableIdentityLookup,_3a1=_39f&&_39f._preLookup,_3a2=form&&form.append,_3a3=form&&(form.elements?_36e.some(form.elements,function(el){return el.type==="file";}):_3a2),_3a4=(req.url.toLowerCase().indexOf("token=")!==-1||(req.content&&req.content.token)||(_3a3&&_36e.some(form.elements,function(el){return el.name==="token";})))?1:0;_396(req.url);if(req._usrDfd){dfd=req._usrDfd;}else{dfd=new _370(_378._dfdCanceller);dfd.addBoth(function(_3a5){if(_3a5&&(!has("ie")||!_3a5.nodeType)){_3a5._ssl=req._ssl;}});var ld=req.load,_3a6=req.error;if(ld){dfd.addCallback(function(_3a7){var _3a8=dfd._pendingDfd,_3a9=_3a8&&_3a8.ioArgs,args=_3a9&&_3a9.args;return ld.call(args,_3a7,_3a9);});}if(_3a6){dfd.addErrback(function(_3aa){var _3ab=dfd._pendingDfd,_3ac=_3ab&&_3ab.ioArgs,args=_3ac&&_3ac.args;return _3a6.call(args,_3aa,_3ac);});}}if(_374.id&&!_3a4&&!req._token&&!_374.id._isPublic(req.url)&&(!_3a0||_3a1)){var _3ad=_374.id.findCredential(req.url);if(_3ad){req._token=_3ad.token;req._ssl=_3ad.ssl;}}dfd._pendingDfd=_37a(req,_39f,_3a3,_3a2);if(!dfd._pendingDfd){dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;var err=new Error("Deferred object is missing");err.log=_36f.isDebug;req._usrDfd=null;dfd.errback(err);dfd._pendingDfd=null;return dfd;}dfd._pendingDfd.addCallback(function(_3ae){dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;req._usrDfd=null;dfd.callback(_3ae);dfd._pendingDfd=null;}).addErrback(function(_3af){if(_3af&&_3af.code==403&&(_3af.subcode==4||(_3af.message&&_3af.message.toLowerCase().indexOf("ssl")>-1&&_3af.message.toLowerCase().indexOf("permission")===-1))){if(!req._ssl){req._ssl=req._sslFromServer=true;req._usrDfd=dfd;_39e(req,_39f);return;}}else{if(_3af&&_3af.status==415){var _3b0=_391(req.url);if(!req._err415){req._err415=1;req._usrDfd=dfd;_39e(req,_39f);return;}}else{if(_374.id&&_36e.indexOf(_374.id._errorCodes,_3af.code)!==-1&&!_374.id._isPublic(req.url)&&!_3a0&&(_3af.code!=403||!_376.isDefined(_3af.subcode)||_3af.subcode==2)){dfd._pendingDfd=_374.id.getCredential(req.url,{token:req._token,error:_3af});dfd._pendingDfd.addCallback(function(_3b1){req._token=_3b1.token;req._usrDfd=dfd;req._ssl=req._sslFromServer||_3b1.ssl;_39e(req,_39f);}).addErrback(function(_3b2){req._usrDfd=null;dfd.errback(_3b2);dfd._pendingDfd=null;});return;}}}dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;req._usrDfd=null;dfd.errback(_3af);dfd._pendingDfd=null;});return dfd;};_39e._request=_37a;_39e._disableCors=_391;_39e._detectCors=_396;_39e.setRequestPreCallback=_39c;if(has("extend-esri")){_374.request=_39e;_374._request=_37a;_374._disableCors=_391;_374._detectCors=_396;_374.setRequestPreCallback=_39c;}return _39e;});},"esri/symbols/SimpleLineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/LineSymbol"],function(_3b3,lang,_3b4,has,_3b5,_3b6,_3b7,_3b8){var _3b9={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"};var _3ba={color:[0,0,0,1],style:_3b9.STYLE_SOLID,width:1};var SLS=_3b3(_3b8,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(json,_3bb,_3bc){if(json){if(lang.isString(json)){this.style=json;if(_3bb){this.color=_3bb;}if(_3bc){this.width=_3bc;}}else{this.style=_3b7.valueOf(this._styles,json.style)||_3b9.STYLE_SOLID;}}else{lang.mixin(this,_3ba);this.color=new _3b4(this.color);this.width=_3b5.pt2px(this.width);}},setStyle:function(_3bd){this.style=_3bd;return this;},getStroke:function(){return (this.style===_3b9.STYLE_NULL||this.width===0)?null:{color:this.color,style:this.style,width:this.width};},getFill:function(){return null;},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()};},toJson:function(){return _3b7.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}));}});lang.mixin(SLS,_3b9);SLS.defaultProps=_3ba;if(has("extend-esri")){lang.setObject("symbol.SimpleLineSymbol",SLS,_3b6);_3b6.symbol.defaultSimpleLineSymbol=_3ba;}return SLS;});},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Point","esri/geometry/Extent"],function(_3be,has,_3bf,_3c0,_3c1){function _3c2(map,ti,_3c3){var wd=map.width,ht=map.height,ew=_3c3.xmax-_3c3.xmin,eh=_3c3.ymax-_3c3.ymin,_3c4=(map.__tileInfo===ti),_3c5=_3c4?map.getMinZoom():-1,_3c6=_3c4?map.getMaxZoom():-1,ed=-1,lods=ti.lods,i,abs=Math.abs,lod,cl,ced;_3c5=(_3c5>-1)?_3c5:0;_3c6=(_3c6>-1)?_3c6:(lods.length-1);for(i=_3c5;i<=_3c6;i++){cl=lods[i];if(!cl){continue;}ced=ew>eh?abs(eh-(ht*cl.resolution)):abs(ew-(wd*cl.resolution));if(ed<0||ced<=ed){lod=cl;ed=ced;}else{break;}}return lod;};function _3c7(map,_3c8,lod){var res=lod.resolution,cx=(_3c8.xmin+_3c8.xmax)/2,cy=(_3c8.ymin+_3c8.ymax)/2,_3c9=(map.width/2)*res,_3ca=(map.height/2)*res;return new _3c1(cx-_3c9,cy-_3ca,cx+_3c9,cy+_3ca,_3c8.spatialReference);};function _3cb(map,ti,_3cc,lod){var res=lod.resolution,tw=ti.width,th=ti.height,to=ti.origin,mv=map.__visibleDelta,_3cd=Math.floor,tmw=tw*res,tmh=th*res,tr=_3cd((to.y-_3cc.y)/tmh),tc=_3cd((_3cc.x-to.x)/tmw),tmox=to.x+(tc*tmw),tmoy=to.y-(tr*tmh),oX=_3cd(Math.abs((_3cc.x-tmox)*tw/tmw))+mv.x,oY=_3cd(Math.abs((_3cc.y-tmoy)*th/tmh))+mv.y;return {point:_3cc,coords:{row:tr,col:tc},offsets:{x:oX,y:oY}};};var _3ce={_addFrameInfo:function(_3cf,_3d0){var _3d1,_3d2,_3d3=2*_3d0.origin[1],m180=_3d0.origin[0],_3d4=_3cf.origin.x,_3d5=_3cf.width,_3d6;_3be.forEach(_3cf.lods,function(lod){_3d1=Math.round(_3d3/lod.resolution);_3d2=Math.ceil(_3d1/_3d5);_3d6=Math.floor((m180-_3d4)/(_3d5*lod.resolution));if(!lod._frameInfo){lod._frameInfo=[_3d2,_3d6,_3d6+_3d2-1,_3d1];}});},getContainingTileCoords:function(ti,_3d7,lod){var to=ti.origin,res=lod.resolution,tmw=ti.width*res,tmh=ti.height*res,tc=Math.floor((_3d7.x-to.x)/tmw),tr=Math.floor((to.y-_3d7.y)/tmh);return {row:tr,col:tc};},getCandidateTileInfo:function(map,ti,_3d8){var lod=_3c2(map,ti,_3d8),adj=_3c7(map,_3d8,lod),ct=_3cb(map,ti,new _3c0(adj.xmin,adj.ymax,_3d8.spatialReference),lod);return {tile:ct,lod:lod,extent:adj};},getTileExtent:function(ti,_3d9,row,col){var to=ti.origin,lod=ti.lods[_3d9],res=lod.resolution,tw=ti.width,th=ti.height;return new _3c1(((col*res)*tw)+to.x,to.y-((row+1)*res)*th,(((col+1)*res)*tw)+to.x,to.y-((row*res)*th),ti.spatialReference);}};if(has("extend-esri")){_3bf.TileUtils=_3ce;}return _3ce;});},"esri/layers/DataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_3da,lang,has,_3db){var _3dc=_3da(null,{declaredClass:"esri.layers.DataSource",constructor:function(json){if(json){lang.mixin(this,json);}},toJson:function(){}});if(has("extend-esri")){lang.setObject("layers.DataSource",_3dc,_3db);}return _3dc;});},"esri/utils":function(){define(["esri/domUtils","esri/lang","esri/urlUtils","esri/request","esri/tileUtils","esri/graphicsUtils","esri/deferredUtils","esri/layerUtils","esri/geometry/normalizeUtils"],function(){return {};});},"esri/renderers/TimeClassBreaksAger":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","dojo/date","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/SymbolAger"],function(_3dd,_3de,lang,has,_3df,_3e0,_3e1,_3e2,_3e3){var _3e4={UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"};var _3e5=_3dd(_3e3,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(_3e6,_3e7){this.infos=_3e6;this.timeUnits=_3e7||"day";_3e6.sort(function(a,b){if(a.minAge<b.minAge){return -1;}if(a.minAge>b.minAge){return 1;}return 0;});},getAgedSymbol:function(_3e8,_3e9){var _3ea=_3e9.getLayer(),_3eb=_3e9.attributes,_3ec=_3e1.isDefined;_3e8=_3e2.fromJson(_3e8.toJson());var _3ed=_3ea._map.timeExtent;var _3ee=_3ed.endTime;if(!_3ee){return _3e8;}var _3ef=new Date(_3eb[_3ea._startTimeField]);var diff=_3df.difference(_3ef,_3ee,this.timeUnits);_3de.some(this.infos,function(info){if(diff>=info.minAge&&diff<=info.maxAge){var _3f0=info.color,size=info.size,_3f1=info.alpha;if(_3f0){_3e8.setColor(_3f0);}if(_3ec(size)){this._setSymbolSize(_3e8,size);}if(_3ec(_3f1)&&_3e8.color){_3e8.color.a=_3f1;}return true;}},this);return _3e8;}});lang.mixin(_3e5,_3e4);if(has("extend-esri")){lang.setObject("renderer.TimeClassBreaksAger",_3e5,_3e0);}return _3e5;});},"dojo/io/iframe":function(){define(["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(_3f2,json,_3f3,lang,xhr,has,win,dom,_3f4,_3f5,_3f6,_3f7,_3f8){_3f3.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var mid=_3f8._iframeName;mid=mid.substring(0,mid.lastIndexOf("_"));var _3f9=lang.delegate(_3f8,{create:function(){return _3f9._frame=_3f8.create.apply(_3f8,arguments);},get:null,post:null,send:function(args){var rDfd;var dfd=xhr._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel();},function(dfd){var _3fa=null,_3fb=dfd.ioArgs;try{var _3fc=_3fb.handleAs;if(_3fc==="xml"||_3fc==="html"){_3fa=rDfd.response.data;}else{_3fa=rDfd.response.text;if(_3fc==="json"){_3fa=json.fromJson(_3fa);}else{if(_3fc==="javascript"){_3fa=_3f3.eval(_3fa);}}}}catch(e){_3fa=e;}return _3fa;},function(_3fd,dfd){dfd.ioArgs._hasError=true;return _3fd;});var _3fe=dfd.ioArgs;var _3ff="GET",form=dom.byId(args.form);if(args.method&&args.method.toUpperCase()==="POST"&&form){_3ff="POST";}var _400={method:_3ff,handleAs:args.handleAs==="json"||args.handleAs==="javascript"?"text":args.handleAs,form:args.form,query:form?null:args.content,data:form?args.content:null,timeout:args.timeout,ioArgs:_3fe};if(_400.method){_400.method=_400.method.toUpperCase();}if(_3f2.ioPublish&&_3f3.publish&&_3fe.args.ioPublish!==false){var _401=_3f7.after(_3f8,"_notifyStart",function(data){if(data.options.ioArgs===_3fe){_401.remove();xhr._ioNotifyStart(dfd);}},true);}rDfd=_3f8(_3fe.url,_400,true);_3fe._callNext=rDfd._callNext;rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(_402){dfd.ioArgs.error=_402;dfd.reject(_402);});return dfd;},_iframeOnload:win.global[mid+"_onload"]});lang.setObject("dojo.io.iframe",_3f9);return _3f9;});},"esri/layers/agsdynamic":function(){define(["esri/layers/agscommon","esri/layers/ArcGISDynamicMapServiceLayer","esri/_time"],function(){return {};});},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","dojo/when"],function(_403,lang,_404,when){return _403("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}return (apn[name]={s:"_"+name+"Setter",g:"_"+name+"Getter"});},postscript:function(_405){if(_405){this.set(_405);}},_get:function(name,_406){return typeof this[_406.g]==="function"?this[_406.g]():this[name];},get:function(name){return this._get(name,this._getAttrNames(name));},set:function(name,_407){if(typeof name==="object"){for(var x in name){if(name.hasOwnProperty(x)&&x!="_watchCallbacks"){this.set(x,name[x]);}}return this;}var _408=this._getAttrNames(name),_409=this._get(name,_408),_40a=this[_408.s],_40b;if(typeof _40a==="function"){_40b=_40a.apply(this,Array.prototype.slice.call(arguments,1));}else{this[name]=_407;}if(this._watchCallbacks){var self=this;when(_40b,function(){self._watchCallbacks(name,_409,_407);});}return this;},_changeAttrValue:function(name,_40c){var _40d=this.get(name);this[name]=_40c;if(this._watchCallbacks){this._watchCallbacks(name,_40d,_40c);}return this;},watch:function(name,_40e){var _40f=this._watchCallbacks;if(!_40f){var self=this;_40f=this._watchCallbacks=function(name,_410,_411,_412){var _413=function(_414){if(_414){_414=_414.slice();for(var i=0,l=_414.length;i<l;i++){_414[i].call(self,name,_410,_411);}}};_413(_40f["_"+name]);if(!_412){_413(_40f["*"]);}};}if(!_40e&&typeof name==="function"){_40e=name;name="*";}else{name="_"+name;}var _415=_40f[name];if(typeof _415!=="object"){_415=_40f[name]=[];}_415.push(_40e);var _416={};_416.unwatch=_416.remove=function(){var _417=_404.indexOf(_415,_40e);if(_417>-1){_415.splice(_417,1);}};return _416;}});});},"esri/symbols/PictureMarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","esri/kernel","esri/lang","esri/urlUtils","esri/symbols/MarkerSymbol"],function(_418,lang,has,_419,_41a,_41b,_41c,_41d){var _41e={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};var PMS=_418(_41d,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(json,_41f,_420){if(json){if(lang.isString(json)){this.url=json;if(_41f){this.width=_41f;}if(_420){this.height=_420;}}else{this.width=_419.pt2px(json.width);this.height=_419.pt2px(json.height);var _421=json.imageData;if((!(has("ie")<9))&&_421){var temp=this.url;this.url="data:"+(json.contentType||"image")+";base64,"+_421;this.imageData=temp;}}}else{lang.mixin(this,_41e);this.width=_419.pt2px(this.width);this.height=_419.pt2px(this.height);}},getStroke:function(){return null;},getFill:function(){return null;},setWidth:function(_422){this.width=_422;return this;},setHeight:function(_423){this.height=_423;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},getShapeDescriptors:function(){var _424={type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""};return {defaultShape:_424,fill:null,stroke:null};},toJson:function(){var url=this.url,_425=this.imageData;if(url.indexOf("data:")===0){var temp=url;url=_425;var _426=temp.indexOf(";base64,")+8;_425=temp.substr(_426);}url=_41c.getAbsoluteUrl(url);var _427=_419.px2pt(this.width);_427=isNaN(_427)?undefined:_427;var _428=_419.px2pt(this.height);_428=isNaN(_428)?undefined:_428;var _429=_41b.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:url,imageData:_425,contentType:this.contentType,width:_427,height:_428}));delete _429.color;delete _429.size;if(!_429.imageData){delete _429.imageData;}return _429;}});PMS.defaultProps=_41e;if(has("extend-esri")){lang.setObject("symbol.PictureMarkerSymbol",PMS,_41a);_41a.symbol.defaultPictureMarkerSymbol=_41e;}return PMS;});},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/Domain"],function(_42a,lang,has,_42b,_42c){var _42d=_42a([_42c],{declaredClass:"esri.layers.InheritedDomain"});if(has("extend-esri")){lang.setObject("layers.InheritedDomain",_42d,_42b);}return _42d;});},"esri/layers/LayerDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/LayerSource","esri/layers/TableDataSource","esri/layers/QueryDataSource","esri/layers/JoinDataSource","esri/layers/RasterDataSource"],function(_42e,lang,has,_42f,_430,_431,_432,_433,_434,_435){var _436=_42e(_431,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(json){if(json&&json.dataSource){var _437;switch(json.dataSource.type){case "table":_437=new _432(json.dataSource);break;case "queryTable":_437=new _433(json.dataSource);break;case "joinTable":_437=new _434(json.dataSource);break;case "raster":_437=new _435(json.dataSource);break;default:_437=json.dataSource;}this.dataSource=_437;}},toJson:function(){var json={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return _430.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerDataSource",_436,_42f);}return _436;});},"dojox/xml/parser":function(){define("dojox/xml/parser",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(dojo){dojo.getObject("xml.parser",true,dojox);dojox.xml.parser.parse=function(str,_438){var _439=dojo.doc;var doc;_438=_438||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _43a=new DOMParser();doc=_43a.parseFromString(str,_438);var de=doc.documentElement;var _43b="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_43b){var _43c=de.getElementsByTagNameNS(_43b,"sourcetext")[0];if(_43c){_43c=_43c.firstChild.data;}throw new Error("Error parsing text "+de.firstChild.data+" \n"+_43c);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_439.implementation&&_439.implementation.createDocument){if(str&&dojo.trim(str)&&_439.createElement){var tmp=_439.createElement("xml");tmp.innerHTML=str;var _43d=_439.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_43e){_43d.importNode(_43e,true);});return _43d;}else{return _439.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _43f=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_43f.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _440="";if(node){dojo.forEach(node.childNodes,function(_441){switch(_441.nodeType){case 1:case 5:_440+=dojox.xml.parser.textContent(_441);break;case 3:case 2:case 4:_440+=_441.nodeValue;}});}return _440;}};dojox.xml.parser.replaceChildren=function(node,_442){var _443=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_444){_443.push(_444);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_443,dojo.destroy);if(!dojo.isArray(_442)){node.appendChild(_442);}else{dojo.forEach(_442,function(_445){node.appendChild(_445);});}};dojox.xml.parser.removeChildren=function(node){var _446=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _446;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};return dojox.xml.parser;});},"esri/layers/ImageParameters":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/lang","esri/layerUtils"],function(_447,_448,lang,_449,has,_44a,_44b,_44c){var _44d=_448(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[];},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(_44e){if(this.bbox){_447.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");}var bb=this.bbox||this.extent;bb=bb&&_44e&&bb._normalize(true);var _44f=this.layerOption,wkid=bb?(bb.spatialReference.wkid||_449.toJson(bb.spatialReference.toJson())):null,_450=this.imageSpatialReference,json={dpi:this.dpi,format:this.format,transparent:this.transparent,size:(this.width!==null&&this.height!==null?this.width+","+this.height:null),bbox:(bb?(bb.xmin+","+bb.ymin+","+bb.xmax+","+bb.ymax):null),bboxSR:wkid,layers:(_44f?_44f+":"+this.layerIds.join(","):null),imageSR:(_450?(_450.wkid||_449.toJson(_450.toJson())):wkid)};json.layerDefs=_44c._serializeLayerDefinitions(this.layerDefinitions);var _451=this.timeExtent;json.time=_451?_451.toJson().join(","):null;json.layerTimeOptions=_44c._serializeTimeOptions(this.layerTimeOptions);return _44b.filter(json,function(_452){if(_452!==null){return true;}});}});lang.mixin(_44d,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});if(has("extend-esri")){lang.setObject("layers.ImageParameters",_44d,_44a);}return _44d;});},"esri/symbols/Symbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","esri/kernel","esri/lang"],function(_453,lang,_454,has,_455,_456){function _457(clr){return clr&&new _454([clr[0],clr[1],clr[2],clr[3]/255]);};function _458(clr){return clr&&[clr.r,clr.g,clr.b,Math.round(clr.a*255)];};var _459=_453(null,{declaredClass:"esri.symbol.Symbol",color:new _454([0,0,0,1]),type:null,_stroke:null,_fill:null,constructor:function(json){if(json&&lang.isObject(json)){lang.mixin(this,json);if(this.color&&_456.isDefined(this.color[0])){this.color=_457(this.color);}var type=this.type;if(type&&type.indexOf("esri")===0){this.type={"esriSMS":"simplemarkersymbol","esriPMS":"picturemarkersymbol","esriSLS":"simplelinesymbol","esriCLS":"cartographiclinesymbol","esriSFS":"simplefillsymbol","esriPFS":"picturefillsymbol","esriTS":"textsymbol"}[type];}}},setColor:function(_45a){this.color=_45a;return this;},toJson:function(){return {color:_458(this.color)};}});_459.toDojoColor=_457;_459.toJsonColor=_458;if(has("extend-esri")){lang.setObject("symbol.Symbol",_459,_455);_455.symbol.toDojoColor=_457;_455.symbol.toJsonColor=_458;}return _459;});},"esri/lang":function(){define(["dojo/_base/array","dojo/_base/json","dojo/_base/kernel","dojo/_base/lang","dojo/date","dojo/has","dojo/number","dojo/date/locale","esri/kernel"],function(_45b,json,_45c,lang,_45d,has,_45e,_45f,_460){function _461(arr,obj,cb){return [lang.isString(arr)?arr.split(""):arr,obj||_45c.global,lang.isString(cb)?new Function("item","index","array",cb):cb];};function _462(_463){return (_463!==undefined)&&(_463!==null);};var _464="${*}",_465=["NumberFormat","DateString","DateFormat"];function _466(_467){return _462(_467)?_467:"";};function exec(key,data,_468){var _469=_468.match(/([^\(]+)(\([^\)]+\))?/i),_46a=lang.trim(_469[1]),_46b=data[key],_46c,args=json.fromJson((_469[2]?lang.trim(_469[2]):"()").replace(/^\(/,"({").replace(/\)$/,"})")),_46d=args.utcOffset;if(_45b.indexOf(_465,_46a)===-1){var ref=lang.getObject(_46a);if(lang.isFunction(ref)){_46b=ref(_46b,key,data);}}else{if(typeof _46b==="number"||(typeof _46b==="string"&&_46b&&!isNaN(Number(_46b)))){_46b=Number(_46b);switch(_46a){case "NumberFormat":return _45e.format(_46b,args);break;case "DateString":_46c=new Date(_46b);if(args.local||args.systemLocale){if(args.systemLocale){return _46c.toLocaleDateString()+(args.hideTime?"":(" "+_46c.toLocaleTimeString()));}else{return _46c.toDateString()+(args.hideTime?"":(" "+_46c.toTimeString()));}}else{_46c=_46c.toUTCString();if(args.hideTime){_46c=_46c.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,"");}return _46c;}break;case "DateFormat":_46c=new Date(_46b);if(_462(_46d)){_46c=_45d.add(_46c,"minute",(_46c.getTimezoneOffset()-_46d));}return _45f.format(_46c,args);break;}}}return _466(_46b);};function _46e(obj,_46f){var prop;if(_46f){for(prop in obj){if(obj.hasOwnProperty(prop)){if(obj[prop]===undefined||obj[prop]===null){delete obj[prop];}else{if(obj[prop] instanceof Object){_46e(obj[prop],true);}}}}}else{for(prop in obj){if(obj.hasOwnProperty(prop)){if(obj[prop]===undefined){delete obj[prop];}}}}return obj;};var _470={valueOf:function(_471,_472){var i;for(i in _471){if(_471[i]==_472){return i;}}return null;},substitute:function(data,_473,_474){var _475,_476,_477;if(_462(_474)){if(lang.isObject(_474)){_475=_474.first;_476=_474.dateFormat;_477=_474.numberFormat;}else{_475=_474;}}if(!_473||_473===_464){var s=[],val,i;for(i in data){val=data[i];if(_476&&_45b.indexOf(_476.properties||"",i)!==-1){val=exec(i,data,_476.formatter||"DateString");}else{if(_477&&_45b.indexOf(_477.properties||"",i)!==-1){val=exec(i,data,_477.formatter||"NumberFormat");}}s.push(i+" = "+_466(val)+"<br/>");if(_475){break;}}return s.join("");}else{return lang.replace(_473,lang.hitch({obj:data},function(_478,key){var _479=key.split(":");if(_479.length>1){key=_479[0];_479.shift();return exec(key,this.obj,_479.join(":"));}else{if(_476&&_45b.indexOf(_476.properties||"",key)!==-1){return exec(key,this.obj,_476.formatter||"DateString");}if(_477&&_45b.indexOf(_477.properties||"",key)!==-1){return exec(key,this.obj,_477.formatter||"NumberFormat");}}return _466(this.obj[key]);}),/\$\{([^\}]+)\}/g);}},filter:function(arr,_47a,_47b){var _47c=_461(arr,_47b,_47a),_47d={},i;arr=_47c[0];for(i in arr){if(_47c[2].call(_47c[i],arr[i],i,arr)){_47d[i]=arr[i];}}return _47d;},isDefined:_462,fixJson:_46e};if(has("extend-esri")){lang.mixin(_460,_470);_460._isDefined=_462;_460._getParts=_461;_460._sanitize=_46e;}return _470;});},"dojox/collections/ArrayList":function(){define("dojox/collections/ArrayList",["dojo/_base/kernel","dojo/_base/array","./_base"],function(dojo,_47e,dxc){dxc.ArrayList=function(arr){var _47f=[];if(arr){_47f=_47f.concat(arr);}this.count=_47f.length;this.add=function(obj){_47f.push(obj);this.count=_47f.length;};this.addRange=function(a){if(a.getIterator){var e=a.getIterator();while(!e.atEnd()){this.add(e.get());}this.count=_47f.length;}else{for(var i=0;i<a.length;i++){_47f.push(a[i]);}this.count=_47f.length;}};this.clear=function(){_47f.splice(0,_47f.length);this.count=0;};this.clone=function(){return new dxc.ArrayList(_47f);};this.contains=function(obj){for(var i=0;i<_47f.length;i++){if(_47f[i]==obj){return true;}}return false;};this.forEach=function(fn,_480){dojo.forEach(_47f,fn,_480);};this.getIterator=function(){return new dxc.Iterator(_47f);};this.indexOf=function(obj){for(var i=0;i<_47f.length;i++){if(_47f[i]==obj){return i;}}return -1;};this.insert=function(i,obj){_47f.splice(i,0,obj);this.count=_47f.length;};this.item=function(i){return _47f[i];};this.remove=function(obj){var i=this.indexOf(obj);if(i>=0){_47f.splice(i,1);}this.count=_47f.length;};this.removeAt=function(i){_47f.splice(i,1);this.count=_47f.length;};this.reverse=function(){_47f.reverse();};this.sort=function(fn){if(fn){_47f.sort(fn);}else{_47f.sort();}};this.setByIndex=function(i,obj){_47f[i]=obj;this.count=_47f.length;};this.toArray=function(){return [].concat(_47f);};this.toString=function(_481){return _47f.join((_481||","));};};return dxc.ArrayList;});},"dojox/collections/_base":function(){define("dojox/collections/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(dojo,lang,arr){var _482=lang.getObject("dojox.collections",true);_482.DictionaryEntry=function(k,v){this.key=k;this.value=v;this.valueOf=function(){return this.value;};this.toString=function(){return String(this.value);};};_482.Iterator=function(a){var _483=0;this.element=a[_483]||null;this.atEnd=function(){return (_483>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_483++];return this.element;};this.map=function(fn,_484){return arr.map(a,fn,_484);};this.reset=function(){_483=0;this.element=a[_483];};};_482.DictionaryIterator=function(obj){var a=[];var _485={};for(var p in obj){if(!_485[p]){a.push(obj[p]);}}var _486=0;this.element=a[_486]||null;this.atEnd=function(){return (_486>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_486++];return this.element;};this.map=function(fn,_487){return arr.map(a,fn,_487);};this.reset=function(){_486=0;this.element=a[_486];};};return _482;});},"dojo/_base/url":function(){define(["./kernel"],function(dojo){var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),_488=function(){var n=null,_489=arguments,uri=[_489[0]];for(var i=1;i<_489.length;i++){if(!_489[i]){continue;}var _48a=new _488(_489[i]+""),_48b=new _488(uri[0]+"");if(_48a.path==""&&!_48a.scheme&&!_48a.authority&&!_48a.query){if(_48a.fragment!=n){_48b.fragment=_48a.fragment;}_48a=_48b;}else{if(!_48a.scheme){_48a.scheme=_48b.scheme;if(!_48a.authority){_48a.authority=_48b.authority;if(_48a.path.charAt(0)!="/"){var path=_48b.path.substring(0,_48b.path.lastIndexOf("/")+1)+_48a.path;var segs=path.split("/");for(var j=0;j<segs.length;j++){if(segs[j]=="."){if(j==segs.length-1){segs[j]="";}else{segs.splice(j,1);j--;}}else{if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!=".."){if(j==(segs.length-1)){segs.splice(j,1);segs[j-1]="";}else{segs.splice(j-1,2);j-=2;}}}}_48a.path=segs.join("/");}}}}uri=[];if(_48a.scheme){uri.push(_48a.scheme,":");}if(_48a.authority){uri.push("//",_48a.authority);}uri.push(_48a.path);if(_48a.query){uri.push("?",_48a.query);}if(_48a.fragment){uri.push("#",_48a.fragment);}}this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n;}};_488.prototype.toString=function(){return this.uri;};return dojo._Url=_488;});},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(_48c,lang){var _48d={};lang.setObject("dojo.string",_48d);_48d.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};_48d.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=_48d.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};_48d.substitute=function(_48e,map,_48f,_490){_490=_490||_48c.global;_48f=_48f?lang.hitch(_490,_48f):function(v){return v;};return _48e.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_491,key,_492){var _493=lang.getObject(key,false,map);if(_492){_493=lang.getObject(_492,false,_490).call(_490,_493,key);}return _48f(_493,key).toString();});};_48d.trim=String.prototype.trim?lang.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};return _48d;});},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_494,lang,has,_495){var _496=_494(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(json){if(json){lang.mixin(this,json);}},toJson:function(){}});if(has("extend-esri")){lang.setObject("layers.LayerSource",_496,_495);}return _496;});},"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(_497,has,_498,win,_499){var _49a={},hash={};var _49b={length:0,add:function(_49c){if(hash[_49c.id]){throw new Error("Tried to register widget with id=="+_49c.id+" but that id is already registered");}hash[_49c.id]=_49c;this.length++;},remove:function(id){if(hash[id]){delete hash[id];this.length--;}},byId:function(id){return typeof id=="string"?hash[id]:id;},byNode:function(node){return hash[node.getAttribute("widgetId")];},toArray:function(){var ar=[];for(var id in hash){ar.push(hash[id]);}return ar;},getUniqueId:function(_49d){var id;do{id=_49d+"_"+(_49d in _49a?++_49a[_49d]:_49a[_49d]=0);}while(hash[id]);return _499._scopeName=="dijit"?id:_499._scopeName+"_"+id;},findWidgets:function(root,_49e){var _49f=[];function _4a0(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _4a1=node.getAttribute("widgetId");if(_4a1){var _4a2=hash[_4a1];if(_4a2){_49f.push(_4a2);}}else{if(node!==_49e){_4a0(node);}}}}};_4a0(root);return _49f;},_destroyAll:function(){_499._curFocus=null;_499._prevFocus=null;_499._activeStack=[];_497.forEach(_49b.findWidgets(win.body()),function(_4a3){if(!_4a3._destroyed){if(_4a3.destroyRecursive){_4a3.destroyRecursive();}else{if(_4a3.destroy){_4a3.destroy();}}}});},getEnclosingWidget:function(node){while(node){var id=node.nodeType==1&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;},_hash:hash};_499.registry=_49b;return _49b;});},"dijit/_base/manager":function(){define("dijit/_base/manager",["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(_4a4,_4a5,lang,_4a6,_4a7){var _4a8={};_4a4.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(name){_4a8[name]=_4a6[name];});lang.mixin(_4a8,{defaultDuration:_4a5["defaultDuration"]||200});lang.mixin(_4a7,_4a8);return _4a7;});},"esri/dijit/Popup":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/kernel","dojo/has","dojo/window","dojo/Stateful","dojo/query","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/registry","esri/kernel","esri/lang","esri/sniff","esri/domUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/InfoWindowBase","esri/PopupBase","dojo/i18n!esri/nls/jsapi","dojo/NodeList-dom"],function(_4a9,lang,_4aa,_4ab,_4ac,has,win,_4ad,_4ae,dom,_4af,_4b0,_4b1,_4b2,_4b3,_4b4,_4b5,_4b6,_4b7,_4b8,_4b9,_4ba,_4bb,_4bc,_4bd){var _4be=_4a9([_4bb,_4bc,_4ad],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:true,pagingControls:true,pagingInfo:true,keepHighlightOnHide:false,popupWindow:true,titleInBody:true,anchor:"auto",constructor:function(_4bf,_4c0){this.initialize();lang.mixin(this,_4bf);this.domNode=dom.byId(_4c0);var nls=this._nls=lang.mixin({},_4bd.widgets.popup);var _4c1=this.domNode;_4b0.add(_4c1,"esriPopup");this._isRTL=!_4b2.isBodyLtr();if(this._isRTL){_4b3.set(_4c1,"direction","rtl");}var _4c2="<div class='esriPopupWrapper' style='position: absolute;'>"+"<div class='sizer'>"+"<div class='titlePane'>"+"<div class='spinner hidden' title='"+nls.NLS_searching+"...'></div>"+"<div class='title'></div>"+"<div class='titleButton prev hidden' title='"+nls.NLS_prevFeature+"'></div>"+"<div class='titleButton next hidden' title='"+nls.NLS_nextFeature+"'></div>"+"<div class='titleButton maximize' title='"+nls.NLS_maximize+"'></div>"+"<div class='titleButton close' title='"+nls.NLS_close+"'></div>"+"</div>"+"</div>"+"<div class='sizer content'>"+"<div class='contentPane'>"+"</div>"+"</div>"+"<div class='sizer'>"+"<div class='actionsPane'>"+"<div class='actionList hidden'>"+"<a class='action zoomTo' href='javascript:void(0);'>"+nls.NLS_zoomTo+"</a>"+"</div>"+"</div>"+"</div>"+"<div class='pointer hidden'></div>"+"</div>"+"<div class='outerPointer hidden'></div>";_4af.set(_4c1,"innerHTML",_4c2);this._sizers=_4ac.query(".sizer",_4c1);var _4c3=_4ac.query(".titlePane",_4c1)[0];dom.setSelectable(_4c3,false);this._title=_4ac.query(".title",_4c3)[0];this._prevFeatureButton=_4ac.query(".prev",_4c3)[0];this._nextFeatureButton=_4ac.query(".next",_4c3)[0];this._maxButton=_4ac.query(".maximize",_4c3)[0];this._spinner=_4ac.query(".spinner",_4c3)[0];this._contentPane=_4ac.query(".contentPane",_4c1)[0];this._positioner=_4ac.query(".esriPopupWrapper",_4c1)[0];this._pointer=_4ac.query(".pointer",_4c1)[0];this._outerPointer=_4ac.query(".outerPointer",_4c1)[0];this._actionList=_4ac.query(".actionsPane .actionList",_4c1)[0];this._eventConnections=[_4ab.connect(_4ac.query(".close",_4c3)[0],"onclick",this,this.hide),_4ab.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),_4ab.connect(this._nextFeatureButton,"onclick",this,this.selectNext),_4ab.connect(this._maxButton,"onclick",this,this._toggleSize),_4ab.connect(_4ac.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),_4ab.connect(this,"onClearFeatures",this,this._featuresCleared),_4ab.connect(this,"onSelectionChange",this,this._featureSelected),_4ab.connect(this,"onDfdComplete",this,this._updateUI)];if(has("esri-touch")){var _4c4=_4b8.setScrollable(this._contentPane);this._eventConnections.push(_4c4[0],_4c4[1]);}this._toggleVisibility(false);},onMaximize:function(){},onRestore:function(){},setMap:function(map){this.inherited(arguments);_4b1.place(this.domNode,map.root);if(this.highlight){this.enableHighlight(map);}this._maxHeight=_4b3.get(this._contentPane,"maxHeight");},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(_4c5){if(!this.popupWindow){return;}if(!_4b6.isDefined(_4c5)||_4c5===""){_4c5="&nbsp;";}this.destroyDijits(this._title);this.place(_4c5,this._title);if(this.isShowing){this.startupDijits(this._title);this.reposition();}},setContent:function(_4c6){if(!this.popupWindow){return;}if(!_4b6.isDefined(_4c6)||_4c6===""){_4c6="&nbsp;";}this.destroyDijits(this._contentPane);this.place(_4c6,this._contentPane);if(this.isShowing){this.startupDijits(this._contentPane);this.reposition();}},show:function(_4c7,_4c8){if(!this.popupWindow){return;}if(!_4c7){this._toggleVisibility(true);return;}var map=this.map,_4c9;if(_4c7.spatialReference){this._location=_4c7;_4c9=map.toScreen(_4c7);}else{this._location=map.toMap(_4c7);_4c9=_4c7;}var _4ca=map._getFrameWidth();if(_4ca!==-1){_4c9.x=_4c9.x%_4ca;if(_4c9.x<0){_4c9.x+=_4ca;}if(map.width>_4ca){var _4cb=(map.width-_4ca)/2;while(_4c9.x<_4cb){_4c9.x+=_4ca;}}}if(this._maximized){this.restore();}else{this._setPosition(_4c9);}if(_4c8&&_4c8.closestFirst){this.showClosestFirst(this._location);}if(!this.isShowing){this._toggleVisibility(true);this._followMap();this.startupDijits(this._title);this.startupDijits(this._contentPane);this.reposition();this.showHighlight();this.onShow();}},hide:function(){if(this.isShowing){this._toggleVisibility(false);this._unfollowMap();if(!this.keepHighlightOnHide){this.hideHighlight();}this.onHide();}},resize:function(_4cc,_4cd){if(!this.popupWindow){return;}this._sizers.style({width:_4cc+"px"});_4b3.set(this._contentPane,"maxHeight",_4cd+"px");this._maxHeight=_4cd;if(this.isShowing){this.reposition();}},reposition:function(){if(!this.popupWindow){return;}if(this.map&&this._location&&!this._maximized&&this.isShowing){this._setPosition(this.map.toScreen(this._location));}},maximize:function(){var map=this.map;if(!map||this._maximized||!this.popupWindow){return;}this._maximized=true;var max=this._maxButton;_4b0.remove(max,"maximize");_4b0.add(max,"restore");_4af.set(max,"title",this._nls.NLS_restore);var _4ce=this.marginLeft,_4cf=this.marginTop,_4d0=map.width-(2*_4ce),_4d1=map.height-(2*_4cf),_4d2=this.domNode;_4b3.set(_4d2,{left:this._isRTL?null:(_4ce+"px"),right:this._isRTL?(_4ce+"px"):null,top:_4cf+"px",bottom:null});_4b3.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=_4b3.get(this._sizers[0],"width");this._savedHeight=_4b3.get(this._contentPane,"maxHeight");this._sizers.style({width:_4d0+"px"});_4b3.set(this._contentPane,{maxHeight:(_4d1-65)+"px",height:(_4d1-65)+"px"});this._showPointer("");this._unfollowMap();_4b0.add(this.domNode,"esriPopupMaximized");this.onMaximize();},restore:function(){var map=this.map;if(!map||!this._maximized||!this.popupWindow){return;}this._maximized=false;var max=this._maxButton;_4b0.remove(max,"restore");_4b0.add(max,"maximize");_4af.set(max,"title",this._nls.NLS_maximize);_4b3.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this._location);this._followMap();_4b0.remove(this.domNode,"esriPopupMaximized");this.onRestore();},startup:function(){},destroy:function(){if(this.map){this.unsetMap();}this.cleanup();if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);_4aa.forEach(this._eventConnections,_4ab.disconnect);_4b1.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null;},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},postscript:null,_highlightSetter:function(_4d3){var _4d4=this.highlight,map=this.map;this.highlight=_4d3;if(map&&_4d3!==_4d4){if(_4d3){this.enableHighlight(map);var _4d5=this.features&&this.features[this.selectedIndex];if(_4d5){this.updateHighlight(map,_4d5);this.showHighlight();}}else{this.disableHighlight(map);}}},_pagingControlsSetter:function(_4d6){var _4d7=this.pagingControls,map=this.map;this.pagingControls=_4d6;if(map&&_4d6!==_4d7){this._updatePagingControls();}},_pagingInfoSetter:function(_4d8){var _4d9=this.pagingInfo,map=this.map;this.pagingInfo=_4d8;if(map&&_4d8!==_4d9&&this.features&&this.features.length){this._updatePagingInfo();}},_popupWindowSetter:function(_4da){var _4db=this.popupWindow,map=this.map;this.popupWindow=_4da;if(map&&_4da!==_4db){if(_4da){this._updateUI();this._updateWindow();}else{this.hide();this.showHighlight();}}},_anchorSetter:function(_4dc){var _4dd=this.anchor;this.anchor=_4dc;if(this.map&&_4dc!==_4dd){this.reposition();}},_featuresCleared:function(){this.setTitle("&nbsp;");this.setContent("&nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight();},_featureSelected:function(){this._updateUI();this._updateWindow();},_updateWindow:function(){var ptr=this.selectedIndex;if(ptr>=0){var _4de=this.features[ptr].getContent(),_4df;if(!this.titleInBody&&_4de&&lang.isString(_4de.id)){_4df=_4b4.byId(_4de.id);if(_4df&&_4df.set&&/_PopupRenderer/.test(_4df.declaredClass)){_4df.set("showTitle",false);}}this.setContent(_4de);this.updateHighlight(this.map,this.features[ptr]);this.showHighlight();}},_toggleVisibility:function(_4e0){this._setVisibility(_4e0);this.isShowing=_4e0;},_setVisibility:function(_4e1){_4b3.set(this.domNode,"visibility",_4e1?"visible":"hidden");},_followMap:function(){this._unfollowMap();var map=this.map;this._handles=[_4ab.connect(map,"onPanStart",this,this._onPanStart),_4ab.connect(map,"onPan",this,this._onPan),_4ab.connect(map,"onZoomStart",this,this._onZoomStart),_4ab.connect(map,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var _4e2=this._handles;if(_4e2){_4aa.forEach(_4e2,_4ab.disconnect);this._handles=null;}},_onPanStart:function(){var _4e3=this.domNode.style;this._panOrigin={left:_4e3.left,top:_4e3.top,right:_4e3.right,bottom:_4e3.bottom};},_onPan:function(_4e4,_4e5){var _4e6=this._panOrigin,dx=_4e5.x,dy=_4e5.y,left=_4e6.left,top=_4e6.top,_4e7=_4e6.right,_4e8=_4e6.bottom;if(left){left=(parseFloat(left)+dx)+"px";}if(top){top=(parseFloat(top)+dy)+"px";}if(_4e7){_4e7=(parseFloat(_4e7)-dx)+"px";}if(_4e8){_4e8=(parseFloat(_4e8)-dy)+"px";}_4b3.set(this.domNode,{left:left,top:top,right:_4e7,bottom:_4e8});},_onZoomStart:function(){this._setVisibility(false);},_onExtentChange:function(_4e9,_4ea,_4eb){if(_4eb){this._setVisibility(true);this.show(this._targetLocation||this._location);}this._targetLocation=null;},_toggleSize:function(){if(this._maximized){this.restore();}else{this.maximize();}},_setPosition:function(_4ec){var posX=_4ec.x,posY=_4ec.y,offX=this.offsetX||0,offY=this.offsetY||0,_4ed=0,_4ee=0,_4ef=_4b2.position(this.map.container,true),_4f0=_4ef.w,_4f1=_4ef.h,_4f2="Left",_4f3="bottom",_4f4=_4b2.getContentBox(this._positioner),_4f5=_4f4.w/2,_4f6=_4f4.h/2,maxH=_4b3.get(this._sizers[0],"height")+this._maxHeight+_4b3.get(this._sizers[2],"height"),_4f7=maxH/2,xmin=0,ymin=0,xmax=_4f0,ymax=_4f1,_4f8=posX,_4f9=posY,_4fa=this.anchor.toLowerCase();if(_4fa==="auto"){var _4fb=win.getBox;if(_4fb){_4fb=_4fb();xmin=Math.max(_4fb.l,_4ef.x);xmax=Math.min(_4fb.l+_4fb.w,_4ef.x+_4ef.w);ymin=Math.max(_4fb.t,_4ef.y);ymax=Math.min(_4fb.t+_4fb.h,_4ef.y+_4ef.h);_4f8+=_4ef.x;_4f9+=_4ef.y;}var _4fc=((_4f9-ymin)>_4f7),_4fd=((ymax-_4f9)>=_4f7),_4fe=((xmax-_4f8)>=_4f5),_4ff=((_4f8-xmin)>_4f5),_500=((_4f9-ymin)>=maxH),_501=((ymax-_4f9)>=maxH),_502=((xmax-_4f8)>=_4f4.w),_503=((_4f8-xmin)>=_4f4.w);if(_4fc&&_4fd){if(_502){_4f3="";_4f2="Left";}else{if(_503){_4f3="";_4f2="Right";}}}if(_4f2&&_4f3){if(_4ff&&_4fe){if(_500){_4f2="";_4f3="bottom";}else{if(_501){_4f2="";_4f3="top";}}}}if(_4f2&&_4f3){if(_502&&_500){_4f2="Left";_4f3="bottom";}else{if(_502&&_501){_4f2="Left";_4f3="top";}else{if(_503&&_501){_4f2="Right";_4f3="top";}else{if(_503&&_500){_4f2="Right";_4f3="bottom";}}}}}}else{_4f3=_4f2="";if(_4fa.indexOf("top")!==-1){_4f3="bottom";}else{if(_4fa.indexOf("bottom")!==-1){_4f3="top";}}if(_4fa.indexOf("left")!==-1){_4f2="Right";}else{if(_4fa.indexOf("right")!==-1){_4f2="Left";}}}var _504=_4f3+_4f2;switch(_504){case "top":case "bottom":_4ee=14;break;case "Left":case "Right":_4ed=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":_4ee=45;break;}_4b3.set(this.domNode,{left:posX+"px",top:posY+"px",right:null,bottom:null});var _505={left:null,right:null,top:null,bottom:null};if(_4f2){_505[_4f2.toLowerCase()]=(_4ed+offX)+"px";}else{_505.left=(-_4f5)+"px";}if(_4f3){_505[_4f3]=(_4ee+offY)+"px";}else{_505.top=(-_4f6)+"px";}_4b3.set(this._positioner,_505);this._showPointer(_504);},_showPointer:function(_506){_4b0.remove(this._pointer,["top","bottom","right","left","topLeft","topRight","bottomRight","bottomLeft","hidden"]);_4b0.remove(this._outerPointer,["right","left","hidden"]);if(_506==="Right"||_506==="Left"){_506=_506.toLowerCase();_4b0.add(this._outerPointer,_506);}else{_4b0.add(this._pointer,_506);}},_setPagerCallbacks:function(_507,_508,_509){if(!this.pagingControls){return;}if(_507===this&&(!this._pagerScope||this._pagerScope===this)){return;}if(_507===this._pagerScope){return;}this._pagerScope=_507;if(_507===this){_508=this.selectPrevious;_509=this.selectNext;}var _50a=this._eventConnections;_4ab.disconnect(_50a[1]);_4ab.disconnect(_50a[2]);if(_508){_50a[1]=_4ab.connect(this._prevFeatureButton,"onclick",_507,_508);}if(_509){_50a[2]=_4ab.connect(this._nextFeatureButton,"onclick",_507,_509);}},_getLocation:function(_50b){var map=this.map,_50c,_50d,_50e=0,_50f,_510=_50b&&_50b.geometry;if(_510){switch(_510.type){case "point":_50c=_510;break;case "multipoint":_50c=_510.getPoint(0);_50d=_510.getExtent();break;case "polyline":_50c=_510.getPoint(0,0);_50d=_510.getExtent();if(map._getFrameWidth()!==-1){_4aa.forEach(_510.paths,function(path){var _511={"paths":[path,map.spatialReference]},_512=new _4b9(_511),_513=_512.getExtent(),_514=Math.abs(_513.ymax-_513.ymin),_515=Math.abs(_513.xmax-_513.xmin),_516=(_515>_514)?_515:_514;if(_516>_50e){_50e=_516;_50f=_513;}});_50f.spatialReference=_50d.spatialReference;_50d=_50f;}break;case "polygon":_50c=_510.getPoint(0,0);_50d=_510.getExtent();if(map._getFrameWidth()!==-1){_4aa.forEach(_510.rings,function(ring){var _517={"rings":[ring,map.spatialReference]},_518=new _4ba(_517),_519=_518.getExtent(),_51a=Math.abs(_519.ymax-_519.ymin),_51b=Math.abs(_519.xmax-_519.xmin),_51c=(_51b>_51a)?_51b:_51a;if(_51c>_50e){_50e=_51c;_50f=_519;}});_50f.spatialReference=_50d.spatialReference;_50d=_50f;}break;}}return [_50c,_50d];},_zoomToFeature:function(){var _51d=this.features,ptr=this.selectedIndex,map=this.map;if(_51d){var _51e=this._getLocation(_51d[ptr]),_51f=_51e[0],_520=_51e[1];if(!_51f){_51f=this._location;}if(!_520||!_520.intersects(this._location)){this._location=_51f;}if(_520){map.setExtent(_520,true);}else{var _521=map.getNumLevels(),_522=map.getLevel(),last=map.getMaxZoom(),_523=this.zoomFactor||1;if(_521>0){if(_522===last){return;}var _524=_522+_523;if(_524>last){_524=last;}map.navigationManager._wheelZoom({value:(_524-_522),mapPoint:_51f},true);}else{map.navigationManager._wheelZoom({value:(1/Math.pow(2,_523))*2,mapPoint:_51f},true);}}}},_updatePagingControls:function(){var prev=this._prevFeatureButton,next=this._nextFeatureButton,ptr=this.selectedIndex,_525=this.features?this.features.length:0;if(this.pagingControls&&_525>1){if(ptr===0){_4b0.add(prev,"hidden");}else{_4b0.remove(prev,"hidden");}if(ptr===(_525-1)){_4b0.add(next,"hidden");}else{_4b0.remove(next,"hidden");}}else{_4b0.add(prev,"hidden");_4b0.add(next,"hidden");}},_updatePagingInfo:function(){var _526=this.features?this.features.length:0,nls=this._nls,_527="&nbsp;",_528,_529,_52a;if(this.pagingInfo&&_526>1&&nls.NLS_pagingInfo){_527=_4b6.substitute({index:this.selectedIndex+1,total:_526},nls.NLS_pagingInfo);}if(_526){_528=this.getSelectedFeature();_529=_528.getInfoTemplate();_52a=_528.getTitle();if((!_529||/esri\.InfoTemplate/.test(_529.declaredClass)||!this.titleInBody)&&_52a){_527=_52a+((_527==="&nbsp;")?"":(" "+_527));}}this.setTitle(_527);},_updateUI:function(){if(!this.popupWindow){return;}var _52b="&nbsp;",ptr=this.selectedIndex,_52c=this.features,_52d=this.deferreds,_52e=_52c?_52c.length:0,_52f=this._spinner,_530=this._actionList,nls=this._nls;this._updatePagingControls();this._updatePagingInfo();if(_52d&&_52d.length){if(_52c){_4b0.remove(_52f,"hidden");}else{this.setContent("<div style='text-align: center;'>"+nls.NLS_searching+"...</div>");}}else{_4b0.add(_52f,"hidden");if(!_52e){this.setContent("<div style='text-align: center;'>"+nls.NLS_noInfo+".</div>");}}if(_52e){_4b0.remove(_530,"hidden");}else{_4b0.add(_530,"hidden");}}});if(has("extend-esri")){lang.setObject("dijit.Popup",_4be,_4b5);}return _4be;});},"esri/symbols/Font":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","esri/kernel","esri/lang"],function(_531,lang,has,_532,_533,_534){var _535={STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"};var Font=_531(null,{declaredClass:"esri.symbol.Font",constructor:function(json,_536,_537,_538,_539){if(json){if(lang.isObject(json)){lang.mixin(this,json);}else{this.size=json;if(_536!==undefined){this.style=_536;}if(_537!==undefined){this.variant=_537;}if(_538!==undefined){this.weight=_538;}if(_539!==undefined){this.family=_539;}}}else{lang.mixin(this,_532.defaultFont);}if(has("ie")<9&&this.size&&lang.isString(this.size)&&this.size.indexOf("em")>-1){this.size=_532.pt2px(parseFloat(this.size)*12)+"px";}},setSize:function(size){this.size=size;return this;},setStyle:function(_53a){this.style=_53a;return this;},setVariant:function(_53b){this.variant=_53b;return this;},setWeight:function(_53c){this.weight=_53c;return this;},setFamily:function(_53d){this.family=_53d;return this;},toJson:function(){return _534.fixJson({size:this.size,style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family});}});lang.mixin(Font,_535);if(has("extend-esri")){lang.setObject("symbol.Font",Font,_533);}return Font;});},"esri/PointerEvents":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/Evented","esri/geometry/Point","esri/geometry/ScreenPoint"],function(_53e,lang,_53f,has,_540,_541,_542,_543){var _544=_53e([_541],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:has("mac")!==-1?1:3,wheelDivisor:has("chrome")<2?360:120,preventPageScroll:true,constructor:function(node,_545){this.node=node;lang.mixin(this,_545);if(node.style.msTouchAction!==undefined){node.style.msTouchAction="none";}else{if(node.style.touchAction!==undefined){node.style.touchAction="none";}}var isMS=navigator.msPointerEnabled,_546=function(e){e.preventDefault();};node.addEventListener("selectstart",_546,false);node.addEventListener("dragstart",_546,false);this._pointerDown=lang.hitch(this,this._pointerDown);this._pointerMove=lang.hitch(this,this._pointerMove);this._pointerUp=lang.hitch(this,this._pointerUp);this._pointerCancel=lang.hitch(this,this._pointerCancel);node.addEventListener(isMS?"MSPointerDown":"pointerdown",this._pointerDown,false);node.addEventListener(isMS?"MSPointerMove":"pointermove",this._pointerMove,false);node.addEventListener(isMS?"MSPointerUp":"pointerup",this._pointerUp,false);node.addEventListener(isMS?"MSPointerCancel":"pointercancel",this._pointerCancel,false);if(this.map){this._mouseOver=lang.hitch(this,this._mouseOver);this._mouseOut=lang.hitch(this,this._mouseOut);this._mouseDown=lang.hitch(this,this._mouseDown);this._mouseUp=lang.hitch(this,this._mouseUp);this._mouseClick=lang.hitch(this,this._mouseClick);this._mouseWheel=lang.hitch(this,this._mouseWheel);node.addEventListener("mouseover",this._mouseOver,false);node.addEventListener("mouseout",this._mouseOut,false);node.addEventListener("mousedown",this._mouseDown,false);node.addEventListener("mouseup",this._mouseUp,false);node.addEventListener("click",this._mouseClick,false);node.addEventListener("mousewheel",this._mouseWheel,false);}this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=false;},_pointerDown:function(_547){var _548=this._touches,node=this.node,_549=_547.target,pid=_547.pointerId,ids=this._touchIds,info,_54a,_54b,ts=(new Date()).getTime();info=(_548[pid]={});info.pointerId=pid;info.startX=info.pageX=_547.pageX;info.startY=info.pageY=_547.pageY;info.startTS=ts;ids.push(pid);this._numTouches++;if(_549.setPointerCapture){_549.setPointerCapture(pid);}else{if(_549.msSetPointerCapture){_549.msSetPointerCapture(pid);}}_54a=_548[ids[0]];_54b=_548[ids[1]];if(this._numTouches===1){}else{if(this._numTouches===2){if(this._swipeActive){if(_54a){_54a.startX=_54a.pageX;_54a.startY=_54a.pageY;_54a.moved=false;}this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_547,_54a));}}else{if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_547,_54a));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_547,[_54a,_54b]));}}}}},_pointerMove:function(_54c){var _54d=this._touches,ids=this._touchIds,info,dx,dy;info=_54d[_54c.pointerId];if(!info||(info.pageX===_54c.pageX&&info.pageY===_54c.pageY)){return;}info.pageX=_54c.pageX;info.pageY=_54c.pageY;dx=Math.abs(info.pageX-info.startX);dy=Math.abs(info.pageY-info.startY);if(!info.moved&&((dx>=this.tapRadius)||(dy>=this.tapRadius))){info.moved=info.absMoved=true;}if(this._numTouches===1){if(!this._swipeActive){if(info.moved){this._swipeActive=true;this._fire("onSwipeStart",this._processTouchEvent(_54c,_54c));}}else{this._fire("onSwipeMove",this._processTouchEvent(_54c,_54c));}}else{if(this._numTouches===2){var _54e=_54d[ids[0]],_54f=_54d[ids[1]];if(!this._pinchActive){if(_54e.moved||_54f.moved){var _550=Math.abs(_54e.startX-_54f.startX),_551=Math.abs(_54e.startY-_54f.startY),_552=Math.sqrt((_550*_550)+(_551*_551)),_553=Math.abs(_54e.pageX-_54f.pageX),_554=Math.abs(_54e.pageY-_54f.pageY),_555=Math.sqrt((_553*_553)+(_554*_554));if(Math.abs(_555-_552)>=(2*this.tapRadius)){this._pinchActive=true;this._fire("onPinchStart",this._processTouchEvent(_54c,[_54e,_54f]));}}}else{this._fire("onPinchMove",this._processTouchEvent(_54c,[_54e,_54f]));}}}},_pointerUp:function(_556){var _557=this._touches,info,node=this.node,_558=_556.target,pid=_556.pointerId,ids=this._touchIds,_559=ids.slice(0),_55a=_53f.map(_559,function(id){return _557[id];}),ts=(new Date()).getTime();info=_557[pid];if(!info){return;}info.pageX=_556.pageX;info.pageY=_556.pageY;info.endTS=ts;this._numTouches--;if(_558.releasePointerCapture){_558.releasePointerCapture(pid);}else{if(_558.msReleasePointerCapture){_558.msReleasePointerCapture(pid);}}if(this._numTouches===0){this._touches={};this._touchIds=[];if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_556,_556));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_556,_556));}else{if(!info.absMoved){var _55b=Infinity,_55c=-Infinity,_55d=Infinity,_55e=-Infinity,_55f=this.tapStartTolerance,i;for(i=0;i<_559.length;i++){info=_55a[i];if(info.startTS<_55b){_55b=info.startTS;}if(info.startTS>_55c){_55c=info.startTS;}if(info.endTS<_55d){_55d=info.endTS;}if(info.endTS>_55e){_55e=info.endTS;}}if(Math.abs(_55c-_55b)<=_55f&&Math.abs(_55e-_55d)<=_55f){this._basicTap(_556,_55a);}}}}}else{if(this._numTouches===1){if(this._pinchActive){ids.splice(_53f.indexOf(ids,_556.pointerId),1);delete _557[_556.pointerId];var _560=_557[ids[0]];_560.startX=_560.pageX;_560.startY=_560.pageY;_560.moved=false;if(document.msElementsFromPoint){var _561=document.msElementsFromPoint(_560.pageX,_560.pageY),_562=_53f.some(_561,function(_563){return (_563===node);});if(!_562){this._touches={};this._touchIds=[];this._numTouches=0;}}this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_556,[_556,_560]));}}}},_pointerCancel:function(_564){if(this._numTouches){this._pointerUp(_564);}},_basicTap:function(_565,_566){var ts=(new Date()).getTime(),self=this;_565=this._processTouchEvent(_565,_566);this._taps.push({touchInfos:_566,ts:ts,event:_565});if(this._taps.length>2){this._taps.shift();}this._fire("onBasicTap",_565);clearTimeout(this._tapTimer);if(this._immediate){this._analyzeTap(true);}else{var _567=(this._taps.length===2)?(this.doubleTapDuration/2):this.doubleTapDuration;this._tapTimer=setTimeout(function(){var that=self;self=null;clearTimeout(that._tapTimer);that._analyzeTap();},_567);}},_analyzeTap:function(_568){var taps=this._taps,_569=taps[0],_56a=taps[1],_56b=_569.touchInfos,_56c=_56a&&_56a.touchInfos;if(!taps.length){return;}if(!_568){this._taps=[];}if(_569&&_56a){if(_56b.length===_56c.length){if((_56a.ts-_569.ts)<=this.doubleTapDuration){var _56d,dx,dy;if(_56b.length===1){dx=Math.abs(_56b[0].startX-_56c[0].startX);dy=Math.abs(_56b[0].startY-_56c[0].startY);_56d=(dx<=this.doubleTapRadius)&&(dy<=this.doubleTapRadius);}else{_56d=true;}if(_56d){this._processedDoubleTap(taps);}else{this._processedTap(_56a);}}else{this._processedTap(_56a);}}else{this._processedTap(_56a);}}else{this._processedTap(_569||_56a);}},_processedTap:function(tap){var _56e=tap.event;this._fire("onProcessedTap",_56e);if(tap.touchInfos.length===1){this._fire("onTap",this._fixEvent(_56e));}else{if(tap.touchInfos.length===2){this._fire("onTwoFingerTap",_56e);}}},_processedDoubleTap:function(taps){var _56f=(taps[1].touchInfos.length===1),_570,evts;if(_56f){_570=[this._fixEvent(taps[0].event),this._fixEvent(taps[1].event)];_570[1].relatedEvents=_570;}evts=[taps[0].event,taps[1].event];evts[1].relatedEvents=evts;this._fire("onProcessedDoubleTap",evts[1]);if(_56f){this._fire("onDoubleTap",_570[1]);this._fire("onDblClick",_570[1]);}},_mouseOver:function(_571){this._fire("onMouseOver",this._processMouseEvent(_571));},_mouseOut:function(_572){this._fire("onMouseOut",this._processMouseEvent(_572));},_mouseDown:function(_573){this._downX=_573.pageX;this._downY=_573.pageY;this._fire("onMouseDown",this._processMouseEvent(_573));},_mouseUp:function(_574){this._fire("onMouseUp",this._processMouseEvent(_574));},_mouseClick:function(_575){if((Math.abs(_575.pageX-this._downX)<=this.clickRadius)&&(Math.abs(_575.pageY-this._downY)<=this.clickRadius)){this._fire("onClick",this._processMouseEvent(_575));}},_mouseWheel:function(_576){var map=this.map,_577=map?(map.isScrollWheelZoom||map.isScrollWheelPan):this.preventPageScroll;if(_577){_576.preventDefault();}var _578=has("ie")||has("webkit")?_576.wheelDelta/this.wheelDivisor:-_576.detail/this.mozWheelDivisor,_579=Math.abs(_578);if(_579<=this.minWheelValue){_579=this.minWheelValue;}else{_579=this.maxWheelValue;}_576.value=_578<0?-_579:_579;this._fire("onMouseWheel",this._processMouseEvent(_576));},_fire:function(_57a,evt){if(this[_57a]){this[_57a](evt);}if(this.map){if(this.map[_57a]){this.map[_57a](evt);}}},_fixEvent:function(_57b){var _57c={},i;for(i in _57b){_57c[i]=_57b[i];}if(this.map){_57c.screenPoint=_57c.screenPoints[0];_57c.mapPoint=_57c.mapPoints[0];}return _57c;},_processTouchEvent:function(evt,_57d){var map=this.map,pos=map&&map.position,_57e=0;if(pos&&_57d){if(lang.isArray(_57d)){var i,_57f;evt.screenPoints=[];evt.mapPoints=[];for(i=0;i<_57d.length;i++){if(_57d[i]){_57f=new _543(_57d[i].pageX-pos.x,_57d[i].pageY-pos.y);evt.screenPoints.push(_57f);evt.mapPoints.push(map.extent?map.toMap(_57f):new _542());}else{_57e++;}}}else{evt.screenPoint=new _543(_57d.pageX-pos.x,_57d.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _542();}}evt.numPoints=_57d?(lang.isArray(_57d)?(_57d.length-_57e):1):0;return evt;},_processMouseEvent:function(evt){var map=this.map,pos=map&&map.position;if(pos){evt.screenPoint=new _543(evt.pageX-pos.x,evt.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _542();}return evt;},setImmediateTap:function(_580){this._immediate=_580;},destroy:function(){var node=this.node;node.removeEventListener("MSPointerDown",this._pointerDown,false);node.removeEventListener("MSPointerMove",this._pointerMove,false);node.removeEventListener("MSPointerUp",this._pointerUp,false);node.removeEventListener("MSPointerCancel",this._pointerCancel,false);if(this.map){node.removeEventListener("mouseover",this._mouseOver,false);node.removeEventListener("mouseout",this._mouseOut,false);node.removeEventListener("mousedown",this._mouseDown,false);node.removeEventListener("mouseup",this._mouseUp,false);node.removeEventListener("click",this._mouseClick,false);}clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null;}});if(has("extend-esri")){_540.PointerEvents=_544;}return _544;});},"esri/geometry":function(){define(["esri/units","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Multipoint","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/geometry/Rect","esri/geometry/geodesicUtils","esri/geometry/jsonUtils","esri/geometry/mathUtils","esri/geometry/normalizeUtils","esri/geometry/scaleUtils","esri/geometry/screenUtils","esri/geometry/webMercatorUtils"],function(_581,_582,_583,_584,_585,_586,_587,_588,_589,Rect,_58a,_58b,_58c,_58d,_58e,_58f,_590){return {units:_581,SpatialReference:_582,Geometry:_583,Point:_584,ScreenPoint:_585,Multipoint:_586,Polyline:_587,Polygon:_588,Extent:_589,Rect:Rect,geodesicUtils:_58a,jsonUtils:_58b,mathUtils:_58c,normalizeUtils:_58d,scaleUtils:_58e,screenUtils:_58f,webMercatorUtils:_590};});},"esri/renderers/TimeRampAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","esri/kernel","esri/symbols/jsonUtils","esri/renderers/SymbolAger"],function(_591,lang,_592,has,_593,_594,_595){var _596=_591(_595,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(_597,_598,_599){this.colorRange=_597;this.sizeRange=_598;this.alphaRange=_599;},getAgedSymbol:function(_59a,_59b){var _59c=_59b.getLayer(),_59d=_59b.attributes;_59a=_594.fromJson(_59a.toJson());var _59e=_59c._map.timeExtent;var _59f=_59e.startTime,_5a0=_59e.endTime;if(!_59f||!_5a0){return _59a;}_59f=_59f.getTime();_5a0=_5a0.getTime();var _5a1=new Date(_59d[_59c._startTimeField]);_5a1=_5a1.getTime();if(_5a1<_59f){_5a1=_59f;}var _5a2=(_5a0===_59f)?1:(_5a1-_59f)/(_5a0-_59f);var _5a3=this.sizeRange,_5a4,_5a5;if(_5a3){var from=_5a3[0],to=_5a3[1];_5a5=Math.abs(to-from)*_5a2;this._setSymbolSize(_59a,(from<to)?(from+_5a5):(from-_5a5));}_5a3=this.colorRange;if(_5a3){var _5a6=_5a3[0],_5a7=_5a3[1],_5a8=Math.round;_5a4=new _592();var _5a9=_5a6.r,toR=_5a7.r;_5a5=Math.abs(toR-_5a9)*_5a2;_5a4.r=_5a8((_5a9<toR)?(_5a9+_5a5):(_5a9-_5a5));var _5aa=_5a6.g,toG=_5a7.g;_5a5=Math.abs(toG-_5aa)*_5a2;_5a4.g=_5a8((_5aa<toG)?(_5aa+_5a5):(_5aa-_5a5));var _5ab=_5a6.b,toB=_5a7.b;_5a5=Math.abs(toB-_5ab)*_5a2;_5a4.b=_5a8((_5ab<toB)?(_5ab+_5a5):(_5ab-_5a5));var _5ac=_5a6.a,toA=_5a7.a;_5a5=Math.abs(toA-_5ac)*_5a2;_5a4.a=(_5ac<toA)?(_5ac+_5a5):(_5ac-_5a5);_59a.setColor(_5a4);}_5a4=_59a.color;_5a3=this.alphaRange;if(_5a3&&_5a4){var _5ad=_5a3[0],_5ae=_5a3[1];_5a5=Math.abs(_5ae-_5ad)*_5a2;_5a4.a=(_5ad<_5ae)?(_5ad+_5a5):(_5ad-_5a5);}return _59a;}});if(has("extend-esri")){lang.setObject("renderer.TimeRampAger",_596,_593);}return _596;});},"esri/layers/MapImage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/domUtils","esri/geometry/Extent"],function(_5af,lang,has,_5b0,_5b1,_5b2){var _5b3=_5af(null,{declaredClass:"esri.layers.MapImage",constructor:function(json){lang.mixin(this,json);this.extent=new _5b2(this.extent);},visible:true,getLayer:function(){return this._layer;},getNode:function(){return this._node;},show:function(){if(!this.visible){this.visible=true;var node=this._node,_5b4=this._layer,div;if(node){div=_5b4&&_5b4._div;if(div){if(!_5b4.suspended){_5b4._setPos(node,div._left,div._top);}(_5b4._active||div).appendChild(node);}_5b1.show(node);}}},hide:function(){if(this.visible){this.visible=false;var node=this._node;if(node){_5b1.hide(node);if(node.parentNode){node.parentNode.removeChild(node);}}}}});if(has("extend-esri")){lang.setObject("layers.MapImage",_5b3,_5b0);}return _5b3;});},"esri/layers/OpenStreetMapLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/urlUtils","esri/SpatialReference","esri/geometry/Extent","esri/layers/TiledMapServiceLayer","esri/layers/TileInfo"],function(_5b5,lang,has,_5b6,_5b7,_5b8,_5b9,_5ba,_5bb){var OSM=_5b5(_5ba,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(_5bc){this.spatialReference=new _5b8({wkid:102100});this.tileInfo=new _5bb({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.fullExtent=new _5b9({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new _5b9({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=(_5bc&&_5bc.tileServers)||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=_5bc?_5bc.displayLevels:null;this.copyright=(_5bc&&_5bc.copyright)||"Map data &copy; OpenStreetMap contributors, CC-BY-SA";this.registerConnectEvents("esri.layers.OpenStreetMapLayer",true);this.loaded=true;this.onLoad(this);var _5bd=_5bc&&_5bc.loadCallback;if(_5bd){_5bd(this);}},getTileUrl:function(_5be,row,col){return _5b7.addProxy(this.tileServers[row%this.serversLength]+"/"+_5be+"/"+col+"/"+row+".png");}});if(has("extend-esri")){lang.setObject("layers.OpenStreetMapLayer",OSM,_5b6);}return OSM;});},"esri/renderers/SimpleRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/Renderer"],function(_5bf,lang,has,_5c0,_5c1,_5c2,_5c3){var _5c4=_5bf(_5c3,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(sym){if(sym&&!sym.declaredClass){var json=sym;sym=json.symbol;if(sym){this.symbol=_5c2.fromJson(sym);}this.label=json.label;this.description=json.description;}else{this.symbol=sym;}},getSymbol:function(_5c5){return this.symbol;},toJson:function(){return _5c1.fixJson({type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});}});if(has("extend-esri")){lang.setObject("renderer.SimpleRenderer",_5c4,_5c0);}return _5c4;});},"esri/urlUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/url","dojo/io-query","esri/kernel","esri/config","esri/sniff"],function(lang,_5c6,Url,ioq,_5c7,_5c8,has){var _5c9={},_5ca=_5c8.defaults.io;_5c9.urlToObject=function(url){var iq=url.indexOf("?");if(iq===-1){return {path:url,query:null};}else{return {path:url.substring(0,iq),query:ioq.queryToObject(url.substring(iq+1))};}};_5c9.getProxyUrl=function(_5cb){var _5cc=lang.isString(_5cb)?(lang.trim(_5cb).toLowerCase().indexOf("https:")===0):_5cb,_5cd=_5ca.proxyUrl,_5ce,_5cf,_5d0,_5d1,_5d2="esri.config.defaults.io.proxyUrl is not set.";if(lang.isString(_5cb)){_5d1=_5c9.getProxyRule(_5cb);if(_5d1){_5cd=_5d1.proxyUrl;}}if(!_5cd){console.log(_5d2);throw new Error(_5d2);}if(_5cc&&window.location.href.toLowerCase().indexOf("https:")!==0){_5cf=_5cd;if(_5cf.toLowerCase().indexOf("http")!==0){_5cf=_5c9.getAbsoluteUrl(_5cf);}_5cf=_5cf.replace(/^http:/i,"https:");if(_5c9.canUseXhr(_5cf)){_5cd=_5cf;_5d0=1;}}_5ce=_5c9.urlToObject(_5cd);_5ce._xo=_5d0;return _5ce;};_5c9.addProxy=function(url){var _5d3=_5c9.getProxyRule(url),_5d4,_5d5,_5d6;if(_5d3){_5d4=_5c9.urlToObject(_5d3.proxyUrl);}else{if(_5ca.alwaysUseProxy){_5d4=_5c9.getProxyUrl();}}if(_5d4){_5d5=_5c9.urlToObject(url);url=_5d4.path+"?"+_5d5.path;_5d6=ioq.objectToQuery(lang.mixin(_5d4.query||{},_5d5.query));if(_5d6){url+=("?"+_5d6);}}return url;};_5c9.addProxyRule=function(rule){var _5d7=rule.urlPrefix=(_5c9.urlToObject(rule.urlPrefix).path).replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),_5d8=_5ca.proxyRules,i,len=_5d8.length,_5d9,_5da=len;for(i=0;i<len;i++){_5d9=_5d8[i].urlPrefix;if(_5d7.indexOf(_5d9)===0){if(_5d7.length===_5d9){return -1;}else{_5da=i;break;}}else{if(_5d9.indexOf(_5d7)===0){_5da=i+1;}}}_5d8.splice(_5da,0,rule);return _5da;};_5c9.getProxyRule=function(url){var _5db=_5ca.proxyRules,i,len=_5db.length,path=(_5c9.urlToObject(url).path).replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),_5dc;for(i=0;i<len;i++){if(path.indexOf(_5db[i].urlPrefix)===0){_5dc=_5db[i];break;}}return _5dc;};_5c9.hasSameOrigin=function(url1,url2,_5dd){url1=url1.toLowerCase();url2=url2.toLowerCase();var _5de=window.location.href.toLowerCase();url1=url1.indexOf("http")===0?new Url(url1):(_5de=new Url(_5de));url2=url2.indexOf("http")===0?new Url(url2):(lang.isString(_5de)?new Url(_5de):_5de);return ((_5dd||(url1.scheme===url2.scheme))&&url1.host===url2.host&&url1.port===url2.port);};_5c9.canUseXhr=function(url,_5df){var _5e0=false,_5e1=_5c9.hasSameOrigin,_5e2=_5ca.corsEnabledServers,_5e3,_5e4=-1;if(has("esri-cors")&&_5e2&&_5e2.length){_5e0=_5c6.some(_5e2,function(_5e5,idx){_5e3=(lang.trim(_5e5).toLowerCase().indexOf("http")!==0);if(_5e1(url,_5e3?("http://"+_5e5):_5e5)||(_5e3&&_5e1(url,"https://"+_5e5))){_5e4=idx;return true;}return false;});}return _5df?_5e4:_5e0;};_5c9.getAbsoluteUrl=function(url){if(lang.isString(url)&&url.indexOf("http://")===-1&&url.indexOf("https://")===-1){if(url.indexOf("//")===0){return window.location.protocol+url;}else{if(url.indexOf("/")===0){return window.location.protocol+"//"+window.location.host+url;}else{return _5c7._appBaseUrl+url;}}}return url;};if(has("extend-esri")){lang.mixin(_5c7,_5c9);_5c7._getProxyUrl=_5c9.getProxyUrl;_5c7._getProxiedUrl=_5c9.addProxy;_5c7._hasSameOrigin=_5c9.hasSameOrigin;_5c7._canDoXOXHR=_5c9.canUseXhr;_5c7._getAbsoluteUrl=_5c9.getAbsoluteUrl;}return _5c9;});},"esri/geometry/Extent":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/webMercatorUtils","esri/geometry/mathUtils"],function(_5e6,_5e7,lang,has,_5e8,_5e9,_5ea,_5eb,_5ec,_5ed,_5ee){var _5ef={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var _5f0=_5e6(_5eb,{declaredClass:"esri.geometry.Extent",constructor:function(xmin,ymin,xmax,ymax,_5f1){lang.mixin(this,_5ef);if(lang.isObject(xmin)){lang.mixin(this,xmin);if(this.spatialReference){this.spatialReference=new _5ea(this.spatialReference);}}else{this.update(xmin,ymin,xmax,ymax,_5f1);}this.verifySR();},getWidth:function(){return Math.abs(this.xmax-this.xmin);},getHeight:function(){return Math.abs(this.ymax-this.ymin);},getCenter:function(){return new _5ec((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference);},centerAt:function(_5f2){var _5f3=this.getCenter(),dx=_5f2.x-_5f3.x,dy=_5f2.y-_5f3.y;return new _5f0(this.xmin+dx,this.ymin+dy,this.xmax+dx,this.ymax+dy,this.spatialReference);},update:function(xmin,ymin,xmax,ymax,_5f4){this.xmin=xmin;this.ymin=ymin;this.xmax=xmax;this.ymax=ymax;this.spatialReference=_5f4;return this;},offset:function(ox,oy){return new _5f0(this.xmin+ox,this.ymin+oy,this.xmax+ox,this.ymax+oy,this.spatialReference);},expand:function(_5f5){var _5f6=(1-_5f5)/2,_5f7=this.getWidth()*_5f6,_5f8=this.getHeight()*_5f6;return new _5f0(this.xmin+_5f7,this.ymin+_5f8,this.xmax-_5f7,this.ymax-_5f8,this.spatialReference);},intersects:function(_5f9){var type=_5f9.type,_5fa=this.spatialReference,_5fb=_5f9.spatialReference;if(_5fa&&_5fb&&!_5fa.equals(_5fb)&&_5fa._canProject(_5fb)){_5f9=_5fa.isWebMercator()?_5ed.geographicToWebMercator(_5f9):_5ed.webMercatorToGeographic(_5f9,true);}switch(type){case "point":return this.contains(_5f9);case "multipoint":return this._intersectsMultipoint(_5f9);case "extent":return this._intersectsExtent(_5f9);case "polygon":return this._intersectsPolygon(_5f9);case "polyline":return this._intersectsPolyline(_5f9);}},_intersectsMultipoint:function(_5fc){var len=_5fc.points.length,i;for(i=0;i<len;i++){if(this.contains(_5fc.getPoint(i))){return true;}}return false;},_intersectsExtent:function(_5fd){var xmin,ymin,_5fe,_5ff,_600=false;if(this.xmin<=_5fd.xmin){xmin=_5fd.xmin;if(this.xmax<xmin){_600=true;}else{_5fe=Math.min(this.xmax,_5fd.xmax)-xmin;}}else{xmin=this.xmin;if(_5fd.xmax<xmin){_600=true;}else{_5fe=Math.min(this.xmax,_5fd.xmax)-xmin;}}if(this.ymin<=_5fd.ymin){ymin=_5fd.ymin;if(this.ymax<ymin){_600=true;}else{_5ff=Math.min(this.ymax,_5fd.ymax)-ymin;}}else{ymin=this.ymin;if(_5fd.ymax<ymin){_600=true;}else{_5ff=Math.min(this.ymax,_5fd.ymax)-ymin;}}if(_600){return null;}return new _5f0(xmin,ymin,xmin+_5fe,ymin+_5ff,this.spatialReference);},_intersectsPolygon:function(_601){var _602=[this.xmin,this.ymax],_603=[this.xmax,this.ymax],_604=[this.xmin,this.ymin],_605=[this.xmax,this.ymin],_606=[_602,_603,_604,_605],_607=[[_604,_602],[_602,_603],[_603,_605],[_605,_604]],i,j,_608=_601.rings,_609=_608.length,ring,len,_60a=new _5ec(0,0,this.spatialReference);len=_606.length;for(i=0;i<len;i++){_60a.update(_606[i][0],_606[i][1]);if(_601.contains(_60a)){return true;}}_60a.setSpatialReference(_601.spatialReference);var pi,pj;for(i=0;i<_609;i++){ring=_608[i];len=ring.length;if(!len){continue;}pi=ring[0];_60a.update(pi[0],pi[1]);if(this.contains(_60a)){return true;}for(j=1;j<len;j++){pj=ring[j];_60a.update(pj[0],pj[1]);if(this.contains(_60a)||this._intersectsLine([pi,pj],_607)){return true;}pi=pj;}}return false;},_intersectsPolyline:function(_60b){var _60c=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]];var i,j,_60d=_60b.paths,_60e=_60d.length,path,len;var pi,pj,_60f=new _5ec(0,0,_60b.spatialReference);for(i=0;i<_60e;i++){path=_60d[i];len=path.length;if(!len){continue;}pi=path[0];_60f.update(pi[0],pi[1]);if(this.contains(_60f)){return true;}for(j=1;j<len;j++){pj=path[j];_60f.update(pj[0],pj[1]);if(this.contains(_60f)||this._intersectsLine([pi,pj],_60c)){return true;}pi=pj;}}return false;},_intersectsLine:function(line,_610){var _611=_5ee._getLineIntersection2,i,len=_610.length;for(i=0;i<len;i++){if(_611(line,_610[i])){return true;}}return false;},contains:function(_612){if(!_612){return false;}var type=_612.type;if(type==="point"){var _613=this.spatialReference,_614=_612.spatialReference,_615,x=_612.x,y=_612.y;if(_613&&_614&&!_613.equals(_614)&&_613._canProject(_614)){_615=_613.isWebMercator()?_5ec.lngLatToXY(x,y):_5ec.xyToLngLat(x,y,true);x=_615[0];y=_615[1];}return (x>=this.xmin&&x<=this.xmax&&y>=this.ymin&&y<=this.ymax);}else{if(type==="extent"){return this._containsExtent(_612);}}return false;},_containsExtent:function(_616){var xmin=_616.xmin,ymin=_616.ymin,xmax=_616.xmax,ymax=_616.ymax,sr=_616.spatialReference,pt1=new _5ec(xmin,ymin,sr),pt2=new _5ec(xmin,ymax,sr),pt3=new _5ec(xmax,ymax,sr),pt4=new _5ec(xmax,ymin,sr);if(this.contains(pt1)&&this.contains(pt2)&&this.contains(pt3)&&this.contains(pt4)){return true;}return false;},union:function(_617){return new _5f0(Math.min(this.xmin,_617.xmin),Math.min(this.ymin,_617.ymin),Math.max(this.xmax,_617.xmax),Math.max(this.ymax,_617.ymax),this.spatialReference);},getExtent:function(){var sr=this.spatialReference;return new _5f0(this.xmin,this.ymin,this.xmax,this.ymax,sr&&new _5ea(sr.toJson()));},_shiftCM:function(info){if(!this._shifted){var _618=new _5f0(this.toJson()),sr=_618.spatialReference;info=info||sr._getInfo();if(info){var _619=this._getCM(info);if(_619){var _61a=sr._isWebMercator()?_5ed.webMercatorToGeographic(_619):_619;_618.xmin-=_619.x;_618.xmax-=_619.x;if(!sr._isWebMercator()){_61a.x=this._normalizeX(_61a.x,info).x;}_618.spatialReference.wkt=_5e9.substitute({Central_Meridian:_61a.x},sr.wkid===4326?info.altTemplate:info.wkTemplate);_618.spatialReference.wkid=null;}}this._shifted=_618;}return this._shifted;},_getCM:function(info){var _61b,_61c=info.valid[0],_61d=info.valid[1],xmin=this.xmin,xmax=this.xmax;var _61e=(xmin>=_61c&&xmin<=_61d),_61f=(xmax>=_61c&&xmax<=_61d);if(!(_61e&&_61f)){_61b=this.getCenter();}return _61b;},_normalize:function(_620,_621,info){var _622=new _5f0(this.toJson()),sr=_622.spatialReference;if(sr){info=info||sr._getInfo();if(info){var _623=_5e7.map(this._getParts(info),function(part){return part.extent;});if(_623.length>2){if(_620){return this._shiftCM(info);}else{return _622.update(info.valid[0],_622.ymin,info.valid[1],_622.ymax,sr);}}else{if(_623.length===2){if(_620){return this._shiftCM(info);}else{return _621?_623:{"rings":_5e7.map(_623,function(_624){return [[_624.xmin,_624.ymin],[_624.xmin,_624.ymax],[_624.xmax,_624.ymax],[_624.xmax,_624.ymin],[_624.xmin,_624.ymin]];}),"spatialReference":sr};}}else{return _623[0]||_622;}}}}return _622;},_getParts:function(info){if(!this._parts){var xmin=this.xmin,xmax=this.xmax,ymin=this.ymin,ymax=this.ymax,sr=this.spatialReference,_625=this.getWidth(),_626=xmin,_627=xmax,_628=0,_629=0,nrml,_62a=[],_62b,_62c,_62d;info=info||sr._getInfo();_62b=info.valid[0];_62c=info.valid[1];nrml=this._normalizeX(xmin,info);xmin=nrml.x;_628=nrml.frameId;nrml=this._normalizeX(xmax,info);xmax=nrml.x;_629=nrml.frameId;_62d=(xmin===xmax&&_625>0);if(_625>(2*_62c)){var E1=new _5f0(_626<_627?xmin:xmax,ymin,_62c,ymax,sr),E2=new _5f0(_62b,ymin,_626<_627?xmax:xmin,ymax,sr),E3=new _5f0(0,ymin,_62c,ymax,sr),E4=new _5f0(_62b,ymin,0,ymax,sr),k,_62e=[],_62f=[];if(E1.contains(E3)){_62e.push(_628);}if(E1.contains(E4)){_62f.push(_628);}if(E2.contains(E3)){_62e.push(_629);}if(E2.contains(E4)){_62f.push(_629);}for(k=_628+1;k<_629;k++){_62e.push(k);_62f.push(k);}_62a.push({extent:E1,frameIds:[_628]},{extent:E2,frameIds:[_629]},{extent:E3,frameIds:_62e},{extent:E4,frameIds:_62f});}else{if((xmin>xmax)||_62d){_62a.push({extent:new _5f0(xmin,ymin,_62c,ymax,sr),frameIds:[_628]},{extent:new _5f0(_62b,ymin,xmax,ymax,sr),frameIds:[_629]});}else{_62a.push({extent:new _5f0(xmin,ymin,xmax,ymax,sr),frameIds:[_628]});}}this._parts=_62a;}return this._parts;},_normalizeX:function(x,info){var _630=0,_631=info.valid[0],_632=info.valid[1],_633=2*_632,_634;if(x>_632){_634=Math.ceil(Math.abs(x-_632)/_633);x-=(_634*_633);_630=_634;}else{if(x<_631){_634=Math.ceil(Math.abs(x-_631)/_633);x+=(_634*_633);_630=-_634;}}return {x:x,frameId:_630};},toJson:function(){var json={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_5f0.defaultProps=_5ef;if(has("extend-esri")){lang.setObject("geometry.Extent",_5f0,_5e8);_5e8.geometry.defaultExtent=_5ef;}return _5f0;});},"esri/fx":function(){define(["dojo/_base/connect","dojo/_base/fx","dojo/_base/lang","dojo/dom","dojo/dom-geometry","dojo/dom-style","dojo/fx","dojo/has","esri/kernel"],function(_635,_636,lang,dom,_637,_638,_639,has,_63a){var fx={animateRange:function(args){var _63b=args.range;return new _636.Animation(lang.mixin({curve:new _636._Line(_63b.start,_63b.end)},args));},resize:function(args){var node=(args.node=dom.byId(args.node)),_63c=args.start,end=args.end;if(!_63c){var mb=_637.getMarginBox(node),pb=_637.getPadBorderExtents(node);_63c=(args.start={left:mb.l+pb.l,top:mb.t+pb.t,width:mb.w-pb.w,height:mb.h-pb.h});}if(!end){var _63d=args.anchor?args.anchor:{x:_63c.left,y:_63c.top},size=args.size;end=args.end={left:(_63c.left-((size.width-_63c.width)*(_63d.x-_63c.left)/_63c.width)),top:(_63c.top-((size.height-_63c.height)*(_63d.y-_63c.top)/_63c.height)),width:size.width,height:size.height};}return _636.animateProperty(lang.mixin({properties:{left:{start:_63c.left,end:end.left},top:{start:_63c.top,end:end.top},width:{start:_63c.width,end:end.width},height:{start:_63c.height,end:end.height}}},args));},slideTo:function(args){var node=(args.node=dom.byId(args.node)),_63e=_638.getComputedStyle,top=null,left=null,init=(function(){var _63f=node;return function(){var pos=_63f.style.position=="absolute"?"absolute":"relative";top=(pos=="absolute"?node.offsetTop:parseInt(_63e(node).top)||0);left=(pos=="absolute"?node.offsetLeft:parseInt(_63e(node).left)||0);if(pos!="absolute"&&pos!="relative"){var ret=_637.position(_63f,true);top=ret.y;left=ret.x;_63f.style.position="absolute";_63f.style.top=top+"px";_63f.style.left=left+"px";}};}());init();var anim=_636.animateProperty(lang.mixin({properties:{top:{start:top,end:args.top||0},left:{start:left,end:args.left||0}}},args));_635.connect(anim,"beforeBegin",anim,init);return anim;},flash:function(args){args=lang.mixin({end:"#f00",duration:500,count:1},args);args.duration/=args.count*2;var node=dom.byId(args.node),_640=args.start;if(!_640){_640=_638.getComputedStyle(node).backgroundColor;}var end=args.end,_641=args.duration,_642=[],i,il=args.count,base={node:node,duration:_641};for(i=0;i<il;i++){_642.push(_636.animateProperty(lang.mixin({properties:{backgroundColor:{start:_640,end:end}}},base)));_642.push(_636.animateProperty(lang.mixin({properties:{backgroundColor:{start:end,end:_640}}},base)));}return _639.chain(_642);}};if(has("extend-esri")){lang.mixin(lang.getObject("fx",true,_63a),fx);}return fx;});},"esri/layers/JoinDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource","esri/layers/LayerMapSource","esri/layers/TableDataSource","esri/layers/QueryDataSource","esri/layers/RasterDataSource"],function(_643,lang,has,_644,_645,_646,_647,_648,_649,_64a){var _64b=_643(_646,{declaredClass:"esri.layers.JoinDataSource",constructor:function(json){if(json){if(json.leftTableSource){this.leftTableSource=this._createLayerSource(json.leftTableSource);}if(json.rightTableSource){this.rightTableSource=this._createLayerSource(json.rightTableSource);}}},_createLayerSource:function(_64c){var _64d;if(_64c.type==="mapLayer"){_64d=new _647(_64c);}else{_64d={type:"dataLayer"};var _64e;switch(_64c.dataSource.type){case "table":_64e=new _648(_64c.dataSource);break;case "queryTable":_64e=new _649(_64c.dataSource);break;case "joinTable":_64e=new _64b(_64c.dataSource);break;case "raster":_64e=new _64a(_64c.dataSource);break;default:_64e=_64c.dataSource;}_64d.dataSource=_64e;_64d.toJson=function(){var json={type:"dataLayer",dataSource:_64e.toJson()};return _645.fixJson(json);};}return _64d;},toJson:function(){var json={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var _64f;if(this.joinType.toLowerCase()==="left-outer-join"){_64f="esriLeftOuterJoin";}else{if(this.joinType.toLowerCase()==="left-inner-join"){_64f="esriLeftInnerJoin";}else{_64f=this.joinType;}}json.joinType=_64f;return _645.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.JoinDataSource",_64b,_644);}return _64b;});},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_650,lang,has,_651,_652){var _653=_650(null,{declaredClass:"esri.layers.Domain",constructor:function(json){if(json&&lang.isObject(json)){this.name=json.name;this.type=json.type;}},toJson:function(){return _652.fixJson({name:this.name,type:this.type});}});if(has("extend-esri")){lang.setObject("layers.Domain",_653,_651);}return _653;});},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_654,lang,has,_655,_656){var _657=_654(null,{declaredClass:"esri.InfoTemplate",constructor:function(_658,_659){if(_658&&lang.isObject(_658)&&!lang.isFunction(_658)){lang.mixin(this,_658);}else{this.title=_658||"${*}";this.content=_659||"${*}";}},setTitle:function(_65a){this.title=_65a;return this;},setContent:function(_65b){this.content=_65b;return this;},toJson:function(){return _656.fixJson({title:this.title,content:this.content});}});if(has("extend-esri")){_655.InfoTemplate=_657;}return _657;});},"esri/symbols/TextSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/Symbol","esri/symbols/Font"],function(_65c,lang,_65d,has,_65e,_65f,_660,_661,Font){var _662={ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"};var _663={color:[0,0,0,1],font:_65e.defaultFont,angle:0,xoffset:0,yoffset:0};lang.mixin(_663,_65e.defaultText,{type:"textsymbol",align:"middle"});var _664=_65c(_661,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(json,font,_665){lang.mixin(this,_663);this.font=new Font(this.font);this.color=new _65d(this.color);if(json){if(lang.isObject(json)){lang.mixin(this,json);if(this.color&&_660.isDefined(this.color[0])){this.color=_661.toDojoColor(this.color);}this.type="textsymbol";this.font=new Font(this.font);this.xoffset=_65e.pt2px(this.xoffset);this.yoffset=_65e.pt2px(this.yoffset);}else{this.text=json;if(font){this.font=font;}if(_665){this.color=_665;}}}},setFont:function(font){this.font=font;return this;},setAngle:function(_666){this.angle=_666;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setAlign:function(_667){this.align=_667;return this;},setDecoration:function(_668){this.decoration=_668;return this;},setRotated:function(_669){this.rotated=_669;return this;},setKerning:function(_66a){this.kerning=_66a;return this;},setText:function(text){this.text=text;return this;},getStroke:function(){return null;},getFill:function(){return this.color;},toJson:function(){var xoff=_65e.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_65e.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;return _660.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle,xoffset:xoff,yoffset:yoff,text:this.text,align:this.align,decoration:this.decoration,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}));}});lang.mixin(_664,_662);_664.defaultProps=_663;if(has("extend-esri")){lang.setObject("symbol.TextSymbol",_664,_65f);_65f.symbol.defaultTextSymbol=_663;}return _664;});},"esri/geometry/Rect":function(){define("esri/geometry/Rect",["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","esri/kernel","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent"],function(_66b,lang,has,_66c,_66d,_66e,_66f,_670,_671){function _672(rect){return new _671(parseFloat(rect.x),parseFloat(rect.y)-parseFloat(rect.height),parseFloat(rect.x)+parseFloat(rect.width),parseFloat(rect.y),rect.spatialReference);};var Rect=_66b(_66f,{declaredClass:"esri.geometry.Rect",constructor:function(json,y,_673,_674,_675){lang.mixin(this,_66c.defaultRect);if(lang.isObject(json)&&json.type==="extent"){y=json.ymax;_673=json.getWidth();_674=json.getHeight();_675=json.spatialReference;json=json.xmin;}if(lang.isObject(json)){lang.mixin(this,json);if(this.spatialReference){this.spatialReference=new _66e(this.spatialReference);}}else{this.x=json;this.y=y;this.width=_673;this.height=_674;this.spatialReference=_675;}this.verifySR();},getCenter:function(){return new _670(this.x+this.width/2,this.y+this.height/2,this.spatialReference);},offset:function(ox,oy){return new Rect(this.x+ox,this.y+oy,this.width,this.height,this.spatialReference);},intersects:function(rect){if((rect.x+rect.width)<=this.x){return false;}if((rect.y+rect.height)<=this.y){return false;}if(rect.y>=(this.y+this.height)){return false;}if(rect.x>=(this.x+this.width)){return false;}return true;},getExtent:function(){return _672(this);},update:function(x,y,_676,_677,_678){this.x=x;this.y=y;this.width=_676;this.height=_677;this.spatialReference=_678;return this;}});if(has("extend-esri")){lang.setObject("geometry.Rect",Rect,_66d);_66d.geometry._rectToExtent=_672;_66d.geometry._extentToRect=function(_679){return new Rect(_679);};}return Rect;});},"esri/renderers/jsonUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/ClassBreaksRenderer"],function(lang,has,_67a,_67b,_67c,_67d){var _67e={fromJson:function(json){var type=json.type||"",_67f;switch(type){case "simple":_67f=new _67b(json);break;case "uniqueValue":_67f=new _67c(json);break;case "classBreaks":_67f=new _67d(json);break;}return _67f;}};if(has("extend-esri")){lang.mixin(lang.getObject("renderer",true,_67a),_67e);}return _67e;});},"esri/layers/GraphicsLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/dom-attr","dojo/dom-construct","dojo/dom-style","dojox/gfx","dojox/gfx/matrix","esri/kernel","esri/lang","esri/sniff","esri/domUtils","esri/layers/layer","esri/symbols/SimpleMarkerSymbol","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Extent","esri/geometry/mathUtils","esri/geometry/screenUtils"],function(_680,_681,lang,_682,_683,_684,_685,_686,_687,_688,_689,has,_68a,_68b,SMS,_68c,_68d,_68e,_68f,_690){var _691;var _692=_680(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(map,_693){var es,_694=(this._connects=[]);this._map=map;if(_686.renderer.toLowerCase().indexOf("canvas")!==-1){es=_684.create("div",{style:"overflow: visible; position: absolute;"},_693);this._surface={getEventSource:function(){return es;}};_694.push(_681.connect(es,"onmousedown",this,this._canvasDownHandler));_694.push(_681.connect(es,"onmouseup",this,this._canvasUpHandler));_694.push(_681.connect(es,"onclick",this,this._canvasClickHandler));_691.prototype._canvas=true;}else{var _695=(this._surface=_686.createSurface(_693,map.width,map.height));es=_695.getEventSource();_685.set((es=(has("ie")<9)?es.parentNode:es),{overflow:"visible",position:"absolute"});}_694.push(_681.connect(map,"onResize",this,"_onResizeHandler"));return es;},_onResizeHandler:function(_696,_697,_698){var es=this._surface.getEventSource(),map=this._map,_699;if(has("ie")<9){_685.set((es=es.parentNode),{width:_697+"px",height:_698+"px",clip:"rect(0px "+_697+"px "+_698+"px 0px)"});}_683.set(es,"width",_697);_683.set(es,"height",_698);if(!this._surface.declaredClass){_682.forEach(es.childNodes,function(_69a){_683.set(_69a,"width",_697);_683.set(_69a,"height",_698);});}if(map.loaded){if(!map.graphics.suspended){map.graphics._resized=true;}_682.forEach(map.graphicsLayerIds,function(_69b){_699=map.getLayer(_69b);if(!_699.suspended){_699._resized=true;}});}},_cleanUp:function(){_682.forEach(this._connects,_681.disconnect,_681);this._map=this._surface=null;},_processEvent:function(evt){var map=this._map;evt.screenPoint=new _68d(evt.pageX-map.position.x,evt.pageY-map.position.y);evt.mapPoint=map.toMap(evt.screenPoint);},_canvasDownHandler:function(evt){this._processEvent(evt);this._downPt=evt.screenPoint.x+","+evt.screenPoint.y;},_canvasUpHandler:function(evt){this._processEvent(evt);this._upPt=evt.screenPoint.x+","+evt.screenPoint.y;},_tolerance:15,_canvasClickHandler:function(evt){if(!this._downPt||!this._upPt||this._downPt!==this._upPt){return;}this._processEvent(evt);var map=this._map,_69c=_682.map(map.graphicsLayerIds,function(id){return map.getLayer(id);});_69c.push(map.graphics);_69c.reverse();_69c=_682.filter(_69c,function(_69d){return _69d.loaded&&_69d._mouseEvents&&!_69d.suspended&&(!_689.isDefined(_69d.opacity)||_69d.opacity>0);});var _69e=evt.screenPoint,_69f=this._tolerance,xmin=_69e.x-_69f,ymin=_69e.y+_69f,xmax=_69e.x+_69f,ymax=_69e.y-_69f,_6a0=new _68e(xmin,ymax,xmax,ymin),_6a1=map.toMap(new _68d(xmin,ymin)),_6a2=map.toMap(new _68d(xmax,ymax)),_6a3=new _68e(_6a1.x,_6a1.y,_6a2.x,_6a2.y,_6a1.spatialReference),_6a4,_6a5=has("esri-touch");delete _6a0.spatialReference;_682.some(_69c,function(_6a6){var _6a7=_682.filter(_6a6.graphics,function(_6a8){var _6a9=_6a8.getDojoShape();if(!_6a8.visible||!_6a9){return false;}var bbox=_6a9.getTransformedBoundingBox();if(bbox){var _6aa=new _68e(bbox[0].x,bbox[0].y,bbox[2].x,bbox[2].y);delete _6aa.spatialReference;return _6a5?_6aa.intersects(_6a0):_6aa.contains(_69e);}else{return _682.some(_6a9.children||[],function(_6ab){bbox=_6ab.getTransformedBoundingBox();var _6ac=new _68e(bbox[0].x,bbox[0].y,bbox[2].x,bbox[2].y);delete _6ac.spatialReference;return _6a5?_6ac.intersects(_6a0):_6ac.contains(_69e);});}});_6a7.reverse();if(_6a7.length>0){var _6ad;_682.some(_6a7,function(_6ae){if(_6ae.geometry&&_6a3.intersects(_6ae.geometry)){_6ad=_6ae;return true;}return false;});if(_6ad){_6a4=_6ad;return true;}}return false;});if(_6a4){var _6af=_6a4.getLayer();if(_6af){evt.graphic=_6a4;_6af.onClick(evt);}}}});_691=_680(_68b,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:true,constructor:function(_6b0){if(_6b0&&(lang.isString(_6b0)||(lang.isObject(_6b0)&&_6b0.layerDefinition))){_6b0=arguments[1];}this._params=lang.mixin({displayOnPan:true,drawMode:true},_6b0||{});this.infoTemplate=_6b0&&_6b0.infoTemplate;this.graphics=[];this._draw=lang.hitch(this,this._draw);this._refresh=lang.hitch(this,this._refresh);this.registerConnectEvents("esri.layers.GraphicsLayer",{"graphic-add":["graphic"],"graphic-remove":["graphic"]});},setDrawMode:function(_6b1){this._params.drawMode=_6b1;},renderer:null,_setMap:function(map,_6b2){this.inherited(arguments);this._map=map;this._wrap=map.wrapAround180;this._srInfo=map.spatialReference._getInfo();if(!this._canvas){this._div=_6b2.createGroup();}else{_6b2=_686.createSurface(_6b2.getEventSource(),map.width,map.height);_685.set(_6b2.rawNode,"position","absolute");this._div=_6b2.createGroup();this._renderProto=this._div.constructor.prototype._render;this._div._render=lang.hitch(this,this._canvasRender);}this._div.getEventSource().id=this.id+"_layer";var op=this.opacity;if(_689.isDefined(op)&&op<1){this.setOpacity(op,true);}return this._div;},_unsetMap:function(map,_6b3){_682.forEach(this.graphics,function(g){g._shape=null;});if(!this._canvas){this._div.clear();_6b3.remove(this._div);_684.destroy(this._div.getEventSource());}else{_6b3=this._div.getParent();_6b3._parent={};_684.destroy(_6b3.rawNode);_6b3.destroy();}this._map=this._div=null;clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments);},_onZoomStartHandler:function(){_68a.hide(this._div.getEventSource());},_onExtentChangeHandler:function(_6b4,_6b5,_6b6,lod){clearTimeout(this._wakeTimer);this._wakeTimer=null;if(_6b6){var _6b7=this._map.__visibleRect,_6b8=this._div;this._refresh(true);_6b8.setTransform(_687.translate({x:_6b7.x,y:_6b7.y}));if(this._renderProto&&_6b8.surface.pendingRender){this._dirty=true;}else{if(!this.suspended){_68a.show(_6b8.getEventSource());}}}else{if(this._resized){this._refresh(false);this._resized=false;}}if(this.graphics.length>0){this.onUpdate();}},_canvasRender:function(){var _6b9=this._div;if(this._dirty){delete this._dirty;if(!this.suspended){_68a.show(_6b9.getEventSource());}}return this._renderProto.apply(_6b9,arguments);},_refresh:function(_6ba){var gs=this.graphics,il=gs.length,i,_6bb=this._draw;for(i=0;i<il;i++){_6bb(gs[i],_6ba);}},refresh:function(){this._refresh(true);},redraw:function(){this._refresh(true);},_onPanHandler:function(_6bc,_6bd){this._panDx=_6bd.x;this._panDy=_6bd.y;var _6be=this._map.__visibleRect;this._div.setTransform(_687.translate({x:_6be.x+_6bd.x,y:_6be.y+_6bd.y}));},_onPanEndUpdateHandler:function(_6bf,_6c0){if(!this._params._child&&(_6c0.x!==this._panDx||_6c0.y!==this._panDy)){var _6c1=this._map.__visibleRect;this._div.setTransform(_687.translate({x:_6c1.x,y:_6c1.y}));}this._refresh(false);if(this.graphics.length){this.onUpdate();}},_onPanStartHandler:function(){_68a.hide(this._div.getEventSource());},_onPanEndHandler:function(){var _6c2=this._map.__visibleRect,_6c3=this._div;_6c3.setTransform(_687.translate({x:_6c2.x,y:_6c2.y}));this._refresh(false);if(this._renderProto&&_6c3.surface.pendingRender){this._dirty=true;}else{_68a.show(_6c3.getEventSource());}if(this.graphics.length){this.onUpdate();}},onSuspend:function(){this.inherited(arguments);_68a.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();},onResume:function(evt){this.inherited(arguments);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(lang.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(null,null,true);}}),0);},_enableDrawConnectors:function(){var map=this._map,dc=_681.connect;this._disableDrawConnectors();if(this._params.displayOnPan){if(!this._params._child){this._onPanHandler_connect=dc(map,"onPan",this,"_onPanHandler");}this._onPanEndHandler_connect=dc(map,"onPanEnd",this,"_onPanEndUpdateHandler");}else{this._onPanStartHandler_connect=dc(map,"onPanStart",this,"_onPanStartHandler");this._onPanEndHandler_connect=dc(map,"onPanEnd",this,"_onPanEndHandler");}this._onZoomStartHandler_connect=dc(map,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=dc(map,"onExtentChange",this,"_onExtentChangeHandler");},_disableDrawConnectors:function(){var dd=_681.disconnect;dd(this._onExtentChangeHandler_connect);dd(this._onZoomStartHandler_connect);dd(this._onPanHandler_connect);dd(this._onPanStartHandler_connect);dd(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null;},_updateExtent:function(_6c4){var geom=_6c4.geometry;if(!geom){_6c4._extent=null;return;}var _6c5=(_6c4._extent=geom.getExtent());if(!_6c5){var x,y;if(geom.declaredClass==="esri.geometry.Point"){x=geom.x;y=geom.y;}else{if(geom.declaredClass==="esri.geometry.Multipoint"){x=geom.points[0][0];y=geom.points[0][1];}else{_6c4._extent=null;return;}}_6c4._extent=new _68e(x,y,x,y,geom.spatialReference);}},_intersects:function(map,_6c6,_6c7){var _6c8=map.spatialReference,_6c9=_6c6.spatialReference,_6ca=(_6c8&&_6c9&&!_6c8.equals(_6c9)&&_6c8._canProject(_6c9)&&_6c9.wkid===4326);if(this._wrap&&!_6c7){var _6cb=[],_6cc=map._getFrameWidth(),info=this._srInfo,_6cd,_6ce=map._clip?map._getAvailExtent():map.extent,_6cf,g,m,f,gl,ml,fl,_6d0,_6d1,_6d2=[],_6d3=_6c6._partwise;if(_6ca){_6ce=map.geographicExtent;info=_6c9._getInfo();}_6cf=_6ce._getParts(info);if(_6d3&&_6d3.length){_6cd=[];for(g=0,gl=_6d3.length;g<gl;g++){_6cd=_6cd.concat(_6d3[g]._getParts(info));}}else{_6cd=_6c6._getParts(info);}for(g=0,gl=_6cd.length;g<gl;g++){_6d0=_6cd[g];for(m=0,ml=_6cf.length;m<ml;m++){_6d1=_6cf[m];if(_6d1.extent.intersects(_6d0.extent)){for(f=0,fl=_6d0.frameIds.length;f<fl;f++){_6cb.push((_6d1.frameIds[0]-_6d0.frameIds[f])*_6cc);}}}}for(g=0,gl=_6cb.length;g<gl;g++){f=_6cb[g];if(_682.indexOf(_6cb,f)===g){_6d2.push(f);}}return (_6d2.length)?_6d2:null;}else{return (_6ca?map.geographicExtent:map.extent).intersects(_6c6)?[0]:null;}},_draw:function(_6d4,_6d5){if(!this._params.drawMode||!this._map||this.suspended){return;}try{var _6d6=_6d4._extent,_6d7,_6d8;if(_6d4.visible&&_6d6&&(_6d7=this._intersects(this._map,_6d6,_6d4.geometry._originOnly))&&(_6d8=this._getSymbol(_6d4))){if(!_6d4.getDojoShape()||_6d5||_6d7){var type=_6d4.geometry.type;if(type==="point"){this._drawMarker(_6d4,_6d8,_6d7);this._symbolizeMarker(_6d4,_6d8);}else{if(type==="multipoint"){this._drawMarkers(_6d4,_6d8,_6d7);this._symbolizeMarkers(_6d4,_6d8);}else{this._drawShape(_6d4,_6d7);this._symbolizeShape(_6d4,_6d8);}}}}else{if(_6d4.getDojoShape()){this._removeShape(_6d4);}}}catch(err){this._errorHandler(err,_6d4);}},_removeShape:function(_6d9){var _6da=_6d9.getDojoShape();_6da.removeShape();_6d9._shape=null;},_drawShape:function(_6db,_6dc){var _6dd=_6db.geometry,type=_6dd.type,map=this._map,me=map.extent,mw=map.width,mh=map.height,_6de=map.__visibleRect,_6df=[],i,il,rect,pt,xy,wh,_6e0=(type==="extent");if(type==="rect"||_6e0){pt={x:0,y:0,spatialReference:_6dd.spatialReference};pt.x=_6e0?_6dd.xmin:_6dd.x;pt.y=_6e0?_6dd.ymax:_6dd.y;xy=_690.toScreenPoint(me,mw,mh,pt);pt.x=_6e0?_6dd.xmax:(_6dd.x+_6dd.width);pt.y=_6e0?_6dd.ymin:(_6dd.y+_6dd.height);wh=_690.toScreenPoint(me,mw,mh,pt);rect={x:xy.x-_6de.x+_6dc[0],y:xy.y-_6de.y,width:Math.abs(wh.x-xy.x),height:Math.abs(wh.y-xy.y)};if(rect.width===0){rect.width=1;}if(rect.height===0){rect.height=1;}_6db._shape=this._drawRect(this._div,_6db.getDojoShape(),rect);}else{if(type==="polyline"||type==="polygon"){for(i=0,il=_6dc.length;i<il;i++){_6df=_6df.concat(_690._toScreenPath(me,mw,mh,_6dd,-_6de.x+_6dc[i],-_6de.y));}_6db._shape=this._drawPath(this._div,_6db.getDojoShape(),_6df);if(this._rendererLimits){if(type==="polyline"){this._clipPolyline(_6db._shape,_6dd);}else{this._clipPolygon(_6db._shape,_6dd);}}}}},_drawRect:function(_6e1,_6e2,rect){return _6e2?_6e2.setShape(rect):_6e1.createRect(rect);},_drawImage:function(_6e3,_6e4,_6e5){return _6e4?_6e4.setShape(_6e5):_6e3.createImage(_6e5);},_drawCircle:function(_6e6,_6e7,_6e8){return _6e7?_6e7.setShape(_6e8):_6e6.createCircle(_6e8);},_drawPath:(function(){if(has("ie")<9){return function(_6e9,_6ea,path,_6eb){path=_6eb?path:path.join(" ");if(_6ea){return _6ea.setShape(path);}else{var p=_6e9.createObject(_6eb?_686.Path:_686.EsriPath,path);_6e9._overrideSize(p.getEventSource());return p;}};}else{return function(_6ec,_6ed,path,_6ee){path=_6ee?path:path.join(" ");return _6ed?_6ed.setShape(path):_6ec.createPath(path);};}}()),_drawText:function(_6ef,_6f0,text){return _6f0?_6f0.setShape(text):_6ef.createText(text);},_getSymbol:function(_6f1){return _6f1.symbol||(this.renderer?this.renderer.getSymbol(_6f1):null)||null;},_symbolizeShape:function(_6f2,_6f3){var _6f4=_6f3._stroke,fill=_6f3._fill;if(_6f4===null||fill===null){_6f4=_6f3.getStroke();fill=_6f3.getFill();}_6f2.getDojoShape().setStroke(_6f4).setFill(fill);_6f3._stroke=_6f4;_6f3._fill=fill;},_smsToPath:(function(){if(has("ie")<9){return function(SMS,_6f5,x,y,xMh,xPh,yMh,yPh,_6f6){switch(_6f5){case SMS.STYLE_SQUARE:return ["M",xMh+","+yMh,"L",xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,"X","E"];case SMS.STYLE_CROSS:return ["M",x+","+yMh,"L",x+","+yPh,"M",xMh+","+y,"L",xPh+","+y,"E"];case SMS.STYLE_X:return ["M",xMh+","+yMh,"L",xPh+","+yPh,"M",xMh+","+yPh,"L",xPh+","+yMh,"E"];case SMS.STYLE_DIAMOND:return ["M",x+","+yMh,"L",xPh+","+y,x+","+yPh,xMh+","+y,"X","E"];case SMS.STYLE_TARGET:return ["M",xMh+","+yMh,"L",xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,xMh+","+yMh,"M",(xMh-_6f6)+","+y,"L",xMh+","+y,"M",x+","+(yMh-_6f6),"L",x+","+yMh,"M",(xPh+_6f6)+","+y,"L",xPh+","+y,"M",x+","+(yPh+_6f6),"L",x+","+yPh,"E"];}};}else{return function(SMS,_6f7,x,y,xMh,xPh,yMh,yPh,_6f8){switch(_6f7){case SMS.STYLE_SQUARE:return ["M",xMh+","+yMh,xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,"Z"];case SMS.STYLE_CROSS:return ["M",x+","+yMh,x+","+yPh,"M",xMh+","+y,xPh+","+y];case SMS.STYLE_X:return ["M",xMh+","+yMh,xPh+","+yPh,"M",xMh+","+yPh,xPh+","+yMh];case SMS.STYLE_DIAMOND:return ["M",x+","+yMh,xPh+","+y,x+","+yPh,xMh+","+y,"Z"];case SMS.STYLE_TARGET:return ["M",xMh+","+yMh,xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,xMh+","+yMh,"M",(xMh-_6f8)+","+y,xMh+","+y,"M",x+","+(yMh-_6f8),x+","+yMh,"M",(xPh+_6f8)+","+y,xPh+","+y,"M",x+","+(yPh+_6f8),x+","+yPh];}};}}()),_pathStyles:{"square":1,"cross":1,"x":1,"diamond":1,"target":1},_typeMaps:{"picturemarkersymbol":"image","textsymbol":"text"},_isInvalidShape:function(_6f9,_6fa){var _6fb=_6fa&&_6fa.shape&&_6fa.shape.type,_6fc=_6f9&&_6f9.type,_6fd=_6f9&&_6f9.style;if(!_6fd){if(_6fc){_6fd=this._typeMaps[_6fc];}}else{if(this._pathStyles[_6fd]){_6fd="path";}}if(_6fb&&_6fd&&(_6fb!==_6fd)){return true;}},_drawPoint:function(_6fe,_6ff,_700,_701,_702){var type=_700.type,map=this._map,_703=map.__visibleRect,_704=_690.toScreenPoint(map.extent,map.width,map.height,_6ff).offset(-_703.x+_702[0],-_703.y),px=_704.x,py=_704.y,_705,bbox,_706=0,_707=0;if(this._isInvalidShape(_700,_701)){_701.removeShape();_701=null;}if(type==="simplemarkersymbol"){var _708=_700.style,half=_700.size/2,_709=Math.round;switch(_708){case SMS.STYLE_SQUARE:case SMS.STYLE_CROSS:case SMS.STYLE_X:case SMS.STYLE_DIAMOND:_705=this._drawPath(_6fe,_701,this._smsToPath(SMS,_708,px,py,_709(px-half),_709(px+half),_709(py-half),_709(py+half)));break;case SMS.STYLE_TARGET:var _70a=_700._targetWidth/2,_70b=_700._targetHeight/2;_705=this._drawPath(_6fe,_701,this._smsToPath(SMS,_708,px,py,_709(px-_70a),_709(px+_70a),_709(py-_70b),_709(py+_70b),_700._spikeSize));break;case SMS.STYLE_PATH:_705=this._drawPath(_6fe,_701,_700.path,true);bbox=_705.getBoundingBox();_706=-(bbox.x+(bbox.width/2))+px;_707=-(bbox.y+(bbox.height/2))+py;break;default:_705=this._drawCircle(_6fe,_701,{cx:px,cy:py,r:half});}}else{if(type==="picturemarkersymbol"){var w=_700.width,h=_700.height;_705=this._drawImage(_6fe,_701,{x:px-(w/2),y:py-(h/2),width:w,height:h,src:_700.url});}else{if(type==="textsymbol"){_705=this._drawText(_6fe,_701,{type:"text",text:_700.text,x:px,y:py,align:_700.align,decoration:_700.decoration,rotated:_700.rotated,kerning:_700.kerning});}}}_705.setTransform(_687.multiply(_687.translate(_700.xoffset,-_700.yoffset),_687.rotategAt(_700.angle,_704),_687.translate(_706,_707)));_705._wrapOffsets=_702;return _705;},_symbolizePoint:function(_70c,_70d){var type=_70d.type;if(type==="picturemarkersymbol"){return;}var _70e=_70d._stroke,fill=_70d._fill;if(type==="textsymbol"){_70c.setFont(_70d.font).setFill(_70d.getFill());}else{if(_70e===null||fill===null){_70e=_70d.getStroke();fill=_70d.getFill();}if(type==="simplemarkersymbol"){_70c.setFill(fill).setStroke(_70e);}_70d._stroke=_70e;_70d._fill=fill;}},_drawMarker:function(_70f,_710,_711){_70f._shape=this._drawPoint(this._div,_70f.geometry,_710,_70f.getDojoShape(),_711);},_symbolizeMarker:function(_712,_713){this._symbolizePoint(_712.getDojoShape(),_713);},_drawMarkers:function(_714,_715,_716){var _717=_714.geometry,_718=_717.points,_719=_714.getDojoShape()||this._div.createGroup(),_71a,i,il=_718.length,temp=[],idx=0,j,jl=_716?_716.length:0;if(_719.children[0]&&this._isInvalidShape(_715,_719.children[0])){_719.clear();}for(i=0;i<il;i++){_71a=_718[i];for(j=0;j<jl;j++){temp[0]=_716[j];this._drawPoint(_719,{x:_71a[0],y:_71a[1],spatialReference:_717.spatialReference},_715,_719.children[idx++],temp);}}var _71b=_719.children.length;if(il*_716.length<_71b){for(i=_71b-1;i>=il*_716.length;i--){_719.children[i].removeShape();}}_714._shape=_719;},_symbolizeMarkers:function(_71c,_71d){var _71e=_71c.getDojoShape(),_71f=_71e.children,i,il=_71f.length;for(i=0;i<il;i++){this._symbolizePoint(_71f[i],_71d);}},_errorHandler:function(err,_720){var msg="Unable to draw graphic ";if(_720){err.message=msg+"(geometry:"+(_720.geometry?_720.geometry.declaredClass:null)+", symbol:"+(_720.symbol?_720.symbol.declaredClass:null)+"): "+err.message;}else{err.message=msg+"(null): "+err.message;}this.inherited(arguments);},_rendererLimits:(function(){var _721,_722,_723;if(has("ff")){_721=16125;_722=-32250;_723=32250;}else{if(has("ie")<9){_721=100000;_722=-100000;_723=100000;}else{if(has("chrome")&&has("chrome")<6){_721=8150;_722=-10000;_723=10000;}}}if(_721){var _724,_725;_724=[-_721,-_721,_721,_721];_725=[[[-_721,-_721],[_721,-_721]],[[_721,-_721],[_721,_721]],[[_721,_721],[-_721,_721]],[[-_721,_721],[-_721,-_721]]];return {clipLimit:_721,rangeMin:_722,rangeMax:_723,clipBBox:_724,clipSegments:_725};}}()),_clipPolyline:function(_726,_727){var _728=this._getCorners(_726,_727);var _729=_728.tl,_72a=_728.br;var _72b=this._rendererLimits;var _72c=_72b.rangeMin,_72d=_72b.rangeMax,_72e=_72b.clipBBox,_72f=_72b.clipSegments;var _730=this._isPointWithinRange,_731=this._isPointWithinBBox,_732=this._getClipperIntersection,_733=this._getPlaneIndex;if(!_730(_729,_72c,_72d)||!_730(_72a,_72c,_72d)){if(has("ie")<9){this._createSegments(_726);}var _734=[];_682.forEach(_726.segments,function(_735){var _736=_735.args,len=_736.length,_737=[],i;for(i=0;i<len;i+=2){var pt1=[_736[i],_736[i+1]];var pt2=[_736[i+2],_736[i+3]];var _738=_731(pt1,_72e);var _739=_731(pt2,_72e);if(_738^_739){var _73a=_732([pt1,pt2],_72f);if(_73a){if(!_738){_737.push(_73a[1],pt2);}else{if(i){_737.push(_73a[1]);}else{_737.push(pt1,_73a[1]);}_734.push(_737);_737=[];}}}else{if(_738){if(i){_737.push(pt2);}else{_737.push(pt1,pt2);}}else{var _73b=_733(pt1,_72e);var _73c=_733(pt2,_72e);if(_73b===-1||_73c===-1||_73b===_73c){continue;}var _73d=_732([pt1,pt2],_72f,true);if(_73d.length>0){if(!_73d[_73b]){_73b=_73d[_73b[0]]?_73b[0]:_73b[1];}if(!_73d[_73c]){_73c=_73d[_73c[0]]?_73c[0]:_73c[1];}var _73e=_73d[_73b],_73f=_73d[_73c];if(_73e){_737.push(_73e);}if(_73f){_737.push(_73f);_734.push(_737);_737=[];}}}}}_734.push(_737);});_726.setShape(this._getPathStringFromPaths(_734));}},_clipPolygon:function(_740,_741){var _742=this._getCorners(_740,_741);var _743=_742.tl,_744=_742.br;var _745=this._rendererLimits;var _746=_745.clipLimit,_747=_745.rangeMin,_748=_745.rangeMax,_749=_745.clipBBox,_74a=_745.clipSegments;var _74b=this._isPointWithinRange,_74c=this._isPointWithinBBox,_74d=this._getClipperIntersection,_74e=this._getPlaneIndex,_74f=_68f._pointLineDistance;if(!_74b(_743,_747,_748)||!_74b(_744,_747,_748)){if(has("ie")<9){this._createSegments(_740);}var _750=_682.map(_740.segments,function(_751){var _752=_751.args,len=_752.length,_753=[],_754=[],i;for(i=0;i<len;i+=2){var pt1=[_752[i],_752[i+1]];var pt2=[_752[i+2],_752[i+3]];if(i===(len-2)){_753.push(pt1);break;}var _755=_74c(pt1,_749);var _756=_74c(pt2,_749);_753.push(pt1);if(_755^_756){var _757=_74d([pt1,pt2],_74a);if(_757){var _758=_757[1];_758[_755?"inOut":"outIn"]=true;_753.push(_758);_754.push([_755?"INOUT":"OUTIN",_753.length-1,_757[0]]);}}else{if(!_755){var _759=_74e(pt1,_749);var _75a=_74e(pt2,_749);if(_759===-1||_75a===-1||_759===_75a){continue;}var _757=_74d([pt1,pt2],_74a,true);if(_757.length>0){if(!_757[_759]){_759=_757[_759[0]]?_759[0]:_759[1];}if(!_757[_75a]){_75a=_757[_75a[0]]?_75a[0]:_75a[1];}var _75b=_757[_759],_75c=_757[_75a];if(_75b){_75b.outIn=true;_753.push(_75b);_754.push(["OUTIN",_753.length-1,_759]);}if(_75c){_75c.inOut=true;_753.push(_75c);_754.push(["INOUT",_753.length-1,_75a]);}}else{if(lang.isArray(_759)&&lang.isArray(_75a)){var _75d=_759.concat(_75a);_75d.sort();if(_75d.join("")==="0123"){var _75e=[];if((_759[0]+_759[1])===3){_75e.push([_746,-_746],[-_746,_746]);}else{_75e.push([-_746,-_746],[_746,_746]);}var d1=_74f(_75e[0],[pt1,pt2]);var d2=_74f(_75e[1],[pt1,pt2]);_753.push((d1<d2)?_75e[0]:_75e[1]);}}}}}}var xmin=_749[0],ymin=_749[1],xmax=_749[2],ymax=_749[3];_682.forEach(_753,function(_75f){if(_75f[0]<xmin){if(_75f[1]>=ymin&&_75f[1]<=ymax){_75f[0]=xmin;}else{_75f[0]=xmin;_75f[1]=_75f[1]<ymin?ymin:ymax;}}});_682.forEach(_753,function(_760){if(_760[1]<ymin){if(_760[0]>=xmin&&_760[0]<=xmax){_760[1]=ymin;}else{_760[1]=ymin;_760[0]=_760[0]<xmin?xmin:xmax;}}});_682.forEach(_753,function(_761){if(_761[0]>xmax){if(_761[1]>=ymin&&_761[1]<=ymax){_761[0]=xmax;}else{_761[0]=xmax;_761[1]=_761[1]<ymin?ymin:ymax;}}});_682.forEach(_753,function(_762){if(_762[1]>ymax){if(_762[0]>=xmin&&_762[0]<=xmax){_762[1]=ymax;}else{_762[1]=ymax;_762[0]=_762[0]<xmin?xmin:xmax;}}});var k=0,len=_754.length;if(len>0){do{var curr=_754[k];var next=_754[(k+1)%len];if(curr[2]===next[2]&&curr[0]==="INOUT"&&next[0]==="OUTIN"){var _763=curr[1],end=next[1],u;if(_763<end){for(u=_763+1;u<end;u++){_753[u][2]=true;}}else{if(_763>end){for(u=_763+1;u<_753.length;u++){_753[u][2]=true;}for(u=0;u<end;u++){_753[u][2]=true;}}}}k=(k+1)%len;}while(k!==0);}var _764=_753[0],last=_753[_753.length-1];if(_764[2]){last[2]=true;_682.some(_754,function(data){if(data[1]===1){_753.splice(_753.length-1,0,lang.clone(_753[1]));return true;}return false;});}_753=_682.filter(_753,function(_765){return _765[2]?false:true;});for(k=0;k<_753.length-1;k++){var now=_753[k];var next=_753[k+1];if(!next||(now[0]!==next[0])||(now[1]!==next[1])){continue;}if(next.outIn){now.outIn=true;}else{if(next.inOut){now.inOut=true;}}_753.splice(k+1,1);}var abs=Math.abs,_766=[];for(k=0;k<_753.length-1;k++){var curr=_753[k],cx=curr[0],cy=curr[1];var x1=(abs(cx)===_746);var y1=(abs(cy)===_746);var next=_753[k+1],nx=next[0],ny=next[1];var x2=(abs(nx)===_746);var y2=(abs(ny)===_746);if(x1&&y2){_766.push([k+1,[cx,ny]]);}else{if(y1&&x2){_766.push([k+1,[nx,cy]]);}}}for(k=_766.length-1;k>=0;k--){var data=_766[k];var prev=_753[data[0]-1];var now=_753[data[0]];if(prev.outIn||prev.inOut||now.outIn||now.inOut){continue;}_753.splice(data[0],0,data[1]);}var _764=_753[0],last=_753[_753.length-1];if(_764[0]!==last[0]||_764[1]!==last[1]){_753.push(_764);}return _753;});_740.setShape(this._getPathStringFromPaths(_750));}},_getCorners:function(_767,_768){if(has("ie")<9){var map=this._map,_769=_768.getExtent(),_76a=_769.spatialReference,_76b=map.toScreen(new _68c(_769.xmin,_769.ymax,_76a)),_76c=map.toScreen(new _68c(_769.xmax,_769.ymin,_76a));return {tl:_76b,br:_76c};}else{var _76d=_767.getTransformedBoundingBox();return {tl:_76d[0],br:_76d[2]};}},_createSegments:function(_76e){_76e.shape.path=_76e.vmlPath;_76e.segmented=false;_76e._confirmSegmented();var _76f=_76e.segments;if(_76f.length>1){_76e.segments=_682.filter(_76f,function(_770,idx,arr){var next=arr[idx+1];if(_770.action==="M"&&next&&next.action==="L"){_770.args=_770.args.concat(next.args);return true;}return false;});}},_getPathStringFromPaths:function(_771){if(has("ie")<9){_771=_682.map(_771,function(path){var _772=_682.map(path,function(_773,idx){return (idx===1?"l ":"")+_773.join(",");});return "m "+_772.join(" ");});_771.push("e");}else{_771=_682.map(_771,function(path){var _774=_682.map(path,function(_775){return _775.join(",");});return "M "+_774.join(" ");});}return _771.join(" ");},_isPointWithinBBox:function(_776,bbox){var left=bbox[0],top=bbox[1];var _777=bbox[2],_778=bbox[3];var x=_776[0],y=_776[1];if(x>left&&x<_777&&y>top&&y<_778){return true;}else{return false;}},_isPointWithinRange:function(_779,_77a,_77b){var x=_779.x,y=_779.y;if(x<_77a||y<_77a||x>_77b||y>_77b){return false;}else{return true;}},_getClipperIntersection:function(line,_77c,_77d){var i,_77e=_68f._getLineIntersection2,_77f=Math.round,data={length:0};for(i=0;i<4;i++){var _780=_77e(line,_77c[i]);if(_780){_780[0]=_77f(_780[0]);_780[1]=_77f(_780[1]);if(!_77d){return [i,_780];}else{data[i]=_780;data.length++;}}}return _77d?data:null;},_getPlaneIndex:function(_781,_782){var px=_781[0],py=_781[1],xmin=_782[0],ymin=_782[1],xmax=_782[2],ymax=_782[3];if(px<=xmin){if((py>=ymin)&&(py<=ymax)){return 3;}else{return (py<ymin)?[0,3]:[2,3];}}if(py<=ymin){if((px>=xmin)&&(px<=xmax)){return 0;}else{return (px<xmin)?[3,0]:[1,0];}}if(px>=xmax){if((py>=ymin)&&(py<=ymax)){return 1;}else{return (py<ymin)?[0,1]:[2,1];}}if(py>=ymax){if((px>=xmin)&&(px<=xmax)){return 2;}else{return (px<xmin)?[3,2]:[1,2];}}return -1;},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicsClear:function(){},onOpacityChange:function(){},setInfoTemplate:function(_783){this.infoTemplate=_783;},add:function(_784){var _785=arguments[1];if(_784._graphicsLayer===this){return _784;}if(!_785){this.graphics.push(_784);}_784._graphicsLayer=this;this._updateExtent(_784);this._draw(_784);if(!_785){this.onGraphicAdd(_784);}return _784;},remove:function(_786){if(!arguments[1]){var _787=this.graphics,i;if((i=_682.indexOf(_787,_786))===-1){return null;}_786=this.graphics.splice(i,1)[0];}if(_786.getDojoShape()){this._removeShape(_786);}_786._shape=_786._graphicsLayer=null;this.onGraphicRemove(_786);return _786;},clear:function(){var _788=arguments[1],g=this.graphics;while(g.length>0){this.remove(g[0]);}if(!_788){this.onGraphicsClear();}},setOpacity:function(op,_789){if(_789||this.opacity!=op){var div=this._div;if(div){if(has("ie")<9){_682.forEach(this.graphics,function(_78a){var _78b=_78a._shape;var node=_78b&&_78b.getNode();if(node){var _78c=_78b.strokeStyle,_78d=node.stroke;if(_78c&&_78d){_78d.opacity=_78c.color.a*op;}var _78e=_78b.fillStyle,fill=node.fill;if(_78e&&fill){if(fill.type==="tile"){_685.set(node,"opacity",op);}else{fill.opacity=_78e.a*op;}}}});div._esriIeOpacity=op;}else{if(this._canvas){_685.set(div.getEventSource(),"opacity",op);}else{div.getEventSource().setAttribute("opacity",op);}}}this.opacity=op;if(!_789){this.onOpacityChange(op);}}},setRenderer:function(ren){this.renderer=ren;}});var _78f=_680(_691,{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this.enableMouseEvents=lang.hitch(this,this.enableMouseEvents);this.disableMouseEvents=lang.hitch(this,this.disableMouseEvents);this._processEvent=lang.hitch(this,this._processEvent);this._initLayer();},_initLayer:function(){this.loaded=true;this.onLoad(this);},_setMap:function(){var d=this.inherited("_setMap",arguments);this.enableMouseEvents();return d;},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments);},_processEvent:function(evt){var _790=this._map,g=this.graphics,gl=g.length;evt.screenPoint=new _68d(evt.pageX-_790.position.x,evt.pageY-_790.position.y);evt.mapPoint=_790.toMap(evt.screenPoint);var i,es,gr,ds,_791=evt.target,_792=_791.parentNode;for(i=0;i<gl;i++){gr=g[i];ds=gr.getDojoShape();if(ds){es=ds.getEventSource();if(es===_791||es===_792){evt.graphic=gr;return evt;}}}},_onMouseOverHandler:function(evt){if(this._processEvent(evt)){this.onMouseOver(evt);}},_onMouseMoveHandler:function(evt){if(this._processEvent(evt)){this.onMouseMove(evt);}},_onMouseDragHandler:function(evt){if(this._processEvent(evt)){this.onMouseDrag(evt);}},_onMouseOutHandler:function(evt){if(this._processEvent(evt)){this.onMouseOut(evt);}},_onMouseDownHandler:function(evt){this._downGr=this._downPt=null;if(this._processEvent(evt)){_681.disconnect(this._onmousemove_connect);_681.disconnect(this._onmousedrag_connect);this._onmousedrag_connect=_681.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler");this._downGr=evt.graphic;this._downPt=evt.screenPoint.x+","+evt.screenPoint.y;this.onMouseDown(evt);}},_onMouseUpHandler:function(evt){this._upGr=this._upPt=null;if(this._processEvent(evt)){_681.disconnect(this._onmousedrag_connect);_681.disconnect(this._onmousemove_connect);this._onmousemove_connect=_681.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler");this._upGr=evt.graphic;this._upPt=evt.screenPoint.x+","+evt.screenPoint.y;this.onMouseUp(evt);}},_onClickHandler:function(evt){if(this._processEvent(evt)){var _793=this._downGr,upGr=this._upGr;if(_793&&upGr&&_793===upGr&&this._downPt===this._upPt){if(has("ie")<9){_688._ieGraphic=evt.graphic;}this.onClick(evt);}}},_onDblClickHandler:function(evt){if(this._processEvent(evt)){this.onDblClick(evt);}},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(this._mouseEvents){return;}var dc=_681.connect,gc=this._div.getEventSource();if(_686.renderer.toLowerCase().indexOf("canvas")===-1){this._onmouseover_connect=dc(gc,"onmouseover",this,"_onMouseOverHandler");this._onmousemove_connect=dc(gc,"onmousemove",this,"_onMouseMoveHandler");this._onmouseout_connect=dc(gc,"onmouseout",this,"_onMouseOutHandler");this._onmousedown_connect=dc(gc,"onmousedown",this,"_onMouseDownHandler");this._onmouseup_connect=dc(gc,"onmouseup",this,"_onMouseUpHandler");this._onclick_connect=dc(gc,"onclick",this,"_onClickHandler");this._ondblclick_connect=dc(gc,"ondblclick",this,"_onDblClickHandler");}this._mouseEvents=true;},disableMouseEvents:function(){if(!this._mouseEvents){return;}var ddc=_681.disconnect;ddc(this._onmouseover_connect);ddc(this._onmousemove_connect);ddc(this._onmousedrag_connect);ddc(this._onmouseout_connect);ddc(this._onmousedown_connect);ddc(this._onmouseup_connect);ddc(this._onclick_connect);ddc(this._ondblclick_connect);this._mouseEvents=false;}});_78f._GraphicsContainer=_692;_78f._GraphicsLayer=_691;if(has("extend-esri")){lang.setObject("layers.GraphicsLayer",_78f,_688);lang.setObject("layers._GraphicsContainer",_692,_688);lang.setObject("layers._GraphicsLayer",_691,_688);}return _78f;});},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(dojo,lang){var _794={};lang.setObject("dojo.regexp",_794);_794.escapeString=function(str,_795){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_795&&_795.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};_794.buildGroupRE=function(arr,re,_796){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return _794.group(b.join("|"),_796);};_794.group=function(_797,_798){return "("+(_798?"?:":"")+_797+")";};return _794;});},"esri/main":function(){define(["esri/kernel","dojo/i18n!esri/nls/jsapi","esri/config","esri/sniff"],function(esri,_799){esri.bundle=_799;return esri;});},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(lang,_79a,_79b,has,_79c){var _79d={_serializeLayerDefinitions:function(_79e){var defs=[],_79f=false,re=/[:;]/;if(_79e){_79a.forEach(_79e,function(defn,i){if(defn){defs.push([i,defn]);if(!_79f&&re.test(defn)){_79f=true;}}});if(defs.length>0){var _7a0;if(_79f){_7a0={};_79a.forEach(defs,function(defn){_7a0[defn[0]]=defn[1];});_7a0=_79b.toJson(_7a0);}else{_7a0=[];_79a.forEach(defs,function(defn){_7a0.push(defn[0]+":"+defn[1]);});_7a0=_7a0.join(";");}return _7a0;}}return null;},_serializeTimeOptions:function(_7a1,ids){if(!_7a1){return;}var _7a2=[];_79a.forEach(_7a1,function(_7a3,i){if(_7a3){var json=_7a3.toJson();if(ids&&_79a.indexOf(ids,i)!==-1){json.useTime=false;}_7a2.push("\""+i+"\":"+_79b.toJson(json));}});if(_7a2.length){return "{"+_7a2.join(",")+"}";}},_getDefaultVisibleLayers:function(_7a4){var _7a5=[],i;if(!_7a4){return _7a5;}for(i=0;i<_7a4.length;i++){if(_7a4[i].parentLayerId>=0&&_79a.indexOf(_7a5,_7a4[i].parentLayerId)===-1&&_79a.some(_7a4,function(item){return item.id===_7a4[i].parentLayerId;})){continue;}if(_7a4[i].defaultVisibility){_7a5.push(_7a4[i].id);}}return _7a5;},_getLayersForScale:function(_7a6,_7a7){var _7a8=[];if(_7a6>0&&_7a7){var i;for(i=0;i<_7a7.length;i++){if(_7a7[i].parentLayerId>=0&&_79a.indexOf(_7a8,_7a7[i].parentLayerId)===-1&&_79a.some(_7a7,function(item){return item.id===_7a7[i].parentLayerId;})){continue;}if(_7a7[i].id>=0){var _7a9=true,_7aa=_7a7[i].maxScale,_7ab=_7a7[i].minScale;if(_7aa>0||_7ab>0){if(_7aa>0&&_7ab>0){_7a9=_7aa<=_7a6&&_7a6<=_7ab;}else{if(_7aa>0){_7a9=_7aa<=_7a6;}else{if(_7ab>0){_7a9=_7a6<=_7ab;}}}}if(_7a9){_7a8.push(_7a7[i].id);}}}}return _7a8;}};if(has("extend-esri")){lang.mixin(_79c,_79d);}return _79d;});},"dojo/date":function(){define(["./has","./_base/lang"],function(has,lang){var date={};date.getDaysInMonth=function(_7ac){var _7ad=_7ac.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_7ad==1&&date.isLeapYear(_7ac)){return 29;}return days[_7ad];};date.isLeapYear=function(_7ae){var year=_7ae.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};date.getTimezoneName=function(_7af){var str=_7af.toString();var tz="";var _7b0;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_7b0=str.match(pat))){tz=_7b0[1];}else{str=_7af.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_7b0=str.match(pat))){tz=_7b0[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};date.compare=function(_7b1,_7b2,_7b3){_7b1=new Date(+_7b1);_7b2=new Date(+(_7b2||new Date()));if(_7b3=="date"){_7b1.setHours(0,0,0,0);_7b2.setHours(0,0,0,0);}else{if(_7b3=="time"){_7b1.setFullYear(0,0,0);_7b2.setFullYear(0,0,0);}}if(_7b1>_7b2){return 1;}if(_7b1<_7b2){return -1;}return 0;};date.add=function(date,_7b4,_7b5){var sum=new Date(+date);var _7b6=false;var _7b7="Date";switch(_7b4){case "day":break;case "weekday":var days,_7b8;var mod=_7b5%5;if(!mod){days=(_7b5>0)?5:-5;_7b8=(_7b5>0)?((_7b5-5)/5):((_7b5+5)/5);}else{days=mod;_7b8=parseInt(_7b5/5);}var strt=date.getDay();var adj=0;if(strt==6&&_7b5>0){adj=1;}else{if(strt==0&&_7b5<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_7b5>0)?2:-2;}_7b5=(7*_7b8)+days+adj;break;case "year":_7b7="FullYear";_7b6=true;break;case "week":_7b5*=7;break;case "quarter":_7b5*=3;case "month":_7b6=true;_7b7="Month";break;default:_7b7="UTC"+_7b4.charAt(0).toUpperCase()+_7b4.substring(1)+"s";}if(_7b7){sum["set"+_7b7](sum["get"+_7b7]()+_7b5);}if(_7b6&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};date.difference=function(_7b9,_7ba,_7bb){_7ba=_7ba||new Date();_7bb=_7bb||"day";var _7bc=_7ba.getFullYear()-_7b9.getFullYear();var _7bd=1;switch(_7bb){case "quarter":var m1=_7b9.getMonth();var m2=_7ba.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_7bc*4);_7bd=q2-q1;break;case "weekday":var days=Math.round(date.difference(_7b9,_7ba,"day"));var _7be=parseInt(date.difference(_7b9,_7ba,"week"));var mod=days%7;if(mod==0){days=_7be*5;}else{var adj=0;var aDay=_7b9.getDay();var bDay=_7ba.getDay();_7be=parseInt(days/7);mod=days%7;var _7bf=new Date(_7b9);_7bf.setDate(_7bf.getDate()+(_7be*7));var _7c0=_7bf.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_7c0+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_7c0+mod)<0:adj=2;}}}days+=adj;days-=(_7be*2);}_7bd=days;break;case "year":_7bd=_7bc;break;case "month":_7bd=(_7ba.getMonth()-_7b9.getMonth())+(_7bc*12);break;case "week":_7bd=parseInt(date.difference(_7b9,_7ba,"day")/7);break;case "day":_7bd/=24;case "hour":_7bd/=60;case "minute":_7bd/=60;case "second":_7bd/=1000;case "millisecond":_7bd*=_7ba.getTime()-_7b9.getTime();}return Math.round(_7bd);};1&&lang.mixin(lang.getObject("dojo.date",true),date);return date;});},"esri/renderer":function(){define(["esri/renderers/Renderer","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/ClassBreaksRenderer","esri/renderers/TemporalRenderer","esri/renderers/SymbolAger","esri/renderers/TimeClassBreaksAger","esri/renderers/TimeRampAger","esri/renderers/jsonUtils"],function(_7c1,_7c2,_7c3,_7c4,_7c5,_7c6,_7c7,_7c8,_7c9){return {Renderer:_7c1,SimpleRenderer:_7c2,UniqueValueRenderer:_7c3,ClassBreaksRenderer:_7c4,TemporalRenderer:_7c5,SymbolAger:_7c6,TimeClassBreaksAger:_7c7,TimeRampAger:_7c8,jsonUtils:_7c9};});},"esri/layers/ArcGISMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/request","esri/SpatialReference","esri/geometry/Extent","esri/layers/LayerInfo"],function(_7ca,lang,_7cb,has,_7cc,_7cd,_7ce,_7cf,_7d0,_7d1){var _7d2=_7ca(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",constructor:function(url,_7d3){this.layerInfos=[];var _7d4=(this._params={}),_7d5=this._url.query?this._url.query.token:null;if(_7d5){_7d4.token=_7d5;}},_load:function(){_7ce({url:this._url.path,content:lang.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(_7d6,io){try{this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_7d6&&_7d6._ssl);if(ssl){this._useSSL();}this.description=_7d6.description;this.copyright=_7d6.copyrightText;this.spatialReference=_7d6.spatialReference&&new _7cf(_7d6.spatialReference);this.initialExtent=_7d6.initialExtent&&new _7d0(_7d6.initialExtent);this.fullExtent=_7d6.fullExtent&&new _7d0(_7d6.fullExtent);this.units=_7d6.units;this.maxRecordCount=_7d6.maxRecordCount;this.maxImageHeight=_7d6.maxImageHeight;this.maxImageWidth=_7d6.maxImageWidth;this.supportsDynamicLayers=_7d6.supportsDynamicLayers;var _7d7=(this.layerInfos=[]),lyrs=_7d6.layers,dvl=(this._defaultVisibleLayers=[]);_7cb.forEach(lyrs,function(lyr,i){_7d7[i]=new _7d1(lyr);if(lyr.defaultVisibility){dvl.push(lyr.id);}});if(!this.visibleLayers){this.visibleLayers=dvl;}this.version=_7d6.currentVersion;if(!this.version){var ver;if("capabilities" in _7d6||"tables" in _7d6){ver=10;}else{if("supportedImageFormatTypes" in _7d6){ver=9.31;}else{ver=9.3;}}this.version=ver;}this.capabilities=_7d6.capabilities;if(_7cd.isDefined(_7d6.minScale)&&!this._hasMin){this.setMinScale(_7d6.minScale);}if(_7cd.isDefined(_7d6.maxScale)&&!this._hasMax){this.setMaxScale(_7d6.maxScale);}}catch(e){this._errorHandler(e);}}});if(has("extend-esri")){lang.setObject("layers.ArcGISMapServiceLayer",_7d2,_7cc);}return _7d2;});},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/sniff","dojo/io-query","esri/kernel","esri/config","esri/request","esri/urlUtils","esri/layerUtils","esri/geometry/scaleUtils","esri/layers/DynamicMapServiceLayer","esri/layers/ArcGISMapServiceLayer","esri/layers/TimeInfo","esri/layers/LayerTimeOptions","esri/layers/ImageParameters","esri/layers/DynamicLayerInfo","esri/layers/LayerMapSource"],function(_7d8,lang,_7d9,_7da,has,ioq,_7db,_7dc,_7dd,_7de,_7df,_7e0,_7e1,_7e2,_7e3,_7e4,_7e5,_7e6,_7e7){var _7e8=_7d8([_7e1,_7e2],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",constructor:function(url,_7e9){var _7ea=_7e9&&_7e9.imageParameters,dh=lang.hitch;if(_7ea){var ldef=_7ea.layerDefinitions;if(ldef){this.setLayerDefinitions(ldef);}if(_7ea.layerOption===_7e5.LAYER_OPTION_SHOW){this.visibleLayers=[].concat(_7ea.layerIds);}}this._setIsPNG32=dh(this,this._setIsPNG32);this.dpi=(_7ea&&_7ea.dpi)||96;this.imageFormat=(_7ea&&_7ea.format)||"png8";this.imageTransparency=(_7ea&&_7ea.transparent===false)?false:true;this._setIsPNG32();this.gdbVersion=_7e9&&_7e9.gdbVersion;this._params.gdbVersion=this.gdbVersion;lang.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},_7ea?_7ea.toJson():{});this.getImageUrl=dh(this,this.getImageUrl);this._initLayer=dh(this,this._initLayer);this._load=dh(this,this._load);this.useMapImage=_7e9?_7e9.useMapImage:false;if(this.useMapImage){this._imageExportHandler=dh(this,this._imageExportHandler);}this._loadCallback=_7e9&&_7e9.loadCallback;var _7eb=_7e9&&_7e9.resourceInfo;if(_7eb){this._initLayer(_7eb);}else{if(arguments[2]===undefined||arguments[2]===false){this._load();}}this.registerConnectEvents("esri.layers.ArcGISDynamicMapServiceLayer",{"gdb-version-change":true});},disableClientCaching:false,layerDefinitions:null,_initLayer:function(_7ec,io){this.inherited(arguments);if(_7ec.timeInfo){this.timeInfo=new _7e3(_7ec.timeInfo);}this.loaded=true;this.onLoad(this);var _7ed=this._loadCallback;if(_7ed){delete this._loadCallback;_7ed(this);}},getImageUrl:function(_7ee,_7ef,_7f0,_7f1){var path=this._url.path+"/export?",_7f2=this._params,sr=_7ee.spatialReference.wkid||_7da.toJson(_7ee.spatialReference.toJson()),_7f3=this._errorHandler;delete _7f2._ts;lang.mixin(_7f2,{bbox:_7ee.xmin+","+_7ee.ymin+","+_7ee.xmax+","+_7ee.ymax,bboxSR:sr,imageSR:sr,size:_7ef+","+_7f0},this.disableClientCaching?{_ts:new Date().getTime()}:{});if(_7f2.layerDefs){var defs=_7f2.layerDefs;delete _7f2.layerDefs;lang.mixin(_7f2,{layerDefs:defs});}var _7f4=(_7f2.token=this._getToken()),_7f5=_7de.addProxy(path+ioq.objectToQuery(lang.mixin({},_7f2,{f:"image"})));if((_7f5.length>_7dc.defaults.io.postLength)||this.useMapImage){this._jsonRequest=_7dd({url:path,content:lang.mixin(_7f2,{f:"json"}),callbackParamName:"callback",load:function(_7f6,io){var href=_7f6.href;if(_7f4){href+=(href.indexOf("?")===-1?("?token="+_7f4):("&token="+_7f4));}_7f1(_7de.addProxy(href));},error:_7f3});}else{_7f1(_7f5);}},_setIsPNG32:function(){var _7f7=this.imageFormat.toLowerCase(),isIE=has("ie");this.isPNG32=isIE&&isIE===6&&(_7f7==="png32"||_7f7==="png24")&&this.imageTransparency;},_setTime:function(_7f8){var _7f9=this.timeInfo,time=(this._params.time=_7f8?_7f8.toJson().join(","):null);if(this.version<10.02&&_7f9){if(!time){var _7fa=this.layerInfos;if(_7fa){var _7fb=this.layerTimeOptions,_7fc=_7fb?_7fb.slice(0):[],ids=[];_7d9.forEach(_7fa,function(info){if(!info.subLayerIds){ids.push(info.id);}});if(ids.length){_7d9.forEach(ids,function(id){if(!_7fc[id]){var opt=new _7e4();opt.useTime=false;_7fc[id]=opt;}});this._params.layerTimeOptions=_7df._serializeTimeOptions(_7fc,ids);}}}else{this._params.layerTimeOptions=_7df._serializeTimeOptions(this.layerTimeOptions);}}if(this.version>=10.02&&_7f9){if(!time&&!_7f9.hasLiveData){this._params.time="null,null";}}},setDPI:function(dpi,_7fd){this.dpi=(this._params.dpi=dpi);if(!_7fd){this.refresh(true);}},setImageFormat:function(_7fe,_7ff){this.imageFormat=(this._params.format=_7fe);this._setIsPNG32();if(!_7ff){this.refresh(true);}},setImageTransparency:function(_800,_801){this.imageTransparency=(this._params.transparent=_800);this._setIsPNG32();if(!_801){this.refresh(true);}},setVisibleLayers:function(_802,_803){this.visibleLayers=_802;this._params.layers=_7e5.LAYER_OPTION_SHOW+":"+_802.join(",");this._updateDynamicLayers();if(!_803){this.refresh(true);}},setDefaultVisibleLayers:function(_804){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;this._updateDynamicLayers();if(!_804){this.refresh(true);}},setLayerDefinitions:function(_805,_806){this.layerDefinitions=_805;this._params.layerDefs=_7df._serializeLayerDefinitions(_805);this._updateDynamicLayers();if(!_806){this.refresh(true);}},setDefaultLayerDefinitions:function(_807){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();if(!_807){this.refresh(true);}},setDisableClientCaching:function(_808){this.disableClientCaching=_808;},setLayerTimeOptions:function(_809,_80a){this.layerTimeOptions=_809;this._params.layerTimeOptions=_7df._serializeTimeOptions(_809);this._updateDynamicLayers();if(!_80a){this.refresh(true);}},refresh:function(_80b){if(_80b){this.inherited(arguments);}else{var dc=this.disableClientCaching;this.disableClientCaching=true;this.inherited(arguments);this.disableClientCaching=dc;}},setLayerDrawingOptions:function(_80c,_80d){this.layerDrawingOptions=_80c;this._updateDynamicLayers();if(!_80d){this.refresh(true);}},setDynamicLayerInfos:function(_80e,_80f){if(_80e&&_80e.length>0){this.dynamicLayerInfos=_80e;this.visibleLayers=_7df._getDefaultVisibleLayers(_80e);}else{this.dynamicLayerInfos=this.layerDrawingOptions=null;}this._updateDynamicLayers();if(!_80f){this.refresh(true);}},createDynamicLayerInfosFromLayerInfos:function(){var _810=[],_811;_7d9.forEach(this.layerInfos,function(_812,idx){_811=new _7e6(_812.toJson());_811.source=new _7e7({mapLayerId:_812.id});_810.push(_811);});return _810;},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if((this.dynamicLayerInfos&&this.dynamicLayerInfos.length>0)||(this.layerDrawingOptions&&this.layerDrawingOptions.length>0)){if(!this.dynamicLayerInfos||this.dynamicLayerInfos.length===0){this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos();}var _813,_814=this.dynamicLayerInfos,_815=[],_816=this._map&&_7e0.getScale(this._map),_817=this.visibleLayers,_818=_816?_7df._getLayersForScale(_816,_814):_817;_7d9.forEach(_814,function(info){if(!info.subLayerIds){var _819,_81a=info.id;if(_7d9.indexOf(_817,_81a)!==-1&&_7d9.indexOf(_818,_81a)!==-1){_819={id:_81a};_819.source=info.source&&info.source.toJson();var _81b;if(this.layerDefinitions&&this.layerDefinitions[_81a]){_81b=this.layerDefinitions[_81a];}if(_81b){_819.definitionExpression=_81b;}var _81c;if(this.layerDrawingOptions&&this.layerDrawingOptions[_81a]){_81c=this.layerDrawingOptions[_81a];}if(_81c){_819.drawingInfo=_81c.toJson();}var _81d;if(this.layerTimeOptions&&this.layerTimeOptions[_81a]){_81d=this.layerTimeOptions[_81a];}if(_81d){_819.layerTimeOptions=_81d.toJson();}_819.minScale=info.minScale||0;_819.maxScale=info.maxScale||0;_815.push(_819);}}},this);_813=_7da.toJson(_815);if(!this._params.dynamicLayers||(this._params.dynamicLayers.length!==_813.length||this._params.dynamicLayers!==_813)){this._params.dynamicLayers=_813;this._onDynamicLayersChange(this._params.dynamicLayers);}}else{if(this._params.dynamicLayers){this._params.dynamicLayers=null;this._onDynamicLayersChange(null);}else{this._params.dynamicLayers=null;}}},_onExtentChangeHandler:function(_81e,_81f,_820){if(_820){this._updateDynamicLayers();}this.inherited(arguments);},_setMap:function(map,_821,_822){this._map=map;this._updateDynamicLayers();return this.inherited(arguments);},onGDBVersionChange:function(){},setGDBVersion:function(_823,_824){this.gdbVersion=_823;this._params.gdbVersion=_823;this.onGDBVersionChange();if(!_824){this.refresh(true);}},exportMapImage:function(_825,_826){var m=_7dc.defaults.map,p=lang.mixin({size:m.width+","+m.height},this._params,_825?_825.toJson(this.normalization):{},{f:"json"});delete p._ts;if(p.layerDefs){var defs=p.layerDefs;delete p.layerDefs;lang.mixin(p,{layerDefs:defs});}this._exportMapImage(this._url.path+"/export",p,_826);}});if(has("extend-esri")){lang.setObject("layers.ArcGISDynamicMapServiceLayer",_7e8,_7db);}return _7e8;});},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_827,_828,lang,has,_829,_82a){var _82b="PROJCS[\"WGS_1984_Web_Mercator_Auxiliary_Sphere\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator_Auxiliary_Sphere\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],PARAMETER[\"Auxiliary_Sphere_Type\",0.0],UNIT[\"Meter\",1.0]]",_82c=[-20037508.342788905,20037508.342788905],_82d=[-20037508.342787,20037508.342787];var _82e=_827(null,{declaredClass:"esri.SpatialReference",constructor:function(json){if(json){if(lang.isObject(json)){lang.mixin(this,json);}else{if(lang.isString(json)){this.wkt=json;}else{this.wkid=json;}}}},wkid:null,wkt:null,_info:{"102113":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_82c,origin:_82d,dx:0.00001},"102100":{wkTemplate:_82b,valid:_82c,origin:_82d,dx:0.00001},"3785":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_82c,origin:_82d,dx:0.00001},"3857":{wkTemplate:_82b,valid:_82c,origin:_82d,dx:0.00001},"4326":{wkTemplate:"GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",${Central_Meridian}],UNIT[\"Degree\",0.0174532925199433]]",altTemplate:"PROJCS[\"WGS_1984_Plate_Carree\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Plate_Carree\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],UNIT[\"Degrees\",111319.491]]",valid:[-180,180],origin:[-180,180],dx:0.00001}},_isWebMercator:function(){return _828.indexOf([102113,102100,3857,3785],this.wkid)!==-1;},_isWrappable:function(){return _828.indexOf([102113,102100,3857,3785,4326],this.wkid)!==-1;},_getInfo:function(){return this.wkid?this._info[this.wkid]:null;},_canProject:function(inSR){var _82f=false;if(inSR){_82f=((this.isWebMercator()&&inSR.wkid===4326)||(inSR.isWebMercator()&&this.wkid===4326));}return _82f;},isWebMercator:function(){return this._isWebMercator();},equals:function(inSR){var _830=false;if(inSR){if(this===inSR){_830=true;}if(this.wkid||inSR.wkid){_830=(this.wkid===inSR.wkid)||(this.isWebMercator()&&inSR.isWebMercator())||(this.wkid===inSR.latestWkid)||(inSR.wkid===this.latestWkid);}else{if(this.wkt&&inSR.wkt){_830=(this.wkt.toUpperCase()===inSR.wkt.toUpperCase());}}}return _830;},toJson:function(){var _831=null,_832=_82a.isDefined;if(_832(this.wkid)){_831={wkid:this.wkid};}else{if(_832(this.wkt)){_831={wkt:this.wkt};}}if(_831&&_832(this.latestWkid)){_831.latestWkid=this.latestWkid;}return _831;}});if(has("extend-esri")){_829.SpatialReference=_82e;}return _82e;});},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_833,lang,has,_834){var _835=_833(null,{declaredClass:"esri.layers.TimeReference",constructor:function(json){if(json){lang.mixin(this,json);}}});if(has("extend-esri")){lang.setObject("layers.TimeReference",_835,_834);}return _835;});},"esri/symbols/SimpleFillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/FillSymbol","esri/symbols/SimpleLineSymbol","require"],function(_836,lang,_837,has,_838,_839,_83a,_83b,_83c,_83d){var _83e={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"};var _83f={style:_83e.STYLE_SOLID,color:[0,0,0,0.25]};var SFS=_836(_83b,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(json,_840,_841){if(json){if(lang.isString(json)){this.style=json;if(_840!==undefined){this.outline=_840;}if(_841!==undefined){this.color=_841;}}else{this.style=_83a.valueOf(this._styles,json.style);}}else{lang.mixin(this,_83f);this.outline=new _83c(this.outline);this.color=new _837(this.color);}var _842=this.style;if(_842!=="solid"&&_842!=="none"){this._src=_83d.toUrl("esri")+"/images/symbol/sfs/"+_842+".png";}},setStyle:function(_843){this.style=_843;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){var _844=this.style;if(_844===_83e.STYLE_NULL){return null;}else{if(_844===_83e.STYLE_SOLID){return this.color;}else{return lang.mixin(lang.mixin({},_838.defaultPattern),{src:this._src,width:10,height:10});}}},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()};},toJson:function(){return _83a.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}));}});lang.mixin(SFS,_83e);SFS.defaultProps=_83f;if(has("extend-esri")){lang.setObject("symbol.SimpleFillSymbol",SFS,_839);_839.symbol.defaultSimpleFillSymbol=_83f;}return SFS;});},"esri/layers/ArcGISTiledMapServiceLayer":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","dojo/io-query","esri/kernel","esri/urlUtils","esri/SpatialReference","esri/layers/TiledMapServiceLayer","esri/layers/ArcGISMapServiceLayer","esri/layers/TileInfo","esri/layers/TimeInfo"],function(_845,_846,lang,_847,_848,has,ioq,_849,_84a,_84b,_84c,_84d,_84e,_84f){var _850=_846([_84c,_84d],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:["World_Topo_Map","World_Street_Map","Ocean_Basemap"],constructor:function(url,_851){if(_851){if(_851.roundrobin){_845.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'.");_851.tileServers=_851.roundrobin;}this._setTileServers(_851.tileServers);this._loadCallback=_851.loadCallback;}this._params=lang.mixin({},this._url.query);this._initLayer=lang.hitch(this,this._initLayer);var _852=_851&&_851.resourceInfo;if(_852){this._initLayer(_852);}else{this._load=lang.hitch(this,this._load);this._load();}this.registerConnectEvents("esri.layers.ArcGISTiledMapServiceLayer",true);},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(list){if(list&&list.length>0){this.tileServers=list;var i,il=list.length;for(i=0;i<il;i++){list[i]=_84a.urlToObject(list[i]).path;}}},_initLayer:function(_853,io){this.inherited(arguments);this.resourceInfo=_848.toJson(_853);this.tileInfo=new _84e(_853.tileInfo);if(!this.spatialReference&&this.tileInfo.spatialReference){this.spatialReference=new _84b(this.tileInfo.spatialReference.toJson());}this.isPNG32=this.tileInfo.format==="PNG24"||this.tileInfo.format==="PNG32";if(_853.timeInfo){this.timeInfo=new _84f(_853.timeInfo);}var path=this._url.path,_854=this._loadCallback,_855=(window.location.protocol==="file:")?"http:":window.location.protocol,_856=path.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+)\/mapserver/i),_857=_856&&_856[2];if(!this.tileServers){if(_853.tileServers){this._setTileServers(_853.tileServers);}else{var _858=(path.search(/^https?\:\/\/server\.arcgisonline\.com/i)!==-1),_859=(path.search(/^https?\:\/\/services\.arcgisonline\.com/i)!==-1);if(_858||_859){this._setTileServers([path,path.replace((_858?/server\.arcgisonline/i:/services\.arcgisonline/i),(_858?"services.arcgisonline":"server.arcgisonline"))]);}}}if(_857&&_847.indexOf(this._agolAttrs,_857)!==-1){this.hasAttributionData=true;this.attributionDataUrl=this.attributionDataUrl||(_855+"//static.arcgis.com/attribution/"+_857);}this.loaded=true;this.onLoad(this);if(_854){delete this._loadCallback;_854(this);}},getTileUrl:function(_85a,row,col){var ts=this.tileServers,_85b=this._url.query,iurl=(ts?ts[row%ts.length]:this._url.path)+"/tile/"+_85a+"/"+row+"/"+col;if(_85b){iurl+=("?"+ioq.objectToQuery(_85b));}var _85c=this._getToken();if(_85c&&(!_85b||!_85b.token)){iurl+=(iurl.indexOf("?")===-1?"?":"&")+"token="+_85c;}return _84a.addProxy(iurl);}});if(has("extend-esri")){lang.setObject("layers.ArcGISTiledMapServiceLayer",_850,_849);}return _850;});},"esri/layers/TimeInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/TimeExtent","esri/layers/TimeReference","esri/layers/LayerTimeOptions"],function(_85d,lang,has,_85e,_85f,_860,_861){var _862=_85d(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(json){if(json!==null){lang.mixin(this,json);if(json.exportOptions){this.exportOptions=new _861(json.exportOptions);}this.timeExtent=new _85f(json.timeExtent);this.timeReference=new _860(json.timeReference);}}});lang.mixin(_862,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});if(has("extend-esri")){lang.setObject("layers.TimeInfo",_862,_85e);}return _862;});},"esri/Evented":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/Evented","dojo/on","dojo/has","esri/kernel"],function(_863,lang,_864,_865,on,has,_866){var _867=_863([_865],{declaredClass:"esri.Evented",registerConnectEvents:function(_868,_869){if(!_869){return;}var _86a=this.constructor.prototype,map={},_86b=this.declaredClass==_868,attr,_86c,_86d,k;if(!_86a.hasOwnProperty("_onMap")||!this._onMap._final){for(attr in this){if(/^on/.test(attr)){_86c=this._hyphenLower(attr).toLowerCase();if(!_86a._onMap||!_86a._onMap[_86c]||_869[_86c]){map[_86c]={"method":attr};if(_869[_86c]){map[_86c].argKeys=_869[_86c];}}}}for(k in _869){if(!map[k]){_86d=this._onCamelCase(k);map[k]={"method":_86d,"argKeys":_869[k]};}}map._final=_86b;if(!this._onMap){_86a._onMap=map;}else{var copy=lang.mixin({},_86a._onMap);_86a._onMap=lang.mixin(copy,map);}}},on:function(type,_86e){var _86f=this._onMap,_870=(typeof type=="string")&&type.toLowerCase(),_871=this._onCamelCase(_870),_872=_86f&&_86f[_870],_873=(_872&&_872.method)||(this[_871]&&lang.isFunction(this[_871])&&_871),_874;if(_873){if(_872&&lang.isArray(_872.argKeys)){_874=this._onArr2Obj(_86e,_86f[_870].argKeys);return _864.after(this,_873,_874,true);}else{return _864.after(this,_873,_86e,true);}}return this.inherited(arguments);},emit:function(type,_875){var ret,_876,_877,_878,_879=type.toLowerCase(),_87a=this._onCamelCase(type),_87b=this._onMap;_877=(_87b&&_87b[_879]&&_87b[_879].method)||(lang.isFunction(this[_87a])&&_87a);_878=_877&&this[_877];if(_877&&_87b&&_87b[_879]){this._onObj2Arr(function(){_876=Array.prototype.slice.call(arguments);},_87b[_879].argKeys)(_875);}_875=_875||{};if(!_875.target){_875.target=this;}if(_878){ret=_878.apply(this,_876||[_875]);}this.inherited(arguments);return ret;},_onObj2Arr:function(_87c,_87d){if(!_87d){return _87c;}else{var self=this;return function(evt){var i,args=[],_87e=_87d.length;for(i=0;i<_87e;i++){args[i]=evt[_87d[i]];}_87c.apply(self,args);};}},_onArr2Obj:function(_87f,_880){if(!_880){return _87f;}else{var self=this;return function(){var i,evt={},_881=arguments.length;for(i=0;i<_881;i++){evt[_880[i]]=arguments[i];}if(!evt.target){evt.target=self;}_87f(evt);};}},_hyphenLower:function(type){return type.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(m,off){return (off?"-":"")+m.toLowerCase();});},_onCamelCase:function(type){return "on"+type.substr(0,1).toUpperCase()+type.substr(1).replace(/\-([a-z])/g,function(m,s){return s.toUpperCase();});}});if(has("extend-esri")){_866.Evented=_867;}return _867;});},"dojox/gfx/_base":function(){define("dojox/gfx/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/Color","dojo/_base/sniff","dojo/_base/window","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-geometry"],function(_882,lang,_883,has,win,arr,dom,_884,_885){var g=lang.getObject("dojox.gfx",true),b=g._base={};g._hasClass=function(node,_886){var cls=node.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_886+" ")>=0;};g._addClass=function(node,_887){var cls=node.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_887+" ")<0){node.setAttribute("className",cls+(cls?" ":"")+_887);}};g._removeClass=function(node,_888){var cls=node.getAttribute("className");if(cls){node.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_888+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _889={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};var p;if(has("ie")){win.doc.documentElement.style.fontSize="100%";}var div=_884.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},win.body());for(p in _889){div.style.fontSize=p;_889[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}win.body().removeChild(div);return _889;};var _88a=null;b._getCachedFontMeasurements=function(_88b){if(_88b||!_88a){_88a=b._getFontMeasurements();}return _88a;};var _88c=null,_88d={};b._getTextBox=function(text,_88e,_88f){var m,s,al=arguments.length;var i;if(!_88c){_88c=_884.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},win.body());}m=_88c;m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(al>1&&_88e){for(i in _88e){if(i in _88d){continue;}s[i]=_88e[i];}}if(al>2&&_88f){m.className=_88f;}m.innerHTML=text;if(m["getBoundingClientRect"]){var bcr=m.getBoundingClientRect();return {l:bcr.left,t:bcr.top,w:bcr.width||(bcr.right-bcr.left),h:bcr.height||(bcr.bottom-bcr.top)};}else{return _885.getMarginBox(m);}};var _890=0;b._getUniqueId=function(){var id;do{id=_882._scopeName+"xUnique"+(++_890);}while(dom.byId(id));return id;};lang.mixin(g,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _891={};return function(type){var t=_891[type];if(t){return new t();}t=_891[type]=new Function();t.prototype=g["default"+type];return new t();};})(),normalizeColor:function(_892){return (_892 instanceof _883)?_892:new _883(_892);},normalizeParameters:function(_893,_894){var x;if(_894){var _895={};for(x in _893){if(x in _894&&!(x in _895)){_893[x]=_894[x];}}}return _893;},makeParameters:function(_896,_897){var i=null;if(!_897){return lang.delegate(_896);}var _898={};for(i in _896){if(!(i in _898)){_898[i]=lang.clone((i in _897)?_897[i]:_896[i]);}}return _898;},formatNumber:function(x,_899){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var _89a=val.indexOf(".");if(_89a>=0&&val.length-_89a>5){val=x.toFixed(4);}}if(x<0){return val;}return _899?" "+val:val;},makeFontString:function(font){return font.style+" "+font.variant+" "+font.weight+" "+font.size+" "+font.family;},splitFontString:function(str){var font=g.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}font.style=t[0];font.variant=t[1];font.weight=t[2];var i=t[3].indexOf("/");font.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;}else{if(t[4].charAt(0)=="/"){j=5;}}}if(j<t.length){font.family=t.slice(j).join(" ");}}while(false);return font;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return g._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*g.px_in_pt();},px2pt:function(len){return len/g.px_in_pt();},normalizedLength:function(len){if(len.length===0){return 0;}if(len.length>2){var _89b=g.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_89b;case "in":return val*72*_89b;case "pc":return val*12*_89b;case "mm":return val*g.mm_in_pt*_89b;case "cm":return val*g.cm_in_pt*_89b;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b;},switchTo:function(_89c){var ns=typeof _89c=="string"?g[_89c]:_89c;if(ns){arr.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","EsriPath","Surface","createSurface","fixTarget"],function(name){g[name]=ns[name];});}}});return g;});},"esri/layers/QueryDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource","esri/SpatialReference"],function(_89d,lang,has,_89e,_89f,_8a0,_8a1){var _8a2=_89d(_8a0,{declaredClass:"esri.layers.QueryDataSource",constructor:function(json){if(json){if(json.oidFields&&lang.isString(json.oidFields)){this.oidFields=json.oidFields.split(",");}if(json.spatialReference){this.spatialReference=new _8a1(json.spatialReference);}}},toJson:function(){var json={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var _8a3;if(this.geometryType.toLowerCase()==="point"){_8a3="esriGeometryPoint";}else{if(this.geometryType.toLowerCase()==="multipoint"){_8a3="esriGeometryMultipoint";}else{if(this.geometryType.toLowerCase()==="polyline"){_8a3="esriGeometryPolyline";}else{if(this.geometryType.toLowerCase()==="polygon"){_8a3="esriGeometryPolygon";}else{_8a3=this.geometryType;}}}}json.geometryType=_8a3;}return _89f.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.QueryDataSource",_8a2,_89e);}return _8a2;});},"esri/geometry/Polygon":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent","esri/geometry/mathUtils"],function(_8a4,_8a5,lang,has,_8a6,_8a7,_8a8,_8a9,_8aa,_8ab,_8ac){var _8ad={type:"polygon",rings:null};var _8ae=_8a4(_8a9,{declaredClass:"esri.geometry.Polygon",constructor:function(obj){lang.mixin(this,_8ad);this.rings=[];this._ring=0;if(obj){if(obj.rings){lang.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new _8a8(this.spatialReference);}}this.verifySR();},_extent:null,addRing:function(_8af){this._extent=null;this._ring=this.rings.length;this.rings[this._ring]=[];if(lang.isArray(_8af[0])){_8a5.forEach(_8af,this._addPointArr,this);}else{_8a5.forEach(_8af,this._addPoint,this);}return this;},_addPointArr:function(_8b0){this.rings[this._ring].push(_8b0);},_addPoint:function(_8b1){this.rings[this._ring].push([_8b1.x,_8b1.y]);},_insertPoints:function(_8b2,_8b3){this._extent=null;this._ring=_8b3;if(!this.rings[this._ring]){this.rings[this._ring]=[];}_8a5.forEach(_8b2,this._addPoint,this);},_validateInputs:function(_8b4,_8b5){if((_8b4!==null&&_8b4!==undefined)&&(_8b4<0||_8b4>=this.rings.length)){return false;}if((_8b5!==null&&_8b4!==undefined)&&(_8b5<0||_8b5>=this.rings[_8b4].length)){return false;}return true;},getPoint:function(_8b6,_8b7){if(this._validateInputs(_8b6,_8b7)){return new _8aa(this.rings[_8b6][_8b7],this.spatialReference);}},setPoint:function(_8b8,_8b9,_8ba){if(this._validateInputs(_8b8,_8b9)){this._extent=null;this.rings[_8b8][_8b9]=[_8ba.x,_8ba.y];return this;}},insertPoint:function(_8bb,_8bc,_8bd){if(this._validateInputs(_8bb)&&_8a7.isDefined(_8bc)&&(_8bc>=0&&_8bc<=this.rings[_8bb].length)){this._extent=null;this.rings[_8bb].splice(_8bc,0,[_8bd.x,_8bd.y]);return this;}},removeRing:function(_8be){if(this._validateInputs(_8be,null)){this._extent=null;var arr=this.rings.splice(_8be,1)[0],i,il=arr.length,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new _8aa(arr[i],sr);}return arr;}},removePoint:function(_8bf,_8c0){if(this._validateInputs(_8bf,_8c0)){this._extent=null;return new _8aa(this.rings[_8bf].splice(_8c0,1)[0],this.spatialReference);}},getExtent:function(){var _8c1;if(this._extent){_8c1=new _8ab(this._extent);_8c1._partwise=this._partwise;return _8c1;}var _8c2=this.rings,pal=_8c2.length;if(!pal||!_8c2[0].length){return;}var ring,_8c3,x,y,xmax,ymax,pa,pt,ptl,xmin=(xmax=_8c2[0][0][0]),ymin=(ymax=_8c2[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,_8c4=[],_8c5,_8c6,_8c7,_8c8;for(pa=0;pa<pal;pa++){ring=_8c2[pa];_8c5=(_8c6=ring[0]&&ring[0][0]);_8c7=(_8c8=ring[0]&&ring[0][1]);ptl=ring.length;for(pt=0;pt<ptl;pt++){_8c3=ring[pt];x=_8c3[0];y=_8c3[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);_8c5=min(_8c5,x);_8c7=min(_8c7,y);_8c6=max(_8c6,x);_8c8=max(_8c8,y);}_8c4.push(new _8ab({xmin:_8c5,ymin:_8c7,xmax:_8c6,ymax:_8c8,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:(sr?sr.toJson():null)};this._partwise=_8c4.length>1?_8c4:null;_8c1=new _8ab(this._extent);_8c1._partwise=this._partwise;return _8c1;},contains:function(_8c9){var _8ca=this.rings,ring,_8cb=false,pi,pj,_8cc,j,i,pa,pal=_8ca.length,_8cd=this.spatialReference,_8ce=_8c9.spatialReference,_8cf,x=_8c9.x,y=_8c9.y;if(_8cd&&_8ce&&!_8cd.equals(_8ce)&&_8cd._canProject(_8ce)){_8cf=_8cd.isWebMercator()?_8aa.lngLatToXY(x,y):_8aa.xyToLngLat(x,y,true);x=_8cf[0];y=_8cf[1];}for(pa=0;pa<pal;pa++){ring=_8ca[pa];_8cc=ring.length;j=0;for(i=0;i<_8cc;i++){j++;if(j===_8cc){j=0;}pi=ring[i];pj=ring[j];if((pi[1]<y&&pj[1]>=y||pj[1]<y&&pi[1]>=y)&&(pi[0]+(y-pi[1])/(pj[1]-pi[1])*(pj[0]-pi[0])<x)){_8cb=!_8cb;}}}return _8cb;},isClockwise:function(arr){var area=0,i,il=arr.length,func=lang.isArray(arr[0])?function(p1,p2){return p1[0]*p2[1]-p2[0]*p1[1];}:function(p1,p2){return p1.x*p2.y-p2.x*p1.y;};for(i=0;i<il;i++){area+=func(arr[i],arr[(i+1)%il]);}return (area/2)<=0;},isSelfIntersecting:function(_8d0){_8d0=_8d0||this;var i,j,k,m,_8d1,_8d2,_8d3,_8d4=_8d0.rings.length;for(k=0;k<_8d4;k++){for(i=0;i<_8d0.rings[k].length-1;i++){_8d1=[[_8d0.rings[k][i][0],_8d0.rings[k][i][1]],[_8d0.rings[k][i+1][0],_8d0.rings[k][i+1][1]]];for(j=k+1;j<_8d4;j++){for(m=0;m<_8d0.rings[j].length-1;m++){_8d2=[[_8d0.rings[j][m][0],_8d0.rings[j][m][1]],[_8d0.rings[j][m+1][0],_8d0.rings[j][m+1][1]]];_8d3=_8ac._getLineIntersection2(_8d1,_8d2);if(_8d3){if(!((_8d3[0]===_8d1[0][0]&&_8d3[1]===_8d1[0][1])||(_8d3[0]===_8d2[0][0]&&_8d3[1]===_8d2[0][1])||(_8d3[0]===_8d1[1][0]&&_8d3[1]===_8d1[1][1])||(_8d3[0]===_8d2[1][0]&&_8d3[1]===_8d2[1][1]))){return true;}}}}}var _8d5=_8d0.rings[k].length;if(_8d5<=4){continue;}for(i=0;i<_8d5-3;i++){var _8d6=_8d5-1;if(i===0){_8d6=_8d5-2;}_8d1=[[_8d0.rings[k][i][0],_8d0.rings[k][i][1]],[_8d0.rings[k][i+1][0],_8d0.rings[k][i+1][1]]];for(j=i+2;j<_8d6;j++){_8d2=[[_8d0.rings[k][j][0],_8d0.rings[k][j][1]],[_8d0.rings[k][j+1][0],_8d0.rings[k][j+1][1]]];_8d3=_8ac._getLineIntersection2(_8d1,_8d2);if(_8d3){if(!((_8d3[0]===_8d1[0][0]&&_8d3[1]===_8d1[0][1])||(_8d3[0]===_8d2[0][0]&&_8d3[1]===_8d2[0][1])||(_8d3[0]===_8d1[1][0]&&_8d3[1]===_8d1[1][1])||(_8d3[0]===_8d2[1][0]&&_8d3[1]===_8d2[1][1]))){return true;}}}}}return false;},toJson:function(){var json={rings:lang.clone(this.rings)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_8ae.defaultProps=_8ad;_8ae.createEllipse=function(_8d7){var dx=_8d7.center.x,dy=_8d7.center.y,a=_8d7.longAxis,b=_8d7.shortAxis,_8d8=_8d7.numberOfPoints,map=_8d7.map,pt,i,_8d9,_8da,_8db,path=[],_8dc=(2*Math.PI)/_8d8;for(i=0;i<_8d8;i++){_8d9=Math.cos(i*_8dc);_8da=Math.sin(i*_8dc);pt=map.toMap({x:a*_8d9+dx,y:b*_8da+dy});path.push(pt);}path.push(path[0]);_8db=new _8ae(map.spatialReference);_8db.addRing(path);return _8db;};_8ae.createCircle=function(_8dd){var _8de={center:_8dd.center,longAxis:_8dd.r,shortAxis:_8dd.r,numberOfPoints:_8dd.numberOfPoints,map:_8dd.map};var _8df=_8ae.createEllipse(_8de);return _8df;};if(has("extend-esri")){lang.setObject("geometry.Polygon",_8ae,_8a6);_8a6.geometry.defaultPolygon=_8ad;_8a6.geometry.createEllipse=_8ae.createEllipse;_8a6.geometry.createCircle=_8ae.createCircle;_8a6.geometry.isClockwise=_8ae.prototype.isClockwise;_8a6.geometry.polygonSelfIntersecting=_8ae.prototype.isSelfIntersecting;}return _8ae;});},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","esri/kernel"],function(_8e0,_8e1,has,_8e2){var _8e3={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:true,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com",basemaps:{"streets":{title:"Streets",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},"satellite":{title:"Satellite",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},"hybrid":{title:"Imagery with Labels",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:true}]},"topo":{title:"Topographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},"gray":{title:"Light Gray Canvas",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:true}]},"oceans":{title:"Oceans",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer"}]},"national-geographic":{title:"National Geographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},"osm":{title:"OpenStreetMap",baseMapLayers:[{type:"OpenStreetMap"}]}}},io:{errorHandler:function(_8e4,io){_8e1.publish("esri.Error",[_8e4]);},proxyUrl:null,alwaysUseProxy:false,corsEnabledServers:["www.arcgis.com","tiles.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","static.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","qaext.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","tilesdevext.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com"],corsDetection:true,_processedCorsServers:{},proxyRules:[],postLength:2000,timeout:60000}}};if(has("extend-esri")){_8e2.config=_8e3;}if(!_8e0.noGlobals){window.esriConfig=_8e3;}return _8e3;});},"esri/MouseEvents":function(){define(["dojo/_base/declare","dojo/_base/html","dojo/_base/lang","dojo/_base/sniff","dojo/_base/connect","dojo/_base/event","esri/kernel","esri/Evented","esri/geometry/Point","esri/geometry/ScreenPoint"],function(_8e5,html,lang,has,_8e6,_8e7,_8e8,_8e9,_8ea,_8eb){var _8ec=_8e6.connect,_8ed=_8e6.disconnect;var _8ee=_8e5([_8e9],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:has("mac")!==-1?1:3,wheelDivisor:has("chrome")<2?360:120,preventPageScroll:true,map:null,constructor:function(node,_8ef){this.node=node;lang.mixin(this,_8ef);var _8f0=function(evt){_8e7.stop(evt);return false;};if(has("mozilla")){html.style(node,"MozUserSelect","none");}this._handles=[_8ec(node,"onselectstart",_8f0),_8ec(node,"ondragstart",_8f0),_8ec(node,"onmouseenter",this,this._onMouseEnterHandler),_8ec(node,"onmouseleave",this,this._onMouseLeaveHandler),_8ec(node,"onmousedown",this,this._onMouseDownHandler),_8ec(node,"onclick",this,this._onClickHandler),_8ec(node,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=_8ec(node,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=_8ec(node,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=lang.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;var map=this.map;this.preventPageScroll=map?(map.isScrollWheelZoom||map.isScrollWheelPan):this.preventPageScroll;this.enableMouseWheel(false);this.registerConnectEvents("esri.MouseEvents",true);},_fire:function(_8f1,evt){if(this[_8f1]){this[_8f1](evt);}if(this.map){if(this.map[_8f1]){this.map[_8f1](evt);}}},_processEvent:function(evt){evt=_8e7.fix(evt,evt.target);var map=this.map,pos=map&&map.position;if(pos){if(evt.type==="DOMMouseScroll"&&has("ff")<3){evt.screenPoint=new _8eb(window.scrollX+evt.screenX-pos.x,window.scrollY+evt.screenY-pos.y);}else{evt.screenPoint=new _8eb(evt.pageX-pos.x,evt.pageY-pos.y);}evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _8ea();}evt.numPoints=0;return evt;},_onMouseEnterHandler:function(evt){_8ed(this._onKeyDown_connect);_8ed(this._onKeyUp_connect);this._onKeyDown_connect=_8ec(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=_8ec(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(evt));},_onMouseLeaveHandler:function(evt){_8ed(this._onKeyDown_connect);_8ed(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(evt));},_onMouseMoveHandler:function(evt){if(this._dragEnd){this._dragEnd=false;return;}this._fire("onMouseMove",this._processEvent(evt));},_onMouseDownHandler:function(evt){_8ed(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;if(this.node.setCapture){this.node.setCapture(false);}this._onMouseDragHandler_connect=_8ec(document,"onmousemove",this,this._onMouseDragHandler);this._startX=evt.pageX;this._startY=evt.pageY;this._fire("onMouseDown",this._processEvent(evt));},_onMouseUpHandler:function(evt){var node=this.node;if(node.releaseCapture){node.releaseCapture();}_8ed(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;_8ed(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=_8ec(node,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(evt));},_onMouseDragHandler:function(evt){_8ed(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=_8ec(document,"onmousemove",this,this._onMouseDraggingHandler);_8ed(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=_8ec(document,"onmouseup",this,this._onDragMouseUpHandler);this._docLeaveConnect=_8ec(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(evt));},_onMouseDraggingHandler:function(evt){_8e7.stop(evt);this._fire("onMouseDrag",this._processEvent(evt));},_onDragMouseUpHandler:function(evt){var node=this.node;if(node.releaseCapture){node.releaseCapture();}this._dragEnd=true;_8ed(this._docLeaveConnect);_8ed(this._onMouseDragHandler_connect);_8ed(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=_8ec(node,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=_8ec(node,"onmouseup",this,this._onMouseUpHandler);evt=this._processEvent(evt);this._fire("onMouseDragEnd",evt);this._fire("onMouseUp",evt);},_onDocMouseOut:function(evt){var _8f2=evt.relatedTarget,_8f3=evt.relatedTarget&&evt.relatedTarget.nodeName.toLowerCase();if(!_8f2||(has("chrome")&&_8f3==="html")){this._onDragMouseUpHandler(evt);}},_onClickHandler:function(evt){evt=this._processEvent(evt);if(evt.pageX!==this._startX||evt.pageY!==this._startY){return;}clearTimeout(this._clickTimer);this._clickEvent=lang.mixin({},evt);this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration);},_fireClickEvent:function(){clearTimeout(this._clickTimer);if(has("ie")<9){this._clickEvent.graphic=_8e8._ieGraphic;delete _8e8._ieGraphic;}this._fire("onClick",this._clickEvent);},_onDblClickHandler:function(evt){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(evt));},_onMouseWheelHandler:function(evt){var map=this.map,_8f4=map?(map.isScrollWheelZoom||map.isScrollWheelPan):this.preventPageScroll;if(_8f4){_8e7.stop(evt);}var _8f5=has("ie")||has("webkit")?evt.wheelDelta/this.wheelDivisor:-evt.detail/this.mozWheelDivisor,_8f6=Math.abs(_8f5);if(_8f6<=this.minWheelValue){_8f6=this.minWheelValue;}else{_8f6=this.maxWheelValue;}evt.value=_8f5<0?-_8f6:_8f6;this._fire("onMouseWheel",this._processEvent(evt));},_onKeyDownHandler:function(evt){this._fire("onKeyDown",evt);},_onKeyUpHandler:function(evt){this._fire("onKeyUp",evt);},enableMouseWheel:function(_8f7){_8ed(this._scrollHandle);this._scrollHandle=_8ec(this.node,(has("ff")||has("mozilla"))?(_8f7?"MozMousePixelScroll":"DOMMouseScroll"):"onmousewheel",this,this._onMouseWheelHandler);},setImmediateClick:function(_8f8){this.doubleClickDuration=_8f8?0:this._initialDuration;},destroy:function(){var _8f9=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),i;for(i=0;i<_8f9.length;i++){_8ed(_8f9[i]);}clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null;}});if(has("extend-esri")){_8e8.MouseEvents=_8ee;}return _8ee;});},"esri/geometry/Geometry":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference"],function(_8fa,lang,has,_8fb,_8fc){var _8fd=_8fa(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,setSpatialReference:function(sr){this.spatialReference=sr;return this;},verifySR:function(){if(!this.spatialReference){this.setSpatialReference(new _8fc(4326));}},getExtent:function(){return null;}});if(has("extend-esri")){lang.setObject("geometry.Geometry",_8fd,_8fb);}return _8fd;});},"esri/layers/agscommon":function(){define(["esri/layers/ArcGISMapServiceLayer","esri/layers/LayerInfo","esri/layers/TimeInfo","esri/layers/LayerTimeOptions","esri/layers/TimeReference","esri/layers/Field","esri/layers/Domain","esri/layers/RangeDomain","esri/layers/CodedValueDomain","esri/layers/InheritedDomain","esri/layers/LayerSource","esri/layers/LayerMapSource","esri/layers/LayerDataSource","esri/layers/DataSource","esri/layers/TableDataSource","esri/layers/QueryDataSource","esri/layers/JoinDataSource","esri/layers/RasterDataSource","esri/layers/DynamicLayerInfo","esri/layers/LayerDrawingOptions","esri/geometry","esri/utils"],function(){return {};});},"esri/layers/RasterDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource"],function(_8fe,lang,has,_8ff,_900,_901){var _902=_8fe(_901,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){var json={type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName};return _900.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.RasterDataSource",_902,_8ff);}return _902;});},"esri/layers/DynamicLayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/LayerInfo","esri/layers/LayerMapSource","esri/layers/LayerDataSource"],function(_903,lang,has,_904,_905,_906,_907,_908){var _909=_903(_906,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:true,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(json){if(json){var _90a;if(!json.source){_90a=new _907();_90a.mapLayerId=this.id;}else{if(json.source.type==="mapLayer"){_90a=new _907(json.source);}else{_90a=new _908(json.source);}}this.source=_90a;}},toJson:function(){var json=this.inherited(arguments);json.source=this.source&&this.source.toJson();return _905.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.DynamicLayerInfo",_909,_904);}return _909;});},"esri/layers/CodedValueDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/Domain"],function(_90b,lang,has,_90c,_90d,_90e){var _90f=_90b([_90e],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(json){if(json&&lang.isObject(json)){this.codedValues=json.codedValues;}},toJson:function(){var json=this.inherited(arguments);json.codedValues=lang.clone(this.codedValues);return _90d.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.CodedValueDomain",_90f,_90c);}return _90f;});},"dijit/main":function(){define("dijit/main",["dojo/_base/kernel"],function(dojo){return dojo.dijit;});},"esri/domUtils":function(){define(["dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has","esri/kernel"],function(_910,lang,_911,has,_912){var _913={show:function(node){if(node){node.style.display="block";}},hide:function(node){if(node){node.style.display="none";}},toggle:function(node){node.style.display=node.style.display==="none"?"block":"none";},documentBox:has("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(node){var _914=0,_915=0,_916=0,_917=0,_918=0,_919=0;return [_910.connect(node,"ontouchstart",function(evt){_914=evt.touches[0].screenX;_915=evt.touches[0].screenY;_916=node.scrollWidth;_917=node.scrollHeight;_918=node.clientWidth;_919=node.clientHeight;}),_910.connect(node,"ontouchmove",function(evt){evt.preventDefault();var _91a=node.firstChild;if(_91a instanceof Text){_91a=node.childNodes[1];}var _91b=_91a._currentX||0,_91c=_91a._currentY||0;_91b+=(evt.touches[0].screenX-_914);if(_91b>0){_91b=0;}else{if(_91b<0&&(Math.abs(_91b)+_918)>_916){_91b=-1*(_916-_918);}}_91a._currentX=_91b;_91c+=(evt.touches[0].screenY-_915);if(_91c>0){_91c=0;}else{if(_91c<0&&(Math.abs(_91c)+_919)>_917){_91c=-1*(_917-_919);}}_91a._currentY=_91c;_911.set(_91a,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+_91b+"px, "+_91c+"px)"});_914=evt.touches[0].screenX;_915=evt.touches[0].screenY;})];}};if(has("extend-esri")){lang.mixin(_912,_913);}return _913;});},"esri/units":function(){define(["dojo/has","esri/kernel"],function(has,_91d){var _91e={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",ACRES:"esriAcres",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_FEET:"esriSquareFeet",SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters"};if(has("extend-esri")){_91d.Units=_91e;}return _91e;});},"dojox/gfx":function(){define("dojox/gfx",["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(lang,_91f,_920){_91f.switchTo(_920);return _91f;});},"esri/PopupBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/_base/Deferred","dojo/has","esri/kernel","esri/graphic","esri/geometry/Point","esri/geometry/jsonUtils","esri/geometry/mathUtils","esri/geometry/webMercatorUtils","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/CartographicLineSymbol","esri/symbols/SimpleFillSymbol"],function(_921,lang,_922,_923,_924,has,_925,_926,_927,_928,_929,_92a,_92b,_92c,_92d,_92e){var _92f=_921(null,{declaredClass:"esri.PopupBase",onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;},cleanup:function(){this.features=this.deferreds=null;},setFeatures:function(arg){if(!arg||!arg.length){return;}this.clearFeatures();var _930,_931;if(arg[0] instanceof _924){_931=arg;}else{_930=arg;}if(_930){this._updateFeatures(null,_930);}else{this.deferreds=_931;_931=_931.slice(0);_922.forEach(_931,function(dfd){dfd.addBoth(lang.hitch(this,this._updateFeatures,dfd));},this);}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=0;var _932=this.selectedIndex;this.selectedIndex=-1;if(_932>-1){this.onSelectionChange();}this.onClearFeatures();},getSelectedFeature:function(){var _933=this.features;if(_933){return _933[this.selectedIndex];}},select:function(_934){if(_934<0||_934>=this.count){return;}this.selectedIndex=_934;this.onSelectionChange();},enableHighlight:function(map){this._highlighted=map.graphics.add(new _926(new _927(0,0,map.spatialReference)));this._highlighted.hide();if(!this.markerSymbol){var _935=(this.markerSymbol=new _92b());_935.setStyle(_92b.STYLE_TARGET);_935._setDim(16,16,7);_935.setOutline(new _92d(_92c.STYLE_SOLID,new _923([0,255,255]),2,_92d.CAP_ROUND,_92d.JOIN_ROUND));_935.setColor(new _923([0,0,0,0]));}if(!this.lineSymbol){this.lineSymbol=new _92c(_92c.STYLE_SOLID,new _923([0,255,255]),2);}if(!this.fillSymbol){this.fillSymbol=new _92e(_92e.STYLE_NULL,new _92c(_92c.STYLE_SOLID,new _923([0,255,255]),2),new _923([0,0,0,0]));}},disableHighlight:function(map){var _936=this._highlighted;if(_936){_936.hide();map.graphics.remove(_936);delete this._highlighted;}this.markerSymbol=this.lineSymbol=this.fillSymbol=null;},showHighlight:function(){var _937=this.features&&this.features[this.selectedIndex];if(this._highlighted&&_937&&_937.geometry){this._highlighted.show();}},hideHighlight:function(){if(this._highlighted){this._highlighted.hide();}},updateHighlight:function(map,_938){var _939=_938.geometry,_93a=this._highlighted;if(!_939||!_93a){if(_93a){_93a.hide();}return;}_93a.hide();if(!_93a.getLayer()&&map){map.graphics.add(_93a);}_93a.setGeometry(_928.fromJson(_939.toJson()));var _93b;switch(_939.type){case "point":case "multipoint":_93b=this.markerSymbol;_93b.setOffset(0,0);_93b.setAngle(0);var lyr=_938.getLayer();if(lyr){var _93c=lyr._getSymbol(_938),_93d,_93e,xoff=0,yoff=0,_93f=0;if(_93c){switch(_93c.type){case "simplemarkersymbol":_93d=_93e=(_93c.size||0);break;case "picturemarkersymbol":_93d=(_93c.width||0);_93e=(_93c.height||0);break;}xoff=_93c.xoffset||0;yoff=_93c.yoffset||0;_93f=_93c.angle||0;}if(_93d&&_93e){_93b._setDim(_93d+1,_93e+1,7);}_93b.setOffset(xoff,yoff);_93b.setAngle(_93f);}break;case "polyline":_93b=this.lineSymbol;break;case "polygon":_93b=this.fillSymbol;break;}_93a.setSymbol(_93b);},showClosestFirst:function(_940){var _941=this.features;if(_941&&_941.length){if(_941.length>1){var i,_942=Infinity,_943=-1,geom,_944=_929.getLength,_945,_946=_940.spatialReference,_947,_948;_940=_940.normalize();for(i=_941.length-1;i>=0;i--){geom=_941[i].geometry;if(!geom){continue;}_947=geom.spatialReference;_945=0;try{_948=(geom.type==="point")?geom:geom.getExtent().getCenter();_948=_948.normalize();if(_946&&_947&&!_946.equals(_947)&&_946._canProject(_947)){_948=_946.isWebMercator()?_92a.geographicToWebMercator(_948):_92a.webMercatorToGeographic(_948);}_945=_944(_940,_948);}catch(e){}if(_945>0&&_945<_942){_942=_945;_943=i;}}if(_943>0){_941.splice(0,0,_941.splice(_943,1)[0]);this.select(0);}}}else{if(this.deferreds){this._marked=_940;}}},_unbind:function(dfd){var _949=_922.indexOf(this.deferreds,dfd);if(_949===-1){return;}this.deferreds.splice(_949,1);if(!this.deferreds.length){this.deferreds=null;return 2;}return 1;},_fireComplete:function(_94a){var _94b=this._marked;if(_94b){this._marked=null;this.showClosestFirst(_94b);}this.onDfdComplete(_94a);},_updateFeatures:function(dfd,_94c){if(dfd){if(this.deferreds){var res=this._unbind(dfd);if(!res){return;}if(_94c&&_94c instanceof Error){this._fireComplete(_94c);if(res===2){this.onSetFeatures();}return;}if(_94c&&_94c.length){if(!this.features){this.features=_94c;this.count=_94c.length;this.selectedIndex=0;this._fireComplete();if(res===2){this.onSetFeatures();}this.select(0);}else{var _94d=_922.filter(_94c,function(_94e){return _922.indexOf(this.features,_94e)===-1;},this);this.features=this.features.concat(_94d);this.count=this.features.length;this._fireComplete();if(res===2){this.onSetFeatures();}}}else{this._fireComplete();if(res===2){this.onSetFeatures();}}}}else{this.features=_94c;this.count=_94c.length;this.selectedIndex=0;this.onSetFeatures();this.select(0);}}});if(has("extend-esri")){_925.PopupBase=_92f;}return _92f;});},"esri/renderers/UniqueValueRenderer":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/Renderer"],function(_94f,_950,lang,has,_951,_952,_953,_954){var _955=_94f(_954,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(sym,attr,_956,_957,_958){this.values=[];this._symbols={};this.infos=[];if(sym&&!sym.declaredClass){var json=sym;sym=json.defaultSymbol;if(sym){this.defaultSymbol=_953.fromJson(sym);}this.attributeField=json.field1;this.attributeField2=json.field2;this.attributeField3=json.field3;this.fieldDelimiter=json.fieldDelimiter;this.defaultLabel=json.defaultLabel;_950.forEach(json.uniqueValueInfos,this._addValueInfo,this);}else{this.defaultSymbol=sym;this.attributeField=attr;this.attributeField2=_956;this.attributeField3=_957;this.fieldDelimiter=_958;}this._multiple=!!this.attributeField2;},addValue:function(_959,_95a){var info=lang.isObject(_959)?_959:{value:_959,symbol:_95a};this._addValueInfo(info);},removeValue:function(_95b){var i=_950.indexOf(this.values,_95b);if(i===-1){return;}this.values.splice(i,1);delete this._symbols[_95b];this.infos.splice(i,1);},getSymbol:function(_95c){var _95d=this.attributeField,_95e=_95c.attributes,_95f,_960,_961;if(this._multiple){_95f=this.attributeField2;_960=this.attributeField3;_961=[];if(_95d){_961.push(_95e[_95d]);}if(_95f){_961.push(_95e[_95f]);}if(_960){_961.push(_95e[_960]);}return this._symbols[_961.join(this.fieldDelimiter||"")]||this.defaultSymbol;}else{_95d=lang.isFunction(_95d)?_95d(_95c):_95e[_95d];return this._symbols[_95d]||this.defaultSymbol;}},_addValueInfo:function(info){var _962=info.value;this.values.push(_962);this.infos.push(info);var _963=info.symbol;if(_963){if(!_963.declaredClass){info.symbol=_953.fromJson(_963);}}this._symbols[_962]=info.symbol;},toJson:function(){var _964=_952.fixJson;return _964({type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:_950.map(this.infos||[],function(info){info=lang.mixin({},info);info.symbol=info.symbol&&info.symbol.toJson();info.value=info.value+"";return _964(info);})});}});if(has("extend-esri")){lang.setObject("renderer.UniqueValueRenderer",_955,_951);}return _955;});},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(lang,i18n,_965,_966,_967){var _968={};lang.setObject("dojo.number",_968);_968.format=function(_969,_96a){_96a=lang.mixin({},_96a||{});var _96b=i18n.normalizeLocale(_96a.locale),_96c=i18n.getLocalization("dojo.cldr","number",_96b);_96a.customs=_96c;var _96d=_96a.pattern||_96c[(_96a.type||"decimal")+"Format"];if(isNaN(_969)||Math.abs(_969)==Infinity){return null;}return _968._applyPattern(_969,_96d,_96a);};_968._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;_968._applyPattern=function(_96e,_96f,_970){_970=_970||{};var _971=_970.customs.group,_972=_970.customs.decimal,_973=_96f.split(";"),_974=_973[0];_96f=_973[(_96e<0)?1:0]||("-"+_974);if(_96f.indexOf("%")!=-1){_96e*=100;}else{if(_96f.indexOf("")!=-1){_96e*=1000;}else{if(_96f.indexOf("")!=-1){_971=_970.customs.currencyGroup||_971;_972=_970.customs.currencyDecimal||_972;_96f=_96f.replace(/\u00a4{1,3}/,function(_975){var prop=["symbol","currency","displayName"][_975.length-1];return _970[prop]||_970.currency||"";});}else{if(_96f.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _976=_968._numberPatternRE;var _977=_974.match(_976);if(!_977){throw new Error("unable to find a number expression in pattern: "+_96f);}if(_970.fractional===false){_970.places=0;}return _96f.replace(_976,_968._formatAbsolute(_96e,_977[0],{decimal:_972,group:_971,places:_970.places,round:_970.round}));};_968.round=function(_978,_979,_97a){var _97b=10/(_97a||10);return (_97b*+_978).toFixed(_979)/_97b;};if((0.9).toFixed()==0){var _97c=_968.round;_968.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d){d=0;}else{a/=d;if(a<0.5||a>=0.95){d=0;}}return _97c(v,p,m)+(v>0?d:-d);};}_968._formatAbsolute=function(_97d,_97e,_97f){_97f=_97f||{};if(_97f.places===true){_97f.places=0;}if(_97f.places===Infinity){_97f.places=6;}var _980=_97e.split("."),_981=typeof _97f.places=="string"&&_97f.places.indexOf(","),_982=_97f.places;if(_981){_982=_97f.places.substring(_981+1);}else{if(!(_982>=0)){_982=(_980[1]||[]).length;}}if(!(_97f.round<0)){_97d=_968.round(_97d,_982,_97f.round);}var _983=String(Math.abs(_97d)).split("."),_984=_983[1]||"";if(_980[1]||_97f.places){if(_981){_97f.places=_97f.places.substring(0,_981);}var pad=_97f.places!==undefined?_97f.places:(_980[1]&&_980[1].lastIndexOf("0")+1);if(pad>_984.length){_983[1]=_966.pad(_984,pad,"0",true);}if(_982<_984.length){_983[1]=_984.substr(0,_982);}}else{if(_983[1]){_983.pop();}}var _985=_980[0].replace(",","");pad=_985.indexOf("0");if(pad!=-1){pad=_985.length-pad;if(pad>_983[0].length){_983[0]=_966.pad(_983[0],pad);}if(_985.indexOf("#")==-1){_983[0]=_983[0].substr(_983[0].length-pad);}}var _986=_980[0].lastIndexOf(","),_987,_988;if(_986!=-1){_987=_980[0].length-_986-1;var _989=_980[0].substr(0,_986);_986=_989.lastIndexOf(",");if(_986!=-1){_988=_989.length-_986-1;}}var _98a=[];for(var _98b=_983[0];_98b;){var off=_98b.length-_987;_98a.push((off>0)?_98b.substr(off):_98b);_98b=(off>0)?_98b.slice(0,off):"";if(_988){_987=_988;delete _988;}}_983[0]=_98a.reverse().join(_97f.group||",");return _983.join(_97f.decimal||".");};_968.regexp=function(_98c){return _968._parseInfo(_98c).regexp;};_968._parseInfo=function(_98d){_98d=_98d||{};var _98e=i18n.normalizeLocale(_98d.locale),_98f=i18n.getLocalization("dojo.cldr","number",_98e),_990=_98d.pattern||_98f[(_98d.type||"decimal")+"Format"],_991=_98f.group,_992=_98f.decimal,_993=1;if(_990.indexOf("%")!=-1){_993/=100;}else{if(_990.indexOf("")!=-1){_993/=1000;}else{var _994=_990.indexOf("")!=-1;if(_994){_991=_98f.currencyGroup||_991;_992=_98f.currencyDecimal||_992;}}}var _995=_990.split(";");if(_995.length==1){_995.push("-"+_995[0]);}var re=_967.buildGroupRE(_995,function(_996){_996="(?:"+_967.escapeString(_996,".")+")";return _996.replace(_968._numberPatternRE,function(_997){var _998={signed:false,separator:_98d.strict?_991:[_991,""],fractional:_98d.fractional,decimal:_992,exponent:false},_999=_997.split("."),_99a=_98d.places;if(_999.length==1&&_993!=1){_999[1]="###";}if(_999.length==1||_99a===0){_998.fractional=false;}else{if(_99a===undefined){_99a=_98d.pattern?_999[1].lastIndexOf("0")+1:Infinity;}if(_99a&&_98d.fractional==undefined){_998.fractional=true;}if(!_98d.places&&(_99a<_999[1].length)){_99a+=","+_999[1].length;}_998.places=_99a;}var _99b=_999[0].split(",");if(_99b.length>1){_998.groupSize=_99b.pop().length;if(_99b.length>1){_998.groupSize2=_99b.pop().length;}}return "("+_968._realNumberRegexp(_998)+")";});},true);if(_994){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_99c,_99d,_99e,_99f){var prop=["symbol","currency","displayName"][_99e.length-1],_9a0=_967.escapeString(_98d[prop]||_98d.currency||"");_99d=_99d?"[\\s\\xa0]":"";_99f=_99f?"[\\s\\xa0]":"";if(!_98d.strict){if(_99d){_99d+="*";}if(_99f){_99f+="*";}return "(?:"+_99d+_9a0+_99f+")?";}return _99d+_9a0+_99f;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_991,decimal:_992,factor:_993};};_968.parse=function(_9a1,_9a2){var info=_968._parseInfo(_9a2),_9a3=(new RegExp("^"+info.regexp+"$")).exec(_9a1);if(!_9a3){return NaN;}var _9a4=_9a3[1];if(!_9a3[1]){if(!_9a3[2]){return NaN;}_9a4=_9a3[2];info.factor*=-1;}_9a4=_9a4.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _9a4*info.factor;};_968._realNumberRegexp=function(_9a5){_9a5=_9a5||{};if(!("places" in _9a5)){_9a5.places=Infinity;}if(typeof _9a5.decimal!="string"){_9a5.decimal=".";}if(!("fractional" in _9a5)||/^0/.test(_9a5.places)){_9a5.fractional=[true,false];}if(!("exponent" in _9a5)){_9a5.exponent=[true,false];}if(!("eSigned" in _9a5)){_9a5.eSigned=[true,false];}var _9a6=_968._integerRegexp(_9a5),_9a7=_967.buildGroupRE(_9a5.fractional,function(q){var re="";if(q&&(_9a5.places!==0)){re="\\"+_9a5.decimal;if(_9a5.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_9a5.places+"}";}}return re;},true);var _9a8=_967.buildGroupRE(_9a5.exponent,function(q){if(q){return "([eE]"+_968._integerRegexp({signed:_9a5.eSigned})+")";}return "";});var _9a9=_9a6+_9a7;if(_9a7){_9a9="(?:(?:"+_9a9+")|(?:"+_9a7+"))";}return _9a9+_9a8;};_968._integerRegexp=function(_9aa){_9aa=_9aa||{};if(!("signed" in _9aa)){_9aa.signed=[true,false];}if(!("separator" in _9aa)){_9aa.separator="";}else{if(!("groupSize" in _9aa)){_9aa.groupSize=3;}}var _9ab=_967.buildGroupRE(_9aa.signed,function(q){return q?"[-+]":"";},true);var _9ac=_967.buildGroupRE(_9aa.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=_967.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==""){sep="\\s\\xa0";}}var grp=_9aa.groupSize,grp2=_9aa.groupSize2;if(grp2){var _9ad="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_9ad+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_9ad;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _9ab+_9ac;};return _968;});},"dojo/request/script":function(){define(["module","./watch","./util","../_base/array","../_base/lang","../on","../dom","../dom-construct","../has","../_base/window"],function(_9ae,_9af,util,_9b0,lang,on,dom,_9b1,has,win){has.add("script-readystatechange",function(_9b2,_9b3){var _9b4=_9b3.createElement("script");return typeof _9b4["onreadystatechange"]!=="undefined"&&(typeof _9b2["opera"]==="undefined"||_9b2["opera"].toString()!=="[object Opera]");});var mid=_9ae.id.replace(/[\/\.\-]/g,"_"),_9b5=0,_9b6=has("script-readystatechange")?"readystatechange":"load",_9b7=/complete|loaded/,_9b8=this[mid+"_callbacks"]={},_9b9=[];function _9ba(id,url,_9bb){var doc=(_9bb||win.doc),_9bc=doc.createElement("script");_9bc.type="text/javascript";_9bc.src=url;_9bc.id=id;_9bc.async=true;_9bc.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_9bc);};function _9bd(id,_9be,_9bf){_9b1.destroy(dom.byId(id,_9be));if(_9b8[id]){if(_9bf){_9b8[id]=function(){delete _9b8[id];};}else{delete _9b8[id];}}};function _9c0(dfd){var _9c1=dfd.response.options,_9c2=_9c1.ioArgs?_9c1.ioArgs.frameDoc:_9c1.frameDoc;_9b9.push({id:dfd.id,frameDoc:_9c2});if(_9c1.ioArgs){_9c1.ioArgs.frameDoc=null;}_9c1.frameDoc=null;};function _9c3(dfd,_9c4){if(dfd.canDelete){_9c5._remove(dfd.id,_9c4.options.frameDoc,true);}};function _9c6(_9c7){if(_9b9&&_9b9.length){_9b0.forEach(_9b9,function(_9c8){_9c5._remove(_9c8.id,_9c8.frameDoc);_9c8.frameDoc=null;});_9b9=[];}return _9c7.options.jsonp?!_9c7.data:true;};function _9c9(_9ca){return !!this.scriptLoaded;};function _9cb(_9cc){var _9cd=_9cc.options.checkString;return _9cd&&eval("typeof("+_9cd+") !== \"undefined\"");};function _9ce(_9cf,_9d0){if(this.canDelete){_9c0(this);}if(_9d0){this.reject(_9d0);}else{this.resolve(_9cf);}};function _9c5(url,_9d1,_9d2){var _9d3=util.parseArgs(url,util.deepCopy({},_9d1));url=_9d3.url;_9d1=_9d3.options;var dfd=util.deferred(_9d3,_9c3,_9c6,_9d1.jsonp?null:(_9d1.checkString?_9cb:_9c9),_9ce);lang.mixin(dfd,{id:mid+(_9b5++),canDelete:false});if(_9d1.jsonp){var _9d4=new RegExp("[?&]"+_9d1.jsonp+"=");if(!_9d4.test(url)){url+=_9d4+(_9d1.frameDoc?"parent.":"")+mid+"_callbacks."+dfd.id;}dfd.canDelete=true;_9b8[dfd.id]=function(json){_9d3.data=json;dfd.handleResponse(_9d3);};}if(util.notify){util.notify.emit("send",_9d3,dfd.promise.cancel);}if(!_9d1.canAttach||_9d1.canAttach(dfd)){var node=_9c5._attach(dfd.id,url,_9d1.frameDoc);if(!_9d1.jsonp&&!_9d1.checkString){var _9d5=on(node,_9b6,function(evt){if(evt.type==="load"||_9b7.test(node.readyState)){_9d5.remove();dfd.scriptLoaded=evt;}});}}_9af(dfd);return _9d2?dfd:dfd.promise;};_9c5.get=_9c5;_9c5._attach=_9ba;_9c5._remove=_9bd;_9c5._callbacksProperty=mid+"_callbacks";return _9c5;});},"esri/layers/TileInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Point","esri/layers/LOD"],function(_9d6,lang,_9d7,has,_9d8,_9d9,_9da,_9db,LOD){var _9dc=_9d6(null,{declaredClass:"esri.layers.TileInfo",constructor:function(json){lang.mixin(this,json);this.width=this.cols;this.height=this.rows;var sr=this.spatialReference,ori=this.origin;if(sr){sr=(this.spatialReference=new _9da(sr.toJson?sr.toJson():sr));}if(ori){this.origin=new _9db(ori.toJson?ori.toJson():ori);if(!ori.spatialReference&&sr){this.origin.setSpatialReference(new _9da(sr.toJson()));}}this.lods=_9d7.map(this.lods,function(lod){return new LOD(lod);});},toJson:function(){return _9d9.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&_9d7.map(this.lods,function(lod){return lod.toJson();})});}});if(has("extend-esri")){lang.setObject("layers.TileInfo",_9dc,_9d8);}return _9dc;});},"esri/graphic":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/domUtils","esri/lang","esri/InfoTemplate","esri/geometry/jsonUtils","esri/symbols/jsonUtils"],function(_9dd,lang,has,_9de,_9df,_9e0,_9e1,_9e2,_9e3){var _9e4=_9dd(null,{declaredClass:"esri.Graphic",constructor:function(json,_9e5,_9e6,_9e7){if(json&&!json.declaredClass){this.geometry=json.geometry?_9e2.fromJson(json.geometry):null;this.symbol=json.symbol?_9e3.fromJson(json.symbol):null;this.attributes=json.attributes||null;this.infoTemplate=json.infoTemplate?new _9e1(json.infoTemplate):null;}else{this.geometry=json;this.symbol=_9e5;this.attributes=_9e6;this.infoTemplate=_9e7;}},_shape:null,_graphicsLayer:null,_visible:true,visible:true,getDojoShape:function(){return this._shape;},getLayer:function(){return this._graphicsLayer;},setGeometry:function(_9e8){this.geometry=_9e8;var gl=this._graphicsLayer;if(gl){gl._updateExtent(this);gl._draw(this,true);}return this;},setSymbol:function(_9e9,_9ea){var gl=this._graphicsLayer,_9eb=this._shape;this.symbol=_9e9;if(_9e9){this.symbol._stroke=this.symbol._fill=null;}if(gl){if(_9ea){if(_9eb){gl._removeShape(this);}}gl._draw(this,true);}return this;},setAttributes:function(_9ec){this.attributes=_9ec;return this;},setInfoTemplate:function(_9ed){this.infoTemplate=_9ed;return this;},getInfoTemplate:function(){return this._getEffInfoTemplate();},_getEffInfoTemplate:function(){var _9ee=this.getLayer();return this.infoTemplate||(_9ee&&_9ee.infoTemplate);},getTitle:function(){var _9ef=this.getInfoTemplate();var _9f0=_9ef&&_9ef.title;if(lang.isFunction(_9f0)){_9f0=_9f0.call(_9ef,this);}else{if(lang.isString(_9f0)){var _9f1=this._graphicsLayer;var func=_9f1&&_9f1._getDateOpts;_9f0=_9e0.substitute(this.attributes,_9f0,{first:true,dateFormat:func&&func.call(_9f1)});}}return _9f0;},getContent:function(){var _9f2=this.getInfoTemplate();var _9f3=_9f2&&_9f2.content;if(lang.isFunction(_9f3)){_9f3=_9f3.call(_9f2,this);}else{if(lang.isString(_9f3)){var _9f4=this._graphicsLayer;var func=_9f4&&_9f4._getDateOpts;_9f3=_9e0.substitute(this.attributes,_9f3,{dateFormat:func&&func.call(_9f4)});}}return _9f3;},show:function(){this.visible=this._visible=true;var _9f5=this._shape,_9f6;if(_9f5){_9f6=_9f5.declaredClass.toLowerCase().indexOf("canvas")===-1?_9f5.getEventSource():null;if(_9f6){_9df.show(_9f6);}}else{if(this._graphicsLayer){this._graphicsLayer._draw(this,true);}}return this;},hide:function(){this.visible=this._visible=false;var _9f7=this._shape,_9f8,_9f9;if(_9f7){_9f8=_9f7.declaredClass.toLowerCase().indexOf("canvas")===-1?_9f7.getEventSource():null;if(_9f8){_9df.hide(_9f8);}else{_9f9=this._graphicsLayer;if(_9f9){_9f9._removeShape(this);}}}return this;},toJson:function(){var json={};if(this.geometry){json.geometry=this.geometry.toJson();}if(this.attributes){json.attributes=lang.mixin({},this.attributes);}if(this.symbol){json.symbol=this.symbol.toJson();}if(this.infoTemplate){json.infoTemplate=this.infoTemplate.toJson();}return json;}});if(has("extend-esri")){_9de.Graphic=_9e4;}return _9e4;});},"esri/_coremap":function(){define(["require","dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/Deferred","dojo/_base/lang","dojo/_base/array","dojo/_base/event","dojo/_base/unload","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/sniff","dijit/registry","dojox/gfx/matrix","esri/kernel","esri/config","esri/lang","esri/Evented","esri/fx","esri/deferredUtils","esri/tileUtils","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Extent","esri/geometry/Rect","esri/geometry/mathUtils","esri/geometry/scaleUtils","esri/geometry/screenUtils","esri/geometry/webMercatorUtils","esri/layers/GraphicsLayer","esri/layers/TileInfo","esri/layers/LOD","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/OpenStreetMapLayer","esri/dijit/Popup","dojo/uacss"],function(_9fa,_9fb,_9fc,_9fd,_9fe,lang,_9ff,_a00,_a01,dom,_a02,_a03,_a04,_a05,_a06,has,_a07,_a08,_a09,_a0a,_a0b,_a0c,_a0d,_a0e,_a0f,_a10,_a11,_a12,Rect,_a13,_a14,_a15,_a16,_a17,_a18,LOD,_a19,_a1a,_a1b){var _a1c=_a15.toMapPoint,_a1d=_a15.toScreenPoint,dc=_9fd.connect,ddc=_9fd.disconnect,dh=lang.hitch,ds=_a06.set,iOf=_9ff.indexOf,_a1e=lang.mixin,uid=0,_a1f=_a0a.defaults.map,_a20=1000000,_a21=0.75,_a22=0.25,_a23=3,_a24=20,_a25=40;function _a26(_a27,_a28){var lods=_a27.lods;lods.sort(function(l1,l2){if(l1.scale>l2.scale){return -1;}else{if(l1.scale<l2.scale){return 1;}}return 0;});var _a29=[];lods=_9ff.filter(lods,function(l){if(iOf(_a29,l.scale)===-1){_a29.push(l.scale);return true;}});var pl=(_a28.lods=[]),l;_9ff.forEach(lods,function(lod,_a2a){l=(pl[_a2a]=new LOD(lod));l.level=_a2a;});_a28.tileInfo=new _a18(_a1e(_a27,{lods:pl}));};var _a2b=_9fc([_a0c],{declaredClass:"esri._CoreMap",resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:"Unable to find basemap definition for: \"${basemapName}\". Try one of these: ${list}",invalidBasemap:"Unable to add basemap: \"${basemapName}\".",unknownLayerType:"Unknown basemap layer type: \"${type}\" found in basemap definition for: \"${basemapName}\".",constructor:function(_a2c,_a2d){this.registerConnectEvents("esri._CoreMap",{"basemap-change":true,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":true,"layers-reordered":["layerIds"],"load":["map"],"pan":["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],"reposition":["x","y"],"resize":["extent","width","height"],"scale":["matrix","immediate"],"time-extent-change":["timeExtent"],"unload":["map"],"update-end":["error"],"update-start":true,"zoom":["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],"click":true,"dbl-click":true,"key-down":true,"key-up":true,"mouse-down":true,"mouse-drag":true,"mouse-drag-end":true,"mouse-drag-start":true,"mouse-move":true,"mouse-out":true,"mouse-over":true,"mouse-up":true,"mouse-wheel":true,"basic-tap":true,"double-tap":true,"pinch-end":true,"pinch-move":true,"pinch-start":true,"processed-double-tap":true,"processed-tap":true,"swipe-end":true,"swipe-move":true,"swipe-start":true,"tap":true,"two-finger-tap":true});_a1e(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_layerSize:0,_clickHandles:[],_connects:[]});_a1e(this,{_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null});_a1e(this,{cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,loaded:false});_a1e(this,{__panning:false,__zooming:false,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null});this._rids=[];var cont=(this.container=dom.byId(_a2c));var id=(this.id=_a02.get(cont,"id")||_a07.getUniqueId(this.declaredClass));_a03.add(cont,"map");var box=_a05.getContentBox(cont),dac=_a03.add,dcr=_a04.create;this.position=new _a11(0,0);this._reposition();var _a2e=(this.width=(box.w||_a1f.width));var _a2f=(this.height=box.h||_a1f.height);if(box.w===0){ds(cont,"width",_a2e+"px");}if(box.h===0){ds(cont,"height",_a2f+"px");}var _a30=(this.root=dcr("div",{id:id+"_root",style:{width:_a2e+"px",height:_a2f+"px",direction:"ltr"}}));dac(_a30,"container");var _a31=(this.__container=dcr("div",{id:id+"_container"},_a30));ds(_a31,"position","absolute");dac(_a31,"container");cont.appendChild(_a30);var _a32=(this._params=_a1e({slider:true,nav:false,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,showInfoWindowOnClick:true,displayGraphicsOnPan:true,wrapAround180:true,fitExtent:false},_a2d||{}));this.wrapAround180=_a32.wrapAround180;if(_a0b.isDefined(_a32.resizeDelay)){this.resizeDelay=_a32.resizeDelay;}if(_a32.lods){_a26({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:_a32.lods},_a32);this.__tileInfo=_a32.tileInfo;}var ext=(this.extent=_a32.extent);this._extentUtil({mapCenter:_a32.center,targetLevel:_a32.zoom,targetScale:_a32.scale});this.__visibleRect=new Rect(0,0,_a2e,_a2f);this.__visibleDelta=new Rect(0,0,_a2e,_a2f);var _a33=(this._layersDiv=dcr("div",{id:id+"_layers"}));dac(_a33,"layersDiv");_a31.appendChild(_a33);this._zoomAnimDiv=dcr("div",{style:{position:"absolute"}});if(_a32.infoWindow){this.infoWindow=_a32.infoWindow;}else{var iw=(this.infoWindow=new _a1b(_a32.popupOptions,dcr("div")));iw.startup();iw._ootb=true;ds(iw.domNode,"zIndex",_a25);}this._zoomStartHandler=dh(this,this._zoomStartHandler);this._zoomingHandler=dh(this,this._zoomingHandler);this._zoomEndHandler=dh(this,this._zoomEndHandler);this._panningHandler=dh(this,this._panningHandler);this._panEndHandler=dh(this,this._panEndHandler);this._endTranslate=dh(this,this._endTranslate);_a01.addOnWindowUnload(this,this.destroy);},_cleanUp:function(){var iw=this.infoWindow;if(iw){if(iw._ootb&&iw.destroy){iw.destroy();}else{iw.unsetMap(this);}delete this.infoWindow;}var cons=this._connects,i;for(i=cons.length-1;i>=0;i--){ddc(cons[i]);delete cons[i];}ddc(this._tsTimeExtentChange_connect);this.setInfoWindowOnClick(false);_a04.destroy(this.root);this.root=null;},_addLayer:function(_a34,_a35,_a36){var id=(_a34.id=_a34.id||(_a34 instanceof _a17?_a1f.graphicsLayerNamePrefix:_a1f.layerNamePrefix)+(uid++));this._layers[id]=_a34;var i,lyr;if(_a35===this.layerIds||_a35===this.graphicsLayerIds){i=this._layerSize;this._layerSize++;}_a34._isRefLayer=(_a36==="top");_a36=(!_a0b.isDefined(_a36)||_a36<0||_a36>_a35.length||_a36==="top")?_a35.length:_a36;if(i===0){this._firstLayerId=id;}if(!_a34._isRefLayer){while((lyr=this.getLayer(_a35[_a36-1]))&&lyr._isRefLayer){_a36--;}}_a35.splice(_a36,0,id);var _a37=dh(this,this._addLayerHandler),self=this,_a38=this._connects,_a39=function(){if(_a34.loaded){if(self._onLoadFix){self._onLoadFix=false;setTimeout(function(){_a37(_a34);},0);}else{_a37(_a34);}}else{self[id+"_addtoken_load"]=dc(_a34,"onLoad",self,"_addLayerHandler");self[id+"_addtoken_err"]=dc(_a34,"onError",self,function(_a3a){_a37(_a34,_a3a,_a35);});}};if(this.loaded||i===0||(_a34.loaded&&iOf(this.graphicsLayerIds,id)===-1)){_a39();}else{_a38.push(dc(this,"onLoad",_a39));}return _a34;},_addLayerHandler:function(_a3b,_a3c,_a3d){var id=this.id,_a3e=_a3b.id,_a3f=iOf(_a3b instanceof _a17?this.graphicsLayerIds:this.layerIds,_a3e),_a40=_a3f,_a41=false,_a42=this._params,_a43,_a44,_a45,lods;ddc(this[_a3e+"_addtoken_load"]);ddc(this[_a3e+"_addtoken_err"]);if(_a3c){delete this._layers[_a3e];if(_a3f!==-1){_a3d.splice(_a3f,1);this.onLayerAddResult(_a3b,_a3c);}return;}if(_a3f===-1){_a3f=iOf(this._internalLayerIds,_a3e);_a40=_a24+_a3f;_a41=true;}if(_a3e===this._firstLayerId){_a44=_a3b.spatialReference;_a45=(this.extent&&this.extent.spatialReference);if(_a45&&!_a45.equals(_a44)&&(_a3b.tileInfo||!_a3b.url)){_a45=null;}_a43=(this.spatialReference=(_a45||_a44));this.wrapAround180=(this.wrapAround180&&_a43&&_a43._isWrappable())?true:false;if(_a3b.tileInfo){if(!this.__tileInfo){_a26(_a1e({},_a3b.tileInfo),_a42);this.__tileInfo=_a42.tileInfo;}else{lods=this.__tileInfo.lods;this.__tileInfo=_a1e({},_a3b.tileInfo);this.__tileInfo.lods=lods;}}if(this.wrapAround180){var _a46=this.__tileInfo,info=_a43._getInfo();if(!_a46||Math.abs(info.origin[0]-_a46.origin.x)>info.dx){this.wrapAround180=false;}if(this.wrapAround180&&_a46){_a0f._addFrameInfo(_a46,info);}}_a42.units=_a3b.units;lods=this.__tileInfo&&this.__tileInfo.lods;if(lods&&lods.length){var _a47=_a42.minScale,_a48=_a42.maxScale,_a49=-1,_a4a=-1,_a4b=false,_a4c=false,i;for(i=0;i<lods.length;i++){if(_a47>0&&!_a4b&&_a47>=lods[i].scale){_a49=lods[i].level;_a4b=true;}if(_a48>0&&!_a4c&&_a48>=lods[i].scale){_a4a=(i>0)?lods[i-1].level:-1;_a4c=true;}}if(_a42.minZoom===-1){_a42.minZoom=(_a47===0)?lods[0].level:_a49;}if(_a42.maxZoom===-1){_a42.maxZoom=(_a48===0)?lods[lods.length-1].level:_a4a;}for(i=0;i<lods.length;i++){if(_a42.minZoom===lods[i].level){_a42.minScale=lods[i].scale;}if(_a42.maxZoom===lods[i].level){_a42.maxScale=lods[i].scale;}}}else{_a42.minZoom=_a42.maxZoom=_a42.zoom=-1;}}if(_a3b instanceof _a17){if(!this._gc){this._gc=new _a17._GraphicsContainer();var gc=this._gc._setMap(this,this._layersDiv);gc.id=id+"_gc";}var _a4d=_a3b._setMap(this,this._gc._surface);_a4d.id=id+"_"+_a3e;this._layerDivs[_a3e]=_a4d;this._reorderLayers(this.graphicsLayerIds);if(_a42.showInfoWindowOnClick){this._clickHandles.push(dc(_a3b,"onClick",this,"_gClickHandler"));}}else{var _a4e=_a3b._setMap(this,this._layersDiv,_a40,this.__LOD);_a4e.id=id+"_"+_a3e;this._layerDivs[_a3e]=_a4e;this._reorderLayers(this.layerIds);if(!_a41&&_a3b.declaredClass.indexOf("VETiledLayer")!==-1){this._onBingLayerAdd(_a3b);}}if(_a3e===this._firstLayerId){this.graphics=new _a17({id:id+"_graphics",displayOnPan:_a42.displayGraphicsOnPan});this._addLayer(this.graphics,this._internalLayerIds,_a24);}if(_a3b===this.graphics){var _a4f,_a50=this._layers[this._firstLayerId],_a51,zoom=_a42.zoom,_a52=_a42.scale,_a53=_a42.center,_a54=_a50.initialExtent||_a50.fullExtent;this._firstLayerId=null;if(this.extent){this.extent=this._convertGeometry(this,this.extent);}if(!this.extent&&_a54){if(_a53){_a53=this._convertGeometry(_a54,_a53);}if(_a53){_a54=_a54.centerAt(_a53);_a53=null;}}_a51=this.extent||(_a54&&new _a12(_a54.toJson()));if(_a51){if(zoom>-1){_a51=this.__getExtentForLevel(zoom,null,_a51).extent;}else{if(_a52>0){_a51=_a14.getExtentForScale(this,_a52,_a51);}}}if(!_a51){console.log("Map: "+this.invalidExtent);return;}_a4f=this._fixExtent(_a51,_a42.fitExtent);this.extent=_a4f.extent;this.__LOD=_a4f.lod;this.__setExtent(this.extent,null,null,_a42.fitExtent);this.loaded=true;this.infoWindow.setMap(this);this.onLoad(this);}if(!_a41){this.onLayerAdd(_a3b);this.onLayerAddResult(_a3b);}ddc(this[_a3e+"_addLayerHandler_connect"]);},_convertGeometry:function(host,_a55){var _a56=host&&host.spatialReference,inSR=_a55&&_a55.spatialReference;if(_a56&&inSR&&!_a56.equals(inSR)){if(_a56._canProject(inSR)){if(_a56.isWebMercator()){_a55=_a16.geographicToWebMercator(_a55);}else{if(_a56.wkid===4326){_a55=_a16.webMercatorToGeographic(_a55,true);}}}else{console.log("Map: "+_a0b.substitute({geometry:inSR.wkid||inSR.wkt,map:_a56.wkid||_a56.wkt},this.invalidGeometry));_a55=null;}}return _a55;},_reorderLayers:function(_a57){var _a58=this.onLayerReorder,djp=_a04.place,_a59=this._layerDivs,_a5a=this._layers,gcES=this._gc?this._gc._surface.getEventSource():null;if(_a57===this.graphicsLayerIds){_9ff.forEach(_a57,function(id,i){var _a5b=_a59[id];if(_a5b){djp(_a5b.getEventSource(),gcES,i);_a58(_a5a[id],i);}});}else{var g=this.graphics,gId=g?g.id:null,_a5c=this._layersDiv,_a5d;_9ff.forEach(_a57,function(id,i){_a5d=_a59[id];if(id!==gId&&_a5d){djp(_a5d,_a5c,i);_a58(_a5a[id],i);}});if(gcES){gcES=(has("ie")<9)?gcES.parentNode:gcES;djp(gcES,gcES.parentNode,_a57.length);}}this.onLayersReordered([].concat(_a57));},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor);},_zoomingHandler:function(rect){var rl=parseFloat(rect.left),rt=parseFloat(rect.top),_a5e=new _a12(rl,rt-parseFloat(rect.height),rl+parseFloat(rect.width),rt,this.spatialReference),_a5f=this.extent.getWidth()/_a5e.getWidth();this.__zoom(_a5e,_a5f,this._zoomAnimDiv.anchor);},_zoomEndHandler:function(){var _a60=this._zoomAnimDiv,_a61=_a60.extent,_a62=this.extent.getWidth()/_a61.getWidth();var _a63=_a60.anchor,_a64=_a60.newLod,_a65=_a60.levelChange;_a60.extent=_a60.anchor=_a60.levelChange=_a60.startingExtent=_a60.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(_a61,_a62,_a63,_a64,_a65);},_panningHandler:function(_a66){if(isNaN(parseFloat(_a66.left))||isNaN(parseFloat(_a66.top))){var _a67=Math.round,node=this._panAnim.node;_a66.left=(-1*(this._delta.x-_a67(this.width/2)))+"px";_a66.top=(-1*(this._delta.y-_a67(this.height/2)))+"px";_a06.set(node,"left",_a66.left);_a06.set(node,"top",_a66.top);}var d=new _a11(parseFloat(_a66.left),parseFloat(_a66.top)),dm=this.toMap(d);this.onPan(this.extent.offset(dm.x,dm.y),d);},_panEndHandler:function(node){this.__panning=false;var _a68=Math.round,_a69=new _a11(-_a68(parseFloat(node.style.left)),-_a68(parseFloat(node.style.top))),dx=_a69.x,dy=_a69.y,_a6a=this.__visibleRect,_a6b=this.__visibleDelta;_a6a.x+=-dx;_a6a.y+=-dy;_a6b.x+=-dx;_a6b.y+=-dy;ds(this._zoomAnimDiv,{left:"0px",top:"0px"});var _a6c=this.extent,rw=this._ratioW,rh=this._ratioH;_a6c=new _a12(_a6c.xmin+(dx/rw),_a6c.ymin-(dy/rh),_a6c.xmax+(dx/rw),_a6c.ymax-(dy/rh),this.spatialReference);_a69.setX(-_a69.x);_a69.setY(-_a69.y);this._delta=this._panAnim=null;this._updateExtent(_a6c);this.onPanEnd(_a6c,_a69);this._fireExtChg([_a6c,_a69,false,this.__LOD]);},_fixExtent:function(_a6d,fit){var _a6e=this._reshapeExtent(_a6d),_a6f=1+_a22;while(fit===true&&(_a6e.extent.getWidth()<_a6d.getWidth()||_a6e.extent.getHeight()<_a6d.getHeight())&&_a6e.lod.level>0&&_a6f<=_a23){_a6e=this._reshapeExtent(_a6d.expand(_a6f));_a6f+=_a22;}return _a6e;},_getFrameWidth:function(){var _a70=-1,info=this.spatialReference._getInfo();if(this.__LOD){var _a71=this.__LOD._frameInfo;if(_a71){_a70=_a71[3];}}else{if(info){_a70=Math.round((2*info.valid[1])/(this.extent.getWidth()/this.width));}}return _a70;},_reshapeExtent:function(_a72){var w=_a72.getWidth(),h=_a72.getHeight(),r=w/h,_a73=this.width/this.height,dw=0,dh=0;if(this.width>this.height){if(w>h){if(_a73>r){dw=(h*_a73)-w;}else{dh=(w/_a73)-h;}}else{if(w<h){dw=(h*_a73)-w;}else{dw=(h*_a73)-w;}}}else{if(this.width<this.height){if(w>h){dh=(w/_a73)-h;}else{if(w<h){if(_a73>r){dw=(h*_a73)-w;}else{dh=(w/_a73)-h;}}else{dh=(w/_a73)-h;}}}else{if(w<h){dw=h-w;}else{if(w>h){dh=(w/_a73)-h;}}}}if(dw){_a72.xmin-=dw/2;_a72.xmax+=dw/2;}if(dh){_a72.ymin-=dh/2;_a72.ymax+=dh/2;}return this._getAdjustedExtent(_a72);},_getAdjustedExtent:function(_a74){if(this.__tileInfo){return _a0f.getCandidateTileInfo(this,this.__tileInfo,_a74);}else{var _a75=_a14.getScale(this,_a74),_a76=this.getMinScale(),_a77=this.getMaxScale(),_a78=!_a76||(_a75<=_a76),_a79=!_a77||(_a75>=_a77);if(!_a78){_a74=_a14.getExtentForScale(this,_a76,_a74);}else{if(!_a79){_a74=_a14.getExtentForScale(this,_a77,_a74);}}return {extent:_a74};}},_gClickHandler:function(evt){var _a7a=evt.graphic,iw=this.infoWindow;if(_a7a._getEffInfoTemplate()&&iw){_a00.stop(evt);var _a7b=_a7a.geometry,_a7c=(_a7b&&_a7b.type==="point")?_a7b:evt.mapPoint,_a7d,_a7e;if(iw.setFeatures){iw.setFeatures([_a7a]);}else{iw.setTitle(_a7a.getTitle());_a7d=_a7a.getContent();if(_a7d&&lang.isString(_a7d.id)){_a7e=_a07.byId(_a7d.id);if(_a7e&&_a7e.set&&/_PopupRenderer/.test(_a7e.declaredClass)){_a7e.set("showTitle",false);}}iw.setContent(_a7d);}iw.show(_a7c);}},_onBingLayerAdd:function(_a7f){this["__"+_a7f.id+"_vis_connect"]=_9fd.connect(_a7f,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(_a7f.visible);},_onBingLayerRemove:function(_a80){_9fd.disconnect(this["__"+_a80.id+"_vis_connect"]);delete this["__"+_a80.id+"_vis_connect"];var _a81=this.layerIds;var _a82=_9ff.some(_a81,function(_a83){var _a84=this._layers[_a83];return _a84&&_a84.visible&&_a84.declaredClass.indexOf("VETiledLayer")!==-1;},this);this._toggleBingLogo(_a82);},_toggleBingLogo:function(_a85){if(_a85&&!this._bingLogo){var _a86={left:(this._mapParams&&this._mapParams.nav?"25px":"")};if(has("ie")===6){_a86.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+_9fa.toUrl("esri")+"/images/map/bing-logo-lg.png"+"')";}var _a87=this._bingLogo=_a04.create("div",{style:_a86},this.root);_a03.add(_a87,"bingLogo-lg");}else{if(!_a85&&this._bingLogo){_a04.destroy(this._bingLogo);delete this._bingLogo;}}},__panStart:function(x,y){var _a88=this._zoomAnim,_a89=this._panAnim;if(_a88&&_a88._active){_a88.stop();_a88._fire("onEnd",[_a88.node]);}else{if(_a89&&_a89._active){_a89.stop();this._panAnim=null;var rect=_a89.curve.getValue(_a89._getStep()),rl=Math.round(parseFloat(rect.left)),rt=Math.round(parseFloat(rect.top)),drag=this.navigationManager._dragOrigin;this.__pan(rl,rt);if(drag){drag.x-=rl;drag.y-=rt;}return;}}this.__panning=true;this.onPanStart(this.extent,new _a11(x,y));},__pan:function(dx,dy){var _a8a=this.extent,rw=this._ratioW,rh=this._ratioH;this.onPan(new _a12(_a8a.xmin-(dx/rw),_a8a.ymin+(dy/rh),_a8a.xmax-(dx/rw),_a8a.ymax+(dy/rh),this.spatialReference),new _a11(dx,dy));},__panEnd:function(dx,dy){var _a8b=this.__visibleRect,_a8c=this.__visibleDelta;_a8b.x+=dx;_a8b.y+=dy;_a8c.x+=dx;_a8c.y+=dy;var d=new _a11(dx,dy),_a8d=this.extent,rw=this._ratioW,rh=this._ratioH;_a8d=new _a12(_a8d.xmin-(dx/rw),_a8d.ymin+(dy/rh),_a8d.xmax-(dx/rw),_a8d.ymax+(dy/rh),this.spatialReference);this.__panning=false;this._updateExtent(_a8d);this.onPanEnd(_a8d,d);this._fireExtChg([_a8d,d,false,this.__LOD]);},__zoomStart:function(_a8e,_a8f){this.__zooming=true;this.onZoomStart(_a8e,1,_a8f,this.__LOD?this.__LOD.level:null);},__zoom:function(_a90,_a91,_a92){this.onZoom(_a90,_a91,_a92);},__zoomEnd:function(_a93,_a94,_a95,lod,_a96){ds(this._layersDiv,{left:"0px",top:"0px"});this._delta=new _a11(0,0);this.__visibleRect.x=(this.__visibleRect.y=0);_a93=new _a12(_a93);this.__LOD=lod;this._ratioW=this.width/_a93.getWidth();this._ratioH=this.height/_a93.getHeight();var _a97=this._delta;this._delta=null;this.__zooming=false;this._updateExtent(_a93,_a96);this.onZoomEnd(_a93,_a94,_a95,lod?lod.level:null);this._fireExtChg([_a93,_a97,_a96,lod]);},_extentUtil:function(zoom,pan,_a98,fit,_a99){var dfd=new _9fe(),_a9a,_a9b,_a9c,_a9d,_a9e,_a9f,_aa0,_aa1,dx,dy,_aa2=this.width,_aa3=this.height,_aa4,_aa5,_aa6;if(zoom){_a9a=zoom.numLevels;_a9b=zoom.targetLevel;_aa4=_a0b.isDefined(_a9b);_a9c=zoom.factor;_a9d=zoom.mapAnchor;_a9e=zoom.screenAnchor;_a9f=zoom.mapCenter;_aa5=zoom.levelOrFactor;_aa0=zoom.targetScale;_aa1=_a0b.isDefined(_aa0)&&_aa0>0;}if(pan){dx=pan.dx;dy=pan.dy;_a9f=pan.mapCenter;}if(lang.isArray(_a9f)){_a9f=new _a10(_a9f);}var _aa7=this._panAnim,_aa8=this._stopAnim(),_aa9=_aa8?_aa8.divExtent:this.extent,_aaa=this.__tileInfo,xmin,ymin,ewd,eht,_aab=this._params;if(!this.loaded){if(_a98){if(_aa9){_a98=this._convertGeometry(_aa9,_a98);}if(_a98){this.extent=_a98;_aab.zoom=_aab.scale=-1;_aab.center=null;}}else{if(_a9f||_aa4||_aa1){if(_a9f){if(_aa9){_a9f=this._convertGeometry(_aa9,_a9f);if(_a9f){this.extent=_aa9.centerAt(_a9f);_aab.center=null;}}else{_aab.center=_a9f;}}if(_aa4&&_a9b>-1){_aab.zoom=_a9b;_aab.scale=-1;}else{if(_aa1){_aab.scale=_aa0;_aab.zoom=-1;}}}}dfd.resolve();return dfd;}if(_a9f){_a9f=this._convertGeometry(this,_a9f);if(!_a9f){dfd.reject();return dfd;}}if(_a9d){_a9d=this._convertGeometry(this,_a9d);if(!_a9d){dfd.reject();return dfd;}}if(_a98){_a98=this._convertGeometry(this,_a98);if(!_a98){dfd.reject();return dfd;}}if(_aa7&&_a9d&&_a9e){_a9d=_a1c(this.extent,_aa2,_aa3,_a9e);}if(_aa8&&_a9d&&_a9e){_a9d=_a1c(_aa8.divExtent,_aa2,_aa3,_a9e);}if(_aa4){if(_aaa){var _aac=this.getMinZoom(),_aad=this.getMaxZoom();if(_a9b<_aac){_a9b=_aac;}else{if(_a9b>_aad){_a9b=_aad;}}_a9a=_a9b-(_aa8?_aa8.level:this.getLevel());}else{_a9a=_a9b>0?-1:1;_aa6=_aa5?_a9b:null;}}if(_a98){}else{if(_a0b.isDefined(_a9a)){var size;if(_aaa){var _aae=_aa8?_aa8.level:this.getLevel();size=this.__getExtentForLevel(_aae+_a9a,_a9f,_aa9).extent;}else{var temp=_aa8?_aa8.end:this.extent;size=temp.expand(_aa6||(_a9a>0?0.5*_a9a:2*-_a9a));if(_aa6&&_a9f){size=size.centerAt(_a9f);}}if(size){if(_a9f){_a98=size;}else{var _aaf=_a9d||_aa9.getCenter(),ymax=_aa9.ymax-((size.getHeight()-_aa9.getHeight())*(_aaf.y-_aa9.ymax)/_aa9.getHeight());xmin=_aa9.xmin-((size.getWidth()-_aa9.getWidth())*(_aaf.x-_aa9.xmin)/_aa9.getWidth());_a98=new _a12(xmin,ymax-size.getHeight(),xmin+size.getWidth(),ymax,this.spatialReference);}}}else{if(_aa1){_a98=_a14.getExtentForScale(this,_aa0,_aa9);}else{if(_a0b.isDefined(_a9c)){_a98=_aa9.expand(_a9c);}else{if(dx||dy){if(_aa8){var end=_aa8.end,c1=end.getCenter(),c2=_a1d(end,_aa2,_aa3,c1);c2.x+=dx;c2.y+=dy;c2=_a1c(end,_aa2,_aa3,c2);_a98=end.offset(c2.x-c1.x,c2.y-c1.y);}else{var _ab0=new _a11((_aa2/2)+dx,(_aa3/2)+dy),_ab1=_a1c(_aa9,_aa2,_aa3,_ab0);ewd=_aa9.getWidth();eht=_aa9.getHeight();xmin=_ab1.x-(ewd/2);ymin=_ab1.y-(eht/2);_a98=new _a12(xmin,ymin,xmin+ewd,ymin+eht,this.spatialReference);}}}}}}if(!_a98){if(_a9f){var ext=_aa8?_aa8.end:_aa9;ewd=ext.getWidth();eht=ext.getHeight();xmin=_a9f.x-(ewd/2);ymin=_a9f.y-(eht/2);_a98=new _a12(xmin,ymin,xmin+ewd,ymin+eht,this.spatialReference);}else{if(_aa8){_a98=_aa8.end;}}}if(_a98){if(this._extentDfd&&this._extentDfd.fired===-1){this._extentDfd.reject();}this._extentDfd=dfd;this.__setExtent(_a98,null,_a9e,fit,_aa8,_a99);}else{dfd.reject();}return dfd;},__setExtent:function(_ab2,_ab3,_ab4,fit,_ab5,_ab6){try{if(this._firstLayerId){this.extent=_ab2;return;}var _ab7=true,sr=this.spatialReference,ext=_ab5?_ab5.divExtent:this.extent,_ab8=this._fixExtent(_ab2,fit||false);_ab2=_ab8.extent;var _ab9=_ab2.getWidth(),_aba=_ab2.getHeight(),_abb=Math.round;if(ext){var tw=_abb(ext.getWidth()*_a20),w=_abb(_ab9*_a20),th=_abb(ext.getHeight()*_a20),h=_abb(_aba*_a20);_ab7=(tw!==w)||(th!==h);}var _abc,end,_abd,_abe,_abf=_ab5&&_ab5.rect,_ac0=_ab5&&_ab5.divExtent;if(_a1f.zoomDuration&&_ab7&&ext){_ac0=_ac0||new _a12(ext);_abf=_abf||{left:ext.xmin,top:ext.ymax,width:ext.getWidth(),height:ext.getHeight()};end={left:_ab2.xmin,top:_ab2.ymax,width:_ab9,height:_aba};_abd=_abf.width/end.width;_abe=_abf.height/end.height;var mtl=new _a10(_ab2.xmin,_ab2.ymax,sr),mbl=new _a10(_ab2.xmin,_ab2.ymin,sr),etl=new _a10(this.extent.xmin,this.extent.ymax,sr),ebl=new _a10(this.extent.xmin,this.extent.ymin,sr);_abc=_a13.getLineIntersection(etl,mtl,ebl,mbl,sr);if(!_abc&&!_ab5){_ab7=false;}}this._ratioW=this.width/_ab9;this._ratioH=this.height/_aba;var _ac1=this._zoomAnimDiv;if(_ab7){ds(this._layersDiv,{left:"0px",top:"0px"});_ab3=new _a11(0,0);this.__visibleRect.x=(this.__visibleRect.y=0);if(_abf&&end){this._delta=_ab3;_ac1.id="_zAD";_ac1.startingExtent=_ac0;_ac1.extent=_ab2;_ac1.levelChange=_ab7;_ac1.newLod=_ab8.lod;if(_ab4){_ac1.anchor=_ab4;}else{if(!_abc&&_ab5){_ac1.anchor=_ab5.anchor;}else{_ac1.anchor=_a1d(this.extent,this.width,this.height,_abc);}}this._zoomAnim=_a0d.resize({node:_ac1,start:_abf,end:end,duration:_a1f.zoomDuration,rate:_a1f.zoomRate,beforeBegin:!_ab5?this._zoomStartHandler:null,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play();this._fireOnScale(this.extent.getWidth()/_ab2.getWidth(),_ac1.anchor);}else{this._updateExtent(_ab2,_ab7);this._fireExtChg([this.extent,_ab3,_ab7,(this.__LOD=_ab8.lod)]);}}else{if(!this.__panning){if(this.loaded===false||_ab6){this._updateExtent(_ab2,_ab7);this._fireExtChg([this.extent,_ab3,_ab7,(this.__LOD=_ab8.lod)]);}else{this.__panning=true;_abf=new Rect(0,0,this.width,this.height,this.spatialReference).getCenter();_abf.x=_abb(_abf.x);_abf.y=_abb(_abf.y);this.onPanStart(this.extent,new _a11(0,0));var _ac2=(this._delta=this.toScreen(_ab2.getCenter()));this._panAnim=_a0d.slideTo({node:_ac1,left:_abf.x-_ac2.x,top:_abf.y-_ac2.y,duration:_a1f.panDuration,rate:_a1f.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler});this._panAnim.play();}}}}catch(e){console.log(e.stack);console.error(e);}},_fireOnScale:function(_ac3,_ac4,_ac5){if(this.navigationMode==="css-transforms"){var vd=this.__visibleDelta;this.onScale(_a08.scaleAt(_ac3,{x:-1*((this.width/2)-(_ac4.x-vd.x)),y:-1*((this.height/2)-(_ac4.y-vd.y))}),_ac5);}},_stopAnim:function(){var _ac6=this._zoomAnim,_ac7=this._panAnim;if(_ac6&&_ac6._active){_ac6.stop();var rect=_ac6.curve.getValue(_ac6._getStep()),rl=parseFloat(rect.left),rt=parseFloat(rect.top),node=_ac6.node;return {anchor:node.anchor,start:node.startingExtent,end:node.extent,level:node.newLod&&node.newLod.level,rect:rect,divExtent:new _a12(rl,rt-parseFloat(rect.height),rl+parseFloat(rect.width),rt,this.spatialReference)};}else{if(_ac7&&_ac7._active){_ac7.stop();_ac7._fire("onEnd",[_ac7.node]);}}},__getExtentForLevel:function(_ac8,_ac9,_aca){var ti=this.__tileInfo,lods=ti&&ti.lods;_ac8=_a0b.isDefined(_ac8)?_ac8:0;_aca=_aca||this.extent;_ac9=_ac9||(_aca&&_aca.getCenter());if(lods){if(!_ac9){console.log("Map: "+this.invalidExtent);return;}var _acb=this.getMinZoom(),_acc=this.getMaxZoom();if(_ac8>_acc){_ac8=_acc;}if(_ac8<_acb){_ac8=_acb;}var lod=lods[_ac8],_acd=this.width*lod.resolution/2,_ace=this.height*lod.resolution/2;return {extent:new _a12(_ac9.x-_acd,_ac9.y-_ace,_ac9.x+_acd,_ac9.y+_ace,_ac9.spatialReference),lod:lod};}else{if(!_aca){console.log("Map: "+this.invalidExtent);return;}_ac8=(!_ac8||_ac8<1)?1:_ac8;return {extent:_aca.expand(_ac8).centerAt(_ac9)};}},_jobs:0,_incr:function(){if((++this._jobs)===1){this.updating=true;this.onUpdateStart();}},_decr:function(){var _acf=--this._jobs;if(!_acf){this.updating=false;this.onUpdateEnd();}else{if(_acf<0){this._jobs=0;}}},_fireEvent:function(_ad0,args){if(this[_ad0]){this[_ad0].apply(this,args);}},_updateExtent:function(_ad1,_ad2){this.extent=_ad1;if(_ad2){this._setClipRect();}var _ad3=this.spatialReference;if(_ad3){if(_ad3.isWebMercator()){this.geographicExtent=_a16.webMercatorToGeographic(this._getAvailExtent(),true);}else{if(_ad3.wkid===4326){this.geographicExtent=new _a12(this._getAvailExtent().toJson());}}}},_fireExtChg:function(args){this._fireEvent("onExtentChange",args);var dfd=this._extentDfd;if(dfd){delete this._extentDfd;dfd.resolve();}},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();},onUnload:function(){},onExtentChange:function(a,b,_ad4){},onTimeExtentChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect();},onReposition:function(){},destroy:function(){if(!this._destroyed){this.removeAllLayers();this._cleanUp();if(this._gc){this._gc._cleanUp();}this._destroyed=true;this.onUnload(this);}},setCursor:function(_ad5){ds(this.__container,"cursor",(this.cursor=_ad5));},setMapCursor:function(c){this.setCursor((this._cursor=c));},resetMapCursor:function(){this.setCursor(this._cursor);},setInfoWindow:function(_ad6){var iw=this.infoWindow;if(iw){iw.unsetMap(this);}this.infoWindow=_ad6;if(this.loaded&&_ad6){_ad6.setMap(this);}},setInfoWindowOnClick:function(_ad7){var _ad8=this._params;if(_ad7){if(!_ad8.showInfoWindowOnClick){var _ad9=[this.graphics].concat(_9ff.map(this.graphicsLayerIds,this.getLayer,this));_9ff.map(_ad9,function(_ada){if(_ada&&_ada.loaded){this._clickHandles.push(dc(_ada,"onClick",this,"_gClickHandler"));}},this);}}else{_9ff.forEach(this._clickHandles,ddc);this._clickHandles=[];}_ad8.showInfoWindowOnClick=_ad7;},getInfoWindowAnchor:function(pt){return (this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(pt))||"upperright";},toScreen:function(pt,_adb){return _a1d(this.extent,this.width,this.height,pt,_adb);},toMap:function(pt){return _a1c(this.extent,this.width,this.height,pt);},addLayer:function(_adc,_add){if(_adc&&!this.getLayer(_adc.id)){this._addLayer(_adc,_adc instanceof _a17?this.graphicsLayerIds:this.layerIds,_add);}return _adc;},addLayers:function(_ade){var _adf=[],_ae0=_ade.length,_ae1,i,len=_ade.length;var _ae2=function(_ae3,_ae4){if(_9ff.indexOf(_ade,_ae3)!==-1){_ae0--;_adf.push({"layer":_ae3,"success":!_ae4,"error":_ae4});if(!_ae0){_9fd.disconnect(_ae1);this.onLayersAddResult(_adf);}}};_ae1=_9fd.connect(this,"onLayerAddResult",_ae2);for(i=0;i<len;i++){this.addLayer(_ade[i]);}return this;},removeLayer:function(_ae5,_ae6){var id=_ae5.id,ids=_ae5 instanceof _a17?this.graphicsLayerIds:this.layerIds,i=iOf(ids,id);if(i>=0){ids.splice(i,1);if(_ae5 instanceof _a17){ddc(this["_gl_"+_ae5.id+"_click_connect"]);if(_ae5.loaded){_ae5._unsetMap(this,this._gc._surface);}}else{if(_ae5.loaded){_ae5._unsetMap(this,this._layersDiv);if(_ae5.declaredClass.indexOf("VETiledLayer")!==-1){this._onBingLayerRemove(_ae5);}}}delete this._layers[id];delete this._layerDivs[id];if(!_ae6){this._reorderLayers(ids);}this.onLayerRemove(_ae5);}},removeAllLayers:function(){var ids=this.layerIds,i;for(i=ids.length-1;i>=0;i--){this.removeLayer(this._layers[ids[i]],1);}ids=this.graphicsLayerIds;for(i=ids.length-1;i>=0;i--){this.removeLayer(this._layers[ids[i]],1);}this.onLayersRemoved();},reorderLayer:function(_ae7,_ae8){if(lang.isString(_ae7)){_9fb.deprecated(this.declaredClass+": "+"Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0");_ae7=this.getLayer(_ae7);}var id=_ae7.id,i,ids=_ae7 instanceof _a17?this.graphicsLayerIds:this.layerIds;if(_ae8<0){_ae8=0;}else{if(_ae8>=ids.length){_ae8=ids.length-1;}}i=iOf(ids,id);if(i===-1||i===_ae8){return;}ids.splice(i,1);ids.splice(_ae8,0,id);this._reorderLayers(ids);},getLayer:function(id){return this._layers[id];},setExtent:function(_ae9,fit){_ae9=new _a12(_ae9.toJson());var _aea=_ae9.getWidth(),_aeb=_ae9.getHeight(),dfd;if(_aea===0&&_aeb===0){dfd=this.centerAt(new _a10({x:_ae9.xmin,y:_ae9.ymin,spatialReference:_ae9.spatialReference&&_ae9.spatialReference.toJson()}));}else{dfd=this._extentUtil(null,null,_ae9,fit);}return dfd;},centerAt:function(_aec){return this._extentUtil(null,{mapCenter:_aec});},centerAndZoom:function(_aed,_aee){return this._extentUtil({targetLevel:_aee,mapCenter:_aed,levelOrFactor:true});},getScale:function(){return this.__LOD?this.__LOD.scale:_a14.getScale(this);},getMinScale:function(){return this._params.minScale;},getMaxScale:function(){return this._params.maxScale;},setScale:function(_aef){return this._extentUtil({targetScale:_aef});},getLayersVisibleAtScale:function(_af0){var _af1=[];_af0=_af0||this.getScale();if(_af0){_9ff.forEach(this.layerIds.concat(this.graphicsLayerIds),function(_af2){_af2=this.getLayer(_af2);if(_af2.isVisibleAtScale(_af0)){_af1.push(_af2);}},this);}return _af1;},getNumLevels:function(){var _af3=this.getMinZoom(),_af4=this.getMaxZoom();return ((_af3===_af4)&&_af3<0)?0:(_af4-_af3+1);},getLevel:function(){return this.__LOD?this.__LOD.level:-1;},setLevel:function(_af5){if(_af5>-1){return this._extentUtil({targetLevel:_af5});}},getZoom:function(){return this.getLevel();},setZoom:function(zoom){return this.setLevel(zoom);},getMinZoom:function(){return this._params.minZoom;},getMaxZoom:function(){return this._params.maxZoom;},setBasemap:function(_af6){var _af7,_af8="Map.setBasemap: ";if(lang.isObject(_af6)){_af7=_af6;_af6=_af7.title;}else{_af7=_a1f.basemaps&&_a1f.basemaps[_af6];}if(_af7){if(this._basemapDfd&&this._basemapDfd.fired===-1){this._basemapDfd.cancel();}var _af9=[],_afa=[],_afb=0;_9ff.forEach(_af7.baseMapLayers||_af7.layers,function(_afc){var _afd,_afe={id:_afc.id,displayLevels:_afc.displayLevels,opacity:_a0b.isDefined(_afc.opacity)?_afc.opacity:null,visible:_a0b.isDefined(_afc.visibility)?_afc.visibility:null};if(_afc.type){switch(_afc.type){case "OpenStreetMap":_afd=new _a1a(_afe);break;default:console.log(_af8+_a0b.substitute({basemapName:_af6,type:_afc.type},this.unknownLayerType));break;}}else{var url=_afc.url;if(window.location.protocol==="https:"&&((url.search(/^http\:\/\/server\.arcgisonline\.com/i)!==-1)||(url.search(/^http\:\/\/services\.arcgisonline\.com/i)!==-1)||(url.search(/^http\:\/\/.+\.arcgis\.com/i)!==-1))){url=url.replace(/http:/i,"https:");}_afd=new _a19(url,_afe);}if(_afd){_af9.push(_afd);_afa.push(_afc);if(!_afc.isReference){_afb++;}}},this);if(!_af9.length||!_afb){console.log(_af8+_a0b.substitute({basemapName:_af6},this.invalidBasemap));return;}var _aff={basemapName:_af6,infos:_afa,layers:_af9};if(!this.loaded){this._basemapLoaded(_aff);return;}var self=this,dfd=new _9fe(_a0e._dfdCanceller),_b00=function(_b01){dfd._pendingLayers--;var idx=_9ff.indexOf(_aff.layers,this);if(idx>-1){var _b02=dfd._layerEvents[idx];if(_b02){_9fd.disconnect(_b02[0]);_9fd.disconnect(_b02[1]);}}if(dfd._pendingLayers<=0){delete dfd._layerEvents;delete self._basemapDfd;dfd.callback(_aff);}};this._basemapDfd=dfd;dfd._pendingLayers=0;dfd._layerEvents={};_9ff.forEach(_af9,function(_b03,i){if(_b03){dfd._pendingLayers++;if(_b03.loaded){_b00(_b03);}else{dfd._layerEvents[i]=[_9fd.connect(_b03,"onLoad",_b03,_b00),_9fd.connect(_b03,"onError",_b03,_b00)];}}});dfd.addCallback(lang.hitch(this,this._basemapLoaded));}else{var _b04=[],_b05;for(_b05 in _a1f.basemaps){_b04.push(_b05);}console.log(_af8+_a0b.substitute({basemapName:_af6,list:_b04.join(",")},this.unknownBasemap));}},_basemapLoaded:function(_b06){var _b07=_b06.layers,_b08=_b06.infos,_b09=0,_b0a=true;if(this.loaded){_9ff.forEach(_b07,function(_b0b,i){if(_b0b.loaded){if(!_b08[i].isReference){_b09++;}}});_b0a=_b09;}if(_b0a){this._removeBasemap();this._basemap=_b06.basemapName;this.basemapLayerIds=this._addBasemap(_b07,_b08);this._fireEvent("onBasemapChange");}},_addBasemap:function(_b0c,_b0d){var _b0e=[],ids=[],_b0f=0;_9ff.forEach(_b0c,function(_b10,i){if(_b0d[i].isReference){_b0e.push(_b10);}else{this.addLayer(_b10,_b0f++);ids.push(_b10.id);}},this);if(_b0e.length){_9ff.forEach(_b0e,function(_b11){this.addLayer(_b11,"top");ids.push(_b11.id);},this);}return ids;},_removeBasemap:function(){var ids=this.basemapLayerIds,_b12;if(ids&&ids.length){_9ff.forEach(ids,function(id){_b12=this.getLayer(id);if(_b12){this.removeLayer(_b12);}},this);}},getBasemap:function(){return this._basemap||"";},translate:function(dx,dy){dx=dx||0;dy=dy||0;if(!this._txTimer){this._tx=this._ty=0;var _b13=this.toScreen(this.extent.getCenter());this.__panStart(_b13.x,_b13.y);}this._tx+=dx;this._ty+=dy;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150);},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var dx=this._tx,dy=this._ty;this._tx=this._ty=0;this.__panEnd(dx,dy);},setTimeExtent:function(_b14){this.timeExtent=_b14;var arg=_b14?new _b14.constructor(_b14.toJson()):null;this.onTimeExtentChange(arg);},setTimeSlider:function(_b15){if(this.timeSlider){ddc(this._tsTimeExtentChange_connect);this._tsTimeExtentChange_connect=null;this.timeSlider=null;}if(_b15){this.timeSlider=_b15;this.setTimeExtent(_b15.getCurrentTimeExtent());this._tsTimeExtentChange_connect=dc(_b15,"onTimeExtentChange",this,"setTimeExtent");}},resize:function(_b16){var self=this,_b17=function(){clearTimeout(self._resizeT);self.reposition();self._resize();};clearTimeout(self._resizeT);if(_b16===true){_b17();}else{self._resizeT=setTimeout(_b17,self.resizeDelay);}},_resize:function(){var w=this.width,h=this.height,box=_a05.getContentBox(this.container);if(w===box.w&&h===box.h){return;}var _b18=this._zoomAnim||this._panAnim;if(_b18){_b18.stop();_b18._fire("onEnd",[_b18.node]);}ds(this.root,{width:(this.width=box.w)+"px",height:(this.height=box.h)+"px"});var wd=this.width,ht=this.height;if(this.attribution&&this.attribution.domNode){_a06.set(this.attribution.domNode,"width",Math.floor(wd*this._mapParams.attributionWidth)+"px");}this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,wd,ht);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,wd,ht);var r=new Rect(this.extent),ne=(new Rect(r.x,r.y,r.width*(wd/w),r.height*(ht/h),this.spatialReference)).getExtent();this.onResize(ne,wd,ht);this._extentUtil(null,null,ne,null,true);},reposition:function(){this._reposition();this.onReposition(this.position.x,this.position.y);},_reposition:function(){var pos=_a05.position(this.container,true),brdr=_a05.getPadBorderExtents(this.container);this.position.update(pos.x+brdr.l,pos.y+brdr.t);},_setClipRect:function(){delete this._clip;var _b19=has("ie")?"rect(auto,auto,auto,auto)":null;if(this.wrapAround180){var _b1a=this.width,_b1b=this.height,_b1c=this._getFrameWidth(),diff=_b1a-_b1c;if(diff>0){var left=diff/2;_b19="rect(0px,"+(left+_b1c)+"px,"+_b1b+"px,"+left+"px)";var _b1d=this.extent.getWidth(),_b1e=_b1d*(_b1c/_b1a);this._clip=[(_b1d-_b1e)/2,_b1e];}}ds(this.__container,"clip",_b19);},_getAvailExtent:function(){var _b1f=this.extent,clip=this._clip;if(clip){if(!_b1f._clip){var rect=new Rect(_b1f);rect.width=clip[1];rect.x=rect.x+clip[0];_b1f._clip=rect.getExtent();}return _b1f._clip;}return _b1f;},_fixedPan:function(dx,dy){return this._extentUtil(null,{dx:dx,dy:dy});},panUp:function(){return this._fixedPan(0,this.height*-_a21);},panUpperRight:function(){return this._fixedPan(this.width*_a21,this.height*-_a21);},panRight:function(){return this._fixedPan(this.width*_a21,0);},panLowerRight:function(){return this._fixedPan(this.width*_a21,this.height*_a21);},panDown:function(){return this._fixedPan(0,this.height*_a21);},panLowerLeft:function(){return this._fixedPan(this.width*-_a21,this.height*_a21);},panLeft:function(){return this._fixedPan(this.width*-_a21,0);},panUpperLeft:function(){return this._fixedPan(this.width*-_a21,this.height*-_a21);},enableSnapping:function(_b20){_b20=_b20||{};if(_b20.declaredClass==="esri.SnappingManager"){this.snappingManager=_b20;}else{var _b21=["esri/SnappingManager"],rid=uid++,self=this;this._rids&&this._rids.push(rid);_9fa(_b21,function(_b22){var idx=self._rids?_9ff.indexOf(self._rids,rid):-1;if(idx!==-1){self._rids.splice(idx,1);self.snappingManager=new _b22(lang.mixin({map:self},_b20));}});}return this.snappingManager;},disableSnapping:function(){if(this.snappingManager){this.snappingManager.destroy();}this.snappingManager=null;}});if(has("extend-esri")){_a09._CoreMap=_a2b;}return _a2b;});},"esri/geometry/Polyline":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent"],function(_b23,_b24,lang,has,_b25,_b26,_b27,_b28,_b29,_b2a){var _b2b={type:"polyline",paths:null};var _b2c=_b23(_b28,{declaredClass:"esri.geometry.Polyline",constructor:function(obj){lang.mixin(this,_b2b);this.paths=[];this._path=0;if(obj){if(obj.paths){lang.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new _b27(this.spatialReference);}}this.verifySR();},_extent:null,addPath:function(_b2d){this._extent=null;this._path=this.paths.length;this.paths[this._path]=[];if(lang.isArray(_b2d[0])){_b24.forEach(_b2d,this._addPointArr,this);}else{_b24.forEach(_b2d,this._addPoint,this);}return this;},_addPointArr:function(_b2e){this.paths[this._path].push(_b2e);},_addPoint:function(_b2f){this.paths[this._path].push([_b2f.x,_b2f.y]);},_insertPoints:function(_b30,_b31){this._extent=null;this._path=_b31;if(!this.paths[this._path]){this.paths[this._path]=[];}_b24.forEach(_b30,this._addPoint,this);},_validateInputs:function(_b32,_b33){if((_b32!==null&&_b32!==undefined)&&(_b32<0||_b32>=this.paths.length)){return false;}if((_b33!==null&&_b32!==undefined)&&(_b33<0||_b33>=this.paths[_b32].length)){return false;}return true;},getPoint:function(_b34,_b35){if(this._validateInputs(_b34,_b35)){return new _b29(this.paths[_b34][_b35],this.spatialReference);}},setPoint:function(_b36,_b37,_b38){if(this._validateInputs(_b36,_b37)){this._extent=null;this.paths[_b36][_b37]=[_b38.x,_b38.y];return this;}},insertPoint:function(_b39,_b3a,_b3b){if(this._validateInputs(_b39)&&_b26.isDefined(_b3a)&&(_b3a>=0&&_b3a<=this.paths[_b39].length)){this._extent=null;this.paths[_b39].splice(_b3a,0,[_b3b.x,_b3b.y]);return this;}},removePath:function(_b3c){if(this._validateInputs(_b3c,null)){this._extent=null;var arr=this.paths.splice(_b3c,1)[0],i,il=arr.length,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new _b29(arr[i],sr);}return arr;}},removePoint:function(_b3d,_b3e){if(this._validateInputs(_b3d,_b3e)){this._extent=null;return new _b29(this.paths[_b3d].splice(_b3e,1)[0],this.spatialReference);}},getExtent:function(){var _b3f;if(this._extent){_b3f=new _b2a(this._extent);_b3f._partwise=this._partwise;return _b3f;}var _b40=this.paths,pal=_b40.length;if(!pal||!_b40[0].length){return;}var path,_b41,x,y,xmax,ymax,pa,pt,ptl,xmin=(xmax=_b40[0][0][0]),ymin=(ymax=_b40[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,_b42=[],_b43,_b44,_b45,_b46;for(pa=0;pa<pal;pa++){path=_b40[pa];_b43=(_b44=path[0]&&path[0][0]);_b45=(_b46=path[0]&&path[0][1]);ptl=path.length;for(pt=0;pt<ptl;pt++){_b41=path[pt];x=_b41[0];y=_b41[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);_b43=min(_b43,x);_b45=min(_b45,y);_b44=max(_b44,x);_b46=max(_b46,y);}_b42.push(new _b2a({xmin:_b43,ymin:_b45,xmax:_b44,ymax:_b46,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:sr?sr.toJson():null};this._partwise=_b42.length>1?_b42:null;_b3f=new _b2a(this._extent);_b3f._partwise=this._partwise;return _b3f;},toJson:function(){var json={paths:lang.clone(this.paths)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_b2c.defaultProps=_b2b;if(has("extend-esri")){lang.setObject("geometry.Polyline",_b2c,_b25);_b25.geometry.defaultPolyline=_b2b;}return _b2c;});},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_b47,lang,has,_b48,_b49){var _b4a=_b47(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(json){if(json){lang.mixin(this,json);}},toJson:function(){var json={timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime};return _b49.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerTimeOptions",_b4a,_b48);}return _b4a;});},"dojox/gfx/renderer":function(){define("dojox/gfx/renderer",["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(g,lang,has,win,_b4b){var _b4c=null;return {load:function(id,_b4d,load){if(_b4c&&id!="force"){load(_b4c);return;}var _b4e=_b4b.forceGfxRenderer,_b4f=!_b4e&&(lang.isString(_b4b.gfxRenderer)?_b4b.gfxRenderer:"svg,vml,canvas,silverlight").split(","),_b50,_b51;while(!_b4e&&_b4f.length){switch(_b4f.shift()){case "svg":if("SVGAngle" in win.global){_b4e="svg";}break;case "vml":if(has("ie")){_b4e="vml";}break;case "silverlight":try{if(has("ie")){_b50=new ActiveXObject("AgControl.AgControl");if(_b50&&_b50.IsVersionSupported("1.0")){_b51=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){_b51=true;}}}catch(e){_b51=false;}finally{_b50=null;}if(_b51){_b4e="silverlight";}break;case "canvas":if(win.global.CanvasRenderingContext2D){_b4e="canvas";}break;}}if(_b4e==="canvas"&&_b4b.canvasEvents!==false){_b4e="canvasWithEvents";}if(_b4b.isDebug){console.log("gfx renderer = "+_b4e);}function _b52(){_b4d(["dojox/gfx/"+_b4e],function(_b53){g.renderer=_b4e;_b4c=_b53;load(_b53);});};if(_b4e=="svg"&&typeof window.svgweb!="undefined"){window.svgweb.addOnLoad(_b52);}else{_b52();}}};});},"esri/geometry/screenUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff","esri/kernel","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/Extent"],function(_b54,lang,has,_b55,_b56,_b57,_b58,_b59,_b5a,_b5b){function _b5c(ext,wd,ht,pt,_b5d){var _b5e=ext.spatialReference,ptSR=pt.spatialReference,x=pt.x,y=pt.y,_b5f;if(_b5e&&ptSR&&!_b5e.equals(ptSR)&&_b5e._canProject(ptSR)){_b5f=_b5e.isWebMercator()?_b56.lngLatToXY(x,y):_b56.xyToLngLat(x,y,true);x=_b5f[0];y=_b5f[1];}x=(x-ext.xmin)*(wd/ext.getWidth());y=(ext.ymax-y)*(ht/ext.getHeight());if(!_b5d){x=Math.round(x);y=Math.round(y);}return new _b57(x,y);};function _b60(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_b61=_b54.forEach,_b62=Math.round;if(g instanceof _b56){return new _b56(_b62((g.x-x)*rwd),_b62((y-g.y)*rht));}else{if(g instanceof _b5a){var mp=new _b5a(),mpp=mp.points;_b61(g.points,function(pt,i){mpp[i]=[_b62((pt[0]-x)*rwd),_b62((y-pt[1])*rht)];});return mp;}else{if(g instanceof _b5b){return new _b5b(_b62((g.xmin-x)*rwd),_b62((y-g.ymin)*rht),_b62((g.xmax-x)*rwd),_b62((y-g.ymax)*rwd));}else{if(g instanceof _b58){var _b63=new _b58(),_b64=_b63.paths,_b65;_b61(g.paths,function(path,i){_b65=(_b64[i]=[]);_b61(path,function(pt,j){_b65[j]=[_b62((pt[0]-x)*rwd),_b62((y-pt[1])*rht)];});});return _b63;}else{if(g instanceof _b59){var pgon=new _b59(),_b66=pgon.rings,_b67;_b61(g.rings,function(ring,i){_b67=(_b66[i]=[]);_b61(ring,function(pt,j){_b67[j]=[_b62((pt[0]-x)*rwd),_b62((y-pt[1])*rht)];});});return pgon;}}}}}};var _b68=(function(){if(has("ie")<9){return function(x,y,rwd,rht,dx,dy,_b69,_b6a,_b6b){var _b6c=[],_b6d=Math.round,p,pl=_b69.length,path,_b6e,_b6f,pt,x1,y1,x2,y2;for(p=0;p<pl;p++){path=_b69[p];pt=_b6a?_b6a(path[0][0],path[0][1],_b6b):path[0];if((_b6f=path.length)>1){x1=_b6d(((pt[0]-x)*rwd)+dx);y1=_b6d(((y-pt[1])*rht)+dy);pt=_b6a?_b6a(path[1][0],path[1][1],_b6b):path[1];x2=_b6d(((pt[0]-x)*rwd)+dx);y2=_b6d(((y-pt[1])*rht)+dy);_b6c.push("M",x1+","+y1,"L",x2+","+y2);for(_b6e=2;_b6e<_b6f;_b6e++){pt=_b6a?_b6a(path[_b6e][0],path[_b6e][1],_b6b):path[_b6e];x1=_b6d(((pt[0]-x)*rwd)+dx);y1=_b6d(((y-pt[1])*rht)+dy);_b6c.push(x1+","+y1);}}else{x1=_b6d(((pt[0]-x)*rwd)+dx);y1=_b6d(((y-pt[1])*rht)+dy);_b6c.push("M",x1+","+y1);}}return _b6c;};}else{return function(x,y,rwd,rht,dx,dy,_b70,_b71,_b72){var _b73=[],i,j,il,jl,path,pt,_b74=Math.round;for(i=0,il=_b70?_b70.length:0;i<il;i++){path=_b70[i];_b73.push("M");for(j=0,jl=path?path.length:0;j<jl;j++){pt=_b71?_b71(path[j][0],path[j][1],_b72):path[j];_b73.push(_b74(((pt[0]-x)*rwd)+dx)+","+_b74(((y-pt[1])*rht)+dy));}}return _b73;};}}());function _b75(ext,wd,ht,g,dx,dy){var _b76=g instanceof _b58,_b77=ext.spatialReference,_b78=g.spatialReference,_b79,_b7a;if(_b77&&_b78&&!_b77.equals(_b78)&&_b77._canProject(_b78)){if(_b77.isWebMercator()){_b79=_b56.lngLatToXY;}else{_b79=_b56.xyToLngLat;_b7a=true;}}return _b68(ext.xmin,ext.ymax,wd/ext.getWidth(),ht/ext.getHeight(),dx,dy,_b76?g.paths:g.rings,_b79,_b7a);};function _b7b(ext,wd,ht,pt){return new _b56(ext.xmin+(pt.x/(wd/ext.getWidth())),ext.ymax-(pt.y/(ht/ext.getHeight())),ext.spatialReference);};function _b7c(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,sr=ext.spatialReference,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_b7d=_b54.forEach;if(g instanceof _b56){return new _b56(x+(g.x/rwd),y-(g.y/rht),sr);}else{if(g instanceof _b5a){var mp=new _b5a(sr),mpp=mp.points;_b7d(g.points,function(pt,i){mpp[i]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});return mp;}else{if(g instanceof _b5b){return new _b5b(x+(g.xmin/rwd),y-(g.ymin/rht),x+(g.xmax/rwd),y-(g.ymax/rht),sr);}else{if(g instanceof _b58){var _b7e=new _b58(sr),_b7f=_b7e.paths,_b80;_b7d(g.paths,function(path,i){_b80=(_b7f[i]=[]);_b7d(path,function(pt,j){_b80[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return _b7e;}else{if(g instanceof _b59){var pgon=new _b59(sr),_b81=pgon.rings,_b82;_b7d(g.rings,function(ring,i){_b82=(_b81[i]=[]);_b7d(ring,function(pt,j){_b82[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return pgon;}}}}}};var _b83={toScreenPoint:_b5c,toScreenGeometry:_b60,_toScreenPath:_b75,toMapPoint:_b7b,toMapGeometry:_b7c};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_b55),_b83);}return _b83;});},"esri/geometry/Point":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry"],function(_b84,lang,has,_b85,_b86,_b87,_b88){var _b89=6378137,PI=3.141592653589793,_b8a=57.29577951308232,_b8b=0.017453292519943;function _b8c(rad){return rad*_b8a;};function _b8d(deg){return deg*_b8b;};function _b8e(lng,lat){if(lat>89.99999){lat=89.99999;}else{if(lat<-89.99999){lat=-89.99999;}}var _b8f=_b8d(lat);return [_b8d(lng)*_b89,_b89/2*Math.log((1+Math.sin(_b8f))/(1-Math.sin(_b8f)))];};function _b90(x,y,_b91){var _b92=_b8c(x/_b89);if(_b91){return [_b92,_b8c((PI/2)-(2*Math.atan(Math.exp(-1*y/_b89))))];}return [_b92-(Math.floor((_b92+180)/360)*360),_b8c((PI/2)-(2*Math.atan(Math.exp(-1*y/_b89))))];};var _b93={type:"point",x:0,y:0};var _b94=_b84(_b88,{declaredClass:"esri.geometry.Point",constructor:function(x,y,_b95){lang.mixin(this,_b93);if(lang.isArray(x)){this.x=x[0];this.y=x[1];this.spatialReference=y;}else{if(lang.isObject(x)){lang.mixin(this,x);if(_b86.isDefined(this.latitude)){this.y=this.latitude;}if(_b86.isDefined(this.longitude)){this.x=this.longitude;}if(this.spatialReference){this.spatialReference=new _b87(this.spatialReference);}}else{this.x=x;this.y=y;this.spatialReference=_b95;}}this.verifySR();},offset:function(x,y){return new this.constructor(this.x+x,this.y+y,this.spatialReference);},setX:function(x){this.x=x;return this;},setY:function(y){this.y=y;return this;},setLongitude:function(_b96){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.x=_b8e(_b96,this.y)[0];}else{if(sr.wkid===4326){this.x=_b96;}}}return this;},setLatitude:function(_b97){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.y=_b8e(this.x,_b97)[1];}else{if(sr.wkid===4326){this.y=_b97;}}}return this;},getLongitude:function(){var sr=this.spatialReference,_b98;if(sr){if(sr._isWebMercator()){_b98=_b90(this.x,this.y)[0];}else{if(sr.wkid===4326){_b98=this.x;}}}return _b98;},getLatitude:function(){var sr=this.spatialReference,_b99;if(sr){if(sr._isWebMercator()){_b99=_b90(this.x,this.y)[1];}else{if(sr.wkid===4326){_b99=this.y;}}}return _b99;},update:function(x,y){this.x=x;this.y=y;return this;},normalize:function(){var x=this.x,sr=this.spatialReference;if(sr){var info=sr._getInfo();if(info){var _b9a=info.valid[0],_b9b=info.valid[1],_b9c=2*_b9b,_b9d;if(x>_b9b){_b9d=Math.ceil(Math.abs(x-_b9b)/_b9c);x-=(_b9d*_b9c);}else{if(x<_b9a){_b9d=Math.ceil(Math.abs(x-_b9a)/_b9c);x+=(_b9d*_b9c);}}}}return new this.constructor(x,this.y,sr);},toJson:function(){var json={x:this.x,y:this.y},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_b94.lngLatToXY=_b8e;_b94.xyToLngLat=_b90;_b94.defaultProps=_b93;if(has("extend-esri")){lang.setObject("geometry.Point",_b94,_b85);_b85.geometry.defaultPoint=_b93;}return _b94;});},"esri/symbols/LineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","esri/kernel","esri/symbols/Symbol"],function(_b9e,lang,has,_b9f,_ba0,_ba1){var _ba2=_b9e(_ba1,{declaredClass:"esri.symbol.LineSymbol",constructor:function(json){if(lang.isObject(json)){this.width=_b9f.pt2px(this.width);}else{this.width=12;}},setWidth:function(_ba3){this.width=_ba3;return this;},toJson:function(){var _ba4=_b9f.px2pt(this.width);_ba4=isNaN(_ba4)?undefined:_ba4;return lang.mixin(this.inherited("toJson",arguments),{width:_ba4});}});if(has("extend-esri")){lang.setObject("symbol.LineSymbol",_ba2,_ba0);}return _ba2;});},"esri/layers/graphics":function(){define(["esri/layers/GraphicsLayer","esri/graphic","esri/renderer"],function(){return {};});},"dojo/window":function(){define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style"],function(lang,has,_ba5,dom,geom,_ba6){var _ba7={getBox:function(doc){doc=doc||_ba5.doc;var _ba8=(doc.compatMode=="BackCompat")?_ba5.body(doc):doc.documentElement,_ba9=geom.docScroll(doc),w,h;if(has("touch")){var _baa=_ba7.get(doc);w=_baa.innerWidth||_ba8.clientWidth;h=_baa.innerHeight||_ba8.clientHeight;}else{w=_ba8.clientWidth;h=_ba8.clientHeight;}return {l:_ba9.x,t:_ba9.y,w:w,h:h};},get:function(doc){if(has("ie")&&_ba7!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;},scrollIntoView:function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||_ba5.doc,body=_ba5.body(doc),html=doc.documentElement||body.parentNode,isIE=has("ie"),isWK=has("webkit");if((!(has("mozilla")||isIE||isWK||has("opera"))||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _bab=doc.compatMode=="BackCompat",_bac=(isIE>=9&&"frameElement" in node.ownerDocument.parentWindow)?((html.clientHeight>0&&html.clientWidth>0&&(body.clientHeight==0||body.clientWidth==0||body.clientHeight>html.clientHeight||body.clientWidth>html.clientWidth))?html:body):(_bab?body:html),_bad=isWK?body:_bac,_bae=_bac.clientWidth,_baf=_bac.clientHeight,rtl=!geom.isBodyLtr(doc),_bb0=pos||geom.position(node),el=node.parentNode,_bb1=function(el){return ((isIE<=6||(isIE&&_bab))?false:(_ba6.get(el,"position").toLowerCase()=="fixed"));};if(_bb1(node)){return;}while(el){if(el==body){el=_bad;}var _bb2=geom.position(el),_bb3=_bb1(el);if(el==_bad){_bb2.w=_bae;_bb2.h=_baf;if(_bad==html&&isIE&&rtl){_bb2.x+=_bad.offsetWidth-_bb2.w;}if(_bb2.x<0||!isIE){_bb2.x=0;}if(_bb2.y<0||!isIE){_bb2.y=0;}}else{var pb=geom.getPadBorderExtents(el);_bb2.w-=pb.w;_bb2.h-=pb.h;_bb2.x+=pb.l;_bb2.y+=pb.t;var _bb4=el.clientWidth,_bb5=_bb2.w-_bb4;if(_bb4>0&&_bb5>0){_bb2.w=_bb4;_bb2.x+=(rtl&&(isIE||el.clientLeft>pb.l))?_bb5:0;}_bb4=el.clientHeight;_bb5=_bb2.h-_bb4;if(_bb4>0&&_bb5>0){_bb2.h=_bb4;}}if(_bb3){if(_bb2.y<0){_bb2.h+=_bb2.y;_bb2.y=0;}if(_bb2.x<0){_bb2.w+=_bb2.x;_bb2.x=0;}if(_bb2.y+_bb2.h>_baf){_bb2.h=_baf-_bb2.y;}if(_bb2.x+_bb2.w>_bae){_bb2.w=_bae-_bb2.x;}}var l=_bb0.x-_bb2.x,t=_bb0.y-Math.max(_bb2.y,0),r=l+_bb0.w-_bb2.w,bot=t+_bb0.h-_bb2.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_bab)||isIE>=9)){s=-s;}_bb0.x+=el.scrollLeft;el.scrollLeft+=s;_bb0.x-=el.scrollLeft;}if(bot*t>0){_bb0.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_bb0.y-=el.scrollTop;}el=(el!=_bad)&&!_bb3&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}}};1&&lang.setObject("dojo.window",_ba7);return _ba7;});},"esri/TouchEvents":function(){define(["dojo/_base/declare","dojo/_base/html","dojo/_base/lang","dojo/_base/sniff","dojo/dom","esri/kernel","esri/Evented","esri/geometry/Point","esri/geometry/ScreenPoint"],function(_bb6,html,lang,has,dom,_bb7,_bb8,_bb9,_bba){var _bbb=_bb6([_bb8],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(node,_bbc){this.node=node;lang.mixin(this,_bbc);html.setSelectable(node,false);this._touchStart=lang.hitch(this,this._touchStart);this._touchMove=lang.hitch(this,this._touchMove);this._touchEnd=lang.hitch(this,this._touchEnd);this._touchCancel=lang.hitch(this,this._touchCancel);node.addEventListener("touchstart",this._touchStart,false);node.addEventListener("touchmove",this._touchMove,false);node.addEventListener("touchend",this._touchEnd,false);node.addEventListener("touchcancel",this._touchCancel,false);if(this.map){this._mouseOver=lang.hitch(this,this._mouseOver);this._mouseOut=lang.hitch(this,this._mouseOut);this._mouseDown=lang.hitch(this,this._mouseDown);this._mouseUp=lang.hitch(this,this._mouseUp);this._mouseClick=lang.hitch(this,this._mouseClick);node.addEventListener("mouseover",this._mouseOver,false);node.addEventListener("mouseout",this._mouseOut,false);node.addEventListener("mousedown",this._mouseDown,false);node.addEventListener("mouseup",this._mouseUp,false);node.addEventListener("click",this._mouseClick,false);}this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=false;},_touchStart:function(_bbd){var _bbe=this._touches,i,len=_bbd.changedTouches.length,_bbf,info,_bc0,_bc1,ts=(new Date()).getTime();if(has("android")&&has("safari")&&_bbd.targetTouches.length===1&&_bbd.touches.length===_bbd.targetTouches.length&&_bbd.targetTouches.length===_bbd.changedTouches.length&&_bbd.changedTouches[0].identifier===0&&_bbe[_bbd.changedTouches[0].identifier]){return;}this._addTouch(_bbd);for(i=0;i<len;i++){_bbf=_bbd.changedTouches[i];info=(_bbe[_bbf.identifier]={});info.startX=_bbf.pageX;info.startY=_bbf.pageY;info.startTS=ts;if(this._touchIds.indexOf(_bbf.identifier)===-1){this._touchIds.push(_bbf.identifier);}}if(this._swipeActive){_bc0=this._nodeTouches[0];}if(this._pinchActive){_bc1=this._nodeTouches[1];}if(this._numTouches===1){if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_bbd,_bc0));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_bbd,[_bc0,_bc1]));}}}else{if(this._numTouches===2){if(this._swipeActive){if(_bc0){info=_bbe[this._touchIds[0]];info.startX=_bc0.pageX;info.startY=_bc0.pageY;info.moved=false;}this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_bbd,_bc0));}}else{if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_bbd,_bc0));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_bbd,[_bc0,_bc1]));}}}}},_touchMove:function(_bc2){_bc2.preventDefault();this._updateTouch(_bc2);var _bc3=this._touches,i,len=_bc2.changedTouches.length,_bc4,info,dx,dy,_bc5;if(has("android")&&has("safari")&&_bc2.targetTouches.length===1&&_bc2.touches.length===_bc2.targetTouches.length&&_bc2.targetTouches.length===_bc2.changedTouches.length&&_bc2.changedTouches[0].identifier===0&&_bc3[_bc2.changedTouches[0].identifier]&&this._touchIds.length>1){return;}for(i=0;i<len;i++){_bc4=_bc2.changedTouches[i];info=_bc3[_bc4.identifier];if(!info){continue;}dx=Math.abs(_bc4.pageX-info.startX);dy=Math.abs(_bc4.pageY-info.startY);if(!info.moved&&((dx>=this.tapRadius)||(dy>=this.tapRadius))){info.moved=info.absMoved=true;}_bc5=_bc5?_bc5:info.moved;}if(this._numTouches===1){var _bc6=_bc2.changedTouches[0];if(!this._swipeActive){if(_bc5){this._swipeActive=true;this._fire("onSwipeStart",this._processTouchEvent(_bc2,_bc6));}}else{this._fire("onSwipeMove",this._processTouchEvent(_bc2,_bc6));}}else{if(this._numTouches===2){var _bc7=this._nodeTouches[0],_bc8=this._nodeTouches[1];if(!this._pinchActive){if(_bc5){var _bc9=_bc3[_bc7.identifier],_bca=_bc3[_bc8.identifier],_bcb=Math.abs(_bc9.startX-_bca.startX),_bcc=Math.abs(_bc9.startY-_bca.startY),_bcd=Math.sqrt((_bcb*_bcb)+(_bcc*_bcc)),_bce=Math.abs(_bc7.pageX-_bc8.pageX),_bcf=Math.abs(_bc7.pageY-_bc8.pageY),_bd0=Math.sqrt((_bce*_bce)+(_bcf*_bcf));if(Math.abs(_bd0-_bcd)>=(2*this.tapRadius)){this._pinchActive=true;this._fire("onPinchStart",this._processTouchEvent(_bc2,[_bc7,_bc8]));}}}else{this._fire("onPinchMove",this._processTouchEvent(_bc2,[_bc7,_bc8]));}}}},_touchEnd:function(_bd1){this._removeTouch(_bd1);var _bd2=this._touches,_bd3=_bd1.changedTouches,i,len=_bd3.length,_bd4,info,ts=(new Date()).getTime(),ids=this._touchIds;for(i=0;i<len;i++){info=_bd2[_bd3[i].identifier];if(!info){continue;}if(info.absMoved){_bd4=true;}info.pageX=_bd3[i].pageX;info.pageY=_bd3[i].pageY;info.endTS=ts;}if(this._numTouches===0){this._touches={};this._touchIds=[];if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_bd1,_bd3[0]));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_bd1,_bd3));}else{if(!_bd4){var _bd5=Infinity,_bd6=-Infinity,_bd7=Infinity,_bd8=-Infinity,_bd9=this.tapStartTolerance,_bda=[],_bdb=true;for(i=0;i<ids.length;i++){info=_bd2[ids[i]];_bda.push(info);if(info.startTS<_bd5){_bd5=info.startTS;}if(info.startTS>_bd6){_bd6=info.startTS;}if(info.endTS<_bd7){_bd7=info.endTS;}if(info.endTS>_bd8){_bd8=info.endTS;}delete _bd2[ids[i]];}if(_bda.length===1&&_bd3[0]){var dx=Math.abs(_bd3[0].pageX-_bda[0].startX),dy=Math.abs(_bd3[0].pageY-_bda[0].startY);if((dx>=this.tapRadius)||(dy>=this.tapRadius)){_bdb=false;}}if(_bdb&&Math.abs(_bd6-_bd5)<=_bd9&&Math.abs(_bd8-_bd7)<=_bd9){this._basicTap(_bd1,_bda);}}}}}else{if(this._numTouches===1){if(this._pinchActive){var _bdc=this._nodeTouches[0];info=_bd2[_bdc.identifier];info.startX=_bdc.pageX;info.startY=_bdc.pageY;info.moved=false;this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_bd1,[_bd3[0],_bdc]));}}}},_touchCancel:function(_bdd){if(this._numTouches){this._touchEnd(_bdd);}},_basicTap:function(_bde,_bdf){var ts=(new Date()).getTime(),self=this;_bde=this._processTouchEvent(_bde,_bdf);this._taps.push({touchInfos:_bdf,ts:ts,event:_bde});if(this._taps.length>2){this._taps.shift();}this._fire("onBasicTap",_bde);clearTimeout(this._tapTimer);if(this._immediate){this._analyzeTap(true);}else{var _be0=(this._taps.length===2)?(this.doubleTapDuration/2):this.doubleTapDuration;this._tapTimer=setTimeout(function(){var that=self;self=null;clearTimeout(that._tapTimer);that._analyzeTap();},_be0);}},_analyzeTap:function(_be1){var taps=this._taps,_be2=taps[0],_be3=taps[1],_be4=_be2.touchInfos,_be5=_be3&&_be3.touchInfos;if(!taps.length){return;}if(!_be1){this._taps=[];}if(_be2&&_be3){if(_be4.length===_be5.length){if((_be3.ts-_be2.ts)<=this.doubleTapDuration){var _be6,dx,dy;if(_be4.length===1){dx=Math.abs(_be4[0].startX-_be5[0].startX);dy=Math.abs(_be4[0].startY-_be5[0].startY);_be6=(dx<=this.doubleTapRadius)&&(dy<=this.doubleTapRadius);}else{_be6=true;}if(_be6){this._processedDoubleTap(taps);}else{this._processedTap(_be3);}}else{this._processedTap(_be3);}}else{this._processedTap(_be3);}}else{this._processedTap(_be2||_be3);}},_processedTap:function(tap){var _be7=tap.event;this._fire("onProcessedTap",_be7);if(tap.touchInfos.length===1){this._fire("onTap",this._fixEvent(_be7));}else{if(tap.touchInfos.length===2){this._fire("onTwoFingerTap",_be7);}}},_processedDoubleTap:function(taps){var _be8=(taps[1].touchInfos.length===1),_be9,evts;if(_be8){_be9=[this._fixEvent(taps[0].event),this._fixEvent(taps[1].event)];_be9[1].relatedEvents=_be9;}evts=[taps[0].event,taps[1].event];evts[1].relatedEvents=evts;this._fire("onProcessedDoubleTap",evts[1]);if(_be8){this._fire("onDoubleTap",_be9[1]);this._fire("onDblClick",_be9[1]);}},_addTouch:function(_bea){var i,_beb=_bea.changedTouches,_bec=this._nodeTouches,j,_bed,_bee;this._numTouches+=_beb.length;for(i=0;i<_beb.length;i++){_bed=_bec.length;_bee=false;for(j=0;j<_bed;j++){_bee=(_bec[j].identifier===_beb[i].identifier);if(_bee){break;}}if(_bee){this._numTouches--;}else{_bec.push(_beb[i]);}}for(i=_bec.length-1;i>=0;i--){if(!dom.isDescendant(_bec[i].target,document.body)){_bec.splice(i,1);this._numTouches--;}}if(this._numTouches<0){this._numTouches=0;}},_removeTouch:function(_bef){var i,_bf0=[],_bf1=[],_bf2=_bef.changedTouches,_bf3=this._nodeTouches;this._numTouches-=_bf2.length;if(this._numTouches<0){this._numTouches=0;}for(i=0;i<_bf2.length;i++){_bf0.push(_bf2[i].identifier);}for(i=_bf3.length-1;i>=0;i--){if(_bf0.indexOf(_bf3[i].identifier)!==-1){_bf1.push(_bf3.splice(i,1)[0]);}}return _bf1;},_updateTouch:function(_bf4){var i,ids=[],idx,_bf5=_bf4.changedTouches,_bf6=this._nodeTouches;for(i=0;i<_bf5.length;i++){ids.push(_bf5[i].identifier);}for(i=0;i<_bf6.length;i++){idx=ids.indexOf(_bf6[i].identifier);if(idx!==-1){_bf6.splice(i,1,_bf5[idx]);}}},_mouseOver:function(_bf7){this._fire("onMouseOver",this._processMouseEvent(_bf7));},_mouseOut:function(_bf8){this._fire("onMouseOut",this._processMouseEvent(_bf8));},_mouseDown:function(_bf9){this._fire("onMouseDown",this._processMouseEvent(_bf9));},_mouseUp:function(_bfa){this._fire("onMouseUp",this._processMouseEvent(_bfa));},_mouseClick:function(_bfb){this._fire("onClick",this._processMouseEvent(_bfb));},_fire:function(_bfc,evt){if(this[_bfc]){this[_bfc](evt);}if(this.map){if(this.map[_bfc]){this.map[_bfc](evt);}}},_fixEvent:function(_bfd){var _bfe={},i;for(i in _bfd){_bfe[i]=_bfd[i];}if(this.map){_bfe.screenPoint=_bfe.screenPoints[0];_bfe.mapPoint=_bfe.mapPoints[0];}return _bfe;},_processTouchEvent:function(evt,_bff){var map=this.map,pos=map&&map.position,_c00=0;if(pos&&_bff){if(lang.isArray(_bff)){var i,_c01;evt.screenPoints=[];evt.mapPoints=[];for(i=0;i<_bff.length;i++){if(_bff[i]){_c01=new _bba(_bff[i].pageX-pos.x,_bff[i].pageY-pos.y);evt.screenPoints.push(_c01);evt.mapPoints.push(map.extent?map.toMap(_c01):new _bb9());}else{_c00++;}}}else{evt.screenPoint=new _bba(_bff.pageX-pos.x,_bff.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _bb9();}}evt.numPoints=_bff?(lang.isArray(_bff)?(_bff.length-_c00):1):0;return evt;},_processMouseEvent:function(evt){var map=this.map,pos=map&&map.position;if(pos){evt.screenPoint=new _bba(evt.pageX-pos.x,evt.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _bb9();}return evt;},setImmediateTap:function(_c02){this._immediate=_c02;},destroy:function(){var node=this.node;node.removeEventListener("touchstart",this._touchStart,false);node.removeEventListener("touchmove",this._touchMove,false);node.removeEventListener("touchend",this._touchEnd,false);node.removeEventListener("touchcancel",this._touchCancel,false);if(this.map){node.removeEventListener("mouseover",this._mouseOver,false);node.removeEventListener("mouseout",this._mouseOut,false);node.removeEventListener("mousedown",this._mouseDown,false);node.removeEventListener("mouseup",this._mouseUp,false);node.removeEventListener("click",this._mouseClick,false);}html.setSelectable(node,true);clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=null;}});if(has("extend-esri")){_bb7.TouchEvents=_bbb;}return _bbb;});},"esri/InfoWindowBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/Deferred","dojo/dom-construct","dojo/has","dijit/registry","esri/kernel","esri/lang","esri/geometry/ScreenPoint"],function(_c03,lang,_c04,_c05,_c06,_c07,has,_c08,_c09,_c0a,_c0b){var _c0c=_c03(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var _c0d=lang.hitch;this.__set_title=_c0d(this,this.__set_title);this.__err_title=_c0d(this,this.__err_title);this.__set_content=_c0d(this,this.__set_content);this.__err_content=_c0d(this,this.__err_content);},setMap:function(map){this.map=map;},unsetMap:function(map){delete this.map;},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(_c0e,_c0f){if(_c0a.isDefined(_c0e)){if(lang.isObject(_c0e)){_c07.place(_c0e,_c0f,"only");}else{_c0f.innerHTML=_c0e;}}else{_c0f.innerHTML="";}},startupDijits:function(node){this._processDijits(node);},destroyDijits:function(node){this._processDijits(node,true);},_processDijits:function(node,_c10){if(node&&node.children.length===1){var _c11=node.children[0];if(_c11){var _c12=_c08.byNode(_c11);var _c13=_c12?[_c12]:_c08.findWidgets(_c11);_c04.forEach(_c13,function(_c14){if(_c10){if(_c14._started&&!_c14._destroyed){try{if(_c14.destroyRecursive){_c14.destroyRecursive();}else{if(_c14.destroy){_c14.destroy();}}}catch(ex){console.debug("An error occurred when destroying a widget embedded within InfoWindow: "+ex.message);}}}else{if(!_c14._started){try{_c14.startup();}catch(ex2){console.debug("An error occurred when starting a widget embedded within InfoWindow: "+ex2.message);}}}});}}},__registerMapListeners:function(){this.__unregisterMapListeners();var map=this.map;this.__handles=[_c05.connect(map,"onPan",this,this.__onMapPan),_c05.connect(map,"onZoomStart",this,this.__onMapZmStart),_c05.connect(map,"onExtentChange",this,this.__onMapExtChg)];},__unregisterMapListeners:function(){var _c15=this.__handles;if(_c15){_c04.forEach(_c15,_c05.disconnect,_c05);this.__handles=null;}},__onMapPan:function(_c16,_c17){this.move(_c17,true);},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new _c0b(this.coords));this.hide(null,true);},__onMapExtChg:function(_c18,_c19,_c1a){var map=this.map,_c1b=this.mapCoords;if(_c1b){this.show(_c1b,null,true);}else{var _c1c;if(_c1a){_c1c=map.toScreen(this.__mcoords);}else{_c1c=this.coords.offset((_c19&&_c19.x)||0,(_c19&&_c19.y)||0);}this.show(_c1c,null,true);}},__setValue:function(_c1d,_c1e){this[_c1d].innerHTML="";var dfd="_dfd"+_c1d,_c1f=this[dfd];if(_c1f&&_c1f.fired===-1){_c1f.cancel();this[dfd]=null;}if(_c0a.isDefined(_c1e)){if(_c1e instanceof _c06){this[dfd]=_c1e;_c1e.addCallbacks(this["__set"+_c1d],this["__err"+_c1d]);}else{this.__render(_c1d,_c1e);}}},__set_title:function(_c20){this._dfd_title=null;this.__render("_title",_c20);},__err_title:function(_c21){this._dfd_title=null;},__set_content:function(_c22){this._dfd_content=null;this.__render("_content",_c22);},__err_content:function(_c23){this._dfd_content=null;},__render:function(_c24,_c25){var node=this[_c24];this.place(_c25,node);if(this.isShowing){this.startupDijits(node);if(_c24==="_title"&&this._adjustContentArea){this._adjustContentArea();}}}});if(has("extend-esri")){_c09.InfoWindowBase=_c0c;}return _c0c;});},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_c26,lang,has,_c27){var _c28=_c26(null,{declaredClass:"esri.TimeExtent",constructor:function(json){if(arguments.length>1){this._create(arguments[0],arguments[1]);}else{if(json){if(lang.isArray(json)){var _c29=json[0],end=json[1];this.startTime=(_c29===null||_c29==="null")?null:new Date(_c29);this.endTime=(end===null||end==="null")?null:new Date(end);}else{if(json instanceof Date){this._create(json,null);}}}}},offset:function(_c2a,_c2b){var _c2c=new _c28();var _c2d=this.startTime,end=this.endTime;if(_c2d){_c2c.startTime=this._getOffsettedDate(_c2d,_c2a,_c2b);}if(end){_c2c.endTime=this._getOffsettedDate(end,_c2a,_c2b);}return _c2c;},intersection:function(_c2e){return this._intersection(this,_c2e);},toJson:function(){var _c2f=[];var _c30=this.startTime;_c2f.push(_c30?_c30.getTime():"null");var end=this.endTime;_c2f.push(end?end.getTime():"null");return _c2f;},_create:function(_c31,end){this.startTime=_c31?new Date(_c31.getTime()):null;this.endTime=end?new Date(end.getTime()):null;},_refData:{"esriTimeUnitsMilliseconds":{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},"esriTimeUnitsSeconds":{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},"esriTimeUnitsMinutes":{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},"esriTimeUnitsHours":{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},"esriTimeUnitsDays":{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},"esriTimeUnitsWeeks":{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},"esriTimeUnitsMonths":{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},"esriTimeUnitsYears":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},"esriTimeUnitsDecades":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},"esriTimeUnitsCenturies":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(_c32,_c33){if(_c32&&_c33){var _c34=_c32.startTime,end1=_c32.endTime;var _c35=_c33.startTime,end2=_c33.endTime;_c34=_c34?_c34.getTime():-Infinity;_c35=_c35?_c35.getTime():-Infinity;end1=end1?end1.getTime():Infinity;end2=end2?end2.getTime():Infinity;var _c36,end;if(_c35>=_c34&&_c35<=end1){_c36=_c35;}else{if(_c34>=_c35&&_c34<=end2){_c36=_c34;}}if(end1>=_c35&&end1<=end2){end=end1;}else{if(end2>=_c34&&end2<=end1){end=end2;}}if(!isNaN(_c36)&&!isNaN(end)){var _c37=new _c28();_c37.startTime=(_c36===-Infinity)?null:new Date(_c36);_c37.endTime=(end===Infinity)?null:new Date(end);return _c37;}else{return null;}}else{return null;}},_getOffsettedDate:function(_c38,_c39,_c3a){var data=this._refData;var _c3b=new Date(_c38.getTime());if(_c39&&_c3a){data=data[_c3a];_c3b[data.setter](_c3b[data.getter]()+(_c39*data.multiplier));}return _c3b;}});if(has("extend-esri")){_c27.TimeExtent=_c28;}return _c28;});},"esri/layers/LayerMapSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/LayerSource"],function(_c3c,lang,has,_c3d,_c3e,_c3f){var _c40=_c3c(_c3f,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){var json={type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion};return _c3e.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerMapSource",_c40,_c3d);}return _c40;});},"esri/geometry/geodesicUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon"],function(_c41,lang,has,_c42,_c43,_c44,_c45,_c46){var _c47={"esriMiles":1,"esriKilometers":1.609344,"esriFeet":5280,"esriMeters":1609.34,"esriYards":1760,"esriNauticalMiles":0.869,"esriCentimeters":160934,"esriDecimeters":16093.4,"esriInches":63360,"esriMillimeters":1609340,"esriAcres":1,"esriAres":40.4685642,"esriSquareKilometers":0.00404685642,"esriSquareMiles":0.0015625,"esriSquareFeet":43560,"esriSquareMeters":4046.85642,"esriHectares":0.404685642,"esriSquareYards":4840,"esriSquareInches":6272640,"esriSquareMillimeters":4046856420,"esriSquareCentimeters":40468564.2,"esriSquareDecimeters":404685.642};function _c48(pt){var _c49=Math.PI/180;var a=6378137;var eSq=0.006694379990197414,e=0.0818191908429643;var sinY=Math.sin(pt.y*_c49);var q=(1-eSq)*((sinY/(1-eSq*(sinY*sinY))-(1/(2*e))*Math.log((1-e*sinY)/(1+e*sinY))));var x=a*pt.x*_c49;var y=a*q*0.5;var _c4a=new _c44(x,y);return _c4a;};function _c4b(lat1,lon1,_c4c,s){var a=6378137,b=6356752.31424518,f=1/298.257223563;var _c4d=Math.sin(_c4c);var _c4e=Math.cos(_c4c);var _c4f=(1-f)*Math.tan(lat1);var _c50=1/Math.sqrt((1+_c4f*_c4f)),_c51=_c4f*_c50;var _c52=Math.atan2(_c4f,_c4e);var _c53=_c50*_c4d;var _c54=1-_c53*_c53;var uSq=_c54*(a*a-b*b)/(b*b);var A=1+uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));var B=uSq/1024*(256+uSq*(-128+uSq*(74-47*uSq)));var _c55=s/(b*A),_c56=2*Math.PI;var _c57,_c58,_c59;while(Math.abs(_c55-_c56)>1e-12){_c59=Math.cos(2*_c52+_c55);_c57=Math.sin(_c55);_c58=Math.cos(_c55);var _c5a=B*_c57*(_c59+B/4*(_c58*(-1+2*_c59*_c59)-B/6*_c59*(-3+4*_c57*_c57)*(-3+4*_c59*_c59)));_c56=_c55;_c55=s/(b*A)+_c5a;}var tmp=_c51*_c57-_c50*_c58*_c4e;var lat2=Math.atan2(_c51*_c58+_c50*_c57*_c4e,(1-f)*Math.sqrt(_c53*_c53+tmp*tmp));var _c5b=Math.atan2(_c57*_c4d,_c50*_c58-_c51*_c57*_c4e);var C=f/16*_c54*(4+f*(4-3*_c54));var L=_c5b-(1-C)*f*_c53*(_c55+C*_c57*(_c59+C*_c58*(-1+2*_c59*_c59)));var _c5c=lat2/(Math.PI/180);var _c5d=(lon1+L)/(Math.PI/180);var pt=new _c44(_c5d,_c5c,new _c43({wkid:4326}));return pt;};function _c5e(lat1,lon1,lat2,lon2){var a=6378137,b=6356752.31424518,f=1/298.257223563;var L=(lon2-lon1);var U1=Math.atan((1-f)*Math.tan(lat1));var U2=Math.atan((1-f)*Math.tan(lat2));var _c5f=Math.sin(U1),_c60=Math.cos(U1);var _c61=Math.sin(U2),_c62=Math.cos(U2);var _c63=L,_c64,_c65=1000;var _c66,_c67,_c68,_c69,_c6a;do{var _c6b=Math.sin(_c63),_c6c=Math.cos(_c63);_c67=Math.sqrt((_c62*_c6b)*(_c62*_c6b)+(_c60*_c61-_c5f*_c62*_c6c)*(_c60*_c61-_c5f*_c62*_c6c));if(_c67===0){return 0;}_c69=_c5f*_c61+_c60*_c62*_c6c;_c6a=Math.atan2(_c67,_c69);var _c6d=_c60*_c62*_c6b/_c67;_c66=1-_c6d*_c6d;_c68=_c69-2*_c5f*_c61/_c66;if(isNaN(_c68)){_c68=0;}var C=f/16*_c66*(4+f*(4-3*_c66));_c64=_c63;_c63=L+(1-C)*f*_c6d*(_c6a+C*_c67*(_c68+C*_c69*(-1+2*_c68*_c68)));}while(Math.abs(_c63-_c64)>1e-12&&--_c65>0);if(_c65===0){var _c6e=6371009;var _c6f=Math.acos(Math.sin(lat1)*Math.sin(lat2)+Math.cos(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1))*_c6e;var dLon=lon2-lon1;var y=Math.sin(dLon)*Math.cos(lat2);var x=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);var brng=Math.atan2(y,x);return {"azimuth":brng,"geodesicDistance":_c6f};}var uSq=_c66*(a*a-b*b)/(b*b);var A=1+uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));var B=uSq/1024*(256+uSq*(-128+uSq*(74-47*uSq)));var _c70=B*_c67*(_c68+B/4*(_c69*(-1+2*_c68*_c68)-B/6*_c68*(-3+4*_c67*_c67)*(-3+4*_c68*_c68)));var s=b*A*(_c6a-_c70);var _c71=Math.atan2(_c62*Math.sin(_c63),_c60*_c61-_c5f*_c62*Math.cos(_c63));var _c72=Math.atan2(_c60*Math.sin(_c63),_c60*_c61*Math.cos(_c63)-_c5f*_c62);var _c73={azimuth:_c71,geodesicDistance:s,reverseAzimuth:_c72};return _c73;};function _c74(geom,_c75){var _c76=Math.PI/180;var _c77=6371008.771515059;if(_c75<_c77/10000){_c75=_c77/10000;}if(!(geom instanceof _c45||geom instanceof _c46)){var msg="_geodesicDensify: the input geometry is neither polyline nor polygon";console.error(msg);throw new Error(msg);}var _c78=geom instanceof _c45,_c79=_c78?geom.paths:geom.rings,_c7a=[],_c7b;_c41.forEach(_c79,function(ring){_c7a.push(_c7b=[]);_c7b.push([ring[0][0],ring[0][1]]);var lon1,lat1,lon2,lat2,i,j;lon1=ring[0][0]*_c76;lat1=ring[0][1]*_c76;for(i=0;i<ring.length-1;i++){lon2=ring[i+1][0]*_c76;lat2=ring[i+1][1]*_c76;var _c7c=_c5e(lat1,lon1,lat2,lon2);var _c7d=_c7c.azimuth;var _c7e=_c7c.geodesicDistance;var _c7f=_c7e/_c75;if(_c7f>1){for(j=1;j<=_c7f-1;j++){var _c80=j*_c75;var pt=_c4b(lat1,lon1,_c7d,_c80);_c7b.push([pt.x,pt.y]);}var _c81=(_c7e+Math.floor(_c7f-1)*_c75)/2;var _c82=_c4b(lat1,lon1,_c7d,_c81);_c7b.push([_c82.x,_c82.y]);}var _c83=_c4b(lat1,lon1,_c7d,_c7e);_c7b.push([_c83.x,_c83.y]);lon1=_c83.x*_c76;lat1=_c83.y*_c76;}});if(_c78){return new _c45({paths:_c7a,spatialReference:geom.spatialReference});}else{return new _c46({rings:_c7a,spatialReference:geom.spatialReference});}};function _c84(_c85,_c86){var _c87=Math.PI/180;var _c88=[];_c41.forEach(_c85,function(_c89,idx){var _c8a=0;_c41.forEach(_c89.paths,function(path,idx){var _c8b=0;var i,lon1,lon2,lat1,lat2,_c8c;for(i=1;i<path.length;i++){lon1=path[i-1][0]*_c87;lon2=path[i][0]*_c87;lat1=path[i-1][1]*_c87;lat2=path[i][1]*_c87;_c8c=_c5e(lat1,lon1,lat2,lon2);_c8b+=_c8c.geodesicDistance/1609.344;}_c8a+=_c8b;});_c8a*=_c47[_c86];_c88.push(_c8a);});return _c88;};function _c8d(_c8e,_c8f){var _c90=[];_c41.forEach(_c8e,function(_c91,idx){var _c92=_c74(_c91,10000);_c90.push(_c92);});var _c93=[];var _c94,_c95;_c41.forEach(_c90,function(_c96,idx){var area=0;_c41.forEach(_c96.rings,function(ring,idx){_c94=_c48(new _c44(ring[0][0],ring[0][1]));_c95=_c48(new _c44(ring[ring.length-1][0],ring[ring.length-1][1]));var _c97=_c95.x*_c94.y-_c94.x*_c95.y;var i;for(i=0;i<ring.length-1;i++){_c94=_c48(new _c44(ring[i+1][0],ring[i+1][1]));_c95=_c48(new _c44(ring[i][0],ring[i][1]));_c97+=_c95.x*_c94.y-_c94.x*_c95.y;}_c97/=4046.87;area+=_c97;});area*=_c47[_c8f];_c93.push(area/(-2));});return _c93;};var _c98={geodesicDensify:_c74,geodesicLengths:_c84,geodesicAreas:_c8d,_unitsDictionary:_c47,_toEqualAreaPoint:_c48,_directGeodeticSolver:_c4b,_inverseGeodeticSolver:_c5e};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_c42),_c98);}return _c98;});},"esri/WKIDUnitConversion":function(){define(["dojo/has","esri/kernel"],function(has,_c99){var obj={values:[1,0.2011661949,0.3047997101815088,0.3048006096012192,0.3048,0.304797265,0.9143985307444408,20.11678249437587,0.9143984146160287,20.11676512155263,0.3047994715386762,0.91439523,50000,150000],2000:0,2001:0,2002:0,2003:0,2004:0,2005:0,2006:0,2007:0,2008:0,2009:0,2010:0,2011:0,2012:0,2013:0,2014:0,2015:0,2016:0,2017:0,2018:0,2019:0,2020:0,2021:0,2022:0,2023:0,2024:0,2025:0,2026:0,2027:0,2028:0,2029:0,2030:0,2031:0,2032:0,2033:0,2034:0,2035:0,2036:0,2037:0,2038:0,2039:0,2040:0,2041:0,2042:0,2043:0,2044:0,2045:0,2056:0,2057:0,2058:0,2059:0,2060:0,2061:0,2062:0,2063:0,2064:0,2065:0,2066:1,2067:0,2068:0,2069:0,2070:0,2071:0,2072:0,2073:0,2074:0,2075:0,2076:0,2077:0,2078:0,2079:0,2080:0,2081:0,2082:0,2083:0,2084:0,2085:0,2086:0,2087:0,2088:0,2089:0,2090:0,2091:0,2092:0,2093:0,2094:0,2095:0,2096:0,2097:0,2098:0,2099:0,2100:0,2101:0,2102:0,2103:0,2104:0,2105:0,2106:0,2107:0,2108:0,2109:0,2110:0,2111:0,2112:0,2113:0,2114:0,2115:0,2116:0,2117:0,2118:0,2119:0,2120:0,2121:0,2122:0,2123:0,2124:0,2125:0,2126:0,2127:0,2128:0,2129:0,2130:0,2131:0,2132:0,2133:0,2134:0,2135:0,2136:2,2137:0,2138:0,2139:0,2140:0,2141:0,2142:0,2143:0,2144:0,2145:0,2146:0,2147:0,2148:0,2149:0,2150:0,2151:0,2152:0,2153:0,2154:0,2155:3,2157:0,2158:0,2159:2,2160:2,2161:0,2162:0,2163:0,2164:0,2165:0,2166:0,2167:0,2168:0,2169:0,2170:0,2172:0,2173:0,2174:0,2175:0,2176:0,2177:0,2178:0,2179:0,2180:0,2181:0,2182:0,2183:0,2184:0,2185:0,2186:0,2187:0,2188:0,2189:0,2190:0,2192:0,2193:0,2195:0,2196:0,2197:0,2198:0,2200:0,2201:0,2202:0,2203:0,2204:3,2205:0,2206:0,2207:0,2208:0,2209:0,2210:0,2211:0,2212:0,2213:0,2214:0,2215:0,2216:0,2217:0,2219:0,2220:0,2222:4,2223:4,2224:4,2225:3,2226:3,2227:3,2228:3,2229:3,2230:3,2231:3,2232:3,2233:3,2234:3,2235:3,2236:3,2237:3,2238:3,2239:3,2240:3,2241:3,2242:3,2243:3,2244:3,2245:3,2246:3,2247:3,2248:3,2249:3,2250:3,2251:4,2252:4,2253:4,2254:3,2255:3,2256:4,2257:3,2258:3,2259:3,2260:3,2261:3,2262:3,2263:3,2264:3,2265:4,2266:4,2267:3,2268:3,2269:4,2270:4,2271:3,2272:3,2273:4,2274:3,2275:3,2276:3,2277:3,2278:3,2279:3,2280:4,2281:4,2282:4,2283:3,2284:3,2285:3,2286:3,2287:3,2288:3,2289:3,2290:0,2291:0,2292:0,2294:0,2295:0,2308:0,2309:0,2310:0,2311:0,2312:0,2313:0,2314:5,2315:0,2316:0,2317:0,2318:0,2319:0,2320:0,2321:0,2322:0,2323:0,2324:0,2325:0,2326:0,2327:0,2328:0,2329:0,2330:0,2331:0,2332:0,2333:0,2334:0,2335:0,2336:0,2337:0,2338:0,2339:0,2340:0,2341:0,2342:0,2343:0,2344:0,2345:0,2346:0,2347:0,2348:0,2349:0,2350:0,2351:0,2352:0,2353:0,2354:0,2355:0,2356:0,2357:0,2358:0,2359:0,2360:0,2361:0,2362:0,2363:0,2364:0,2365:0,2366:0,2367:0,2368:0,2369:0,2370:0,2371:0,2372:0,2373:0,2374:0,2375:0,2376:0,2377:0,2378:0,2379:0,2380:0,2381:0,2382:0,2383:0,2384:0,2385:0,2386:0,2387:0,2388:0,2389:0,2390:0,2391:0,2392:0,2393:0,2394:0,2395:0,2396:0,2397:0,2398:0,2399:0,2400:0,2401:0,2402:0,2403:0,2404:0,2405:0,2406:0,2407:0,2408:0,2409:0,2410:0,2411:0,2412:0,2413:0,2414:0,2415:0,2416:0,2417:0,2418:0,2419:0,2420:0,2421:0,2422:0,2423:0,2424:0,2425:0,2426:0,2427:0,2428:0,2429:0,2430:0,2431:0,2432:0,2433:0,2434:0,2435:0,2436:0,2437:0,2438:0,2439:0,2440:0,2441:0,2442:0,2443:0,2444:0,2445:0,2446:0,2447:0,2448:0,2449:0,2450:0,2451:0,2452:0,2453:0,2454:0,2455:0,2456:0,2457:0,2458:0,2459:0,2460:0,2461:0,2462:0,2523:0,2524:0,2525:0,2526:0,2527:0,2528:0,2529:0,2530:0,2531:0,2532:0,2533:0,2534:0,2535:0,2536:0,2537:0,2538:0,2539:0,2540:0,2541:0,2542:0,2543:0,2544:0,2545:0,2546:0,2547:0,2548:0,2549:0,2550:0,2551:0,2552:0,2553:0,2554:0,2555:0,2556:0,2557:0,2558:0,2559:0,2560:0,2561:0,2562:0,2563:0,2564:0,2565:0,2566:0,2567:0,2568:0,2569:0,2570:0,2571:0,2572:0,2573:0,2574:0,2575:0,2576:0,2577:0,2578:0,2579:0,2580:0,2581:0,2582:0,2583:0,2584:0,2585:0,2586:0,2587:0,2588:0,2589:0,2590:0,2591:0,2592:0,2593:0,2594:0,2595:0,2596:0,2597:0,2598:0,2599:0,2600:0,2601:0,2602:0,2603:0,2604:0,2605:0,2606:0,2607:0,2608:0,2609:0,2610:0,2611:0,2612:0,2613:0,2614:0,2615:0,2616:0,2617:0,2618:0,2619:0,2620:0,2621:0,2622:0,2623:0,2624:0,2625:0,2626:0,2627:0,2628:0,2629:0,2630:0,2631:0,2632:0,2633:0,2634:0,2635:0,2636:0,2637:0,2638:0,2639:0,2640:0,2641:0,2642:0,2643:0,2644:0,2645:0,2646:0,2647:0,2648:0,2649:0,2650:0,2651:0,2652:0,2653:0,2654:0,2655:0,2656:0,2657:0,2658:0,2659:0,2660:0,2661:0,2662:0,2663:0,2664:0,2665:0,2666:0,2667:0,2668:0,2669:0,2670:0,2671:0,2672:0,2673:0,2674:0,2675:0,2676:0,2677:0,2678:0,2679:0,2680:0,2681:0,2682:0,2683:0,2684:0,2685:0,2686:0,2687:0,2688:0,2689:0,2690:0,2691:0,2692:0,2693:0,2694:0,2695:0,2696:0,2697:0,2698:0,2699:0,2700:0,2701:0,2702:0,2703:0,2704:0,2705:0,2706:0,2707:0,2708:0,2709:0,2710:0,2711:0,2712:0,2713:0,2714:0,2715:0,2716:0,2717:0,2718:0,2719:0,2720:0,2721:0,2722:0,2723:0,2724:0,2725:0,2726:0,2727:0,2728:0,2729:0,2730:0,2731:0,2732:0,2733:0,2734:0,2735:0,2736:0,2737:0,2738:0,2739:0,2740:0,2741:0,2742:0,2743:0,2744:0,2745:0,2746:0,2747:0,2748:0,2749:0,2750:0,2751:0,2752:0,2753:0,2754:0,2755:0,2756:0,2757:0,2758:0,2759:0,2760:0,2761:0,2762:0,2763:0,2764:0,2765:0,2766:0,2767:0,2768:0,2769:0,2770:0,2771:0,2772:0,2773:0,2774:0,2775:0,2776:0,2777:0,2778:0,2779:0,2780:0,2781:0,2782:0,2783:0,2784:0,2785:0,2786:0,2787:0,2788:0,2789:0,2790:0,2791:0,2792:0,2793:0,2794:0,2795:0,2796:0,2797:0,2798:0,2799:0,2800:0,2801:0,2802:0,2803:0,2804:0,2805:0,2806:0,2807:0,2808:0,2809:0,2810:0,2811:0,2812:0,2813:0,2814:0,2815:0,2816:0,2817:0,2818:0,2819:0,2820:0,2821:0,2822:0,2823:0,2824:0,2825:0,2826:0,2827:0,2828:0,2829:0,2830:0,2831:0,2832:0,2833:0,2834:0,2835:0,2836:0,2837:0,2838:0,2839:0,2840:0,2841:0,2842:0,2843:0,2844:0,2845:0,2846:0,2847:0,2848:0,2849:0,2850:0,2851:0,2852:0,2853:0,2854:0,2855:0,2856:0,2857:0,2858:0,2859:0,2860:0,2861:0,2862:0,2863:0,2864:0,2865:0,2866:0,2867:4,2868:4,2869:4,2870:3,2871:3,2872:3,2873:3,2874:3,2875:3,2876:3,2877:3,2878:3,2879:3,2880:3,2881:3,2882:3,2883:3,2884:3,2885:3,2886:3,2887:3,2888:3,2891:3,2892:3,2893:3,2894:3,2895:3,2896:4,2897:4,2898:4,2899:3,2900:3,2901:4,2902:3,2903:3,2904:3,2905:3,2906:3,2907:3,2908:3,2909:4,2910:4,2911:3,2912:3,2913:4,2914:4,2915:3,2916:3,2917:3,2918:3,2919:3,2920:3,2921:4,2922:4,2923:4,2924:3,2925:3,2926:3,2927:3,2928:3,2929:3,2930:3,2931:0,2932:0,2933:0,2935:0,2936:0,2937:0,2938:0,2939:0,2940:0,2941:0,2942:0,2943:0,2944:0,2945:0,2946:0,2947:0,2948:0,2949:0,2950:0,2951:0,2952:0,2953:0,2954:0,2955:0,2956:0,2957:0,2958:0,2959:0,2960:0,2961:0,2962:0,2964:3,2965:3,2966:3,2967:3,2968:3,2969:0,2970:0,2971:0,2972:0,2973:0,2975:0,2976:0,2977:0,2978:0,2979:0,2980:0,2981:0,2982:0,2984:0,2985:0,2986:0,2987:0,2988:0,2989:0,2991:0,2992:4,2993:0,2994:4,2995:0,2996:0,2997:0,2998:0,2999:0,3000:0,3001:0,3002:0,3003:0,3004:0,3005:0,3006:0,3007:0,3008:0,3009:0,3010:0,3011:0,3012:0,3013:0,3014:0,3015:0,3016:0,3017:0,3018:0,3019:0,3020:0,3021:0,3022:0,3023:0,3024:0,3025:0,3026:0,3027:0,3028:0,3029:0,3030:0,3031:0,3032:0,3033:0,3034:0,3035:0,3036:0,3037:0,3054:0,3055:0,3056:0,3057:0,3058:0,3059:0,3060:0,3061:0,3062:0,3063:0,3064:0,3065:0,3066:0,3067:0,3068:0,3069:0,3070:0,3071:0,3072:0,3073:0,3074:0,3075:0,3076:0,3077:0,3078:0,3079:0,3080:4,3081:0,3082:0,3083:0,3084:0,3085:0,3086:0,3087:0,3088:0,3089:3,3090:0,3091:3,3092:0,3093:0,3094:0,3095:0,3096:0,3097:0,3098:0,3099:0,3100:0,3101:0,3102:3,3106:0,3107:0,3108:0,3109:0,3110:0,3111:0,3112:0,3113:0,3114:0,3115:0,3116:0,3117:0,3118:0,3119:0,3120:0,3121:0,3122:0,3123:0,3124:0,3125:0,3126:0,3127:0,3128:0,3129:0,3130:0,3131:0,3132:0,3133:0,3134:0,3135:0,3136:0,3137:0,3138:0,3141:0,3142:0,3148:0,3149:0,3153:0,3154:0,3155:0,3156:0,3157:0,3158:0,3159:0,3160:0,3161:0,3162:0,3163:0,3164:0,3165:0,3166:0,3169:0,3170:0,3171:0,3172:0,3174:0,3175:0,3176:0,3177:0,3178:0,3179:0,3180:0,3181:0,3182:0,3183:0,3184:0,3185:0,3186:0,3187:0,3188:0,3189:0,3190:0,3191:0,3192:0,3193:0,3194:0,3195:0,3196:0,3197:0,3198:0,3199:0,3200:0,3201:0,3202:0,3203:0,3294:0,3296:0,3297:0,3298:0,3299:0,3300:0,3301:0,3302:0,3303:0,3304:0,3305:0,3306:0,3307:0,3308:0,3309:0,3310:0,3311:0,3312:0,3313:0,3314:0,3315:0,3316:0,3317:0,3318:0,3319:0,3320:0,3321:0,3322:0,3323:0,3324:0,3325:0,3326:0,3327:0,3328:0,3329:0,3330:0,3331:0,3332:0,3333:0,3334:0,3335:0,3336:0,3337:0,3338:0,3339:0,3340:0,3341:0,3342:0,3343:0,3344:0,3345:0,3346:0,3347:0,3348:0,3349:0,3350:0,3351:0,3352:0,3353:0,3354:0,3355:0,3356:0,3357:0,3358:0,3359:3,3360:0,3361:4,3362:0,3363:3,3364:0,3365:3,3366:5,3367:0,3368:0,3369:0,3370:0,3371:0,3372:0,3373:0,3374:0,3375:0,3376:0,3377:0,3378:0,3379:0,3380:0,3381:0,3382:0,3383:0,3384:0,3385:0,3386:0,3387:0,3388:0,3391:0,3392:0,3393:0,3394:0,3395:0,3396:0,3397:0,3398:0,3399:0,3400:0,3401:0,3402:0,3403:0,3404:3,3405:0,3406:0,3407:5,3408:0,3409:0,3410:0,3411:0,3412:0,3413:0,3414:0,3415:0,3416:0,3417:3,3418:3,3419:3,3420:3,3421:3,3422:3,3423:3,3424:3,3425:3,3426:3,3427:3,3428:3,3429:3,3430:3,3431:3,3432:3,3433:3,3434:3,3435:3,3436:3,3437:3,3438:3,3439:0,3440:0,3441:3,3442:3,3443:3,3444:3,3445:3,3446:3,3447:0,3448:0,3449:0,3450:0,3453:3,3456:3,3457:3,3458:3,3459:3,3460:0,3461:0,3462:0,3463:0,3464:0,3560:3,3561:3,3562:3,3563:3,3564:3,3565:3,3566:3,3567:3,3568:3,3569:3,3570:3,3571:0,3572:0,3573:0,3574:0,3575:0,3576:0,3577:0,3578:0,3579:0,3580:0,3581:0,3582:3,3583:0,3584:3,3585:0,3586:3,3587:0,3588:4,3589:0,3590:4,3591:0,3592:0,3593:4,3594:0,3595:0,3596:0,3597:0,3598:3,3599:0,3600:3,3601:0,3602:0,3603:0,3604:0,3605:4,3606:0,3607:0,3608:3,3609:0,3610:3,3611:0,3612:3,3613:0,3614:3,3615:0,3616:3,3617:0,3618:3,3619:0,3620:3,3621:0,3622:3,3623:0,3624:3,3625:0,3626:3,3627:0,3628:3,3629:0,3630:3,3631:0,3632:3,3633:0,3634:4,3635:0,3636:4,3637:0,3638:0,3639:0,3640:3,3641:0,3642:3,3643:0,3644:4,3645:0,3646:4,3647:0,3648:4,3649:0,3650:3,3651:0,3652:3,3653:0,3654:3,3655:0,3656:4,3657:0,3658:3,3659:0,3660:3,3661:0,3662:3,3663:0,3664:3,3665:0,3666:0,3667:0,3668:3,3669:0,3670:3,3671:0,3672:3,3673:0,3674:3,3675:0,3676:4,3677:3,3678:0,3679:4,3680:3,3681:0,3682:4,3683:3,3684:0,3685:0,3686:3,3687:0,3688:3,3689:0,3690:3,3691:0,3692:3,3693:0,3694:0,3695:0,3696:3,3697:0,3698:3,3699:0,3700:3,3701:0,3702:0,3703:0,3704:0,3705:0,3706:0,3707:0,3708:0,3709:0,3710:0,3711:0,3712:0,3713:0,3714:0,3715:0,3716:0,3717:0,3718:0,3719:0,3720:0,3721:0,3722:0,3723:0,3724:0,3725:0,3726:0,3727:0,3728:3,3729:3,3730:3,3731:3,3732:3,3733:3,3734:3,3735:3,3736:3,3737:3,3738:3,3739:3,3753:3,3754:3,3755:3,3756:3,3757:3,3758:3,3759:3,3760:3,3761:0,3762:0,3763:0,3764:0,3765:0,3766:0,3767:0,3768:0,3769:0,3770:0,3771:0,3772:0,3773:0,3775:0,3776:0,3777:0,3779:0,3780:0,3781:0,3783:0,3784:0,3788:0,3789:0,3790:0,3791:0,3793:0,3794:0,3797:0,3798:0,3799:0,3800:0,3801:0,3802:0,3812:0,3814:0,3815:0,3816:0,3832:0,3833:0,3834:0,3835:0,3836:0,3837:0,3838:0,3839:0,3840:0,3841:0,3851:0,3852:0,3857:0,3890:0,3891:0,3892:0,3893:0,3912:0,3920:0,3942:0,3943:0,3944:0,3945:0,3946:0,3947:0,3948:0,3949:0,3950:0,3968:0,3969:0,3970:0,3973:0,3974:0,3975:0,3976:0,3978:0,3979:0,3986:0,3987:0,3988:0,3989:0,3991:3,3992:3,3994:0,3995:0,3996:0,3997:0,20002:0,20003:0,20004:0,20005:0,20006:0,20007:0,20008:0,20009:0,20010:0,20011:0,20012:0,20013:0,20014:0,20015:0,20016:0,20017:0,20018:0,20019:0,20020:0,20021:0,20022:0,20023:0,20024:0,20025:0,20026:0,20027:0,20028:0,20029:0,20030:0,20031:0,20032:0,20062:0,20063:0,20064:0,20065:0,20066:0,20067:0,20068:0,20069:0,20070:0,20071:0,20072:0,20073:0,20074:0,20075:0,20076:0,20077:0,20078:0,20079:0,20080:0,20081:0,20082:0,20083:0,20084:0,20085:0,20086:0,20087:0,20088:0,20089:0,20090:0,20091:0,20092:0,20135:0,20136:0,20137:0,20138:0,20248:0,20249:0,20250:0,20251:0,20252:0,20253:0,20254:0,20255:0,20256:0,20257:0,20258:0,20348:0,20349:0,20350:0,20351:0,20352:0,20353:0,20354:0,20355:0,20356:0,20357:0,20358:0,20436:0,20437:0,20438:0,20439:0,20440:0,20499:0,20538:0,20539:0,20790:0,20822:0,20823:0,20824:0,20934:0,20935:0,20936:0,21035:0,21036:0,21037:0,21095:0,21096:0,21097:0,21148:0,21149:0,21150:0,21291:0,21292:0,21413:0,21414:0,21415:0,21416:0,21417:0,21418:0,21419:0,21420:0,21421:0,21422:0,21423:0,21473:0,21474:0,21475:0,21476:0,21477:0,21478:0,21479:0,21480:0,21481:0,21482:0,21483:0,21500:0,21780:0,21781:0,21817:0,21818:0,21891:0,21892:0,21893:0,21894:0,21896:0,21897:0,21898:0,21899:0,22032:0,22033:0,22091:0,22092:0,22171:0,22172:0,22173:0,22174:0,22175:0,22176:0,22177:0,22181:0,22182:0,22183:0,22184:0,22185:0,22186:0,22187:0,22191:0,22192:0,22193:0,22194:0,22195:0,22196:0,22197:0,22234:0,22235:0,22236:0,22332:0,22391:0,22392:0,22521:0,22522:0,22523:0,22524:0,22525:0,22700:0,22770:0,22780:0,22832:0,22991:0,22992:0,22993:0,22994:0,23028:0,23029:0,23030:0,23031:0,23032:0,23033:0,23034:0,23035:0,23036:0,23037:0,23038:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,23830:0,23831:0,23832:0,23833:0,23834:0,23835:0,23836:0,23837:0,23838:0,23839:0,23840:0,23841:0,23842:0,23843:0,23844:0,23845:0,23846:0,23847:0,23848:0,23849:0,23850:0,23851:0,23852:0,23853:0,23866:0,23867:0,23868:0,23869:0,23870:0,23871:0,23872:0,23877:0,23878:0,23879:0,23880:0,23881:0,23882:0,23883:0,23884:0,23886:0,23887:0,23888:0,23889:0,23890:0,23891:0,23892:0,23893:0,23894:0,23946:0,23947:0,23948:0,24047:0,24048:0,24100:0,24200:0,24305:0,24306:0,24311:0,24312:0,24313:0,24342:0,24343:0,24344:0,24345:0,24346:0,24347:0,24370:6,24371:6,24372:6,24373:6,24374:6,24375:0,24376:0,24377:0,24378:0,24379:0,24380:0,24381:0,24382:6,24383:0,24500:0,24547:0,24548:0,24571:7,24600:0,24718:0,24719:0,24720:0,24721:0,24817:0,24818:0,24819:0,24820:0,24821:0,24877:0,24878:0,24879:0,24880:0,24881:0,24882:0,24891:0,24892:0,24893:0,25000:0,25231:0,25391:0,25392:0,25393:0,25394:0,25395:0,25828:0,25829:0,25830:0,25831:0,25832:0,25833:0,25834:0,25835:0,25836:0,25837:0,25838:0,25884:0,25932:0,26191:0,26192:0,26193:0,26194:0,26195:0,26237:0,26331:0,26332:0,26391:0,26392:0,26393:0,26432:0,26591:0,26592:0,26632:0,26692:0,26701:0,26702:0,26703:0,26704:0,26705:0,26706:0,26707:0,26708:0,26709:0,26710:0,26711:0,26712:0,26713:0,26714:0,26715:0,26716:0,26717:0,26718:0,26719:0,26720:0,26721:0,26722:0,26729:3,26730:3,26731:3,26732:3,26733:3,26734:3,26735:3,26736:3,26737:3,26738:3,26739:3,26740:3,26741:3,26742:3,26743:3,26744:3,26745:3,26746:3,26747:3,26748:3,26749:3,26750:3,26751:3,26752:3,26753:3,26754:3,26755:3,26756:3,26757:3,26758:3,26759:3,26760:3,26761:3,26762:3,26763:3,26764:3,26765:3,26766:3,26767:3,26768:3,26769:3,26770:3,26771:3,26772:3,26773:3,26774:3,26775:3,26776:3,26777:3,26778:3,26779:3,26780:3,26781:3,26782:3,26783:3,26784:3,26785:3,26786:3,26787:3,26788:3,26789:3,26790:3,26791:3,26792:3,26793:3,26794:3,26795:3,26796:3,26797:3,26798:3,26799:3,26801:3,26802:3,26803:3,26811:3,26812:3,26813:3,26901:0,26902:0,26903:0,26904:0,26905:0,26906:0,26907:0,26908:0,26909:0,26910:0,26911:0,26912:0,26913:0,26914:0,26915:0,26916:0,26917:0,26918:0,26919:0,26920:0,26921:0,26922:0,26923:0,26929:0,26930:0,26931:0,26932:0,26933:0,26934:0,26935:0,26936:0,26937:0,26938:0,26939:0,26940:0,26941:0,26942:0,26943:0,26944:0,26945:0,26946:0,26948:0,26949:0,26950:0,26951:0,26952:0,26953:0,26954:0,26955:0,26956:0,26957:0,26958:0,26959:0,26960:0,26961:0,26962:0,26963:0,26964:0,26965:0,26966:0,26967:0,26968:0,26969:0,26970:0,26971:0,26972:0,26973:0,26974:0,26975:0,26976:0,26977:0,26978:0,26979:0,26980:0,26981:0,26982:0,26983:0,26984:0,26985:0,26986:0,26987:0,26988:0,26989:0,26990:0,26991:0,26992:0,26993:0,26994:0,26995:0,26996:0,26997:0,26998:0,27037:0,27038:0,27039:0,27040:0,27120:0,27200:0,27205:0,27206:0,27207:0,27208:0,27209:0,27210:0,27211:0,27212:0,27213:0,27214:0,27215:0,27216:0,27217:0,27218:0,27219:0,27220:0,27221:0,27222:0,27223:0,27224:0,27225:0,27226:0,27227:0,27228:0,27229:0,27230:0,27231:0,27232:0,27258:0,27259:0,27260:0,27291:8,27292:8,27391:0,27392:0,27393:0,27394:0,27395:0,27396:0,27397:0,27398:0,27429:0,27492:0,27500:0,27561:0,27562:0,27563:0,27564:0,27571:0,27572:0,27573:0,27574:0,27581:0,27582:0,27583:0,27584:0,27591:0,27592:0,27593:0,27594:0,27700:0,28191:0,28192:0,28193:0,28232:0,28348:0,28349:0,28350:0,28351:0,28352:0,28353:0,28354:0,28355:0,28356:0,28357:0,28358:0,28402:0,28403:0,28404:0,28405:0,28406:0,28407:0,28408:0,28409:0,28410:0,28411:0,28412:0,28413:0,28414:0,28415:0,28416:0,28417:0,28418:0,28419:0,28420:0,28421:0,28422:0,28423:0,28424:0,28425:0,28426:0,28427:0,28428:0,28429:0,28430:0,28431:0,28432:0,28462:0,28463:0,28464:0,28465:0,28466:0,28467:0,28468:0,28469:0,28470:0,28471:0,28472:0,28473:0,28474:0,28475:0,28476:0,28477:0,28478:0,28479:0,28480:0,28481:0,28482:0,28483:0,28484:0,28485:0,28486:0,28487:0,28488:0,28489:0,28490:0,28491:0,28492:0,28600:0,28991:0,28992:0,29100:0,29101:0,29118:0,29119:0,29120:0,29121:0,29122:0,29168:0,29169:0,29170:0,29171:0,29172:0,29177:0,29178:0,29179:0,29180:0,29181:0,29182:0,29183:0,29184:0,29185:0,29187:0,29188:0,29189:0,29190:0,29191:0,29192:0,29193:0,29194:0,29195:0,29220:0,29221:0,29333:0,29635:0,29636:0,29738:0,29739:0,29849:0,29850:0,29871:9,29872:10,29873:0,29900:0,29901:0,29902:0,29903:0,30161:0,30162:0,30163:0,30164:0,30165:0,30166:0,30167:0,30168:0,30169:0,30170:0,30171:0,30172:0,30173:0,30174:0,30175:0,30176:0,30177:0,30178:0,30179:0,30200:1,30339:0,30340:0,30491:0,30492:0,30493:0,30494:0,30591:0,30592:0,30729:0,30730:0,30731:0,30732:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31251:0,31252:0,31253:0,31254:0,31255:0,31256:0,31257:0,31258:0,31259:0,31265:0,31266:0,31267:0,31268:0,31275:0,31276:0,31277:0,31278:0,31279:0,31281:0,31282:0,31283:0,31284:0,31285:0,31286:0,31287:0,31288:0,31289:0,31290:0,31291:0,31292:0,31293:0,31294:0,31295:0,31296:0,31297:0,31370:0,31461:0,31462:0,31463:0,31464:0,31465:0,31466:0,31467:0,31468:0,31469:0,31491:0,31492:0,31493:0,31494:0,31495:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31901:0,31917:0,31918:0,31919:0,31920:0,31921:0,31922:0,31971:0,31972:0,31973:0,31974:0,31975:0,31976:0,31977:0,31978:0,31979:0,31980:0,31981:0,31982:0,31983:0,31984:0,31985:0,31986:0,31987:0,31988:0,31989:0,31990:0,31991:0,31992:0,31993:0,31994:0,31995:0,31996:0,31997:0,31998:0,31999:0,32000:0,32001:3,32002:3,32003:3,32005:3,32006:3,32007:3,32008:3,32009:3,32010:3,32011:3,32012:3,32013:3,32014:3,32015:3,32016:3,32017:3,32018:3,32019:3,32020:3,32021:3,32022:3,32023:3,32024:3,32025:3,32026:3,32027:3,32028:3,32029:3,32030:3,32031:3,32033:3,32034:3,32035:3,32036:3,32037:3,32038:3,32039:3,32040:3,32041:3,32042:3,32043:3,32044:3,32045:3,32046:3,32047:3,32048:3,32049:3,32050:3,32051:3,32052:3,32053:3,32054:3,32055:3,32056:3,32057:3,32058:3,32059:3,32060:3,32061:0,32062:0,32064:3,32065:3,32066:3,32067:3,32074:3,32075:3,32076:3,32077:3,32081:0,32082:0,32083:0,32084:0,32085:0,32086:0,32098:0,32099:3,32100:0,32104:0,32107:0,32108:0,32109:0,32110:0,32111:0,32112:0,32113:0,32114:0,32115:0,32116:0,32117:0,32118:0,32119:0,32120:0,32121:0,32122:0,32123:0,32124:0,32125:0,32126:0,32127:0,32128:0,32129:0,32130:0,32133:0,32134:0,32135:0,32136:0,32137:0,32138:0,32139:0,32140:0,32141:0,32142:0,32143:0,32144:0,32145:0,32146:0,32147:0,32148:0,32149:0,32150:0,32151:0,32152:0,32153:0,32154:0,32155:0,32156:0,32157:0,32158:0,32161:0,32164:3,32165:3,32166:3,32167:3,32180:0,32181:0,32182:0,32183:0,32184:0,32185:0,32186:0,32187:0,32188:0,32189:0,32190:0,32191:0,32192:0,32193:0,32194:0,32195:0,32196:0,32197:0,32198:0,32199:0,32201:0,32202:0,32203:0,32204:0,32205:0,32206:0,32207:0,32208:0,32209:0,32210:0,32211:0,32212:0,32213:0,32214:0,32215:0,32216:0,32217:0,32218:0,32219:0,32220:0,32221:0,32222:0,32223:0,32224:0,32225:0,32226:0,32227:0,32228:0,32229:0,32230:0,32231:0,32232:0,32233:0,32234:0,32235:0,32236:0,32237:0,32238:0,32239:0,32240:0,32241:0,32242:0,32243:0,32244:0,32245:0,32246:0,32247:0,32248:0,32249:0,32250:0,32251:0,32252:0,32253:0,32254:0,32255:0,32256:0,32257:0,32258:0,32259:0,32260:0,32301:0,32302:0,32303:0,32304:0,32305:0,32306:0,32307:0,32308:0,32309:0,32310:0,32311:0,32312:0,32313:0,32314:0,32315:0,32316:0,32317:0,32318:0,32319:0,32320:0,32321:0,32322:0,32323:0,32324:0,32325:0,32326:0,32327:0,32328:0,32329:0,32330:0,32331:0,32332:0,32333:0,32334:0,32335:0,32336:0,32337:0,32338:0,32339:0,32340:0,32341:0,32342:0,32343:0,32344:0,32345:0,32346:0,32347:0,32348:0,32349:0,32350:0,32351:0,32352:0,32353:0,32354:0,32355:0,32356:0,32357:0,32358:0,32359:0,32360:0,32601:0,32602:0,32603:0,32604:0,32605:0,32606:0,32607:0,32608:0,32609:0,32610:0,32611:0,32612:0,32613:0,32614:0,32615:0,32616:0,32617:0,32618:0,32619:0,32620:0,32621:0,32622:0,32623:0,32624:0,32625:0,32626:0,32627:0,32628:0,32629:0,32630:0,32631:0,32632:0,32633:0,32634:0,32635:0,32636:0,32637:0,32638:0,32639:0,32640:0,32641:0,32642:0,32643:0,32644:0,32645:0,32646:0,32647:0,32648:0,32649:0,32650:0,32651:0,32652:0,32653:0,32654:0,32655:0,32656:0,32657:0,32658:0,32659:0,32660:0,32661:0,32662:0,32664:3,32665:3,32666:3,32667:3,32701:0,32702:0,32703:0,32704:0,32705:0,32706:0,32707:0,32708:0,32709:0,32710:0,32711:0,32712:0,32713:0,32714:0,32715:0,32716:0,32717:0,32718:0,32719:0,32720:0,32721:0,32722:0,32723:0,32724:0,32725:0,32726:0,32727:0,32728:0,32729:0,32730:0,32731:0,32732:0,32733:0,32734:0,32735:0,32736:0,32737:0,32738:0,32739:0,32740:0,32741:0,32742:0,32743:0,32744:0,32745:0,32746:0,32747:0,32748:0,32749:0,32750:0,32751:0,32752:0,32753:0,32754:0,32755:0,32756:0,32757:0,32758:0,32759:0,32760:0,32761:0,32766:0,53001:0,53002:0,53003:0,53004:0,53008:0,53009:0,53010:0,53011:0,53012:0,53013:0,53014:0,53015:0,53016:0,53017:0,53018:0,53019:0,53021:0,53022:0,53023:0,53024:0,53025:0,53026:0,53027:0,53028:0,53029:0,53030:0,53031:0,53032:0,53034:0,53042:0,53043:0,53044:0,53045:0,53046:0,53048:0,53049:0,54001:0,54002:0,54003:0,54004:0,54008:0,54009:0,54010:0,54011:0,54012:0,54013:0,54014:0,54015:0,54016:0,54017:0,54018:0,54019:0,54021:0,54022:0,54023:0,54024:0,54025:0,54026:0,54027:0,54028:0,54029:0,54030:0,54031:0,54032:0,54034:0,54042:0,54043:0,54044:0,54045:0,54046:0,54048:0,54049:0,54050:0,54051:0,54052:0,54053:0,65061:3,65062:3,65161:0,65163:0,102001:0,102002:0,102003:0,102004:0,102005:0,102006:0,102007:0,102008:0,102009:0,102010:0,102011:0,102012:0,102013:0,102014:0,102015:0,102016:0,102017:0,102018:0,102019:0,102020:0,102021:0,102022:0,102023:0,102024:0,102025:0,102026:0,102027:0,102028:0,102029:0,102030:0,102031:0,102032:0,102033:0,102034:0,102035:0,102036:0,102037:0,102038:0,102039:0,102060:0,102061:0,102062:0,102063:0,102064:11,102065:0,102066:0,102067:0,102068:12,102069:13,102070:0,102071:0,102072:0,102073:0,102074:0,102075:0,102076:0,102077:0,102078:0,102079:0,102090:0,102091:0,102092:0,102093:0,102094:0,102095:0,102096:0,102097:0,102098:0,102099:0,102100:0,102101:0,102102:0,102103:0,102104:0,102105:0,102106:0,102107:0,102108:0,102109:0,102110:0,102111:0,102112:0,102113:0,102114:0,102115:0,102116:0,102117:0,102118:3,102119:4,102120:3,102121:3,102122:0,102123:0,102124:0,102125:0,102126:0,102127:0,102128:0,102129:0,102130:0,102131:0,102132:0,102133:0,102134:0,102135:0,102136:0,102137:0,102138:0,102139:0,102140:0,102141:0,102142:0,102143:0,102144:0,102145:0,102146:0,102147:0,102148:0,102149:0,102150:0,102151:0,102152:0,102153:0,102154:0,102155:0,102156:0,102157:0,102158:0,102159:0,102160:0,102161:0,102162:0,102163:0,102164:0,102165:0,102166:0,102167:0,102168:0,102169:0,102170:0,102171:0,102172:0,102173:0,102174:0,102175:0,102176:0,102177:0,102178:0,102179:0,102180:0,102181:0,102182:0,102183:0,102184:0,102185:0,102186:0,102187:0,102188:0,102189:0,102190:0,102191:0,102192:0,102193:0,102194:0,102195:0,102196:0,102197:0,102198:0,102199:0,102200:0,102201:0,102202:0,102203:0,102205:0,102206:0,102207:0,102208:0,102209:0,102210:0,102211:0,102218:0,102219:3,102220:3,102221:0,102222:0,102223:0,102224:0,102225:0,102226:0,102227:0,102228:0,102229:0,102230:0,102231:0,102232:0,102233:0,102234:0,102235:0,102236:0,102237:0,102238:0,102239:0,102240:0,102241:0,102242:0,102243:0,102244:0,102245:0,102246:0,102248:0,102249:0,102250:0,102251:0,102252:0,102253:0,102254:0,102255:0,102256:0,102257:0,102258:0,102259:0,102260:0,102261:0,102262:0,102263:0,102264:0,102265:0,102266:0,102267:0,102268:0,102269:0,102270:0,102271:0,102272:0,102273:0,102274:0,102275:0,102276:0,102277:0,102278:0,102279:0,102280:0,102281:0,102282:0,102283:0,102284:0,102285:0,102286:0,102287:0,102288:0,102289:0,102290:0,102291:0,102292:0,102293:0,102294:0,102295:0,102296:0,102297:0,102298:0,102300:0,102304:0,102307:0,102308:0,102309:0,102310:0,102311:0,102312:0,102313:0,102314:0,102315:0,102316:0,102317:0,102318:0,102320:0,102321:0,102322:0,102323:0,102324:0,102325:0,102326:0,102327:0,102330:0,102334:0,102335:0,102336:0,102337:0,102338:0,102339:0,102340:0,102341:0,102342:0,102343:0,102344:0,102345:0,102346:0,102347:0,102348:0,102349:0,102350:0,102351:0,102352:0,102353:0,102354:0,102355:0,102356:0,102357:0,102358:0,102361:0,102363:0,102421:0,102422:0,102423:0,102424:0,102425:0,102426:0,102427:0,102428:0,102429:0,102430:0,102431:0,102432:0,102433:0,102434:0,102435:0,102436:0,102437:0,102438:0,102440:0,102441:0,102442:0,102443:0,102444:0,102461:3,102462:3,102463:3,102464:3,102465:3,102466:3,102467:3,102468:3,102469:0,102491:0,102492:0,102570:0,102571:0,102572:0,102573:0,102574:0,102575:0,102576:0,102577:0,102578:0,102579:0,102580:0,102581:0,102582:0,102583:0,102584:0,102591:0,102592:0,102601:0,102602:0,102603:0,102604:3,102605:0,102606:0,102607:0,102608:0,102609:0,102629:3,102630:3,102631:3,102632:3,102633:3,102634:3,102635:3,102636:3,102637:3,102638:3,102639:3,102640:3,102641:3,102642:3,102643:3,102644:3,102645:3,102646:3,102648:3,102649:3,102650:3,102651:3,102652:3,102653:3,102654:3,102655:3,102656:3,102657:3,102658:3,102659:3,102660:3,102661:3,102662:3,102663:3,102664:3,102665:3,102666:3,102667:3,102668:3,102669:3,102670:3,102671:3,102672:3,102673:3,102674:3,102675:3,102676:3,102677:3,102678:3,102679:3,102680:3,102681:3,102682:3,102683:3,102684:3,102685:3,102686:3,102687:3,102688:3,102689:3,102690:3,102691:3,102692:3,102693:3,102694:3,102695:3,102696:3,102697:3,102698:3,102700:3,102704:3,102707:3,102708:3,102709:3,102710:3,102711:3,102712:3,102713:3,102714:3,102715:3,102716:3,102717:3,102718:3,102719:3,102720:3,102721:3,102722:3,102723:3,102724:3,102725:3,102726:3,102727:3,102728:3,102729:3,102730:3,102733:3,102734:3,102735:3,102736:3,102737:3,102738:3,102739:3,102740:3,102741:3,102742:3,102743:3,102744:3,102745:3,102746:3,102747:3,102748:3,102749:3,102750:3,102751:3,102752:3,102753:3,102754:3,102755:3,102756:3,102757:3,102758:3,102761:3,102763:3,102766:3,103300:0,103301:0,103302:0,103303:0,103304:0,103305:0,103306:0,103307:0,103308:0,103309:0,103310:0,103311:0,103312:0,103313:0,103314:0,103315:0,103316:0,103317:0,103318:0,103319:0,103320:0,103321:0,103322:0,103323:0,103324:0,103325:0,103326:0,103327:0,103328:0,103329:0,103330:0,103331:0,103332:0,103333:0,103334:0,103335:0,103336:0,103337:0,103338:0,103339:0,103340:0,103341:0,103342:0,103343:0,103344:0,103345:0,103346:0,103347:0,103348:0,103349:0,103350:0,103351:0,103352:0,103353:0,103354:0,103355:0,103356:0,103357:0,103358:0,103359:0,103360:0,103361:0,103362:0,103363:0,103364:0,103365:0,103366:0,103367:0,103368:0,103369:0,103370:0,103371:0,103400:3,103401:3,103402:3,103403:3,103404:3,103405:3,103406:3,103407:3,103408:3,103409:3,103410:3,103411:3,103412:3,103413:3,103414:3,103415:3,103416:3,103417:3,103418:3,103419:3,103420:3,103421:3,103422:3,103423:3,103424:3,103425:3,103426:3,103427:3,103428:3,103429:3,103430:3,103431:3,103432:3,103433:3,103434:3,103435:3,103436:3,103437:3,103438:3,103439:3,103440:3,103441:3,103442:3,103443:3,103444:3,103445:3,103446:3,103447:3,103448:3,103449:3,103450:3,103451:3,103452:3,103453:3,103454:3,103455:3,103456:3,103457:3,103458:3,103459:3,103460:3,103461:3,103462:3,103463:3,103464:3,103465:3,103466:3,103467:3,103468:3,103469:3,103470:3,103471:3,103528:0,103529:0,103530:0,103531:0,103532:0,103533:0,103534:0,103535:0,103536:0,103537:0,103538:0,103584:0,103600:0,103601:0,103602:0,103603:0,103604:0,103605:0,103606:0,103607:0,103608:0,103609:0,103610:0,103611:0,103612:0,103613:0,103614:0,103615:0,103616:0,103617:0,103618:0,103619:0,103620:0,103621:0,103622:0,103623:0,103624:0,103625:0,103626:0,103627:0,103628:0,103629:0,103630:0,103631:0,103632:0,103633:0,103634:0,103635:0,103636:0,103637:0,103638:0,103639:0,103640:0,103641:0,103642:0,103643:0,103644:0,103645:0,103646:0,103647:0,103648:0,103649:0,103650:0,103651:0,103652:0,103653:0,103654:0,103655:0,103656:0,103657:0,103658:0,103659:0,103660:0,103661:0,103662:0,103663:0,103664:0,103665:0,103666:0,103667:0,103668:0,103669:0,103670:0,103671:0,103672:0,103673:0,103674:0,103675:0,103676:0,103677:0,103678:0,103679:0,103680:0,103681:0,103682:0,103683:0,103684:0,103685:0,103686:0,103687:0,103688:0,103689:0,103690:0,103691:0,103692:0,103693:0,103700:3,103701:3,103702:3,103703:3,103704:3,103705:3,103706:3,103707:3,103708:3,103709:3,103710:3,103711:3,103712:3,103713:3,103714:3,103715:3,103716:3,103717:3,103718:3,103719:3,103720:3,103721:3,103722:3,103723:3,103724:3,103725:3,103726:3,103727:3,103728:3,103729:3,103730:3,103731:3,103732:3,103733:3,103734:3,103735:3,103736:3,103737:3,103738:3,103739:3,103740:3,103741:3,103742:3,103743:3,103744:3,103745:3,103746:3,103747:3,103748:3,103749:3,103750:3,103751:3,103752:3,103753:3,103754:3,103755:3,103756:3,103757:3,103758:3,103759:3,103760:3,103761:3,103762:3,103763:3,103764:3,103765:3,103766:3,103767:3,103768:3,103769:3,103770:3,103771:3,103772:3,103773:3,103774:3,103775:3,103776:3,103777:3,103778:3,103779:3,103780:3,103781:3,103782:3,103783:3,103784:3,103785:3,103786:3,103787:3,103788:3,103789:3,103790:3,103791:3,103792:3,103793:3,103800:0,103801:0,103802:0,103803:0,103804:0,103805:0,103806:0,103807:0,103808:0,103809:0,103810:0,103811:0,103812:0,103813:0,103814:0,103815:0,103816:0,103817:0,103818:0,103819:0,103820:0,103821:0,103822:0,103823:0,103824:0,103825:0,103826:0,103827:0,103828:0,103829:0,103830:0,103831:0,103832:0,103833:0,103834:0,103835:0,103836:0,103837:0,103838:0,103839:0,103840:0,103841:0,103842:0,103843:0,103844:0,103845:0,103846:0,103847:0,103848:0,103849:0,103850:0,103851:0,103852:0,103853:0,103854:0,103855:0,103856:0,103857:0,103858:0,103859:0,103860:0,103861:0,103862:0,103863:0,103864:0,103865:0,103866:0,103867:0,103868:0,103869:0,103870:0,103871:0,103900:3,103901:3,103902:3,103903:3,103904:3,103905:3,103906:3,103907:3,103908:3,103909:3,103910:3,103911:3,103912:3,103913:3,103914:3,103915:3,103916:3,103917:3,103918:3,103919:3,103920:3,103921:3,103922:3,103923:3,103924:3,103925:3,103926:3,103927:3,103928:3,103929:3,103930:3,103931:3,103932:3,103933:3,103934:3,103935:3,103936:3,103937:3,103938:3,103939:3,103940:3,103941:3,103942:3,103943:3,103944:3,103945:3,103946:3,103947:3,103948:3,103949:3,103950:3,103951:3,103952:3,103953:3,103954:3,103955:3,103956:3,103957:3,103958:3,103959:3,103960:3,103961:3,103962:3,103963:3,103964:3,103965:3,103966:3,103967:3,103968:3,103969:3,103970:3,103971:3};if(has("extend-esri")){_c99.WKIDUnitConversion=obj;}return obj;});},"esri/geometry/Multipoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent"],function(_c9a,lang,has,_c9b,_c9c,_c9d,_c9e,_c9f){var _ca0={type:"multipoint",points:null};var _ca1=_c9a(_c9d,{declaredClass:"esri.geometry.Multipoint",constructor:function(obj){lang.mixin(this,_ca0);this.points=[];if(obj){if(obj.points){lang.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new _c9c(this.spatialReference);}}this.verifySR();},_extent:null,addPoint:function(_ca2){this._extent=null;if(lang.isArray(_ca2)){this.points.push(_ca2);}else{this.points.push([_ca2.x,_ca2.y]);}return this;},removePoint:function(_ca3){if(this._validateInputs(_ca3)){this._extent=null;return new _c9e(this.points.splice(_ca3,1)[0],this.spatialReference);}},getExtent:function(){if(this._extent){return new _c9f(this._extent);}var _ca4=this.points,il=_ca4.length;if(!il){return;}var _ca5=_ca4[0],xmax,ymax,xmin=(xmax=_ca5[0]),ymin=(ymax=_ca5[1]),min=Math.min,max=Math.max,sr=this.spatialReference,x,y,i;for(i=0;i<il;i++){_ca5=_ca4[i];x=_ca5[0];y=_ca5[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:sr?sr.toJson():null};return new _c9f(this._extent);},_validateInputs:function(_ca6){if(_ca6===null||_ca6<0||_ca6>=this.points.length){return false;}return true;},getPoint:function(_ca7){if(this._validateInputs(_ca7)){var _ca8=this.points[_ca7];return new _c9e(_ca8[0],_ca8[1],this.spatialReference);}},setPoint:function(_ca9,_caa){if(this._validateInputs(_ca9)){this._extent=null;this.points[_ca9]=[_caa.x,_caa.y];return this;}},toJson:function(){var json={points:lang.clone(this.points)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_ca1.defaultProps=_ca0;if(has("extend-esri")){lang.setObject("geometry.Multipoint",_ca1,_c9b);_c9b.geometry.defaultMultipoint=_ca0;}return _ca1;});},"esri/symbol":function(){define(["esri/symbols/Symbol","esri/symbols/MarkerSymbol","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/symbols/LineSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/CartographicLineSymbol","esri/symbols/FillSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/PictureFillSymbol","esri/symbols/Font","esri/symbols/TextSymbol","esri/symbols/jsonUtils"],function(_cab,_cac,_cad,_cae,_caf,_cb0,_cb1,_cb2,_cb3,_cb4,Font,_cb5,_cb6){return {Symbol:_cab,MarkerSymbol:_cac,SimpleMarkerSymbol:_cad,PictureMarkerSymbol:_cae,LineSymbol:_caf,SimpleLineSymbol:_cb0,CartographicLineSymbol:_cb1,FillSymbol:_cb2,SimpleFillSymbol:_cb3,PictureFillSymbol:_cb4,Font:Font,TextSymbol:_cb5,jsonUtils:_cb6};});},"esri/renderers/ClassBreaksRenderer":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/Renderer"],function(_cb7,_cb8,lang,has,_cb9,_cba,_cbb,_cbc){var _cbd=_cb7(_cbc,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(sym,attr){this.breaks=[];this._symbols={};this.infos=[];if(sym&&!sym.declaredClass){var json=sym;this.attributeField=json.field;sym=json.defaultSymbol;if(sym){this.defaultSymbol=_cbb.fromJson(sym);}this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],json,this);var min=json.minValue,_cbe=json.classBreakInfos;if(_cbe&&_cbe[0]&&_cba.isDefined(_cbe[0].classMaxValue)){_cb8.forEach(_cbe,function(info){var _cbf=info.classMaxValue;info.minValue=min;info.maxValue=_cbf;min=_cbf;},this);}_cb8.forEach(_cbe,this._addBreakInfo,this);}else{this.defaultSymbol=sym;this.attributeField=attr;}},addBreak:function(min,max,_cc0){var info=lang.isObject(min)?min:{minValue:min,maxValue:max,symbol:_cc0};this._addBreakInfo(info);},removeBreak:function(min,max){var _cc1,_cc2=this.breaks,i,il=_cc2.length,_cc3=this._symbols;for(i=0;i<il;i++){_cc1=_cc2[i];if(_cc1[0]==min&&_cc1[1]==max){_cc2.splice(i,1);delete _cc3[min+"-"+max];this.infos.splice(i,1);break;}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[];},getSymbol:function(_cc4){var attr=this.attributeField,_cc5=_cc4.attributes,val,rs=this.breaks,i,il=rs.length,_cc6=this._symbols,_cc7,incl=this.isMaxInclusive;if(lang.isFunction(attr)){val=attr(_cc4);}else{val=parseFloat(_cc5[attr]);var _cc8=this.normalizationType,_cc9,_cca;if(_cc8){_cc9=parseFloat(this.normalizationTotal);_cca=parseFloat(_cc5[this.normalizationField]);if(_cc8==="log"){val=Math.log(val)*Math.LOG10E;}else{if(_cc8==="percent-of-total"&&!isNaN(_cc9)){val=(val/_cc9)*100;}else{if(_cc8==="field"&&!isNaN(_cca)){val=val/_cca;}}}}}for(i=0;i<il;i++){_cc7=rs[i];if(_cc7[0]<=val&&(incl?(val<=_cc7[1]):(val<_cc7[1]))){return _cc6[_cc7[0]+"-"+_cc7[1]];}}return this.defaultSymbol;},setMaxInclusive:function(_ccb){this.isMaxInclusive=_ccb;},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"]],_copy:function(keys,_ccc,_ccd){_cb8.forEach(keys,function(key){var _cce=key.split(":"),_ccf,_cd0,_cd1,_cd2;if(_cce.length>1){key=_cce[0];_ccf=this["_"+key+"Enums"];if(_cce[1]==="rest"){_cd0="1";_cd1="0";}else{if(_cce[1]==="sdk"){_cd0="0";_cd1="1";}}}_cd2=_ccc[key];if(_cd2!==undefined){_ccd[key]=_cd2;if(_ccf&&_cd0){var i,len=_ccf.length;for(i=0;i<len;i++){if(_ccf[i][_cd0]===_cd2){_ccd[key]=_ccf[i][_cd1];break;}}}}},this);},_addBreakInfo:function(info){var min=info.minValue,max=info.maxValue;this.breaks.push([min,max]);this.infos.push(info);var _cd3=info.symbol;if(_cd3){if(!_cd3.declaredClass){info.symbol=_cbb.fromJson(_cd3);}}this._symbols[min+"-"+max]=info.symbol;},toJson:function(){var _cd4=this.infos||[],_cd5=_cba.fixJson,_cd6=_cd4[0]&&_cd4[0].minValue,json={type:"classBreaks",field:this.attributeField,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),minValue:(_cd6===-Infinity)?-Number.MAX_VALUE:_cd6,classBreakInfos:_cb8.map(_cd4,function(info){info=lang.mixin({},info);info.symbol=info.symbol&&info.symbol.toJson();info.classMaxValue=(info.maxValue===Infinity)?Number.MAX_VALUE:info.maxValue;delete info.minValue;delete info.maxValue;return _cd5(info);})};this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,json);return _cd5(json);}});if(has("extend-esri")){lang.setObject("renderer.ClassBreaksRenderer",_cbd,_cb9);}return _cbd;});},"esri/layers/RangeDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/Domain"],function(_cd7,lang,has,_cd8,_cd9,_cda){var _cdb=_cd7([_cda],{declaredClass:"esri.layers.RangeDomain",constructor:function(json){if(json&&lang.isObject(json)){this.minValue=json.range[0];this.maxValue=json.range[1];}},toJson:function(){var json=this.inherited(arguments);json.range=[this.minValue,this.maxValue];return _cd9.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.RangeDomain",_cdb,_cd8);}return _cdb;});},"esri/map":function(){define(["require","dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/event","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/registry","esri/kernel","esri/config","esri/sniff","esri/lang","esri/_coremap","esri/MapNavigationManager"],function(_cdc,_cdd,_cde,_cdf,lang,_ce0,_ce1,dom,_ce2,_ce3,_ce4,_ce5,_ce6,_ce7,_ce8,has,_ce9,_cea,_ceb){var _cec=30,_ced=30,_cee={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},_cef={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},dc=_cdf.connect,ddc=_cdf.disconnect,dcr=_ce3.create,ds=_ce5.set,dh=lang.hitch,_cf0=_ce4.getMarginBox,_cf1=_cdd.deprecated,_cf2=lang.mixin,_cf3="Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",_cf4=0;var Map=_cde(_cea,{declaredClass:"esri.Map",constructor:function(_cf5,_cf6){_cf2(this,{_slider:null,_navDiv:null,_mapParams:_cf2({attributionWidth:0.45,slider:true,nav:false,logo:true,sliderStyle:"small",sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:true},_cf6||{})});_cf2(this,{isDoubleClickZoom:false,isShiftDoubleClickZoom:false,isClickRecenter:false,isScrollWheelZoom:false,isPan:false,isRubberBandZoom:false,isKeyboardNavigation:false,isPanArrows:false,isZoomSlider:false});if(lang.isFunction(_ce7._css)){_ce7._css=_ce7._css(this._mapParams.force3DTransforms);this.force3DTransforms=this._mapParams.force3DTransforms;}var _cf7=(has("esri-transforms")&&has("esri-transitions"));this.navigationMode=this._mapParams.navigationMode||(_cf7&&"css-transforms")||"classic";if(this.navigationMode==="css-transforms"&&!_cf7){this.navigationMode="classic";}this.fadeOnZoom=_ce9.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:(this.navigationMode==="css-transforms");if(this.navigationMode!=="css-transforms"){this.fadeOnZoom=false;}this.setMapCursor("default");this.smartNavigation=_cf6&&_cf6.smartNavigation;if(!_ce9.isDefined(this.smartNavigation)&&has("mac")&&!has("esri-touch")&&!has("esri-pointer")&&!(has("ff")<=3.5)){var _cf8=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);if(_cf8&&_ce9.isDefined(_cf8[1])&&_ce9.isDefined(_cf8[3])){var _cf9=parseInt(_cf8[1],10),_cfa=parseInt(_cf8[3],10);this.smartNavigation=((_cf9>10)||(_cf9===10&&_cfa>=6));}}var _cfb=true;_cfb=false;this.showAttribution=_ce9.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:_cfb;this._onLoadHandler_connect=dc(this,"onLoad",this,"_onLoadInitNavsHandler");var _cfc=dcr("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution){var _cfd=lang.getObject("esri.dijit.Attribution",false);if(_cfd){this._initAttribution(_cfd,_cfc);}else{var _cfe=["esri/dijit/Attribution"],rid=_cf4++,self=this;this._rids&&this._rids.push(rid);_cdc(_cfe,function(_cff){var idx=self._rids?_ce0.indexOf(self._rids,rid):-1;if(idx!==-1){self._rids.splice(idx,1);self._initAttribution(_cff,_cfc);}});}}if(this._mapParams.logo){var _d00={};if(has("ie")===6){_d00.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+_cdc.toUrl("esri")+"/images/map/logo-med.png"+"')";}var logo=this._ogol=dcr("div",{style:_d00},_cfc);if((this.root.clientWidth*this.root.clientHeight)<250000){_ce2.add(logo,"logo-sm");}else{_ce2.add(logo,"logo-med");}if(!has("esri-touch")&&!has("esri-pointer")){this._ogol_connect=dc(logo,"onclick",this,"_openLogoLink");}}var _d01=(this.navigationManager=new _ceb(this)),_d02=_d01.mouseEvents||_d01.touchEvents||_d01.pointerEvents;if(_cf6&&_cf6.basemap){this._onLoadFix=true;this.setBasemap(_cf6.basemap);this._onLoadFix=false;}this.autoResize=this._mapParams.autoResize;if(this.autoResize){var _d03=_ce6.getEnclosingWidget(this.container);this._connects.push(dc((_d03&&_d03.resize)?_d03:window,"resize",this,this.resize));this._connects.push(dc(window,"orientationchange",this,this.resize));}},_initAttribution:function(_d04,_d05){var _d06=dcr("span",{"class":"esriAttribution"},_d05,"first");ds(_d06,"width",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(dc(_d06,"onclick",function(){var _d07="esriAttributionOpen";if(_ce2.contains(this,_d07)){_ce2.remove(this,_d07);}else{if(this.scrollWidth>this.clientWidth){_ce2.add(this,_d07);}}}));this.attribution=new _d04({map:this},_d06);},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var i;for(i=this._connects.length;i>=0;i--){ddc(this._connects[i]);delete this._connects[i];}ddc(this._slider_connect);ddc(this._ogol_connect);var _d08=this._slider;if(_d08&&_d08.destroy&&!_d08._destroyed){_d08.destroy();}var _d09=this._navDiv,_d0a=this.attribution;if(_d09){_ce3.destroy(_d09);}if(_d0a){_d0a.destroy();}this.attribution=this.navigationManager=this._rids=null;this.inherited("_cleanUp",arguments);},_isPanningOrZooming:function(){return this.__panning||this.__zooming;},_canZoom:function(_d0b){var _d0c=this.getLevel();return !this.__tileInfo||!((_d0c===this.getMinZoom()&&_d0b<0)||(_d0c===this.getMaxZoom()&&_d0b>0));},_onLoadInitNavsHandler:function(){this.enableMapNavigation();this._createNav();if(this._mapParams.sliderStyle==="small"||!this._createSlider){this._createSimpleSlider();}else{if(this._mapParams.slider){var _d0d=this._getSliderClass(true),_d0e=(_d0d.indexOf("Horizontal")!==-1),_d0f=_d0e?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",_d10=_d0e?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",_d11=_d0e?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels",_d12=[_d0f,_d10,_d11],_d13=_ce0.some(_d12,function(_d14){return !lang.getObject(_d14,false);});if(_d13){_d12=_ce0.map(_d12,function(_d15){return _d15.replace(/\./g,"/");});var rid=_cf4++,self=this;this._rids&&this._rids.push(rid);_cdc(_d12,function(){var idx=self._rids?_ce0.indexOf(self._rids,rid):-1;if(idx!==-1){self._rids.splice(idx,1);self._createSlider.apply(self,arguments);}});}else{_d12=_ce0.map(_d12,function(_d16){return lang.getObject(_d16,false);});this._createSlider.apply(this,_d12);}}}ddc(this._onLoadHandler_connect);},_createNav:function(){if(this._mapParams.nav){var div,v,i,_d17=_ce2.add,id=this.id;this._navDiv=dcr("div",{id:id+"_navdiv"},this.root);_d17(this._navDiv,"navDiv");var w2=this.width/2,h2=this.height/2,wh;for(i in _cee){v=_cee[i];div=dcr("div",{id:id+"_pan_"+i},this._navDiv);_d17(div,"fixedPan "+v);if(i==="up"||i==="down"){wh=parseInt(_cf0(div).w,10)/2;ds(div,{left:(w2-wh)+"px",zIndex:_cec});}else{wh=parseInt(_cf0(div).h,10)/2;ds(div,{top:(h2-wh)+"px",zIndex:_cec});}this._connects.push(dc(div,"onclick",dh(this,this[v])));}this._onMapResizeNavHandler_connect=dc(this,"onResize",this,"_onMapResizeNavHandler");for(i in _cef){v=_cef[i];div=dcr("div",{id:id+"_pan_"+i,style:{zIndex:_cec}},this._navDiv);_d17(div,"fixedPan "+v);this._connects.push(dc(div,"onclick",dh(this,this[v])));}this.isPanArrows=true;}},_onMapResizeNavHandler:function(_d18,wd,ht){var id=this.id,w2=wd/2,h2=ht/2,byId=dom.byId,i,div,wh;for(i in _cee){div=byId(id+"_pan_"+i);if(i==="up"||i==="down"){wh=parseInt(_cf0(div).w,10)/2;ds(div,"left",(w2-wh)+"px");}else{wh=parseInt(_cf0(div).h,10)/2;ds(div,"top",(h2-wh)+"px");}}},_createSimpleSlider:function(){if(this._mapParams.slider){var _d19=(this._slider=dcr("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:_ced}})),_d1a=(has("esri-touch")&&!has("ff"))?"touchstart":(has("esri-pointer")?(navigator.msPointerEnabled?"MSPointerDown":"pointerdown"):"onclick"),_d1b=dcr("div",{"class":"esriSimpleSliderIncrementButton"},_d19),_d1c=dcr("div",{"class":"esriSimpleSliderDecrementButton"},_d19);_d1b.innerHTML="+";_d1c.innerHTML="&ndash;";if(has("ie")<8){_ce2.add(_d1c,"dj_ie67Fix");}this._connects.push(dc(_d1b,_d1a,this,this._simpleSliderChangeHandler));this._connects.push(dc(_d1c,_d1a,this,this._simpleSliderChangeHandler));if(has("ie")<10){dom.setSelectable(_d19,false);}this.root.appendChild(_d19);this.isZoomSlider=true;}},_simpleSliderChangeHandler:function(evt){var _d1d=(evt.currentTarget.className.indexOf("IncrementButton")!==-1)?true:false;this._extentUtil({numLevels:_d1d?1:-1});},_getSliderClass:function(_d1e){var _d1f="",type=(_d1e?"Large":"Simple"),_d20=this._mapParams.sliderOrientation,_d21=this._mapParams.sliderPosition||"";_d20=(_d20&&_d20.toLowerCase()==="horizontal")?"esri"+type+"SliderHorizontal":"esri"+type+"SliderVertical";if(_d21){switch(_d21.toLowerCase()){case "top-left":_d21="esri"+type+"SliderTL";break;case "top-right":_d21="esri"+type+"SliderTR";break;case "bottom-left":_d21="esri"+type+"SliderBL";break;case "bottom-right":_d21="esri"+type+"SliderBR";break;default:break;}}return "esri"+type+"Slider"+" "+_d20+" "+_d21;},_openLogoLink:function(evt){window.open(_ce8.defaults.map.logoLink,"_blank");_ce1.stop(evt);},enableMapNavigation:function(){this.navigationManager.enableNavigation();},disableMapNavigation:function(){this.navigationManager.disableNavigation();},enableDoubleClickZoom:function(){if(!this.isDoubleClickZoom){this.navigationManager.enableDoubleClickZoom();this.isDoubleClickZoom=true;}},disableDoubleClickZoom:function(){if(this.isDoubleClickZoom){this.navigationManager.disableDoubleClickZoom();this.isDoubleClickZoom=false;}},enableShiftDoubleClickZoom:function(){if(!this.isShiftDoubleClickZoom){_cf1(this.declaredClass+": "+_cf3,null,"v2.0");this.navigationManager.enableShiftDoubleClickZoom();this.isShiftDoubleClickZoom=true;}},disableShiftDoubleClickZoom:function(){if(this.isShiftDoubleClickZoom){_cf1(this.declaredClass+": "+_cf3,null,"v2.0");this.navigationManager.disableShiftDoubleClickZoom();this.isShiftDoubleClickZoom=false;}},enableClickRecenter:function(){if(!this.isClickRecenter){this.navigationManager.enableClickRecenter();this.isClickRecenter=true;}},disableClickRecenter:function(){if(this.isClickRecenter){this.navigationManager.disableClickRecenter();this.isClickRecenter=false;}},enablePan:function(){if(!this.isPan){this.navigationManager.enablePan();this.isPan=true;}},disablePan:function(){if(this.isPan){this.navigationManager.disablePan();this.isPan=false;}},enableRubberBandZoom:function(){if(!this.isRubberBandZoom){this.navigationManager.enableRubberBandZoom();this.isRubberBandZoom=true;}},disableRubberBandZoom:function(){if(this.isRubberBandZoom){this.navigationManager.disableRubberBandZoom();this.isRubberBandZoom=false;}},enableKeyboardNavigation:function(){if(!this.isKeyboardNavigation){this.navigationManager.enableKeyboardNavigation();this.isKeyboardNavigation=true;}},disableKeyboardNavigation:function(){if(this.isKeyboardNavigation){this.navigationManager.disableKeyboardNavigation();this.isKeyboardNavigation=false;}},enableScrollWheelZoom:function(){if(!this.isScrollWheelZoom){this.navigationManager.enableScrollWheelZoom();this.isScrollWheelZoom=true;}},disableScrollWheelZoom:function(){if(this.isScrollWheelZoom){this.navigationManager.disableScrollWheelZoom();this.isScrollWheelZoom=false;}},showPanArrows:function(){if(this._navDiv){this._navDiv.style.display="block";this.isPanArrows=true;}},hidePanArrows:function(){if(this._navDiv){this._navDiv.style.display="none";this.isPanArrows=false;}},showZoomSlider:function(){if(this._slider){ds(this._slider.domNode||this._slider,"visibility","visible");this.isZoomSlider=true;}},hideZoomSlider:function(){if(this._slider){ds(this._slider.domNode||this._slider,"visibility","hidden");this.isZoomSlider=false;}}});if(has("extend-esri")){_ce7.Map=Map;}return Map;});},"dojo/io/script":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../sniff","../_base/window","../_base/xhr","../dom","../dom-construct","../request/script"],function(_d22,_d23,lang,has,win,xhr,dom,_d24,_d25){function _d26(_d27,id){var dfd=_d27["jsonp_"+id];if(dfd){delete _d27["jsonp_"+id];if(dfd.canceled){_d23.global[_d25._callbacksProperty][dfd.ioArgs.requestId]();}}};_d23.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var _d28={get:function(args){var rDfd,self=this;var dfd=this._makeScriptDeferred(args,function(dfd){rDfd&&rDfd.cancel();});var _d29=dfd.ioArgs;xhr._ioAddQueryToUrl(_d29);xhr._ioNotifyStart(dfd);rDfd=_d25.get(_d29.url,{timeout:args.timeout,jsonp:_d29.jsonp,checkString:args.checkString,ioArgs:_d29,frameDoc:args.frameDoc,canAttach:function(rDfd){_d29.requestId=rDfd.id;_d29.scriptId=rDfd.scriptId;_d29.canDelete=rDfd.canDelete;return _d28._canAttach(_d29);}},true);rDfd.then(function(){_d26(self,_d29.id);dfd.resolve(dfd);}).otherwise(function(_d2a){_d26(self,_d29.id);dfd.ioArgs.error=_d2a;dfd.reject(_d2a);});return dfd;},attach:_d25._attach,remove:_d25._remove,_makeScriptDeferred:function(args,_d2b){var dfd=xhr._ioSetArgs(args,_d2b||this._deferredCancel,this._deferredOk,this._deferredError);var _d2c=dfd.ioArgs;_d2c.id=_d23._scopeName+"IoScript"+(args.callbackSuffix||(this._counter++));_d2c.canDelete=false;_d2c.jsonp=args.callbackParamName||args.jsonp;if(_d2c.jsonp){_d2c.query=_d2c.query||"";if(_d2c.query.length>0){_d2c.query+="&";}_d2c.query+=_d2c.jsonp+"="+(args.frameDoc?"parent.":"")+_d23._scopeName+".io.script.jsonp_"+_d2c.id+"._jsonpCallback";_d2c.frameDoc=args.frameDoc;_d2c.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_d2c.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;},_deferredOk:function(dfd){var _d2d=dfd.ioArgs;return _d2d.json||_d2d.scriptLoaded||_d2d;},_deferredError:function(_d2e,dfd){console.log("dojo.io.script error",_d2e);return _d2e;},_deadScripts:[],_counter:1,_addDeadScript:function(_d2f){_d28._deadScripts.push({id:_d2f.id,frameDoc:_d2f.frameDoc});_d2f.frameDoc=null;},_validCheck:function(dfd){var _d30=_d28._deadScripts;if(_d30&&_d30.length>0){for(var i=0;i<_d30.length;i++){_d28.remove(_d30[i].id,_d30[i].frameDoc);_d30[i].frameDoc=null;}_d28._deadScripts=[];}return true;},_ioCheck:function(dfd){var _d31=dfd.ioArgs;if(_d31.json||(_d31.scriptLoaded&&!_d31.args.checkString)){return true;}var _d32=_d31.args.checkString;return _d32&&eval("typeof("+_d32+") != 'undefined'");},_resHandle:function(dfd){if(_d28._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(){return true;},_jsonpCallback:function(json){this.ioArgs.json=json;_d23.global[_d25._callbacksProperty][this.ioArgs.requestId](json);}};lang.setObject("dojo.io.script",_d28);return _d28;});},"esri/layers/LayerDrawingOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/renderers/jsonUtils"],function(_d33,lang,has,_d34,_d35,_d36){var _d37=_d33(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(json){if(json){lang.mixin(this,json);if(json.renderer){this.renderer=_d36.fromJson(json.renderer);}}},toJson:function(){var json={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};return _d35.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerDrawingOptions",_d37,_d34);}return _d37;});},"esri/layers/layer":function(){define(["dojo/_base/declare","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/json","dojo/has","esri/Evented","esri/kernel","esri/lang","esri/request","esri/deferredUtils","esri/urlUtils","esri/SpatialReference","esri/geometry/Extent"],function(_d38,_d39,_d3a,lang,_d3b,_d3c,has,_d3d,_d3e,_d3f,_d40,_d41,_d42,_d43,_d44){var _d45=_d38([_d3d],{declaredClass:"esri.layers.Layer",constructor:function(url,_d46){if(url&&lang.isString(url)){this._url=_d42.urlToObject(this.url=url);}else{this.url=(this._url=null);_d46=_d46||url;if(_d46&&_d46.layerDefinition){_d46=null;}}this.spatialReference=new _d43(4326);this.initialExtent=new _d44(-180,-90,180,90,new _d43(4326));this._map=this._div=null;this.normalization=true;if(_d46){if(_d46.id){this.id=_d46.id;}if(_d46.visible===false){this.visible=false;}if(_d3f.isDefined(_d46.opacity)){this.opacity=_d46.opacity;}if(_d3f.isDefined(_d46.minScale)){this.setMinScale(_d46.minScale);}if(_d3f.isDefined(_d46.maxScale)){this.setMaxScale(_d46.maxScale);}this.attributionDataUrl=_d46.attributionDataUrl||"";this.hasAttributionData=!!this.attributionDataUrl;if(_d3f.isDefined(_d46.showAttribution)){this.showAttribution=_d46.showAttribution;}}this._errorHandler=lang.hitch(this,this._errorHandler);if(this.managedSuspension){var _d47=this._setMap;this._setMap=function(map){var _d48=_d47.apply(this,arguments);this.evaluateSuspension();if(this.suspended&&!map.loaded){var _d49=_d3a.connect(map,"onLoad",this,function(){_d3a.disconnect(_d49);_d49=null;this.evaluateSuspension();});}return _d48;};}this.registerConnectEvents("esri.layers.Layer",{"error":["error"],"load":["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]});},id:null,visible:true,loaded:false,minScale:0,maxScale:0,visibleAtMapScale:false,suspended:true,attributionDataUrl:"",hasAttributionData:false,showAttribution:true,_errorHandler:function(err){this.onError(err);},_setMap:function(map,_d4a,_d4b,lod){this._map=map;this._lyrZEHandle=_d3a.connect(map,"onZoomEnd",this,this._processMapScale);if(map.loaded){this.visibleAtMapScale=this._isMapAtVisibleScale();}else{var _d4c=_d3a.connect(map,"onLoad",this,function(){_d3a.disconnect(_d4c);_d4c=null;this._processMapScale();});}},_unsetMap:function(map,_d4d){_d3a.disconnect(this._lyrZEHandle);this._lyrZEHandle=null;this._map=null;this.suspended=true;},_cleanUp:function(){this._map=this._div=null;},_fireUpdateStart:function(){if(this.updating){return;}this.updating=true;this.onUpdateStart();if(this._map){this._map._incr();}},_fireUpdateEnd:function(_d4e,info){this.updating=false;this.onUpdateEnd(_d4e,info);if(this._map){this._map._decr();}},_getToken:function(){var url=this._url,crd=this.credential;return (url&&url.query&&url.query.token)||(crd&&crd.token)||undefined;},_findCredential:function(){this.credential=_d3e.id&&this._url&&_d3e.id.findCredential(this._url.path);},_useSSL:function(){var _d4f=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_d4f&&_d4f.path){_d4f.path=_d4f.path.replace(re,rep);}},refresh:function(){},show:function(){this.setVisibility(true);},hide:function(){this.setVisibility(false);},setMinScale:function(_d50){this.setScaleRange(_d50);},setMaxScale:function(_d51){this.setScaleRange(null,_d51);},setScaleRange:function(_d52,_d53){var _d54=_d3f.isDefined(_d52),_d55=_d3f.isDefined(_d53);if(!this.loaded){this._hasMin=this._hasMin||_d54;this._hasMax=this._hasMax||_d55;}var _d56=this.minScale,_d57=this.maxScale;this.minScale=(_d54?_d52:this.minScale)||0;this.maxScale=(_d55?_d53:this.maxScale)||0;if((_d56!==this.minScale)||(_d57!==this.maxScale)){this.onScaleRangeChange();this._processMapScale();}},suspend:function(){this._suspended=true;this.evaluateSuspension();},resume:function(){this._suspended=false;this.evaluateSuspension();},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended;},evaluateSuspension:function(){if(this.canResume()){if(this.suspended){this._resume();}}else{if(!this.suspended){this._suspend();}}},_suspend:function(){this.suspended=true;this.onSuspend();if(this._map){this._map.onLayerSuspend(this);}},_resume:function(){this.suspended=false;var _d58=(this._resumedOnce===undefined);if(_d58){this._resumedOnce=true;}this.onResume({firstOccurrence:_d58});if(this._map){this._map.onLayerResume(this);}},_processMapScale:function(){var _d59=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();if(_d59!==this.visibleAtMapScale){this.onScaleVisibilityChange();this.evaluateSuspension();}},isVisibleAtScale:function(_d5a){return (_d5a?_d45.prototype._isMapAtVisibleScale.apply(this,arguments):false);},_isMapAtVisibleScale:function(_d5b){if(!_d5b&&(!this._map||!this._map.loaded)){return false;}_d5b=_d5b||this._map.getScale();var _d5c=this.minScale,_d5d=this.maxScale,_d5e=!_d5c,_d5f=!_d5d;if(!_d5e&&_d5b<=_d5c){_d5e=true;}if(!_d5f&&_d5b>=_d5d){_d5f=true;}return (_d5e&&_d5f)?true:false;},getAttributionData:function(){var url=this.attributionDataUrl,dfd=new _d3b(_d41._dfdCanceller);if(this.hasAttributionData&&url){dfd._pendingDfd=_d40({url:url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd._pendingDfd.then(function(_d60){dfd.callback(_d60);},function(_d61){dfd.errback(_d61);});}else{var err=new Error("Layer does not have attribution data");err.log=_d39.isDebug;dfd.errback(err);}return dfd;},getResourceInfo:function(){var info=this.resourceInfo;return lang.isString(info)?_d3c.fromJson(info):lang.clone(info);},setNormalization:function(_d62){this.normalization=_d62;},setVisibility:function(v){if(this.visible!==v){this.visible=v;this.onVisibilityChange(this.visible);this.evaluateSuspension();}},onLoad:function(){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onError:function(){}});if(has("extend-esri")){lang.setObject("layers.Layer",_d45,_d3e);}return _d45;});},"*now":function(r){r(["dojo/i18n!*preload*esri/nls/jsapi*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/jsapi",["dojo/fx/Toggler","dojo/_base/html","dijit/_base/manager","esri/main","esri/map","esri/geometry","esri/symbol","esri/renderer","esri/utils","esri/layers/graphics","esri/layers/agstiled","esri/layers/agsdynamic"],function(){return {};});