/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n","esri/layers/FeatureEditResult":function(){define("esri/layers/FeatureEditResult",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_1,_2,_3,_4){var _5=_1(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(_6){if(_6&&_2.isObject(_6)){this.objectId=_6.objectId;this.success=_6.success;if(!_6.success){var _7=_6.error;this.error=new Error();this.error.code=_7.code;this.error.message=_7.description;}}}});if(_3("extend-esri")){_2.setObject("layers.FeatureEditResult",_5,_4);}return _5;});},"dijit/form/TextBox":function(){require({cache:{"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_8,_9,_a,_b,_c,_d,_e,_f,_10,_11){var _12=_8("dijit.form.TextBox",[_e,_f],{templateString:_10,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:_d("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var _13=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((_13=="hidden"||_13=="file")&&this.templateString==this.constructor.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(_d("ie")<9){this.defer(function(){try{var s=_a.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _14=this.domNode.getElementsByTagName("INPUT");if(_14){for(var i=0;i<_14.length;i++){_14[i].style.fontFamily=ff;}}}}}catch(e){}});}},_onInput:function(e){this.inherited(arguments);if(this.intermediateChanges){this.defer(function(){this._handleOnChange(this.get("value"),false);});}},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=_9.create("span",{onmousedown:function(e){e.preventDefault();},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this.focused&&!this.textbox.value)?"":"none";}},_setValueAttr:function(_15,_16,_17){this.inherited(arguments);this._updatePlaceHolder();},getDisplayedValue:function(){_b.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue");},setDisplayedValue:function(_18){_b.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_18);},_onBlur:function(e){if(this.disabled){return;}this.inherited(arguments);this._updatePlaceHolder();if(_d("mozilla")){if(this.selectOnClick){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}}},_onFocus:function(by){if(this.disabled||this.readOnly){return;}this.inherited(arguments);this._updatePlaceHolder();}});if(_d("ie")){_12.prototype._isTextSelected=function(){var _19=this.ownerDocument.selection.createRange();var _1a=_19.parentElement();return _1a==this.textbox&&_19.text.length>0;};_11._setSelectionRange=_f._setSelectionRange=function(_1b,_1c,_1d){if(_1b.createTextRange){var r=_1b.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_1c);r.moveEnd("character",_1d-_1c);r.select();}};}return _12;});},"esri/tasks/QueryTask":function(){define("esri/tasks/QueryTask",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/json","dojo/has","esri/kernel","esri/request","esri/deferredUtils","esri/geometry/normalizeUtils","esri/tasks/Task","esri/tasks/FeatureSet"],function(_1e,_1f,_20,_21,_22,has,_23,_24,_25,_26,_27,_28){var _29=_1e(_27,{declaredClass:"esri.tasks.QueryTask",constructor:function(url,_2a){this._handler=_1f.hitch(this,this._handler);this._relationshipQueryHandler=_1f.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=_1f.hitch(this,this._executeForIdsHandler);this._countHandler=_1f.hitch(this,this._countHandler);this.source=_2a&&_2a.source;this.gdbVersion=_2a&&_2a.gdbVersion;this.registerConnectEvents("esri.tasks.QueryTask",{"complete":["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]});},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(_2b,_2c,_2d,_2e,_2f){var _30=_2f.assembly,_31=this._encode(_1f.mixin({},this._url.query,{f:"json"},_2b.toJson(_30&&_30[0]))),_32=this._handler,_33=this._errorHandler;if(this.source){var _34={source:this.source.toJson()};_31.layer=_22.toJson(_34);}if(this.gdbVersion){_31.gdbVersion=this.gdbVersion;}return _24({url:this._url.path+"/query",content:_31,callbackParamName:"callback",load:function(r,i){_32(r,i,_2c,_2d,_2f.dfd);},error:function(r){_33(r,_2d,_2f.dfd);},callbackSuffix:_2e});},executeRelationshipQuery:function(_35,_36,_37){var _38=this._encode(_1f.mixin({},this._url.query,{f:"json"},_35.toJson())),_39=this._relationshipQueryHandler,_3a=this._errorHandler;if(this.gdbVersion){_38.gdbVersion=this.gdbVersion;}var dfd=new _21(_25._dfdCanceller);dfd._pendingDfd=_24({url:this._url.path+"/queryRelatedRecords",content:_38,callbackParamName:"callback",load:function(r,i){_39(r,i,_36,_37,dfd);},error:function(r){_3a(r,_37,dfd);}});return dfd;},executeForIds:function(_3b,_3c,_3d,_3e){var _3f=_3e.assembly,_40=this._encode(_1f.mixin({},this._url.query,{f:"json",returnIdsOnly:true},_3b.toJson(_3f&&_3f[0]))),_41=this._executeForIdsHandler,_42=this._errorHandler;if(this.source){var _43={source:this.source.toJson()};_40.layer=_22.toJson(_43);}if(this.gdbVersion){_40.gdbVersion=this.gdbVersion;}return _24({url:this._url.path+"/query",content:_40,callbackParamName:"callback",load:function(r,i){_41(r,i,_3c,_3d,_3e.dfd);},error:function(r){_42(r,_3d,_3e.dfd);}});},executeForCount:function(_44,_45,_46,_47){var _48=_47.assembly,_49=this._encode(_1f.mixin({},this._url.query,{f:"json",returnIdsOnly:true,returnCountOnly:true},_44.toJson(_48&&_48[0]))),_4a=this._countHandler,_4b=this._errorHandler;if(this.source){var _4c={source:this.source.toJson()};_49.layer=_22.toJson(_4c);}if(this.gdbVersion){_49.gdbVersion=this.gdbVersion;}return _24({url:this._url.path+"/query",content:_49,callbackParamName:"callback",load:function(r,i){_4a(r,i,_45,_46,_47.dfd);},error:function(r){_4b(r,_46,_47.dfd);}});},_handler:function(_4d,io,_4e,_4f,dfd){try{var _50=new _28(_4d);this._successHandler([_50],"onComplete",_4e,dfd);}catch(err){this._errorHandler(err,_4f,dfd);}},_relationshipQueryHandler:function(_51,io,_52,_53,dfd){try{var gt=_51.geometryType,sr=_51.spatialReference,_54={};_20.forEach(_51.relatedRecordGroups,function(gr){var _55={};_55.geometryType=gt;_55.spatialReference=sr;_55.features=gr.relatedRecords;var _56=new _28(_55);_54[gr.objectId]=_56;});this._successHandler([_54],"onExecuteRelationshipQueryComplete",_52,dfd);}catch(err){this._errorHandler(err,_53,dfd);}},_executeForIdsHandler:function(_57,io,_58,_59,dfd){try{this._successHandler([_57.objectIds],"onExecuteForIdsComplete",_58,dfd);}catch(err){this._errorHandler(err,_59,dfd);}},_countHandler:function(_5a,io,_5b,_5c,dfd){try{var _5d,_5e=_5a.features,ids=_5a.objectIds;if(ids){_5d=ids.length;}else{if(_5e){throw new Error("Unable to perform query. Please check your parameters.");}else{_5d=_5a.count;}}this._successHandler([_5d],"onExecuteForCountComplete",_5b,dfd);}catch(err){this._errorHandler(err,_5c,dfd);}}});_26._createWrappers(_29);if(has("extend-esri")){_1f.setObject("tasks.QueryTask",_29,_23);}return _29;});},"esri/dijit/editing/tools/ToolBase":function(){define("esri/dijit/editing/tools/ToolBase",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","dojo/i18n!esri/nls/jsapi"],function(_5f,_60,has,_61,_62){var _63=_5f(null,{declaredClass:"esri.dijit.editing.tools.ToolBase",_enabled:true,showLabel:false,constructor:function(_64,_65){_64=_64||{};_60.mixin(this,_64);this.label=this._label?_62.widgets.editor.tools[this._label]:"";this._settings=_64.settings;this._toolbar=_64.settings.drawToolbar;this._editToolbar=_64.settings.editToolbar;this._initializeTool();},onFinished:function(){},onDrawEnd:function(){},onApplyEdits:function(){},postCreate:function(){this.deactivate();this.inherited(arguments);},destroy:function(){},activate:function(_66){if(this._toolbar){this._toolbar.deactivate();}if(this._editToolbar){this._editToolbar.deactivate();}if(!this._enabled){return;}this._checked=true;this._layer=_66;if(this._toolbar&&this._drawType){this._toolbar.activate(this._drawType);}},deactivate:function(){if(this._toolbar){this._toolbar.deactivate();}if(this._editToolbar){this._editToolbar.deactivate();}this.setChecked(false);this._updateUI();},setEnabled:function(_67){this._enabled=_67;this._updateUI();},setChecked:function(_68){this._checked=_68;},enable:function(_69){this._updateUI();},isEnabled:function(){return this._enabled;},getToolName:function(){return this._toolName;},_initializeTool:function(){},_updateUI:function(){this.disabled=!this._enabled;this.attr("iconClass",this._enabled?this._enabledIcon:this._disabledIcon);}});if(has("extend-esri")){_60.setObject("dijit.editing.tools.ToolBase",_63,_61);}return _63;});},"esri/dijit/editing/SelectionHelper":function(){define("esri/dijit/editing/SelectionHelper",["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/has","dojo/DeferredList","esri/geometry/Extent","esri/geometry/Point","esri/geometry/ScreenPoint","esri/layers/FeatureLayer","esri/tasks/query","esri/kernel"],function(_6a,_6b,_6c,_6d,has,_6e,_6f,_70,_71,_72,_73,_74){var SH=_6a(null,{declaredClass:"esri.dijit.editing.SelectionHelper",constructor:function(_75){this._settings=_75||{};this._sConnects=[];this._mapServiceCount=0;this._map=this._settings.map;this._tolerance=this._settings.singleSelectionTolerance;this._initMapServiceInfos(this._settings.layers);},destroy:function(){var _76;for(_76 in this._sConnects){if(this._sConnects.hasOwnProperty(_76)){_76.disconnect(this._sConnects[_76]);}}},selectFeatures:function(_77,_78,_79,_7a){if(_79===_72.SELECTION_NEW){this._resetMapServiceInfos();this.getSelection(_77);}var _7b=[];_6d.forEach(_77,function(_7c){if(_7c.visible===true&&_7c._isMapAtVisibleScale()===true){var _7d=_79;if(_7c._isSelOnly&&_7d===_72.SELECTION_NEW){_7d=_72.SELECTION_ADD;}_7b.push(_7c.selectFeatures(_78,_7d));}});var _7e=new _6e(_7b);_7e.addCallback(_6b.hitch(this,function(_7f){var _80=[];_6d.forEach(_7f,function(set,idx){_6d.forEach(set[1],function(_81){var _82=_81.attributes[_77[idx].objectIdField];_81=_77[idx]._mode._getFeature(_82)||null;if(_81){_80.push(_81);}},this);},this);if(!this._mapServiceCount){_7a(_80);return;}var _83=_79===_72.SELECTION_SUBTRACT;if(_83){this._resetMapServiceInfos();this._createLayerDefs(this._getLayerInfosFromSelection(_77));}else{this._createLayerDefs(this._getLayerInfosFromFeatures(_80));}this._updateLayerDefs(this._mapServiceInfos,false,!((_80&&_80.length)||_83),_6b.hitch(this,_7a,_80));}));},selectFeaturesByGeometry:function(_84,_85,_86,_87){var _88=_85;if(_85.declaredClass.indexOf("Extent")!==-1){if(_85.xmax===_85.xmin&&_85.ymax===_85.ymin){_88=new _70(_85.xmax,_85.ymax,_85.spatialReference);}}_88=(_88.declaredClass.indexOf("Point")!==-1)?this._extentFromPoint(_88):_88;var _89=new _73();_89.geometry=_88;this.selectFeatures(_84,_89,_86,_87);},clearSelection:function(_8a){var _8b=this._nonSelOnlyLayers;_6d.forEach(_8b,function(_8c){if(_8c.clearSelection){_8c.clearSelection();}});if(!this._mapServiceCount){return;}this._resetMapServiceInfos();var _8d=this._getLayerInfosFromSelection(this._settings.layers);var _8e=_6d.some(_8d,function(_8f){return _8f.oids&&_8f.oids.length;});if(_8e){this._createLayerDefs(_8d);this._updateLayerDefs(this._mapServiceInfos,true,_8a||false);}},findMapService:function(_90){var map=this._map,_91=map.layerIds,_92=(_90&&_90._url)?_90._url.path.toLowerCase():"",_93,_94,_95;for(_94 in _91){if(_91.hasOwnProperty(_94)){_93=map.getLayer(_91[_94]);_95=_93._url?_93._url.path.toLowerCase().replace("mapserver","featureserver"):"";if(_92.substr(0,_95.length)===_95&&_93.declaredClass==="esri.layers.ArcGISDynamicMapServiceLayer"){return _93;}}}},getSelection:function(_96){var _97=[];_6d.forEach(_96,function(_98){if(_98._isSelOnly){_97.push(this._createLayerInfo(_98));}},this);_6d.forEach(_97,function(_99){var _9a=this._createMapServiceInfo(this.findMapService(_99.layer));if(_9a){_9a.layerInfos[_99.layer.layerId]=_99;}},this);},_initMapServiceInfos:function(_9b){this._nonSelOnlyLayers=[];this._mapServiceInfos=[];_6d.forEach(_9b,function(_9c){var _9d=this.findMapService(_9c);if(_9d){this._mapServiceCount++;this._createMapServiceInfo(_9d);if(_9d){_9d.setDisableClientCaching(true);}}else{this._nonSelOnlyLayers.push(_9c);}},this);},_createMapServiceInfo:function(_9e){if(!_9e){return null;}var _9f=this._mapServiceInfos;var _a0=_9f[_9e.id];if(!_a0){_a0=_9f[_9e.id]={mapService:_9e,layerInfos:[],layerDefs:_6b.mixin([],_9e.layerDefinitions||[]),origLayerDefs:_6b.mixin([],_9e.layerDefinitions||[])};}return _a0;},_resetMapServiceInfo:function(_a1){_6d.forEach(_a1.layerInfos,this._resetLayerInfo);_a1.layerDefs=_6b.mixin([],_a1.origLayerDefs||[]);},_resetMapServiceInfos:function(){var _a2=this._mapServiceInfos,_a3;for(_a3 in _a2){if(_a2.hasOwnProperty(_a3)){this._resetMapServiceInfo(_a2[_a3]);}}},_createLayerInfo:function(_a4,_a5){var _a6=_a4.objectIdField;var _a7=_a5?[]:_a4.getSelectedFeatures();return {layer:_a4,selectedFeatures:_a7||[],oids:_6d.map(_a7,function(_a8){return _a8.attributes[_a6];})};},_resetLayerInfo:function(_a9){if(!_a9){return;}_a9.selectedFeatures=[];_a9.oids=[];},_updateLayerDefs:function(_aa,_ab,_ac,_ad){var _ae;for(_ae in _aa){if(_aa.hasOwnProperty(_ae)){var _af=_aa[_ae];var _b0=_af.mapService;var _b1=_af.layerDefs=(_ab?_6b.mixin([],_af.origLayerDefs||[]):_af.layerDefs);if(_b1){if(!_ac){this._sConnects[_b0.id]=(_6c.connect(_b0,"onUpdateEnd",_6b.hitch(this,"_onMapServiceUpdate",_af,_ab,_ad)));}else{if(_ad){_ad();}}_b0.setLayerDefinitions(_b1,_ac||false);}else{if(_ad){_ad();}}}}},_onMapServiceUpdate:function(_b2,_b3,_b4){_6c.disconnect(this._sConnects[_b2.mapService.id]);_6d.forEach(_b2.layerInfos,function(_b5){if(_b3){if(_b5){_b5.layer.clearSelection();}}else{var _b6=new _73();_b6.objectIds=_b5?_b5.oids:[];if(_b6.objectIds.length){_b5.layer.selectFeatures(_b6,_72.SELECTION_SUBTRACT);}}},this);if(_b3){this._resetMapServiceInfo(_b2);}if(_b4){_b4();}},_createLayerDefs:function(_b7){_6d.forEach(_b7,function(_b8){var _b9=_b8.layer;var _ba=this._createMapServiceInfo(this.findMapService(_b8.layer));if(!_ba){return;}var _bb=_ba.mapService;var _bc=_ba.layerDefs;var _bd=_b9.objectIdField;var _be=_b9.layerId;var _bf="(\""+_bd+"\" NOT IN (";var _c0=_b8.oids;if(_c0&&_c0.length){_6d.forEach(_b8.oids,function(oid,idx){_c0=true;if(idx){_bf+=",";}_bf+="'"+oid+"'";});_bf+="))";if(_bc.length&&(_bc[_be]&&_bc[_be].length)){_bc[_be]+=" AND"+_bf;}else{_bc[_be]=_bf;}}},this);},_getLayerInfosFromFeatures:function(_c1){var _c2=[];_6d.forEach(_c1,function(_c3){var _c4=_c3.getLayer();if(_c4&&_c4._isSelOnly){if(!_c2[_c4.id]){_c2[_c4.id]=this._createLayerInfo(_c4,true);}_c2[_c4.id].selectedFeatures.push(_c3);_c2[_c4.id].oids.push(_c3.attributes[_c4.objectIdField]);}},this);var _c5=[],_c6;for(_c6 in _c2){if(_c2.hasOwnProperty(_c6)){_c5.push(_c2[_c6]);}}return _c5;},_getLayerInfosFromSelection:function(_c7){var _c8=[];_6d.forEach(_c7,function(_c9){if(_c9._isSelOnly){_c8.push(this._createLayerInfo(_c9,false));}},this);return _c8;},_extentFromPoint:function(_ca){var _cb=this._tolerance;var map=this._map;var _cc=map.toScreen(_ca);var _cd=new _71(_cc.x-_cb,_cc.y+_cb);var _ce=new _71(_cc.x+_cb,_cc.y-_cb);var _cf=map.toMap(_cd);var _d0=map.toMap(_ce);return new _6f(_cf.x,_cf.y,_d0.x,_d0.y,map.spatialReference);}});if(has("extend-esri")){_6b.setObject("dijit.editing.SelectionHelper",SH,_74);}return SH;});},"dojox/grid/DataGrid":function(){define("dojox/grid/DataGrid",["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/_base/sniff","dojo/_base/declare","./_Grid","./DataSelection","dojo/_base/html"],function(_d1,_d2,_d3,_d4,has,_d5,_d6,_d7,_d8){var _d9=_d5("dojox.grid.DataGrid",_d6,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,keepSelection:false,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments);},destroy:function(){this.selection.destroy();this.inherited(arguments);},createSelection:function(){this.selection=new _d7(this);},get:function(_da,_db){if(_db&&this.field=="_item"&&!this.fields){return _db;}else{if(_db&&this.fields){var ret=[];var s=this.grid.store;_d2.forEach(this.fields,function(f){ret=ret.concat(s.getValues(_db,f));});return ret;}else{if(!_db&&typeof _da==="string"){return this.inherited(arguments);}}}return (!_db?this.defaultValue:(!this.field?this.value:(this.field=="_item"?_db:this.grid.store.getValue(_db,this.field))));},_checkUpdateStatus:function(){if(this.updateDelay>0){var _dc=false;if(this._endUpdateDelay){clearTimeout(this._endUpdateDelay);delete this._endUpdateDelay;_dc=true;}if(!this.updating){this.beginUpdate();_dc=true;}if(_dc){var _dd=this;this._endUpdateDelay=setTimeout(function(){delete _dd._endUpdateDelay;_dd.endUpdate();},this.updateDelay);}}},_onSet:function(_de,_df,_e0,_e1){this._checkUpdateStatus();var idx=this.getItemIndex(_de);if(idx>-1){this.updateRow(idx);}},_createItem:function(_e2,_e3){var _e4=this._hasIdentity?this.store.getIdentity(_e2):_d4.toJson(this.query)+":idx:"+_e3+":sort:"+_d4.toJson(this.getSortProps());var o=this._by_idty[_e4]={idty:_e4,item:_e2};return o;},_addItem:function(_e5,_e6,_e7){this._by_idx[_e6]=this._createItem(_e5,_e6);if(!_e7){this.updateRow(_e6);}},_onNew:function(_e8,_e9){this._checkUpdateStatus();var _ea=this.get("rowCount");this._addingItem=true;this.updateRowCount(_ea+1);this._addingItem=false;this._addItem(_e8,_ea);this.showMessage();},_onDelete:function(_eb){this._checkUpdateStatus();var idx=this._getItemIndex(_eb,true);if(idx>=0){this._pages=[];this._bop=-1;this._eop=-1;var o=this._by_idx[idx];this._by_idx.splice(idx,1);delete this._by_idty[o.idty];this.updateRowCount(this.get("rowCount")-1);if(this.get("rowCount")===0){this.showMessage(this.noDataMessage);}}if(this.selection.isSelected(idx)){this.selection.deselect(idx);this.selection.selected.splice(idx,1);}},_onRevert:function(){this._refresh();},setStore:function(_ec,_ed,_ee){if(this._requestsPending(0)){return;}this._setQuery(_ed,_ee);this._setStore(_ec);this._refresh(true);},setQuery:function(_ef,_f0){if(this._requestsPending(0)){return;}this._setQuery(_ef,_f0);this._refresh(true);},setItems:function(_f1){this.items=_f1;this._setStore(this.store);this._refresh(true);},_setQuery:function(_f2,_f3){this.query=_f2;this.queryOptions=_f3||this.queryOptions;},_setStore:function(_f4){if(this.store&&this._store_connects){_d2.forEach(this._store_connects,this.disconnect,this);}this.store=_f4;if(this.store){var f=this.store.getFeatures();var h=[];this._canEdit=!!f["dojo.data.api.Write"]&&!!f["dojo.data.api.Identity"];this._hasIdentity=!!f["dojo.data.api.Identity"];if(!!f["dojo.data.api.Notification"]&&!this.items){h.push(this.connect(this.store,"onSet","_onSet"));h.push(this.connect(this.store,"onNew","_onNew"));h.push(this.connect(this.store,"onDelete","_onDelete"));}if(this._canEdit){h.push(this.connect(this.store,"revert","_onRevert"));}this._store_connects=h;}},_onFetchBegin:function(_f5,req){if(!this.scroller){return;}if(this.rowCount!=_f5){if(req.isRender){this.scroller.init(_f5,this.keepRows,this.rowsPerPage);this.rowCount=_f5;this._setAutoHeightAttr(this.autoHeight,true);this._skipRowRenormalize=true;this.prerender();this._skipRowRenormalize=false;}else{this.updateRowCount(_f5);}}if(!_f5){this.views.render();this._resize();this.showMessage(this.noDataMessage);this.focus.initFocusView();}else{this.showMessage();}},_onFetchComplete:function(_f6,req){if(!this.scroller){return;}if(_f6&&_f6.length>0){_d2.forEach(_f6,function(_f7,idx){this._addItem(_f7,req.start+idx,true);},this);this.updateRows(req.start,_f6.length);if(req.isRender){this.setScrollTop(0);this.postrender();}else{if(this._lastScrollTop){this.setScrollTop(this._lastScrollTop);}}if(has("ie")){_d8.setSelectable(this.domNode,this.selectable);}}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;}this._pending_requests[req.start]=false;},_onFetchError:function(err,req){console.log(err);delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage);}this._pending_requests[req.start]=false;this.onFetchError(err,req);},onFetchError:function(err,req){},_fetch:function(_f8,_f9){_f8=_f8||0;if(this.store&&!this._pending_requests[_f8]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage);}this._pending_requests[_f8]=true;try{if(this.items){var _fa=this.items;var _fb=this.store;this.rowsPerPage=_fa.length;var req={start:_f8,count:this.rowsPerPage,isRender:_f9};this._onFetchBegin(_fa.length,req);var _fc=0;_d2.forEach(_fa,function(i){if(!_fb.isItemLoaded(i)){_fc++;}});if(_fc===0){this._onFetchComplete(_fa,req);}else{var _fd=function(_fe){_fc--;if(_fc===0){this._onFetchComplete(_fa,req);}};_d2.forEach(_fa,function(i){if(!_fb.isItemLoaded(i)){_fb.loadItem({item:i,onItem:_fd,scope:this});}},this);}}else{this.store.fetch({start:_f8,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:_f9,onBegin:_d3.hitch(this,"_onFetchBegin"),onComplete:_d3.hitch(this,"_onFetchComplete"),onError:_d3.hitch(this,"_onFetchError")});}}catch(e){this._onFetchError(e,{start:_f8,count:this.rowsPerPage});}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoaded=false;this._isLoading=false;},getItem:function(idx){var _ff=this._by_idx[idx];if(!_ff||(_ff&&!_ff.item)){this._preparePage(idx);return null;}return _ff.item;},getItemIndex:function(item){return this._getItemIndex(item,false);},_getItemIndex:function(item,_100){if(!_100&&!this.store.isItem(item)){return -1;}var idty=this._hasIdentity?this.store.getIdentity(item):null;for(var i=0,l=this._by_idx.length;i<l;i++){var d=this._by_idx[i];if(d&&((idty&&d.idty==idty)||(d.item===item))){return i;}}return -1;},filter:function(_101,_102){this.query=_101;if(_102){this._clearData();}this._fetch();},_getItemAttr:function(idx,attr){var item=this.getItem(idx);return (!item?this.fetchText:this.store.getValue(item,attr));},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this._fetch(0,true);}},_requestsPending:function(_103){return this._pending_requests[_103];},_rowToPage:function(_104){return (this.rowsPerPage?Math.floor(_104/this.rowsPerPage):_104);},_pageToRow:function(_105){return (this.rowsPerPage?this.rowsPerPage*_105:_105);},_preparePage:function(_106){if((_106<this._bop||_106>=this._eop)&&!this._addingItem){var _107=this._rowToPage(_106);this._needPage(_107);this._bop=_107*this.rowsPerPage;this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"));}},_needPage:function(_108){if(!this._pages[_108]){this._pages[_108]=true;this._requestPage(_108);}},_requestPage:function(_109){var row=this._pageToRow(_109);var _10a=Math.min(this.rowsPerPage,this.get("rowCount")-row);if(_10a>0){this._requests++;if(!this._requestsPending(row)){setTimeout(_d3.hitch(this,"_fetch",row,false),1);}}},getCellName:function(_10b){return _10b.field;},_refresh:function(_10c){this._clearData();this._fetch(0,_10c);},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh();},canSort:function(){return (!this._isLoading);},getSortProps:function(){var c=this.getCell(this.getSortIndex());if(!c){if(this.sortFields){return this.sortFields;}return null;}else{var desc=c["sortDesc"];var si=!(this.sortInfo>0);if(typeof desc=="undefined"){desc=si;}else{desc=si?!desc:desc;}return [{attribute:c.field,descending:desc}];}},styleRowState:function(_10d){if(this.store&&this.store.getState){var _10e=this.store.getState(_10d.index),c="";for(var i=0,ss=["inflight","error","inserting"],s;s=ss[i];i++){if(_10e[s]){c=" dojoxGridRow-"+s;break;}}_10d.customClasses+=c;}},onStyleRow:function(_10f){this.styleRowState(_10f);this.inherited(arguments);},canEdit:function(_110,_111){return this._canEdit;},_copyAttr:function(idx,attr){var row={};var _112={};var src=this.getItem(idx);return this.store.getValue(src,attr);},doStartEdit:function(_113,_114){if(!this._cache[_114]){this._cache[_114]=this._copyAttr(_114,_113.field);}this.onStartEdit(_113,_114);},doApplyCellEdit:function(_115,_116,_117){this.store.fetchItemByIdentity({identity:this._by_idx[_116].idty,onItem:_d3.hitch(this,function(item){var _118=this.store.getValue(item,_117);if(typeof _118=="number"){_115=isNaN(_115)?_115:parseFloat(_115);}else{if(typeof _118=="boolean"){_115=_115=="true"?true:_115=="false"?false:_115;}else{if(_118 instanceof Date){var _119=new Date(_115);_115=isNaN(_119.getTime())?_115:_119;}}}this.store.setValue(item,_117,_115);this.onApplyCellEdit(_115,_116,_117);})});},doCancelEdit:function(_11a){var _11b=this._cache[_11a];if(_11b){this.updateRow(_11a);delete this._cache[_11a];}this.onCancelEdit.apply(this,arguments);},doApplyEdit:function(_11c,_11d){var _11e=this._cache[_11c];this.onApplyEdit(_11c);},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var fx=_d3.hitch(this,function(_11f){if(_11f.length){_d2.forEach(_11f,this.store.deleteItem,this.store);this.selection.clear();}});if(this.allItemsSelected){this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:fx});}else{fx(this.selection.getSelected());}}}});_d9.cell_markupFactory=function(_120,node,_121){var _122=_d3.trim(_d8.attr(node,"field")||"");if(_122){_121.field=_122;}_121.field=_121.field||_121.name;var _123=_d3.trim(_d8.attr(node,"fields")||"");if(_123){_121.fields=_123.split(",");}if(_120){_120(node,_121);}};_d9.markupFactory=function(_124,node,ctor,_125){return _d6.markupFactory(_124,node,ctor,_d3.partial(_d9.cell_markupFactory,_125));};return _d9;});},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/_base/lang","dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/sniff","dojo/_base/unload"],function(lang,_126,_127,_128,_129,_12a,_12b,_12c,has,_12d){var _12e=_12b("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(tmpl){var _12f=this.declaredClass,_130=this;return _128.substitute(tmpl,this,function(_131,key){if(key.charAt(0)=="!"){_131=lang.getObject(key.substr(1),false,_130);}if(typeof _131=="undefined"){throw new Error(_12f+" template:"+key);}if(_131==null){return "";}return key.charAt(0)=="!"?_131:_131.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){if(!this.templateString){this.templateString=_129(this.templatePath,{sanitize:true});}var _132=_12e.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);var node;if(lang.isString(_132)){node=_12c.toDom(this._stringRepl(_132),this.ownerDocument);if(node.nodeType!=1){throw new Error("Invalid template: "+_132);}}else{node=_132.cloneNode(true);}this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node,function(n,p){return n.getAttribute(p);});this._beforeFillContent();this._fillContent(this.srcNodeRef);},_beforeFillContent:function(){},_fillContent:function(_133){var dest=this.containerNode;if(_133&&dest){while(_133.hasChildNodes()){dest.appendChild(_133.firstChild);}}},_attachTemplateNodes:function(_134,_135){var _136=lang.isArray(_134)?_134:(_134.all||_134.getElementsByTagName("*"));var x=lang.isArray(_134)?0:-1;for(;x<0||_136[x];x++){var _137=(x==-1)?_134:_136[x];if(this.widgetsInTemplate&&(_135(_137,"dojoType")||_135(_137,"data-dojo-type"))){continue;}var _138=_135(_137,"dojoAttachPoint")||_135(_137,"data-dojo-attach-point");if(_138){var _139,_13a=_138.split(/\s*,\s*/);while((_139=_13a.shift())){if(lang.isArray(this[_139])){this[_139].push(_137);}else{this[_139]=_137;}this._attachPoints.push(_139);}}var _13b=_135(_137,"dojoAttachEvent")||_135(_137,"data-dojo-attach-event");if(_13b){var _13c,_13d=_13b.split(/\s*,\s*/);var trim=lang.trim;while((_13c=_13d.shift())){if(_13c){var _13e=null;if(_13c.indexOf(":")!=-1){var _13f=_13c.split(":");_13c=trim(_13f[0]);_13e=trim(_13f[1]);}else{_13c=trim(_13c);}if(!_13e){_13e=_13c;}this._attachEvents.push(this.connect(_137,_126[_13c]||_13c,_13e));}}}}},destroyRendering:function(){_12a.forEach(this._attachPoints,function(_140){delete this[_140];},this);this._attachPoints=[];_12a.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_12e._templateCache={};_12e.getCachedTemplate=function(_141,_142,doc){var _143=_12e._templateCache;var key=_141;var _144=_143[key];if(_144){try{if(!_144.ownerDocument||_144.ownerDocument==(doc||document)){return _144;}}catch(e){}_12c.destroy(_144);}_141=_128.trim(_141);if(_142||_141.match(/\$\{([^\}]+)\}/g)){return (_143[key]=_141);}else{var node=_12c.toDom(_141,doc);if(node.nodeType!=1){throw new Error("Invalid template: "+_141);}return (_143[key]=node);}};if(has("ie")){_12d.addOnWindowUnload(function(){var _145=_12e._templateCache;for(var key in _145){var _146=_145[key];if(typeof _146=="object"){_12c.destroy(_146);}delete _145[key];}});}lang.extend(_127,{dojoAttachEvent:"",dojoAttachPoint:""});return _12e;});},"dojox/grid/_FocusManager":function(){define("dojox/grid/_FocusManager",["dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/query","./util","dojo/_base/html"],function(_147,lang,_148,_149,_14a,has,_14b,util,html){return _148("dojox.grid._FocusManager",null,{constructor:function(_14c){this.grid=_14c;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(_149.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(_149.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(_149.connect(this.grid.domNode,"mousedown",this,"_mouseDown"));this._connects.push(_149.connect(this.grid.domNode,"mouseup",this,"_mouseUp"));this._connects.push(_149.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu"));this._connects.push(_149.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(_149.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(_149.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(_149.connect(this.grid,"postrender",this,"_delayedHeaderFocus"));},destroy:function(){_147.forEach(this._connects,_149.disconnect);_147.forEach(this._headerConnects,_149.disconnect);delete this.grid;delete this.cell;},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._initColumnHeaders();},isFocusCell:function(_14d,_14e){return (this.cell==_14d)&&(this.rowIndex==_14e);},isLastFocusCell:function(){if(this.cell){return (this.rowIndex==this.grid.rowCount-1)&&(this.cell.index==this.grid.layout.cellCount-1);}return false;},isFirstFocusCell:function(){if(this.cell){return (this.rowIndex===0)&&(this.cell.index===0);}return false;},isNoFocusCell:function(){return (this.rowIndex<0)||!this.cell;},isNavHeader:function(){return (!!this._colHeadNode);},getHeaderIndex:function(){if(this._colHeadNode){return _147.indexOf(this._findHeaderCells(),this._colHeadNode);}else{return -1;}},_focusifyCellNode:function(_14f){var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){html.toggleClass(n,this.focusClass,_14f);if(_14f){var sl=this.scrollIntoView();try{if(has("webkit")||!this.grid.edit.isEditing()){util.fire(n,"focus");if(sl){this.cell.view.scrollboxNode.scrollLeft=sl;}}}catch(e){}}}},_delayedCellFocus:function(){if(this.isNavHeader()||!this.grid.focused){return;}var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){try{if(!this.grid.edit.isEditing()){html.toggleClass(n,this.focusClass,true);if(this._colHeadNode){this.blurHeader();}util.fire(n,"focus");}}catch(e){}}},_delayedHeaderFocus:function(){if(this.isNavHeader()){this.focusHeader();}},_initColumnHeaders:function(){_147.forEach(this._headerConnects,_149.disconnect);this._headerConnects=[];var _150=this._findHeaderCells();for(var i=0;i<_150.length;i++){this._headerConnects.push(_149.connect(_150[i],"onfocus",this,"doColHeaderFocus"));this._headerConnects.push(_149.connect(_150[i],"onblur",this,"doColHeaderBlur"));}},_findHeaderCells:function(){var _151=_14b("th",this.grid.viewsHeaderNode);var _152=[];for(var i=0;i<_151.length;i++){var _153=_151[i];var _154=html.hasAttr(_153,"tabIndex");var _155=html.attr(_153,"tabIndex");if(_154&&_155<0){_152.push(_153);}}return _152;},_setActiveColHeader:function(_156,_157,_158){this.grid.domNode.setAttribute("aria-activedescendant",_156.id);if(_158!=null&&_158>=0&&_158!=_157){html.toggleClass(this._findHeaderCells()[_158],this.focusClass,false);}html.toggleClass(_156,this.focusClass,true);this._colHeadNode=_156;this._colHeadFocusIdx=_157;this._scrollHeader(this._colHeadFocusIdx);},scrollIntoView:function(){var info=(this.cell?this._scrollInfo(this.cell):null);if(!info||!info.s){return null;}var rt=this.grid.scroller.findScrollTop(this.rowIndex);if(info.n&&info.sr){if(info.n.offsetLeft+info.n.offsetWidth>info.sr.l+info.sr.w){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}}}if(info.r&&info.sr){if(rt+info.r.offsetHeight>info.sr.t+info.sr.h){this.grid.setScrollTop(rt+info.r.offsetHeight-info.sr.h);}else{if(rt<info.sr.t){this.grid.setScrollTop(rt);}}}return info.s.scrollLeft;},_scrollInfo:function(cell,_159){if(cell){var cl=cell,sbn=cl.view.scrollboxNode,sbnr={w:sbn.clientWidth,l:sbn.scrollLeft,t:sbn.scrollTop,h:sbn.clientHeight},rn=cl.view.getRowNode(this.rowIndex);return {c:cl,s:sbn,sr:sbnr,n:(_159?_159:cell.getNode(this.rowIndex)),r:rn};}return null;},_scrollHeader:function(_15a){var info=null;if(this._colHeadNode){var cell=this.grid.getCell(_15a);if(!cell){return;}info=this._scrollInfo(cell,cell.getNode(0));}if(info&&info.s&&info.sr&&info.n){var _15b=info.sr.l+info.sr.w;if(info.n.offsetLeft+info.n.offsetWidth>_15b){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}else{if(has("ie")<=7&&cell&&cell.view.headerNode){cell.view.headerNode.scrollLeft=info.s.scrollLeft;}}}}},_isHeaderHidden:function(){var _15c=this.focusView;if(!_15c){for(var i=0,_15d;(_15d=this.grid.views.views[i]);i++){if(_15d.headerNode){_15c=_15d;break;}}}return (_15c&&html.getComputedStyle(_15c.headerNode).display=="none");},colSizeAdjust:function(e,_15e,_15f){var _160=this._findHeaderCells();var view=this.focusView;if(!view||!view.header.tableMap.map){for(var i=0,_161;(_161=this.grid.views.views[i]);i++){if(_161.header.tableMap.map){view=_161;break;}}}var _162=_160[_15e];if(!view||(_15e==_160.length-1&&_15e===0)){return;}view.content.baseDecorateEvent(e);e.cellNode=_162;e.cellIndex=view.content.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);if(view.header.canResize(e)){var _163={l:_15f};var drag=view.header.colResizeSetup(e,false);view.header.doResizeColumn(drag,null,_163);view.update();}},styleRow:function(_164){return;},setFocusIndex:function(_165,_166){this.setFocusCell(this.grid.getCell(_166),_165);},setFocusCell:function(_167,_168){if(_167&&!this.isFocusCell(_167,_168)){this.tabbingOut=false;if(this._colHeadNode){this.blurHeader();}this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=_167;this.rowIndex=_168;this._focusifyCellNode(true);}if(has("opera")){setTimeout(lang.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);}else{this.grid.onCellFocus(this.cell,this.rowIndex);}},next:function(){if(this.cell){var row=this.rowIndex,col=this.cell.index+1,cc=this.grid.layout.cellCount-1,rc=this.grid.rowCount-1;if(col>cc){col=0;row++;}if(row>rc){col=cc;row=rc;}if(this.grid.edit.isEditing()){var _169=this.grid.getCell(col);if(!this.isLastFocusCell()&&(!_169.editable||this.grid.canEdit&&!this.grid.canEdit(_169,row))){this.cell=_169;this.rowIndex=row;this.next();return;}}this.setFocusIndex(row,col);}},previous:function(){if(this.cell){var row=(this.rowIndex||0),col=(this.cell.index||0)-1;if(col<0){col=this.grid.layout.cellCount-1;row--;}if(row<0){row=0;col=0;}if(this.grid.edit.isEditing()){var _16a=this.grid.getCell(col);if(!this.isFirstFocusCell()&&!_16a.editable){this.cell=_16a;this.rowIndex=row;this.previous();return;}}this.setFocusIndex(row,col);}},move:function(_16b,_16c){var _16d=_16c<0?-1:1;if(this.isNavHeader()){var _16e=this._findHeaderCells();var _16f=currentIdx=_147.indexOf(_16e,this._colHeadNode);currentIdx+=_16c;while(currentIdx>=0&&currentIdx<_16e.length&&_16e[currentIdx].style.display=="none"){currentIdx+=_16d;}if((currentIdx>=0)&&(currentIdx<_16e.length)){this._setActiveColHeader(_16e[currentIdx],currentIdx,_16f);}}else{if(this.cell){var sc=this.grid.scroller,r=this.rowIndex,rc=this.grid.rowCount-1,row=Math.min(rc,Math.max(0,r+_16b));if(_16b){if(_16b>0){if(row>sc.getLastPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(r));}}else{if(_16b<0){if(row<=sc.getPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop-sc.findScrollTop(r)-sc.findScrollTop(row));}}}}var cc=this.grid.layout.cellCount-1,i=this.cell.index,col=Math.min(cc,Math.max(0,i+_16c));var cell=this.grid.getCell(col);while(col>=0&&col<cc&&cell&&cell.hidden===true){col+=_16d;cell=this.grid.getCell(col);}if(!cell||cell.hidden===true){col=i;}var n=cell.getNode(row);if(!n&&_16b){if((row+_16b)>=0&&(row+_16b)<=rc){this.move(_16b>0?++_16b:--_16b,_16c);}return;}else{if((!n||html.style(n,"display")==="none")&&_16c){if((col+_16c)>=0&&(col+_16c)<=cc){this.move(_16b,_16c>0?++_16c:--_16c);}return;}}this.setFocusIndex(row,col);if(_16b){this.grid.updateRow(r);}}}},previousKey:function(e){if(this.grid.edit.isEditing()){_14a.stop(e);this.previous();}else{if(!this.isNavHeader()&&!this._isHeaderHidden()){this.grid.domNode.focus();_14a.stop(e);}else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null){html.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,false);this._colHeadFocusIdx=null;}this._focusifyCellNode(false);}}},nextKey:function(e){var _170=(this.grid.rowCount===0);if(e.target===this.grid.domNode&&this._colHeadFocusIdx==null){this.focusHeader();_14a.stop(e);}else{if(this.isNavHeader()){this.blurHeader();if(!this.findAndFocusGridCell()){this.tabOut(this.grid.lastFocusNode);}this._colHeadNode=this._colHeadFocusIdx=null;}else{if(this.grid.edit.isEditing()){_14a.stop(e);this.next();}else{this.tabOut(this.grid.lastFocusNode);}}}},tabOut:function(_171){this.tabbingOut=true;_171.focus();},focusGridView:function(){util.fire(this.focusView,"focus");},focusGrid:function(_172){this.focusGridView();this._focusifyCellNode(true);},findAndFocusGridCell:function(){var _173=true;var _174=(this.grid.rowCount===0);if(this.isNoFocusCell()&&!_174){var _175=0;var cell=this.grid.getCell(_175);if(cell.hidden){_175=this.isNavHeader()?this._colHeadFocusIdx:0;}this.setFocusIndex(0,_175);}else{if(this.cell&&!_174){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex);}this.focusGrid();}else{_173=false;}}this._colHeadNode=this._colHeadFocusIdx=null;return _173;},focusHeader:function(){var _176=this._findHeaderCells();var _177=this._colHeadFocusIdx;if(this._isHeaderHidden()){this.findAndFocusGridCell();}else{if(!this._colHeadFocusIdx){if(this.isNoFocusCell()){this._colHeadFocusIdx=0;}else{this._colHeadFocusIdx=this.cell.index;}}}this._colHeadNode=_176[this._colHeadFocusIdx];while(this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<_176.length&&this._colHeadNode.style.display=="none"){this._colHeadFocusIdx++;this._colHeadNode=_176[this._colHeadFocusIdx];}if(this._colHeadNode&&this._colHeadNode.style.display!="none"){if(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode){this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode);this.headerMenu.bindDomNode(this.grid.domNode);this._contextMenuBindNode=this.grid.domNode;}this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,_177);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(false);}else{this.findAndFocusGridCell();}},blurHeader:function(){html.removeClass(this._colHeadNode,this.focusClass);html.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var _178=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(_178);this._contextMenuBindNode=_178;}},doFocus:function(e){if(e&&e.target!=e.currentTarget){_14a.stop(e);return;}if(this._clickFocus){return;}if(!this.tabbingOut){this.focusHeader();}this.tabbingOut=false;_14a.stop(e);},doBlur:function(e){_14a.stop(e);},doContextMenu:function(e){if(!this.headerMenu){_14a.stop(e);}},doLastNodeFocus:function(e){if(this.tabbingOut){this._focusifyCellNode(false);}else{if(this.grid.rowCount>0){if(this.isNoFocusCell()){this.setFocusIndex(0,0);}this._focusifyCellNode(true);}else{this.focusHeader();}}this.tabbingOut=false;_14a.stop(e);},doLastNodeBlur:function(e){_14a.stop(e);},doColHeaderFocus:function(e){this._setActiveColHeader(e.target,html.attr(e.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());_14a.stop(e);},doColHeaderBlur:function(e){html.toggleClass(e.target,this.focusClass,false);},_mouseDown:function(e){this._clickFocus=dojo.some(this.grid.views.views,function(v){return v.scrollboxNode===e.target;});},_mouseUp:function(e){this._clickFocus=false;}});});},"esri/toolbars/_VertexEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/has","dijit/Menu","dijit/MenuItem","esri/kernel","esri/toolbars/_VertexMover","esri/geometry/Point","esri/geometry/jsonUtils","dojo/i18n!esri/nls/jsapi"],function(_179,lang,_17a,_17b,has,Menu,_17c,_17d,_17e,_17f,_180,_181){var GVE=_179(null,{declaredClass:"esri.toolbars._GraphicVertexEditor",constructor:function(_182,map,_183){this.graphic=_182;this.map=map;this.toolbar=_183;var _184=_183._options;this._symbol1=_184.vertexSymbol;this._symbol2=_184.ghostVertexSymbol;var _185=_184.ghostLineSymbol;this._lineStroke={style:_185.style,width:_185.width,color:_185.color};this._canDel=_184.allowDeleteVertices;this._canAdd=_184.allowAddVertices;this._addControllers();},destroy:function(){this._removeControllers();},refresh:function(_186){if(_186){this._removeControllers();this._addControllers();}else{this._refresh(this._vertexMovers);this._refresh(this._mpVertexMovers);}},suspend:function(){if(!this._suspended){this._removeControllers();}this._suspended=true;},resume:function(){if(this._suspended){this._addControllers();}this._suspended=false;},_addControllers:function(){this._firstMoveHandle=_17a.connect(_17e,"onFirstMove",this,this._firstMoveHandler);this._moveStopHandle=_17a.connect(_17e,"onMoveStop",this,this._moveStopHandler);this._vertexMovers=this._add(this._getSegments(this.graphic.geometry),this._symbol1);if(this._canAdd){this._mpVertexMovers=this._add(this._getMidpointSegments(this.graphic.geometry),this._symbol2,true);}var _187=this._getGraphicsLayer();this._mouseOverHandle=_17a.connect(_187,"onMouseOver",this,this._mouseOverHandler);this._mouseOutHandle=_17a.connect(_187,"onMouseOut",this,this._mouseOutHandler);if(this._canDel){this._ctxMenu=new Menu({style:"font-size: 12px; margin-left: 5px; margin-top: 5px;"});var _188=(this._ctxDelete=new _17c({label:_181.toolbars.edit.deleteLabel,iconClass:"vertexDeleteIcon",style:"outline: none;"}));this._deleteHandle=_17a.connect(_188,"onClick",this,this._deleteHandler);this._ctxMenu.addChild(_188);this._ctxMenu.startup();}},_removeControllers:function(){_17a.disconnect(this._firstMoveHandle);_17a.disconnect(this._moveStopHandle);_17a.disconnect(this._mouseOverHandle);_17a.disconnect(this._mouseOutHandle);_17a.disconnect(this._deleteHandle);if(this._ctxMenu){this._ctxDelete=null;this._unbindCtxNode();this._ctxMenu.destroyRecursive();}this._remove(this._vertexMovers);this._remove(this._mpVertexMovers);this._vertexMovers=this._mpVertexMovers=null;},_add:function(_189,_18a,_18b){var i,j,_18c=this.graphic,_18d=[];for(i=0;i<_189.length;i++){var _18e=_189[i],_18f=[];for(j=0;j<_18e.length;j++){_18f.push(new _17e(_18e[j],_18a,_18c,i,j,_18e.length,this,_18b));}_18d.push(_18f);}return _18d;},_remove:function(_190){if(_190){_17b.forEach(_190,function(_191){_17b.forEach(_191,function(_192){_192.destroy();});});}},_refresh:function(_193){if(_193){_17b.forEach(_193,function(_194){_17b.forEach(_194,function(_195){_195.refresh();});});}},_isNew:function(_196){return (_17b.indexOf(this._vertexMovers[_196.segIndex],_196)===-1)?true:false;},_getGraphicsLayer:function(){return this.toolbar._scratchGL;},_deleteHandler:function(evt){var _197=this._selectedMover,_198=_197.ptIndex;this._updateRelatedGraphic(_197,_197.relatedGraphic,_197.graphic.geometry,_197.segIndex,_197.ptIndex,_197.segLength,false,true);if(this._canAdd){this._deleteMidpoints(_197);}this._deleteVertex(_197);this.toolbar._endOperation("VERTICES");},_mouseOverHandler:function(evt){var _199=evt.graphic,_19a=this._findMover(_199);if(_19a){this.toolbar.onVertexMouseOver(this.graphic,_19a._getInfo());if(!_19a._placeholder){this._selectedMover=_19a;if(this._canDel){this._bindCtxNode(_199.getDojoShape().getNode());}}}},_mouseOutHandler:function(evt){var _19b=evt.graphic,_19c=this._findMover(_19b);if(_19c){this.toolbar.onVertexMouseOut(this.graphic,_19c._getInfo());}},_bindCtxNode:function(node){this._unbindCtxNode();this._ctxDelete.set("disabled",(this._selectedMover.segLength<=this.minLength)?true:false);this._ctxMenu.bindDomNode(node);this._bindNode=node;},_unbindCtxNode:function(){var node=this._bindNode;if(node){this._ctxMenu.unBindDomNode(node);}},_findMover:function(_19d){var i,_19e=[],_19f=this._mpVertexMovers;_17b.forEach(this._vertexMovers,function(_1a0){_19e=_19e.concat(_1a0);});if(_19f){_17b.forEach(_19f,function(_1a1){_19e=_19e.concat(_1a1);});}for(i=0;i<_19e.length;i++){var _1a2=_19e[i];if(_1a2.graphic===_19d){return _1a2;}}},_firstMoveHandler:function(_1a3){if(!this._isNew(_1a3)&&this._canAdd){this._hideRelatedMidpoints(_1a3);}this.toolbar._beginOperation("VERTICES");},_moveStopHandler:function(_1a4,tx){var add=this._isNew(_1a4);if(!tx||!tx.dx&&!tx.dy){if(!add&&this._canAdd){this._showRelatedMidpoints(_1a4);}return;}this._updateRelatedGraphic(_1a4,_1a4.relatedGraphic,_1a4.graphic.geometry,_1a4.segIndex,_1a4.ptIndex,_1a4.segLength,add);if(this._canAdd){if(add){this._addMidpoints(_1a4);}else{this._repositionRelatedMidpoints(_1a4);this._showRelatedMidpoints(_1a4);}}this.toolbar._endOperation("VERTICES");},_showRelatedMidpoints:function(_1a5){var i,_1a6=this._getAdjacentMidpoints(_1a5.ptIndex,_1a5.segLength),_1a7=this._mpVertexMovers[_1a5.segIndex];for(i=0;i<_1a6.length;i++){var mvr=_1a7[_1a6[i]];mvr.graphic.show();mvr.refresh();}},_hideRelatedMidpoints:function(_1a8){var i,_1a9=this._getAdjacentMidpoints(_1a8.ptIndex,_1a8.segLength),_1aa=this._mpVertexMovers[_1a8.segIndex];for(i=0;i<_1a9.length;i++){_1aa[_1a9[i]].graphic.hide();}},_repositionRelatedMidpoints:function(_1ab){var i,_1ac=this._getAdjacentMidpoints(_1ab.ptIndex,_1ab.segLength),_1ad=this._mpVertexMovers[_1ab.segIndex];for(i=0;i<_1ac.length;i++){var _1ae=this._getAdjacentVertices(_1ac[i],_1ab.segLength);var _1af=_1ab.relatedGraphic.geometry.getPoint(_1ab.segIndex,_1ae[0]),_1b0=_1ab.relatedGraphic.geometry.getPoint(_1ab.segIndex,_1ae[1]);var _1b1=new _17f({x:(_1af.x+_1b0.x)/2,y:(_1af.y+_1b0.y)/2,spatialReference:_1af.spatialReference.toJson()});_1ad[_1ac[i]].graphic.setGeometry(_1b1);}},_addMidpoints:function(_1b2){var _1b3=_1b2.segIndex,_1b4=_1b2.ptIndex,_1b5=_1b2.segLength;var _1b6=_1b4+1;var i,_1b7=_1b5+1;this._mpVertexMovers[_1b3].splice(_1b4,1);var _1b8=this._vertexMovers[_1b3];for(i=0;i<_1b6;i++){_1b8[i].segLength+=1;}for(i=_1b6;i<_1b8.length;i++){_1b8[i].ptIndex+=1;_1b8[i].segLength+=1;}_1b2.ptIndex=_1b6;_1b2.segLength=_1b8.length+1;_1b8.splice(_1b6,0,_1b2);_1b2.graphic.setSymbol(this._symbol1);_1b8=this._mpVertexMovers[_1b3];for(i=0;i<_1b4;i++){_1b8[i].segLength+=1;}for(i=_1b4;i<_1b5-1;i++){_1b8[i].ptIndex+=1;_1b8[i].segLength+=1;}var _1b9=this._getAdjacentVertices(_1b4,_1b7);var _1ba=this._getAdjacentVertices(_1b4+1,_1b7);var _1bb,_1bc;_1bb=_1b2.relatedGraphic.geometry.getPoint(_1b2.segIndex,_1b9[0]);_1bc=_1b2.relatedGraphic.geometry.getPoint(_1b2.segIndex,_1b9[1]);var _1bd=new _17f({x:(_1bb.x+_1bc.x)/2,y:(_1bb.y+_1bc.y)/2,spatialReference:_1bb.spatialReference.toJson()});_1bb=_1b2.relatedGraphic.geometry.getPoint(_1b2.segIndex,_1ba[0]);_1bc=_1b2.relatedGraphic.geometry.getPoint(_1b2.segIndex,_1ba[1]);var _1be=new _17f({x:(_1bb.x+_1bc.x)/2,y:(_1bb.y+_1bc.y)/2,spatialReference:_1bb.spatialReference.toJson()});var mvr1=new _17e(_1bd,this._symbol2,this.graphic,_1b2.segIndex,_1b4,_1b7,this,true);var mvr2=new _17e(_1be,this._symbol2,this.graphic,_1b2.segIndex,_1b4+1,_1b7,this,true);_1b8.splice(_1b4,0,mvr1,mvr2);},_deleteVertex:function(_1bf){var i,_1c0=_1bf.segIndex,_1c1=_1bf.ptIndex;var _1c2=this._vertexMovers[_1c0];for(i=0;i<_1c1;i++){_1c2[i].segLength-=1;}for(i=_1c1+1;i<_1c2.length;i++){var mvr=_1c2[i];mvr.ptIndex-=1;mvr.segLength-=1;}_1c2.splice(_1c1,1);var info=_1bf._getInfo();_1bf.destroy();this.toolbar.onVertexDelete(this.graphic,info);}});lang.mixin(GVE,{create:function(_1c3,map,_1c4){var type=_1c3.geometry.type;switch(type){case "multipoint":return new GVE.MultipointVertexEditor(_1c3,map,_1c4);break;case "polyline":return new GVE.PolylineVertexEditor(_1c3,map,_1c4);break;case "polygon":return new GVE.PolygonVertexEditor(_1c3,map,_1c4);break;}}});GVE.MultipointVertexEditor=_179(GVE,{declaredClass:"esri.toolbars._MultipointVertexEditor",minLength:1,constructor:function(){this._moveStartHandle=_17a.connect(_17e,"onMoveStart",this,this._moveStartHandler);_17a.disconnect(this._firstMoveHandle);},destroy:function(){this.inherited(arguments);_17a.disconnect(this._moveStartHandle);},_getSegments:function(_1c5){var i,_1c6=_1c5.points,_1c7=[],sr=_1c5.spatialReference;for(i=0;i<_1c6.length;i++){var _1c8=_1c6[i];_1c7.push(new _17f({x:_1c8[0],y:_1c8[1],spatialReference:sr.toJson()}));}return [_1c7];},_getMidpointSegments:function(_1c9){return [];},_getControlPoints:function(_1ca,_1cb,_1cc,_1cd,_1ce){return [];},_getGraphicsLayer:function(){return this.graphic._graphicsLayer;},_mouseOverHandler:function(evt){var _1cf=evt.graphic,_1d0=this._findMover(evt);if(_1d0){this.toolbar.onVertexMouseOver(_1cf,_1d0._getInfo());this._selectedMover=_1d0;if(this._canDel){this._bindCtxNode(_1d0.graphic.getDojoShape().getNode());}}},_mouseOutHandler:function(evt){var _1d1=evt.graphic,_1d2=this._findMover(evt);if(_1d2){this.toolbar.onVertexMouseOut(_1d1,_1d2._getInfo());}},_findMover:function(evt){var i,_1d3=[].concat(this._vertexMovers[0]),_1d4=evt.target;for(i=0;i<_1d3.length;i++){var _1d5=_1d3[i];if(_1d5.graphic.getDojoShape().getNode()===_1d4){return _1d5;}}},_moveStartHandler:function(_1d6){var geom=_1d6.relatedGraphic.geometry,_1d7=_1d6.ptIndex;var _1d8=_1d6.segLength-1;var _1d9=geom.points;var _1da=_1d9.splice(_1d7,1);_1d9.push(_1da[0]);var j,_1db=this._vertexMovers[0];for(j=_1d8;j>_1d7;j--){_1db[j].ptIndex-=1;}_1da=_1db.splice(_1d7,1);_1db.push(_1da[0]);_1da[0].ptIndex=_1d8;},_moveStopHandler:function(_1dc){this._updateRelatedGraphic(_1dc,_1dc.relatedGraphic,_1dc.graphic.geometry,_1dc.segIndex,_1dc.ptIndex,_1dc.segLength);this.toolbar._endOperation("VERTICES");},_updateRelatedGraphic:function(_1dd,_1de,_1df,_1e0,_1e1,_1e2,add,del){var geom=_1de.geometry;if(del){geom.removePoint(_1e1);}else{geom.setPoint(_1e1,_1df);}_1de.setGeometry(geom);},_deleteMidpoints:function(_1e3){}});GVE.PolylineVertexEditor=_179(GVE,{declaredClass:"esri.toolbars._PolylineVertexEditor",minLength:2,_getSegments:function(_1e4){var i,j,_1e5=_1e4.paths,_1e6=[];for(i=0;i<_1e5.length;i++){var path=_1e5[i],_1e7=[];for(j=0;j<path.length;j++){_1e7.push(_1e4.getPoint(i,j));}_1e6.push(_1e7);}return _1e6;},_getMidpointSegments:function(_1e8){var i,j,_1e9=_1e8.paths,_1ea=[],sr=_1e8.spatialReference;for(i=0;i<_1e9.length;i++){var path=_1e9[i],_1eb=[];for(j=0;j<path.length-1;j++){var _1ec=_1e8.getPoint(i,j),_1ed=_1e8.getPoint(i,j+1);var midX=(_1ec.x+_1ed.x)/2,midY=(_1ec.y+_1ed.y)/2;var _1ee=new _17f({x:midX,y:midY,spatialReference:sr.toJson()});_1eb.push(_1ee);}_1ea.push(_1eb);}return _1ea;},_getControlPoints:function(_1ef,_1f0,_1f1,_1f2,_1f3){var map=this.map,idx1,idx2,pt1,pt2;if(this._isNew(_1ef)){idx1=_1f2;idx2=_1f2+1;if(idx1>=0){pt1=map.toScreen(_1f0.getPoint(_1f1,idx1));}if(idx2<=_1f3){pt2=map.toScreen(_1f0.getPoint(_1f1,idx2));}}else{idx1=_1f2-1;idx2=_1f2+1;if(idx1>=0){pt1=map.toScreen(_1f0.getPoint(_1f1,idx1));}if(idx2<_1f3){pt2=map.toScreen(_1f0.getPoint(_1f1,idx2));}}return [pt1,pt2];},_getAdjacentMidpoints:function(_1f4,_1f5){var _1f6=[];var idx1=_1f4-1;if(idx1>=0){_1f6.push(idx1);}var idx2=_1f4;if(idx2<_1f5-1){_1f6.push(idx2);}return _1f6;},_getAdjacentVertices:function(_1f7,_1f8){return [_1f7,_1f7+1];},_deleteMidpoints:function(_1f9){var _1fa=_1f9.segIndex,_1fb=_1f9.ptIndex,_1fc=_1f9.segLength;var _1fd=this._mpVertexMovers[_1fa],_1fe=_1fd.length-1;var _1ff=this._getAdjacentMidpoints(_1fb,_1fc).sort();var i,min=_1ff[0];for(i=0;i<min;i++){_1fd[i].segLength-=1;}for(i=min+1;i<_1fd.length;i++){var mvr=_1fd[i];mvr.ptIndex-=1;mvr.segLength-=1;}if(_1ff.length===1){_1fd.splice(min,1)[0].destroy();}else{var _200=this._getAdjacentVertices(min,_1fe);var _201=_1f9.relatedGraphic.geometry.getPoint(_1f9.segIndex,_200[0]);var _202=_1f9.relatedGraphic.geometry.getPoint(_1f9.segIndex,_200[1]);var _203=new _17f({x:(_201.x+_202.x)/2,y:(_201.y+_202.y)/2,spatialReference:_201.spatialReference.toJson()});var mvr1=new _17e(_203,this._symbol2,this.graphic,_1f9.segIndex,min,_1fe,this,true);var _204=_1fd.splice(min,_1ff.length,mvr1);for(i=0;i<_204.length;i++){_204[i].destroy();}}},_updateRelatedGraphic:function(_205,_206,_207,_208,_209,_20a,add,del){var geom=_206.geometry;if(add){geom.insertPoint(_208,_209+1,_180.fromJson(_207.toJson()));}else{if(del){geom.removePoint(_208,_209);}else{geom.setPoint(_208,_209,_180.fromJson(_207.toJson()));}}_206.setGeometry(geom);}});GVE.PolygonVertexEditor=_179(GVE,{declaredClass:"esri.toolbars._PolygonVertexEditor",minLength:3,_getSegments:function(_20b){var i,j,_20c=_20b.rings,_20d=[];for(i=0;i<_20c.length;i++){var ring=_20c[i],_20e=[];for(j=0;j<ring.length-1;j++){_20e.push(_20b.getPoint(i,j));}_20d.push(_20e);}return _20d;},_getMidpointSegments:function(_20f){var i,j,_210=_20f.rings,_211=[],sr=_20f.spatialReference;for(i=0;i<_210.length;i++){var ring=_210[i],_212=[];for(j=0;j<ring.length-1;j++){var _213=_20f.getPoint(i,j),_214=_20f.getPoint(i,j+1);var midX=(_213.x+_214.x)/2,midY=(_213.y+_214.y)/2;var _215=new _17f({x:midX,y:midY,spatialReference:sr.toJson()});_212.push(_215);}_211.push(_212);}return _211;},_getControlPoints:function(_216,_217,_218,_219,_21a){var map=this.map,idx1,idx2,pt1,pt2;if(this._isNew(_216)){idx1=_219;idx2=(_219+1)%_21a;}else{idx1=_219-1;idx1=idx1<0?(_21a+idx1)%_21a:idx1;idx2=(_219+1)%_21a;}pt1=map.toScreen(_217.getPoint(_218,idx1));pt2=map.toScreen(_217.getPoint(_218,idx2));return [pt1,pt2];},_getAdjacentMidpoints:function(_21b,_21c){var idx1=_21b-1;idx1=idx1<0?(_21c+idx1)%_21c:idx1;var idx2=_21b;return [idx1,idx2];},_getAdjacentVertices:function(_21d,_21e){return [_21d,(_21d+1)%_21e];},_deleteMidpoints:function(_21f){var _220=_21f.segIndex,_221=_21f.ptIndex,_222=_21f.segLength;var _223=this._mpVertexMovers[_220],_224=_223.length-1,_225=this._getAdjacentMidpoints(_221,_222).sort(),_226,_227,_228,_229,i,mvr1,mvr,min=_225[0],max=_225[_225.length-1];if(_221===0){_226=this._getAdjacentVertices(_224-1,_224);_227=_21f.relatedGraphic.geometry.getPoint(_21f.segIndex,_226[0]);_228=_21f.relatedGraphic.geometry.getPoint(_21f.segIndex,_226[1]);_229=new _17f({x:(_227.x+_228.x)/2,y:(_227.y+_228.y)/2,spatialReference:_227.spatialReference.toJson()});mvr1=new _17e(_229,this._symbol2,this.graphic,_21f.segIndex,_224-1,_224,this,true);_223.splice(max,1,mvr1)[0].destroy();_223.splice(min,1)[0].destroy();for(i=0;i<_223.length-1;i++){mvr=_223[i];mvr.ptIndex-=1;mvr.segLength-=1;}}else{_226=this._getAdjacentVertices(min,_224);_227=_21f.relatedGraphic.geometry.getPoint(_21f.segIndex,_226[0]);_228=_21f.relatedGraphic.geometry.getPoint(_21f.segIndex,_226[1]);_229=new _17f({x:(_227.x+_228.x)/2,y:(_227.y+_228.y)/2,spatialReference:_227.spatialReference.toJson()});mvr1=new _17e(_229,this._symbol2,this.graphic,_21f.segIndex,min,_224,this,true);var _22a=_223.splice(min,_225.length,mvr1);for(i=0;i<_22a.length;i++){_22a[i].destroy();}for(i=0;i<min;i++){_223[i].segLength-=1;}for(i=min+1;i<_223.length;i++){mvr=_223[i];mvr.ptIndex-=1;mvr.segLength-=1;}}},_updateRelatedGraphic:function(_22b,_22c,_22d,_22e,_22f,_230,add,del){var geom=_22c.geometry;if(add){geom.insertPoint(_22e,_22f+1,_180.fromJson(_22d.toJson()));}else{if(del){geom.removePoint(_22e,_22f);if(_22f===0){geom.setPoint(_22e,_230-1,_180.fromJson(geom.getPoint(_22e,0).toJson()));}}else{geom.setPoint(_22e,_22f,_180.fromJson(_22d.toJson()));if(_22f===0){geom.setPoint(_22e,_230,_180.fromJson(_22d.toJson()));}}}_22c.setGeometry(geom);}});if(has("extend-esri")){lang.setObject("toolbars._GraphicVertexEditor",GVE,_17d);lang.setObject("toolbars._MultipointVertexEditor",GVE.MultipointVertexEditor,_17d);lang.setObject("toolbars._PolylineVertexEditor",GVE.PolylineVertexEditor,_17d);lang.setObject("toolbars._PolygonVertexEditor",GVE.PolygonVertexEditor,_17d);}return GVE;});},"dijit/_Templated":function(){define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_231,_232,_233,_234,_235,lang,_236){lang.extend(_231,{waiRole:"",waiState:""});return _235("dijit._Templated",[_232,_233],{widgetsInTemplate:false,constructor:function(){_236.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");},_attachTemplateNodes:function(_237,_238){this.inherited(arguments);var _239=lang.isArray(_237)?_237:(_237.all||_237.getElementsByTagName("*"));var x=lang.isArray(_237)?0:-1;for(;x<_239.length;x++){var _23a=(x==-1)?_237:_239[x];var role=_238(_23a,"waiRole");if(role){_23a.setAttribute("role",role);}var _23b=_238(_23a,"waiState");if(_23b){_234.forEach(_23b.split(/\s*,\s*/),function(_23c){if(_23c.indexOf("-")!=-1){var pair=_23c.split("-");_23a.setAttribute("aria-"+pair[0],pair[1]);}});}}}});});},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/window","./registry"],function(_23d,_23e,dom,_23f,has,lang,on,_240,win,_241){var _242=_23e("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);_23d.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(attr){this.watch(attr,lang.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._trackMouseState(this.domNode,this.baseClass);this._setStateClass();},_cssMouseEvent:function(_243){if(!this.disabled){switch(_243.type){case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":this._set("active",true);break;case "mouseup":case "touchend":this._set("active",false);break;}}},_setStateClass:function(){var _244=this.baseClass.split(" ");function _245(_246){_244=_244.concat(_23d.map(_244,function(c){return c+_246;}),"dijit"+_246);};if(!this.isLeftToRight()){_245("Rtl");}var _247=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_245(_247);}if(this.state){_245(this.state);}if(this.selected){_245("Selected");}if(this._opened){_245("Opened");}if(this.disabled){_245("Disabled");}else{if(this.readOnly){_245("ReadOnly");}else{if(this.active){_245("Active");}else{if(this.hovering){_245("Hover");}}}}if(this.focused){_245("Focused");}var tn=this.stateNode||this.domNode,_248={};_23d.forEach(tn.className.split(" "),function(c){_248[c]=true;});if("_stateClasses" in this){_23d.forEach(this._stateClasses,function(c){delete _248[c];});}_23d.forEach(_244,function(c){_248[c]=true;});var _249=[];for(var c in _248){_249.push(c);}tn.className=_249.join(" ");this._stateClasses=_244;},_subnodeCssMouseEvent:function(node,_24a,evt){if(this.disabled||this.readOnly){return;}function _24b(_24c){_23f.toggle(node,_24a+"Hover",_24c);};function _24d(_24e){_23f.toggle(node,_24a+"Active",_24e);};function _24f(_250){_23f.toggle(node,_24a+"Focused",_250);};switch(evt.type){case "mouseover":_24b(true);break;case "mouseout":_24b(false);_24d(false);break;case "mousedown":case "touchstart":_24d(true);break;case "mouseup":case "touchend":_24d(false);break;case "focus":case "focusin":_24f(true);break;case "blur":case "focusout":_24f(false);break;}},_trackMouseState:function(node,_251){node._cssState=_251;}});_240(function(){function _252(evt){if(!dom.isDescendant(evt.relatedTarget,evt.target)){for(var node=evt.target;node&&node!=evt.relatedTarget;node=node.parentNode){if(node._cssState){var _253=_241.getEnclosingWidget(node);if(_253){if(node==_253.domNode){_253._cssMouseEvent(evt);}else{_253._subnodeCssMouseEvent(node,node._cssState,evt);}}}}}};function _254(evt){evt.target=evt.srcElement;_252(evt);};var body=win.body(),_255=(has("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);_23d.forEach(_255,function(type){if(body.addEventListener){body.addEventListener(type,_252,true);}else{body.attachEvent("on"+type,_254);}});on(body,"focusin, focusout",function(evt){var node=evt.target;if(node._cssState&&!node.getAttribute("widgetId")){var _256=_241.getEnclosingWidget(node);_256._subnodeCssMouseEvent(node,node._cssState,evt);}});});return _242;});},"url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:_onClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\" role=\"presentation\"\n\t\t/></td></tr></tbody\n></table>\n","dijit/_editor/html":function(){define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(_257,lang,has){var _258={};lang.setObject("dijit._editor.html",_258);var _259=_258.escapeXml=function(str,_25a){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_25a){str=str.replace(/'/gm,"&#39;");}return str;};_258.getNodeHtml=function(node){var _25b=[];_258.getNodeHtmlHelper(node,_25b);return _25b.join("");};_258.getNodeHtmlHelper=function(node,_25c){switch(node.nodeType){case 1:var _25d=node.nodeName.toLowerCase();if(!_25d||_25d.charAt(0)=="/"){return "";}_25c.push("<",_25d);var _25e=[],_25f={};var attr;if(has("dom-attributes-explicit")||has("dom-attributes-specified-flag")){var i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!=="_dj"&&(!has("dom-attributes-specified-flag")||attr.specified)&&!(n in _25f)){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}if(has("ie")===8&&n==="style"){v=v.replace("HEIGHT:","height:").replace("WIDTH:","width:");}_25e.push([n,v]);_25f[n]=v;}}}else{var _260=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false);var s=_260.outerHTML;var _261=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;var _262=s.match(_261);s=s.substr(0,s.indexOf(">"));_257.forEach(_262,function(attr){if(attr){var idx=attr.indexOf("=");if(idx>0){var key=attr.substring(0,idx);if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_25e.push([key,node.getAttribute("_djrealurl")]);return;}}var val,_263;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;case "width":if(_25d==="img"){_263=/width=(\S+)/i.exec(s);if(_263){val=_263[1];}break;}case "height":if(_25d==="img"){_263=/height=(\S+)/i.exec(s);if(_263){val=_263[1];}break;}default:val=node.getAttribute(key);}if(val!=null){_25e.push([key,val.toString()]);}}}}},this);}_25e.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_25e[j++])){_25c.push(" ",attr[0],"=\"",(typeof attr[1]==="string"?_259(attr[1],true):attr[1]),"\"");}switch(_25d){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_25c.push(" />");break;case "script":_25c.push(">",node.innerHTML,"</",_25d,">");break;default:_25c.push(">");if(node.hasChildNodes()){_258.getChildrenHtmlHelper(node,_25c);}_25c.push("</",_25d,">");}break;case 4:case 3:_25c.push(_259(node.nodeValue,true));break;case 8:_25c.push("<!--",_259(node.nodeValue,true),"-->");break;default:_25c.push("<!-- Element not recognized - Type: ",node.nodeType," Name: ",node.nodeName,"-->");}};_258.getChildrenHtml=function(node){var _264=[];_258.getChildrenHtmlHelper(node,_264);return _264.join("");};_258.getChildrenHtmlHelper=function(dom,_265){if(!dom){return;}var _266=dom["childNodes"]||dom;var _267=!has("ie")||_266!==dom;var node,i=0;while((node=_266[i++])){if(!_267||node.parentNode==dom){_258.getNodeHtmlHelper(node,_265);}}};return _258;});},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","dojo/window","./main"],function(_268,_269,_26a,_26b,win,_26c,_26d){function _26e(node,_26f,_270,_271){var view=_26c.getBox(node.ownerDocument);if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){win.body(node.ownerDocument).appendChild(node);}var best=null;_268.some(_26f,function(_272){var _273=_272.corner;var pos=_272.pos;var _274=0;var _275={w:{"L":view.l+view.w-pos.x,"R":pos.x-view.l,"M":view.w}[_273.charAt(1)],h:{"T":view.t+view.h-pos.y,"B":pos.y-view.t,"M":view.h}[_273.charAt(0)]};var s=node.style;s.left=s.right="auto";if(_270){var res=_270(node,_272.aroundCorner,_273,_275,_271);_274=typeof res=="undefined"?0:res;}var _276=node.style;var _277=_276.display;var _278=_276.visibility;if(_276.display=="none"){_276.visibility="hidden";_276.display="";}var bb=_269.position(node);_276.display=_277;_276.visibility=_278;var _279={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(view.l,Math.min(view.l+view.w,pos.x+(bb.w>>1))-bb.w)}[_273.charAt(1)],_27a={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(view.t,Math.min(view.t+view.h,pos.y+(bb.h>>1))-bb.h)}[_273.charAt(0)],_27b=Math.max(view.l,_279),_27c=Math.max(view.t,_27a),endX=Math.min(view.l+view.w,_279+bb.w),endY=Math.min(view.t+view.h,_27a+bb.h),_27d=endX-_27b,_27e=endY-_27c;_274+=(bb.w-_27d)+(bb.h-_27e);if(best==null||_274<best.overflow){best={corner:_273,aroundCorner:_272.aroundCorner,x:_27b,y:_27c,w:_27d,h:_27e,overflow:_274,spaceAvailable:_275};}return !_274;});if(best.overflow&&_270){_270(node,best.aroundCorner,best.corner,best.spaceAvailable,_271);}var l=_269.isBodyLtr(node.ownerDocument),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";s[l?"right":"left"]="auto";return best;};var _27f={at:function(node,pos,_280,_281){var _282=_268.map(_280,function(_283){var c={corner:_283,pos:{x:pos.x,y:pos.y}};if(_281){c.pos.x+=_283.charAt(1)=="L"?_281.x:-_281.x;c.pos.y+=_283.charAt(0)=="T"?_281.y:-_281.y;}return c;});return _26e(node,_282);},around:function(node,_284,_285,_286,_287){var _288=(typeof _284=="string"||"offsetWidth" in _284)?_269.position(_284,true):_284;if(_284.parentNode){var _289=_26a.getComputedStyle(_284).position=="absolute";var _28a=_284.parentNode;while(_28a&&_28a.nodeType==1&&_28a.nodeName!="BODY"){var _28b=_269.position(_28a,true),pcs=_26a.getComputedStyle(_28a);if(/relative|absolute/.test(pcs.position)){_289=false;}if(!_289&&/hidden|auto|scroll/.test(pcs.overflow)){var _28c=Math.min(_288.y+_288.h,_28b.y+_28b.h);var _28d=Math.min(_288.x+_288.w,_28b.x+_28b.w);_288.x=Math.max(_288.x,_28b.x);_288.y=Math.max(_288.y,_28b.y);_288.h=_28c-_288.y;_288.w=_28d-_288.x;}if(pcs.position=="absolute"){_289=true;}_28a=_28a.parentNode;}}var x=_288.x,y=_288.y,_28e="w" in _288?_288.w:(_288.w=_288.width),_28f="h" in _288?_288.h:(_26b.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_288.height+", width:"+_28e+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_288.height+", w:"+_28e+" }","","2.0"),_288.h=_288.height);var _290=[];function push(_291,_292){_290.push({aroundCorner:_291,corner:_292,pos:{x:{"L":x,"R":x+_28e,"M":x+(_28e>>1)}[_291.charAt(1)],y:{"T":y,"B":y+_28f,"M":y+(_28f>>1)}[_291.charAt(0)]}});};_268.forEach(_285,function(pos){var ltr=_286;switch(pos){case "above-centered":push("TM","BM");break;case "below-centered":push("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":push(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":push(ltr?"TL":"TR",ltr?"TR":"TL");push(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":push(ltr?"BL":"BR",ltr?"TL":"TR");push(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":push(ltr?"TL":"TR",ltr?"BL":"BR");push(ltr?"TR":"TL",ltr?"BR":"BL");break;default:push(pos.aroundCorner,pos.corner);}});var _293=_26e(node,_290,_287,{w:_28e,h:_28f});_293.aroundNodePos=_288;return _293;}};return _26d.place=_27f;});},"dijit/_HasDropDown":function(){define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/window","./registry","./focus","./popup","./_FocusMixin"],function(_294,_295,_296,dom,_297,_298,_299,_29a,has,keys,lang,on,_29b,_29c,_29d,_29e,_29f){return _294("dijit._HasDropDown",_29f,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}e.preventDefault();this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _2a0=this.dropDown,_2a1=false;if(e&&this._opened){var c=_299.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_2a1){if(_298.contains(t,"dijitPopup")){_2a1=true;}else{t=t.parentNode;}}if(_2a1){t=e.target;if(_2a0.onItemClick){var _2a2;while(t&&!(_2a2=_29c.byNode(t))){t=t.parentNode;}if(_2a2&&_2a2.onClick&&_2a2.getParent){_2a2.getParent().onItemClick(_2a2,e);}}return;}}}if(this._opened){if(_2a0.focus&&_2a0.autoFocus!==false){this._focusDropDownTimer=this.defer(function(){_2a0.focus();delete this._focusDropDownTimer;});}}else{this.defer("focus");}if(has("touch")){this._justGotMouseUp=true;this.defer(function(){this._justGotMouseUp=false;});}},_onDropDownClick:function(e){if(has("touch")&&!this._justGotMouseUp){this._onDropDownMouseDown(e);this._onDropDownMouseUp(e);}if(this._stopClickEvents){_296.stop(e);}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _2a3={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";_298.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_2a3+"ArrowButton");},postCreate:function(){this.inherited(arguments);var _2a4=this.focusNode||this.domNode;this.own(on(this._buttonNode,"mousedown",lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(_2a4,"keydown",lang.hitch(this,"_onKey")),on(_2a4,"keyup",lang.hitch(this,"_onKeyUp")));},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_2a5=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){_296.stop(e);return;}}if(d&&this._opened&&e.keyCode==keys.ESCAPE){this.closeDropDown();_296.stop(e);}else{if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||((e.keyCode==keys.ENTER||e.keyCode==keys.SPACE)&&((_2a5.tagName||"").toLowerCase()!=="input"||(_2a5.type&&_2a5.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;_296.stop(e);}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){this.defer(lang.hitch(d,"focus"),1);}}},_onBlur:function(){var _2a6=_29d.curNode&&this.dropDown&&dom.isDescendant(_29d.curNode,this.dropDown.domNode);this.closeDropDown(_2a6);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_2a7){_2a7();},loadAndOpenDropDown:function(){var d=new _295(),_2a8=lang.hitch(this,function(){this.openDropDown();d.resolve(this.dropDown);});if(!this.isLoaded()){this.loadDropDown(_2a8);}else{_2a8();}return d;},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){this.loadAndOpenDropDown();}else{this.closeDropDown();}},openDropDown:function(){var _2a9=this.dropDown,_2aa=_2a9.domNode,_2ab=this._aroundNode||this.domNode,self=this;if(!this._preparedNode){this._preparedNode=true;if(_2aa.style.width){this._explicitDDWidth=true;}if(_2aa.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _2ac={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_2ac.width="";}if(!this._explicitDDHeight){_2ac.height="";}_29a.set(_2aa,_2ac);var _2ad=this.maxHeight;if(_2ad==-1){var _2ae=_29b.getBox(this.ownerDocument),_2af=_299.position(_2ab,false);_2ad=Math.floor(Math.max(_2af.y,_2ae.h-(_2af.y+_2af.h)));}_29e.moveOffScreen(_2a9);if(_2a9.startup&&!_2a9._started){_2a9.startup();}var mb=_299.getMarginSize(_2aa);var _2b0=(_2ad&&mb.h>_2ad);_29a.set(_2aa,{overflowX:"visible",overflowY:_2b0?"auto":"visible"});if(_2b0){mb.h=_2ad;if("w" in mb){mb.w+=16;}}else{delete mb.h;}if(this.forceWidth){mb.w=_2ab.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,_2ab.offsetWidth);}else{delete mb.w;}}if(lang.isFunction(_2a9.resize)){_2a9.resize(mb);}else{_299.setMarginBox(_2aa,mb);}}var _2b1=_29e.open({parent:this,popup:_2a9,around:_2ab,orient:this.dropDownPosition,onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){_297.set(self._popupStateNode,"popupActive",false);_298.remove(self._popupStateNode,"dijitHasDropDownOpen");self._set("_opened",false);}});_297.set(this._popupStateNode,"popupActive","true");_298.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",true);this.domNode.setAttribute("aria-expanded","true");return _2b1;},closeDropDown:function(_2b2){if(this._focusDropDownTimer){this._focusDropDownTimer.remove();delete this._focusDropDownTimer;}if(this._opened){this.domNode.setAttribute("aria-expanded","false");if(_2b2){this.focus();}_29e.close(this.dropDown);this._opened=false;}}});});},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dijit/_editor/plugins/EnterKeyHandling",["dojo/_base/declare","dojo/dom-construct","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/window","dojo/window","../_Plugin","../RichText","../range","../../_base/focus"],function(_2b3,_2b4,_2b5,keys,lang,has,win,_2b6,_2b7,_2b8,_2b9,_2ba){return _2b3("dijit._editor.plugins.EnterKeyHandling",_2b7,{blockNodeForEnter:"BR",constructor:function(args){if(args){if("blockNodeForEnter" in args){args.blockNodeForEnter=args.blockNodeForEnter.toUpperCase();}lang.mixin(this,args);}},setEditor:function(_2bb){if(this.editor===_2bb){return;}this.editor=_2bb;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_2bb.onLoadDeferred.then(lang.hitch(this,function(d){this.connect(_2bb.document,"onkeypress",function(e){if(e.charOrCode==keys.ENTER){var ne=lang.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){_2b5.stop(e);}}});if(has("ie")>=9){this.connect(_2bb.document,"onpaste",function(e){setTimeout(dojo.hitch(this,function(){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();r.move("character",1);r.select();}),0);});}return d;}));}else{if(this.blockNodeForEnter){var h=lang.hitch(this,this.handleEnterKey);_2bb.addKeyHandler(13,0,0,h);_2bb.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(){if(this._checkListLater){if(win.withGlobal(this.editor.window,"isCollapsed",_2ba)){var _2bc=this.editor._sCall("getAncestorElement",["LI"]);if(!_2bc){_2b8.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var _2bd=this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]);if(_2bd){_2bd.innerHTML=this.bogusHtmlContent;if(has("ie")<=9){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(has("mozilla")){if(_2bc.parentNode.parentNode.nodeName=="LI"){_2bc=_2bc.parentNode.parentNode;}}var fc=_2bc.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_2bc.insertBefore(fc.ownerDocument.createTextNode(""),fc);var _2be=_2b9.create(this.editor.window);_2be.setStart(_2bc.firstChild,0);var _2bf=_2b9.getSelection(this.editor.window,true);_2bf.removeAllRanges();_2bf.addRange(_2be);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _2c0,_2c1,_2c2,_2c3,_2c4,_2c5,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _2c6=this.editor._sCall("getParentElement",[]);var _2c7=_2b9.getAncestor(_2c6,this.blockNodes);if(_2c7){if(_2c7.tagName=="LI"){return true;}_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);if(!_2c1.collapsed){_2c1.deleteContents();_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);}if(_2b9.atBeginningOfContainer(_2c7,_2c1.startContainer,_2c1.startOffset)){br=doc.createElement("br");_2c2=_2b9.create(this.editor.window);_2c7.insertBefore(br,_2c7.firstChild);_2c2.setStartAfter(br);_2c0.removeAllRanges();_2c0.addRange(_2c2);}else{if(_2b9.atEndOfContainer(_2c7,_2c1.startContainer,_2c1.startOffset)){_2c2=_2b9.create(this.editor.window);br=doc.createElement("br");_2c7.appendChild(br);_2c7.appendChild(doc.createTextNode(""));_2c2.setStart(_2c7.lastChild,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);}else{rs=_2c1.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;_2c3=doc.createTextNode(txt.substring(0,_2c1.startOffset));_2c4=doc.createTextNode(txt.substring(_2c1.startOffset));_2c5=doc.createElement("br");if(_2c4.nodeValue==""&&has("webkit")){_2c4=doc.createTextNode("");}_2b4.place(_2c3,rs,"after");_2b4.place(_2c5,_2c3,"after");_2b4.place(_2c4,_2c5,"after");_2b4.destroy(rs);_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2c4,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);return false;}return true;}}}else{_2c0=_2b9.getSelection(this.editor.window);if(_2c0.rangeCount){_2c1=_2c0.getRangeAt(0);if(_2c1&&_2c1.startContainer){if(!_2c1.collapsed){_2c1.deleteContents();_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);}rs=_2c1.startContainer;if(rs&&rs.nodeType==3){var _2c8=false;var _2c9=_2c1.startOffset;if(rs.length<_2c9){ret=this._adjustNodeAndOffset(rs,_2c9);rs=ret.node;_2c9=ret.offset;}txt=rs.nodeValue;_2c3=doc.createTextNode(txt.substring(0,_2c9));_2c4=doc.createTextNode(txt.substring(_2c9));_2c5=doc.createElement("br");if(!_2c4.length){_2c4=doc.createTextNode("");_2c8=true;}if(_2c3.length){_2b4.place(_2c3,rs,"after");}else{_2c3=rs;}_2b4.place(_2c5,_2c3,"after");_2b4.place(_2c4,_2c5,"after");_2b4.destroy(rs);_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2c4,0);_2c2.setEnd(_2c4,_2c4.length);_2c0.removeAllRanges();_2c0.addRange(_2c2);if(_2c8&&!has("webkit")){this.editor._sCall("remove",[]);}else{this.editor._sCall("collapse",[true]);}}else{var _2ca;if(_2c1.startOffset>=0){_2ca=rs.childNodes[_2c1.startOffset];}var _2c5=doc.createElement("br");var _2c4=doc.createTextNode("");if(!_2ca){rs.appendChild(_2c5);rs.appendChild(_2c4);}else{_2b4.place(_2c5,_2ca,"before");_2b4.place(_2c4,_2c5,"after");}_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2c4,0);_2c2.setEnd(_2c4,_2c4.length);_2c0.removeAllRanges();_2c0.addRange(_2c2);this.editor._sCall("collapse",[true]);}}}else{_2b8.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _2cb=true;_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);if(!_2c1.collapsed){_2c1.deleteContents();_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);}var _2cc=_2b9.getBlockAncestor(_2c1.endContainer,null,this.editor.editNode);var _2cd=_2cc.blockNode;if((this._checkListLater=(_2cd&&(_2cd.nodeName=="LI"||_2cd.parentNode.nodeName=="LI")))){if(has("mozilla")){this._pressedEnterInBlock=_2cd;}if(/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(_2cd.innerHTML)){_2cd.innerHTML="";if(has("webkit")){_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2cd,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);}this._checkListLater=false;}return true;}if(!_2cc.blockNode||_2cc.blockNode===this.editor.editNode){try{_2b8.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}_2cc={blockNode:this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(_2cc.blockNode){if(_2cc.blockNode!=this.editor.editNode&&(!(_2cc.blockNode.textContent||_2cc.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(_2cc.blockNode);return false;}}else{_2cc.blockNode=this.editor.editNode;}_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);}var _2ce=doc.createElement(this.blockNodeForEnter);_2ce.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(_2cc.blockNode);var _2cf=_2c1.endOffset;var node=_2c1.endContainer;if(node.length<_2cf){var ret=this._adjustNodeAndOffset(node,_2cf);node=ret.node;_2cf=ret.offset;}if(_2b9.atEndOfContainer(_2cc.blockNode,node,_2cf)){if(_2cc.blockNode===_2cc.blockContainer){_2cc.blockNode.appendChild(_2ce);}else{_2b4.place(_2ce,_2cc.blockNode,"after");}_2cb=false;_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2ce,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);if(this.editor.height){_2b6.scrollIntoView(_2ce);}}else{if(_2b9.atBeginningOfContainer(_2cc.blockNode,_2c1.startContainer,_2c1.startOffset)){_2b4.place(_2ce,_2cc.blockNode,_2cc.blockNode===_2cc.blockContainer?"first":"before");if(_2ce.nextSibling&&this.editor.height){_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2ce.nextSibling,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);_2b6.scrollIntoView(_2ce.nextSibling);}_2cb=false;}else{if(_2cc.blockNode===_2cc.blockContainer){_2cc.blockNode.appendChild(_2ce);}else{_2b4.place(_2ce,_2cc.blockNode,"after");}_2cb=false;if(_2cc.blockNode.style){if(_2ce.style){if(_2cc.blockNode.style.cssText){_2ce.style.cssText=_2cc.blockNode.style.cssText;}}}rs=_2c1.startContainer;var _2d0;if(rs&&rs.nodeType==3){var _2d1,_2d2;_2cf=_2c1.endOffset;if(rs.length<_2cf){ret=this._adjustNodeAndOffset(rs,_2cf);rs=ret.node;_2cf=ret.offset;}txt=rs.nodeValue;_2c3=doc.createTextNode(txt.substring(0,_2cf));_2c4=doc.createTextNode(txt.substring(_2cf,txt.length));_2b4.place(_2c3,rs,"before");_2b4.place(_2c4,rs,"after");_2b4.destroy(rs);var _2d3=_2c3.parentNode;while(_2d3!==_2cc.blockNode){var tg=_2d3.tagName;var _2d4=doc.createElement(tg);if(_2d3.style){if(_2d4.style){if(_2d3.style.cssText){_2d4.style.cssText=_2d3.style.cssText;}}}if(_2d3.tagName==="FONT"){if(_2d3.color){_2d4.color=_2d3.color;}if(_2d3.face){_2d4.face=_2d3.face;}if(_2d3.size){_2d4.size=_2d3.size;}}_2d1=_2c4;while(_2d1){_2d2=_2d1.nextSibling;_2d4.appendChild(_2d1);_2d1=_2d2;}_2b4.place(_2d4,_2d3,"after");_2c3=_2d3;_2c4=_2d4;_2d3=_2d3.parentNode;}_2d1=_2c4;if(_2d1.nodeType==1||(_2d1.nodeType==3&&_2d1.nodeValue)){_2ce.innerHTML="";}_2d0=_2d1;while(_2d1){_2d2=_2d1.nextSibling;_2ce.appendChild(_2d1);_2d1=_2d2;}}_2c2=_2b9.create(this.editor.window);var _2d5;var _2d6=_2d0;if(this.blockNodeForEnter!=="BR"){while(_2d6){_2d5=_2d6;_2d2=_2d6.firstChild;_2d6=_2d2;}if(_2d5&&_2d5.parentNode){_2ce=_2d5.parentNode;_2c2.setStart(_2ce,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);if(this.editor.height){_2b6.scrollIntoView(_2ce);}if(has("mozilla")){this._pressedEnterInBlock=_2cc.blockNode;}}else{_2cb=true;}}else{_2c2.setStart(_2ce,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);if(this.editor.height){_2b6.scrollIntoView(_2ce);}if(has("mozilla")){this._pressedEnterInBlock=_2cc.blockNode;}}}}return _2cb;},_adjustNodeAndOffset:function(node,_2d7){while(node.length<_2d7&&node.nextSibling&&node.nextSibling.nodeType==3){_2d7=_2d7-node.length;node=node.nextSibling;}return {"node":node,"offset":_2d7};},removeTrailingBr:function(_2d8){var para=/P|DIV|LI/i.test(_2d8.tagName)?_2d8:this.editor._sCall("getParentOfType",[_2d8,["P","DIV","LI"]]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||para.lastChild.tagName=="BR"){_2b4.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}}});});},"dojo/dnd/Selector":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/kernel","../_base/lang","../dom","../dom-construct","../mouse","../_base/NodeList","../on","../touch","./common","./Container"],function(_2d9,_2da,_2db,_2dc,lang,dom,_2dd,_2de,_2df,on,_2e0,dnd,_2e1){var _2e2=_2da("dojo.dnd.Selector",_2e1,{constructor:function(node,_2e3){if(!_2e3){_2e3={};}this.singular=_2e3.singular;this.autoSync=_2e3.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(on(this.node,_2e0.press,lang.hitch(this,"onMouseDown")),on(this.node,_2e0.release,lang.hitch(this,"onMouseUp")));},singular:false,getSelectedNodes:function(){var t=new _2df();var e=dnd._empty;for(var i in this.selection){if(i in e){continue;}t.push(dom.byId(i));}return t;},selectNone:function(){return this._removeSelection()._removeAnchor();},selectAll:function(){this.forInItems(function(data,id){this._addItemClass(dom.byId(id),"Selected");this.selection[id]=1;},this);return this._removeAnchor();},deleteSelectedNodes:function(){var e=dnd._empty;for(var i in this.selection){if(i in e){continue;}var n=dom.byId(i);this.delItem(i);_2dd.destroy(n);}this.anchor=null;this.selection={};return this;},forInSelectedItems:function(f,o){o=o||_2dc.global;var s=this.selection,e=dnd._empty;for(var i in s){if(i in e){continue;}f.call(o,this.getItem(i),i,this);}},sync:function(){_2e2.superclass.sync.call(this);if(this.anchor){if(!this.getItem(this.anchor.id)){this.anchor=null;}}var t=[],e=dnd._empty;for(var i in this.selection){if(i in e){continue;}if(!this.getItem(i)){t.push(i);}}_2d9.forEach(t,function(i){delete this.selection[i];},this);return this;},insertNodes:function(_2e4,data,_2e5,_2e6){var _2e7=this._normalizedCreator;this._normalizedCreator=function(item,hint){var t=_2e7.call(this,item,hint);if(_2e4){if(!this.anchor){this.anchor=t.node;this._removeItemClass(t.node,"Selected");this._addItemClass(this.anchor,"Anchor");}else{if(this.anchor!=t.node){this._removeItemClass(t.node,"Anchor");this._addItemClass(t.node,"Selected");}}this.selection[t.node.id]=1;}else{this._removeItemClass(t.node,"Selected");this._removeItemClass(t.node,"Anchor");}return t;};_2e2.superclass.insertNodes.call(this,data,_2e5,_2e6);this._normalizedCreator=_2e7;return this;},destroy:function(){_2e2.superclass.destroy.call(this);this.selection=this.anchor=null;},onMouseDown:function(e){if(this.autoSync){this.sync();}if(!this.current){return;}if(!this.singular&&!dnd.getCopyKeyState(e)&&!e.shiftKey&&(this.current.id in this.selection)){this.simpleSelection=true;if(_2de.isLeft(e)){_2db.stop(e);}return;}if(!this.singular&&e.shiftKey){if(!dnd.getCopyKeyState(e)){this._removeSelection();}var c=this.getAllNodes();if(c.length){if(!this.anchor){this.anchor=c[0];this._addItemClass(this.anchor,"Anchor");}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var i=0,node;for(;i<c.length;++i){node=c[i];if(node==this.anchor||node==this.current){break;}}for(++i;i<c.length;++i){node=c[i];if(node==this.anchor||node==this.current){break;}this._addItemClass(node,"Selected");this.selection[node.id]=1;}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1;}}}else{if(this.singular){if(this.anchor==this.current){if(dnd.getCopyKeyState(e)){this.selectNone();}}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}}else{if(dnd.getCopyKeyState(e)){if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor();}else{if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id];}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected");}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}else{if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}}_2db.stop(e);},onMouseUp:function(){if(!this.simpleSelection){return;}this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}},onMouseMove:function(){this.simpleSelection=false;},onOverEvent:function(){this.onmousemoveEvent=on(this.node,_2e0.move,lang.hitch(this,"onMouseMove"));},onOutEvent:function(){if(this.onmousemoveEvent){this.onmousemoveEvent.remove();delete this.onmousemoveEvent;}},_removeSelection:function(){var e=dnd._empty;for(var i in this.selection){if(i in e){continue;}var node=dom.byId(i);if(node){this._removeItemClass(node,"Selected");}}this.selection={};return this;},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null;}return this;}});return _2e2;});},"esri/layers/OnDemandMode":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Point","esri/tasks/query","esri/layers/RenderMode","esri/layers/GridLayout"],function(_2e8,_2e9,lang,_2ea,has,_2eb,_2ec,_2ed,_2ee,_2ef){var _2f0=_2e8([_2ee],{declaredClass:"esri.layers._OnDemandMode",constructor:function(_2f1){this.featureLayer=_2f1;this._featureMap={};this._queryErrorHandler=lang.hitch(this,this._queryErrorHandler);},initialize:function(map){this.inherited(arguments);var _2f2=this.featureLayer,_2f3=_2f2._srInfo;this._gridLayer=new _2ef(new _2ec(_2f3?_2f3.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_2f2._tileWidth,height:_2f2._tileHeight},{width:map.width,height:map.height},_2f3);this._cellMap={};this._gridLayer.setResolution(map.extent);},startup:function(){this._ioQueue=[];if(!this.featureLayer.suspended){this._zoomHandler();this._enableConnectors();}},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}else{console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id = "+this.featureLayer.id+", Layer URL = "+this.featureLayer.url);}}},destroy:function(){this._disableConnectors();this.inherited(arguments);},drawFeature:function(_2f4){var _2f5=this._gridLayer,geom=_2f4.geometry,_2f6=[];if(!geom){return;}_2f6=_2f5.getCellsInExtent((geom.type==="point")?{xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}:geom.getExtent(),false).cells;var _2f7=this._cellMap,i,cell,oid=_2f4.attributes[this.featureLayer.objectIdField],_2f8,row,col;for(i=0;i<_2f6.length;i++){cell=_2f6[i];_2f8=cell.latticeID;row=cell.row;col=cell.col;if(_2f8){cell=(_2f7[_2f8]=(_2f7[_2f8]||cell));}else{_2f7[row]=_2f7[row]||{};cell=(_2f7[row][col]=(_2f7[row][col]||cell));}cell.features=cell.features||[];cell.features.push(_2f4);this._addFeatureIIf(oid,_2f4);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_enableConnectors:function(){var map=this.map;this._zoomConnect=_2e9.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=_2e9.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=_2e9.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){_2e9.disconnect(this._zoomConnect);_2e9.disconnect(this._panConnect);_2e9.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _2f9=this.featureLayer,map=this.map;if(_2f9.suspended){return;}_2f9._fireUpdateStart();this._clearIIf();var _2fa=_2f9._trackManager;if(_2fa){_2fa.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_2fb,cell){var id="_"+_2fb.name+_2fb.layerId+_2fb._ulid+"_"+cell.resolution+"_"+(cell.latticeID||(cell.row+"_"+cell.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_2fc){this._exceeds=false;var _2fd=this.featureLayer,map=this.map,_2fe=_2fc||map.extent,_2ff=this._gridLayer.getCellsInExtent(_2fe,_2fd.latticeTiling),_300=_2ff.cells;if(!_2fd.isEditable()){var _301=this._cellMap;_300=_2ea.filter(_300,function(cell){if(cell.lattice){if(_301[cell.latticeID]){return false;}}else{if(_301[cell.row]&&_301[cell.row][cell.col]){return false;}}return true;});}var _302=_2fd.getOutFields(),_303=_2fd.getDefinitionExpression(),time=_2fd._getOffsettedTE(_2fd._mapTimeExtent),_304=_2fd._usePatch,_305=this._ioQueue,i,self=this,func=this._drawFeatures,cell,_306,_307;this._pending=this._pending||0;for(i=0;i<_300.length;i++){cell=_300[i];_306=new _2ed();_306.geometry=cell.extent||cell.lattice;_306.outFields=_302;_306.where=_303;if(_2fd.latticeTiling&&cell.extent){_306.spatialRelationship=_2ed.SPATIAL_REL_CONTAINS;}_306.returnGeometry=true;_306.timeExtent=time;_306.maxAllowableOffset=_2fd._maxOffset;if(_2fd._ts){_306._ts=(new Date()).getTime();}_307=null;if(_304){_307=this._getRequestId(_2fd,cell);if(this._isPending(_307)){continue;}}this._pending++;_305.push(_2fd._task.execute(_306,function(){var _308=cell;return function(_309){func.apply(self,[_309,_308]);};}.call(this),this._queryErrorHandler,_307));}this._removeOldCells(_2fe);this._endCheck();},_drawFeatures:function(_30a,cell){this._exceeds=this._exceeds||_30a.exceededTransferLimit;this._finalizeIO();var _30b=this.featureLayer,map=this.map,_30c=map.extent,_30d=cell.extent,row=cell.row,col=cell.col,_30e=_30b.objectIdField,_30f=_30a.features,_310=this._gridLayer,_311=this._cellMap,i,len,_312=cell.latticeID,_313=_312?_311[_312]:(_311[row]&&_311[row][col]);if((cell.resolution!=_310._resolution)||(_312?(_312!==_310.getLatticeID(_30c)):(!_310.intersects(_30d,_30c)))){if(_313){this._removeCell(row,col,_312);}}else{if(_313){this._updateCell(_313,_30f);}else{cell.features=_30f;if(_312){_311[_312]=cell;}else{_311[row]=_311[row]||{};_311[row][col]=cell;}len=_30f.length;for(i=0;i<len;i++){var _314=_30f[i];var oid=_314.attributes[_30e];this._addFeatureIIf(oid,_314);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_315){if(this._pending===0){this._processIOQueue();var _316=this.featureLayer,_317=_316._trackManager;if(_317){_317.clearTracks();_317.addFeatures(_316.graphics);if(_316._ager){_2ea.forEach(_316.graphics,function(_318){if(_318._shape){_316._repaint(_318);}});}_317.moveLatestToFront();_317.drawTracks();}this.featureLayer._fireUpdateEnd(_315&&new Error("FeatureLayer: an error occurred while updating the layer"),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_316.onQueryLimitExceeded();}}},_processIOQueue:function(_319){this._ioQueue=_2ea.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_319){_2ea.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_31a){var _31b=this._cellMap,_31c=this._gridLayer,_31d,_31e;for(_31d in _31b){if(_31b[_31d]){var row=_31b[_31d],_31f=row.latticeID,_320=0,_321=0;if(_31f){_320++;if(_31f!==_31c.getLatticeID(_31a)){this._removeCell(null,null,_31f);_321++;}}else{for(_31e in row){if(row[_31e]){_320++;var _322=row[_31e].extent;if(!_31c.intersects(_322,_31a)){this._removeCell(_31d,_31e);_321++;}}}}if(_321===_320){delete _31b[_31d];}}}},_updateCell:function(cell,_323){var _324=this.featureLayer,_325=_324.objectIdField,_326=_324._selectedFeatures,i,len=_323.length;cell.features=cell.features||[];for(i=0;i<len;i++){var _327=_323[i];var oid=_327.attributes[_325];var _328=this._addFeatureIIf(oid,_327);if(_328===_327){this._incRefCount(oid);cell.features.push(_328);}else{if(!(oid in _326)){_328.setGeometry(_327.geometry);_328.setAttributes(_327.attributes);}}}},_removeCell:function(row,col,_329){var _32a=this._cellMap,_32b=this.featureLayer,_32c=_32b.objectIdField;var cell=_329?_32a[_329]:(_32a[row]&&_32a[row][col]);if(cell){if(_329){delete _32a[_329];}else{delete _32a[row][col];}var _32d=cell.features,i;for(i=0;i<_32d.length;i++){var _32e=_32d[i];var oid=_32e.attributes[_32c];this._decRefCount(oid);if(oid in _32b._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});if(has("extend-esri")){lang.setObject("layers._OnDemandMode",_2f0,_2eb);}return _2f0;});},"dijit/_MenuBase":function(){define("dijit/_MenuBase",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./popup","./registry","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_32f,_330,dom,_331,_332,lang,_333,on,_334,_335,pm,_336,_337,_338,_339){return _330("dijit._MenuBase",[_337,_339,_338],{parentMenu:null,popupDelay:500,autoFocus:false,childSelector:function(node){var _33a=_336.byNode(node);return node.parentNode==this.containerNode&&_33a&&_33a.focus;},postCreate:function(){var self=this,_33b=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.containerNode,on.selector(_33b,_333.enter),function(){self.onItemHover(_336.byNode(this));}),on(this.containerNode,on.selector(_33b,_333.leave),function(){self.onItemUnhover(_336.byNode(this));}),on(this.containerNode,on.selector(_33b,_335),function(evt){self.onItemClick(_336.byNode(this),evt);evt.stopPropagation();evt.preventDefault();}));this.inherited(arguments);},onExecute:function(){},onCancel:function(){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.onItemClick(this.focusedChild,evt);}else{var _33c=this._getTopMenu();if(_33c&&_33c._isMenuBar){_33c.focusNext();}}},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var _33d=this.currentPopup.parentMenu;if(_33d.focusedChild){_33d.focusedChild._setSelected(false);}_33d.focusedChild=this.currentPopup.from_item;_33d.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup);}},onItemHover:function(item){if(this.isActive){this.focusChild(item);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=this.defer("_openPopup",this.popupDelay);}}if(this.focusedChild){this.focusChild(item);}this._hoveredChild=item;item._set("hovering",true);},_onChildBlur:function(item){this._stopPopupTimer();item._setSelected(false);var _33e=item.popup;if(_33e){this._stopPendingCloseTimer(_33e);_33e._pendingClose_timer=this.defer(function(){_33e._pendingClose_timer=null;if(_33e.parentMenu){_33e.parentMenu.currentPopup=null;}pm.close(_33e);},this.popupDelay);}},onItemUnhover:function(item){if(this.isActive){this._stopPopupTimer();}if(this._hoveredChild==item){this._hoveredChild=null;}item._set("hovering",false);},_stopPopupTimer:function(){if(this.hover_timer){this.hover_timer=this.hover_timer.remove();}},_stopPendingCloseTimer:function(_33f){if(_33f._pendingClose_timer){_33f._pendingClose_timer=_33f._pendingClose_timer.remove();}},_stopFocusTimer:function(){if(this._focus_timer){this._focus_timer=this._focus_timer.remove();}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(typeof this.isShowingNow=="undefined"){this._markActive();}this.focusChild(item);if(item.disabled){return false;}if(item.popup){this._openPopup(evt.type=="keypress");}else{this.onExecute();item._onClick?item._onClick(evt):item.onClick(evt);}},_openPopup:function(_340){this._stopPopupTimer();var _341=this.focusedChild;if(!_341){return;}var _342=_341.popup;if(!_342.isShowingNow){if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);pm.close(this.currentPopup);}_342.parentMenu=this;_342.from_item=_341;var self=this;pm.open({parent:this,popup:_342,around:_341.domNode,orient:this._orient||["after","before"],onCancel:function(){self.focusChild(_341);self._cleanUp();_341._setSelected(true);self.focusedChild=_341;},onExecute:lang.hitch(this,"_cleanUp")});this.currentPopup=_342;_342.connect(_342.domNode,"onmouseenter",lang.hitch(self,"_onPopupHover"));}if(_340&&_342.focus){_342._focus_timer=this.defer(lang.hitch(_342,function(){this._focus_timer=null;this.focus();}));}},_markActive:function(){this.isActive=true;_332.replace(this.domNode,"dijitMenuActive","dijitMenuPassive");},onOpen:function(){this.isShowingNow=true;this._markActive();},_markInactive:function(){this.isActive=false;_332.replace(this.domNode,"dijitMenuPassive","dijitMenuActive");},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup){if(_32f.indexOf(this._focusManager.activeStack,this.id)>=0){_331.set(this.focusedChild.focusNode,"tabIndex",this.tabIndex);this.focusedChild.focusNode.focus();}pm.close(this.currentPopup);this.currentPopup=null;}if(this.focusedChild){this.focusedChild._setSelected(false);this.onItemUnhover(this.focusedChild);this.focusedChild=null;}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item){this.onItemUnhover(this._hoveredChild);}},_onBlur:function(){this._cleanUp();this.inherited(arguments);},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined"){this._markInactive();}}});});},"esri/layers/SelectionMode":function(){define("esri/layers/SelectionMode",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/RenderMode"],function(_343,lang,has,_344,_345){var _346=_343([_345],{declaredClass:"esri.layers._SelectionMode",constructor:function(_347){this.featureLayer=_347;this._featureMap={};},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},resume:function(){this.propertyChangeHandler(0);}});if(has("extend-esri")){lang.setObject("layers._SelectionMode",_346,_344);}return _346;});},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_348,_349,dom,_34a,_34b,_34c,lang,on,_34d,has,_34e,_34f,win,_350,a11y,_351,_352){var _353=_349([_34e,_34c],{curNode:null,activeStack:[],constructor:function(){var _354=lang.hitch(this,function(node){if(dom.isDescendant(this.curNode,node)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,node)){this.set("prevNode",null);}});_348.before(_34b,"empty",_354);_348.before(_34b,"destroy",_354);},registerIframe:function(_355){return this.registerWin(_355.contentWindow,_355);},registerWin:function(_356,_357){var _358=this;var _359=function(evt){_358._justMouseDowned=true;setTimeout(function(){_358._justMouseDowned=false;},0);if(has("ie")&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_358._onTouchNode(_357||evt.target||evt.srcElement,"mouse");};var doc=has("ie")?_356.document.documentElement:_356.document;if(doc){if(has("ie")){_356.document.body.attachEvent("onmousedown",_359);var _35a=function(evt){var tag=evt.srcElement.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(a11y.isTabNavigable(evt.srcElement)){_358._onFocusNode(_357||evt.srcElement);}else{_358._onTouchNode(_357||evt.srcElement);}};doc.attachEvent("onfocusin",_35a);var _35b=function(evt){_358._onBlurNode(_357||evt.srcElement);};doc.attachEvent("onfocusout",_35b);return {remove:function(){_356.document.detachEvent("onmousedown",_359);doc.detachEvent("onfocusin",_35a);doc.detachEvent("onfocusout",_35b);doc=null;}};}else{doc.body.addEventListener("mousedown",_359,true);doc.body.addEventListener("touchstart",_359,true);var _35c=function(evt){_358._onFocusNode(_357||evt.target);};doc.addEventListener("focus",_35c,true);var _35d=function(evt){_358._onBlurNode(_357||evt.target);};doc.addEventListener("blur",_35d,true);return {remove:function(){doc.body.removeEventListener("mousedown",_359,true);doc.body.removeEventListener("touchstart",_359,true);doc.removeEventListener("focus",_35c,true);doc.removeEventListener("blur",_35d,true);doc=null;}};}}},_onBlurNode:function(node){if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);}this._clearFocusTimer=setTimeout(lang.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null);}),0);if(this._justMouseDowned){return;}if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);}),0);},_onTouchNode:function(node,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}var _35e=[];try{while(node){var _35f=_34a.get(node,"dijitPopupParent");if(_35f){node=_351.byId(_35f).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===win.body()){break;}node=_350.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_360=id&&_351.byId(id);if(_360&&!(by=="mouse"&&_360.get("disabled"))){_35e.unshift(id);}node=node.parentNode;}}}}catch(e){}this._setStack(_35e,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);delete this._clearFocusTimer;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("prevNode",this.curNode);this.set("curNode",node);},_setStack:function(_361,by){var _362=this.activeStack;this.set("activeStack",_361);for(var _363=0;_363<Math.min(_362.length,_361.length);_363++){if(_362[_363]!=_361[_363]){break;}}var _364;for(var i=_362.length-1;i>=_363;i--){_364=_351.byId(_362[i]);if(_364){_364._hasBeenBlurred=true;_364.set("focused",false);if(_364._focusManager==this){_364._onBlur(by);}this.emit("widget-blur",_364,by);}}for(i=_363;i<_361.length;i++){_364=_351.byId(_361[i]);if(_364){_364.set("focused",true);if(_364._focusManager==this){_364._onFocus(by);}this.emit("widget-focus",_364,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _365=new _353();_34d(function(){var _366=_365.registerWin(_350.get(win.doc));if(has("ie")){_34f.addOnWindowUnload(function(){if(_366){_366.remove();_366=null;}});}});_352.focus=function(node){_365.focus(node);};for(var attr in _365){if(!/^_/.test(attr)){_352.focus[attr]=typeof _365[attr]=="function"?lang.hitch(_365,attr):_365[attr];}}_365.watch(function(attr,_367,_368){_352.focus[attr]=_368;});return _365;});},"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],function(_369,has,_36a,win){_36a(90,function(){if(has("highcontrast")){_369.add(win.body(),"dijit_a11y");}});return has;});},"dojox/html/metrics":function(){define("dojox/html/metrics",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(_36b,lang,has,_36c,_36d,_36e,_36f){var dhm=lang.getObject("dojox.html.metrics",true);var _370=lang.getObject("dojox");dhm.getFontMeasurements=function(){var _371={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(has("ie")){_36e.doc.documentElement.style.fontSize="100%";}var div=_36e.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";_36e.body().appendChild(div);for(var p in _371){ds.fontSize=p;_371[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}_36e.body().removeChild(div);div=null;return _371;};var _372=null;dhm.getCachedFontMeasurements=function(_373){if(_373||!_372){_372=dhm.getFontMeasurements();}return _372;};var _374=null,_375={};dhm.getTextBox=function(text,_376,_377){var m,s;if(!_374){m=_374=_36e.doc.createElement("div");var c=_36e.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";_36e.body().appendChild(c);}else{m=_374;}m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_376){for(var i in _376){if(i in _375){continue;}s[i]=_376[i];}}if(arguments.length>2&&_377){m.className=_377;}m.innerHTML=text;var box=_36f.position(m);box.w=m.parentNode.scrollWidth;return box;};var _378={w:16,h:16};dhm.getScrollbar=function(){return {w:_378.w,h:_378.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_379){var f=dhm._fontResizeNode=_36e.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";fs.display="none";if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[_370._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[_370._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");_36e.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};_36d.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(has("ie")&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});_36c(function(){try{var n=_36e.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";_36e.body().appendChild(n);_378.w=n.offsetWidth-n.clientWidth;_378.h=n.offsetHeight-n.clientHeight;_36e.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in _36b.config&&!!_36b.config.fontSizeWatch){dhm.initOnFontResize();}});return dhm;});},"esri/dijit/editing/tools/MenuItemBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dijit/MenuItem","esri/dijit/editing/tools/ToolBase","esri/kernel"],function(_37a,lang,has,_37b,_37c,_37d){var MIB=_37a([_37b,_37c],{declaredClass:"esri.dijit.editing.tools.MenuItemBase",destroy:function(){_37b.prototype.destroy.apply(this,arguments);_37c.prototype.destroy.apply(this,arguments);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.MenuItemBase",MIB,_37d);}return MIB;});},"esri/dijit/editing/tools/Union":function(){define("esri/dijit/editing/tools/Union",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/graphicsUtils","esri/graphic","esri/toolbars/draw","esri/dijit/editing/Union","esri/dijit/editing/tools/ButtonToolBase","esri/kernel"],function(_37e,lang,_37f,has,_380,_381,Draw,_382,_383,_384){var _385=_37e([_383],{declaredClass:"esri.dijit.editing.tools.Union",id:"btnFeatureUnion",_enabledIcon:"toolbarIcon unionIcon",_disabledIcon:"toolbarIcon unionIcon",_drawType:Draw.POLYLINE,_enabled:true,_label:"NLS_unionLbl",_onClick:function(evt){this._settings.editor._activeTool="UNION";var _386=this._settings.layers;var _387=_37f.filter(_386,function(item){return (item.geometryType==="esriGeometryPolygon")&&(item.visible&&item._isMapAtVisibleScale());});var _388=[];var _389=0;_37f.forEach(_387,function(_38a,idx){var _38b=_38a.getSelectedFeatures();if(_38b.length>=2){_389++;var _38c=_37f.map(_38b,function(item){return new _381(lang.clone(item.toJson()));});this._settings.geometryService.union(_380.getGeometries(_38b),lang.hitch(this,function(_38d){var _38e=[_38b.pop().setGeometry(_38d)];_388.push({layer:_38a,updates:_38e,deletes:_38b,preUpdates:_38c});_389--;if(_389<=0){this.onApplyEdits(_388,lang.hitch(this,function(){if(this._settings.undoRedoManager){var _38f=this._settings.undoRedoManager;_37f.forEach(this._edits,lang.hitch(this,function(edit){_38f.add(new _382({featureLayer:edit.layer,addedGraphics:edit.deletes,preUpdatedGraphics:edit.preUpdates,postUpdatedGraphics:edit.updates}));}),this);}this._settings.editor._selectionHelper.clearSelection(false);this.onFinished();}));}}));}},this);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Union",_385,_384);}return _385;});},"esri/tasks/query":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils","esri/tasks/SpatialRelationship","dojo/has!extend-esri?esri/tasks/QueryTask","dojo/has!extend-esri?esri/tasks/RelationshipQuery","dojo/has!extend-esri?esri/tasks/StatisticDefinition"],function(_390,lang,_391,_392,has,_393,_394,_395){var _396=_390(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=_396.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:false,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,toJson:function(_397){var json={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=_397&&_397["geometry"]||this.geometry,ids=this.objectIds,_398=this.outFields,_399=this.outSpatialReference,_39a=this.groupByFieldsForStatistics,_39b=this.orderByFields,_39c=this.outStatistics;if(g){json.geometry=g;json.geometryType=_394.getJsonType(g);json.inSR=g.spatialReference.wkid||_392.toJson(g.spatialReference.toJson());}if(ids){json.objectIds=ids.join(",");}if(_398){json.outFields=_398.join(",");}if(_39a){json.groupByFieldsForStatistics=_39a.join(",");}if(_39b){json.orderByFields=_39b.join(",");}if(_39c){var _39d=[];_391.forEach(_39c,function(item,idx){_39d.push(item.toJson());});json.outStatistics=_392.toJson(_39d);}if(_399!==null){json.outSR=_399.wkid||_392.toJson(_399.toJson());}else{if(g){json.outSR=g.spatialReference.wkid||_392.toJson(g.spatialReference.toJson());}}var _39e=this.timeExtent;json.time=_39e?_39e.toJson().join(","):null;var _39f=this.relationParam;if(_39f&&this.spatialRelationship===_396.SPATIAL_REL_RELATION){json.relationParam=_39f;}json.pixelSize=this.pixelSize?_392.toJson(this.pixelSize.toJson()):null;json._ts=this._ts;return json;}});lang.mixin(_396,_395);if(has("extend-esri")){lang.setObject("tasks.Query",_396,_393);}return _396;});},"dijit/form/_ComboBoxMenuMixin":function(){define("dijit/form/_ComboBoxMenuMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(_3a0,_3a1,_3a2,i18n){return _3a1("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(_3a3){this.value=_3a3;this.onChange(_3a3);},onClick:function(node){if(node==this.previousButton){this._setSelectedAttr(null);this.onPage(-1);}else{if(node==this.nextButton){this._setSelectedAttr(null);this.onPage(1);}else{this.onChange(node);}}},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null);},_createOption:function(item,_3a4){var _3a5=this._createMenuItem();var _3a6=_3a4(item);if(_3a6.html){_3a5.innerHTML=_3a6.label;}else{_3a5.appendChild(_3a5.ownerDocument.createTextNode(_3a6.label));}if(_3a5.innerHTML==""){_3a5.innerHTML="&#160;";}this.applyTextDir(_3a5,(_3a5.innerText||_3a5.textContent||""));return _3a5;},createOptions:function(_3a7,_3a8,_3a9){this.items=_3a7;this.previousButton.style.display=(_3a8.start==0)?"none":"";_3a2.set(this.previousButton,"id",this.id+"_prev");_3a0.forEach(_3a7,function(item,i){var _3aa=this._createOption(item,_3a9);_3aa.setAttribute("item",i);_3a2.set(_3aa,"id",this.id+i);this.nextButton.parentNode.insertBefore(_3aa,this.nextButton);},this);var _3ab=false;if(_3a7.total&&!_3a7.total.then&&_3a7.total!=-1){if((_3a8.start+_3a8.count)<_3a7.total){_3ab=true;}else{if((_3a8.start+_3a8.count)>_3a7.total&&_3a8.count==_3a7.length){_3ab=true;}}}else{if(_3a8.count==_3a7.length){_3ab=true;}}this.nextButton.style.display=_3ab?"":"none";_3a2.set(this.nextButton,"id",this.id+"_next");},clearResultList:function(){var _3ac=this.containerNode;while(_3ac.childNodes.length>2){_3ac.removeChild(_3ac.childNodes[_3ac.childNodes.length-2]);}this._setSelectedAttr(null);},highlightFirstOption:function(){this.selectFirstNode();},highlightLastOption:function(){this.selectLastNode();},selectFirstNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.previousButton){this.selectNextNode();}},selectLastNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.nextButton){this.selectPreviousNode();}},getHighlightedOption:function(){return this.selected;}});});},"dijit/form/_SearchMixin":function(){define("dijit/form/_SearchMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/sniff","dojo/string","dojo/when","../registry"],function(_3ad,_3ae,_3af,keys,lang,_3b0,has,_3b1,when,_3b2){return _3ae("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_abortQuery:function(){if(this.searchTimer){this.searchTimer=this.searchTimer.remove();}if(this._queryDeferHandle){this._queryDeferHandle=this._queryDeferHandle.remove();}if(this._fetchHandle){if(this._fetchHandle.abort){this._cancelingQuery=true;this._fetchHandle.abort();this._cancelingQuery=false;}if(this._fetchHandle.cancel){this._cancelingQuery=true;this._fetchHandle.cancel();this._cancelingQuery=false;}this._fetchHandle=null;}},_processInput:function(evt){if(this.disabled||this.readOnly){return;}var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==keys.SHIFT){return;}var _3b3=false;this._prev_key_backspace=false;switch(key){case keys.DELETE:case keys.BACKSPACE:this._prev_key_backspace=true;this._maskValidSubsetError=true;_3b3=true;break;default:_3b3=typeof key=="string"||key==229;}if(_3b3){if(!this.store){this.onSearch();}else{this.searchTimer=this.defer("_startSearchFromInput",1);}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_startSearch:function(text){this._abortQuery();var _3b4=this,_3b0=lang.clone(this.query),_3b5={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=_3b1.substitute(this.queryExpr,[text]),q,_3b6=function(){var _3b7=_3b4._fetchHandle=_3b4.store.query(_3b0,_3b5);if(_3b4.disabled||_3b4.readOnly||(q!==_3b4._lastQuery)){return;}when(_3b7,function(res){_3b4._fetchHandle=null;if(!_3b4.disabled&&!_3b4.readOnly&&(q===_3b4._lastQuery)){when(_3b7.total,function(_3b8){res.total=_3b8;var _3b9=_3b4.pageSize;if(isNaN(_3b9)||_3b9>res.total){_3b9=res.total;}res.nextPage=function(_3ba){_3b5.direction=_3ba=_3ba!==false;_3b5.count=_3b9;if(_3ba){_3b5.start+=res.length;if(_3b5.start>=res.total){_3b5.count=0;}}else{_3b5.start-=_3b9;if(_3b5.start<0){_3b5.count=Math.max(_3b9+_3b5.start,0);_3b5.start=0;}}if(_3b5.count<=0){res.length=0;_3b4.onSearch(res,_3b0,_3b5);}else{_3b6();}};_3b4.onSearch(res,_3b0,_3b5);});}},function(err){_3b4._fetchHandle=null;if(!_3b4._cancelingQuery){console.error(_3b4.declaredClass+" "+err.toString());}});};lang.mixin(_3b5,this.fetchProperties);if(this.store._oldAPI){q=qs;}else{q=_3ad.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_3b0[this.searchAttr]=q;this._queryDeferHandle=this.defer(_3b6,this.searchDelay);},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var list=this.list;if(list){this.store=_3b2.byId(list);}}this.inherited(arguments);}});});},"dojox/grid/_RowSelector":function(){define("dojox/grid/_RowSelector",["dojo/_base/declare","./_View"],function(_3bb,_3bc){return _3bb("dojox.grid._RowSelector",_3bc,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden";},getWidth:function(){return this.viewWidth||this.defaultWidth;},buildRowContent:function(_3bd,_3be){var w=this.contentWidth||0;_3be.innerHTML="<table class=\"dojoxGridRowbarTable\" style=\"width:"+w+"px;height:1px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"><tr><td class=\"dojoxGridRowbarInner\">&nbsp;</td></tr></table>";},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight();},adaptWidth:function(){if(!("contentWidth" in this)&&this.contentNode&&this.contentNode.offsetWidth>0){this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth;}},doStyleRowNode:function(_3bf,_3c0){var n=["dojoxGridRowbar dojoxGridNonNormalizedCell"];if(this.grid.rows.isOver(_3bf)){n.push("dojoxGridRowbarOver");}if(this.grid.selection.isSelected(_3bf)){n.push("dojoxGridRowbarSelected");}_3c0.className=n.join(" ");},domouseover:function(e){this.grid.onMouseOverRow(e);},domouseout:function(e){if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}});});},"dojo/parser":function(){define(["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./_base/html","./_base/window","./_base/url","./_base/json","./aspect","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(_3c1,dojo,_3c2,_3c3,_3c4,_3c5,_3c6,_3c7,_3c8,_3c9,_3ca,_3cb,has,_3cc,don,_3cd){new Date("X");var _3ce=0;_3c9.after(_3c2,"extend",function(){_3ce++;},true);function _3cf(ctor){var map=ctor._nameCaseMap,_3d0=ctor.prototype;if(!map||map._extendCnt<_3ce){map=ctor._nameCaseMap={};for(var name in _3d0){if(name.charAt(0)==="_"){continue;}map[name.toLowerCase()]=name;}map._extendCnt=_3ce;}return map;};var _3d1={};function _3d2(_3d3){var ts=_3d3.join();if(!_3d1[ts]){var _3d4=[];for(var i=0,l=_3d3.length;i<l;i++){var t=_3d3[i];_3d4[_3d4.length]=(_3d1[t]=_3d1[t]||(_3c2.getObject(t)||(~t.indexOf("/")&&_3c1(t))));}var ctor=_3d4.shift();_3d1[ts]=_3d4.length?(ctor.createSubclass?ctor.createSubclass(_3d4):ctor.extend.apply(ctor,_3d4)):ctor;}return _3d1[ts];};var _3d5={_clearCache:function(){_3ce++;_3d1={};},_functionFromScript:function(_3d6,_3d7){var _3d8="",_3d9="",_3da=(_3d6.getAttribute(_3d7+"args")||_3d6.getAttribute("args")),_3db=_3d6.getAttribute("with");var _3dc=(_3da||"").split(/\s*,\s*/);if(_3db&&_3db.length){_3c3.forEach(_3db.split(/\s*,\s*/),function(part){_3d8+="with("+part+"){";_3d9+="}";});}return new Function(_3dc,_3d8+_3d6.innerHTML+_3d9);},instantiate:function(_3dd,_3de,_3df){_3de=_3de||{};_3df=_3df||{};var _3e0=(_3df.scope||dojo._scopeName)+"Type",_3e1="data-"+(_3df.scope||dojo._scopeName)+"-",_3e2=_3e1+"type",_3e3=_3e1+"mixins";var list=[];_3c3.forEach(_3dd,function(node){var type=_3e0 in _3de?_3de[_3e0]:node.getAttribute(_3e2)||node.getAttribute(_3e0);if(type){var _3e4=node.getAttribute(_3e3),_3e5=_3e4?[type].concat(_3e4.split(/\s*,\s*/)):[type];list.push({node:node,types:_3e5});}});return this._instantiate(list,_3de,_3df);},_instantiate:function(_3e6,_3e7,_3e8){var _3e9=_3c3.map(_3e6,function(obj){var ctor=obj.ctor||_3d2(obj.types);if(!ctor){throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");}return this.construct(ctor,obj.node,_3e7,_3e8,obj.scripts,obj.inherited);},this);if(!_3e7._started&&!_3e8.noStart){_3c3.forEach(_3e9,function(_3ea){if(typeof _3ea.startup==="function"&&!_3ea._started){_3ea.startup();}});}return _3e9;},construct:function(ctor,node,_3eb,_3ec,_3ed,_3ee){var _3ef=ctor&&ctor.prototype;_3ec=_3ec||{};var _3f0={};if(_3ec.defaults){_3c2.mixin(_3f0,_3ec.defaults);}if(_3ee){_3c2.mixin(_3f0,_3ee);}var _3f1;if(has("dom-attributes-explicit")){_3f1=node.attributes;}else{if(has("dom-attributes-specified-flag")){_3f1=_3c3.filter(node.attributes,function(a){return a.specified;});}else{var _3f2=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false),_3f3=_3f2.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");_3f1=_3c3.map(_3f3.split(/\s+/),function(name){var _3f4=name.toLowerCase();return {name:name,value:(node.nodeName=="LI"&&name=="value")||_3f4=="enctype"?node.getAttribute(_3f4):node.getAttributeNode(_3f4).value};});}}var _3f5=_3ec.scope||dojo._scopeName,_3f6="data-"+_3f5+"-",hash={};if(_3f5!=="dojo"){hash[_3f6+"props"]="data-dojo-props";hash[_3f6+"type"]="data-dojo-type";hash[_3f6+"mixins"]="data-dojo-mixins";hash[_3f5+"type"]="dojoType";hash[_3f6+"id"]="data-dojo-id";}var i=0,item,_3f7=[],_3f8,_3f9;while(item=_3f1[i++]){var name=item.name,_3fa=name.toLowerCase(),_3fb=item.value;switch(hash[_3fa]||_3fa){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":_3f9=_3fb;break;case "data-dojo-id":case "jsid":_3f8=_3fb;break;case "data-dojo-attach-point":case "dojoattachpoint":_3f0.dojoAttachPoint=_3fb;break;case "data-dojo-attach-event":case "dojoattachevent":_3f0.dojoAttachEvent=_3fb;break;case "class":_3f0["class"]=node.className;break;case "style":_3f0["style"]=node.style&&node.style.cssText;break;default:if(!(name in _3ef)){var map=_3cf(ctor);name=map[_3fa]||name;}if(name in _3ef){switch(typeof _3ef[name]){case "string":_3f0[name]=_3fb;break;case "number":_3f0[name]=_3fb.length?Number(_3fb):NaN;break;case "boolean":_3f0[name]=_3fb.toLowerCase()!="false";break;case "function":if(_3fb===""||_3fb.search(/[^\w\.]+/i)!=-1){_3f0[name]=new Function(_3fb);}else{_3f0[name]=_3c2.getObject(_3fb,false)||new Function(_3fb);}_3f7.push(name);break;default:var pVal=_3ef[name];_3f0[name]=(pVal&&"length" in pVal)?(_3fb?_3fb.split(/\s*,\s*/):[]):(pVal instanceof Date)?(_3fb==""?new Date(""):_3fb=="now"?new Date():_3ca.fromISOString(_3fb)):(pVal instanceof _3c7)?(dojo.baseUrl+_3fb):_3c8.fromJson(_3fb);}}else{_3f0[name]=_3fb;}}}for(var j=0;j<_3f7.length;j++){var _3fc=_3f7[j].toLowerCase();node.removeAttribute(_3fc);node[_3fc]=null;}if(_3f9){try{_3f9=_3c8.fromJson.call(_3ec.propsThis,"{"+_3f9+"}");_3c2.mixin(_3f0,_3f9);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_3f9+"'");}}_3c2.mixin(_3f0,_3eb);if(!_3ed){_3ed=(ctor&&(ctor._noScript||_3ef._noScript)?[]:_3cc("> script[type^='dojo/']",node));}var _3fd=[],_3fe=[],_3ff=[],ons=[];if(_3ed){for(i=0;i<_3ed.length;i++){var _400=_3ed[i];node.removeChild(_400);var _401=(_400.getAttribute(_3f6+"event")||_400.getAttribute("event")),prop=_400.getAttribute(_3f6+"prop"),_402=_400.getAttribute(_3f6+"method"),_403=_400.getAttribute(_3f6+"advice"),_404=_400.getAttribute("type"),nf=this._functionFromScript(_400,_3f6);if(_401){if(_404=="dojo/connect"){_3fd.push({method:_401,func:nf});}else{if(_404=="dojo/on"){ons.push({event:_401,func:nf});}else{_3f0[_401]=nf;}}}else{if(_404=="dojo/aspect"){_3fd.push({method:_402,advice:_403,func:nf});}else{if(_404=="dojo/watch"){_3ff.push({prop:prop,func:nf});}else{_3fe.push(nf);}}}}}var _405=ctor.markupFactory||_3ef.markupFactory;var _406=_405?_405(_3f0,node,ctor):new ctor(_3f0,node);if(_3f8){_3c2.setObject(_3f8,_406);}for(i=0;i<_3fd.length;i++){_3c9[_3fd[i].advice||"after"](_406,_3fd[i].method,_3c2.hitch(_406,_3fd[i].func),true);}for(i=0;i<_3fe.length;i++){_3fe[i].call(_406);}for(i=0;i<_3ff.length;i++){_406.watch(_3ff[i].prop,_3ff[i].func);}for(i=0;i<ons.length;i++){don(_406,ons[i].event,ons[i].func);}return _406;},scan:function(root,_407){var list=[],mids=[],_408={};var _409=(_407.scope||dojo._scopeName)+"Type",_40a="data-"+(_407.scope||dojo._scopeName)+"-",_40b=_40a+"type",_40c=_40a+"textdir",_40d=_40a+"mixins";var node=root.firstChild;var _40e=_407.inherited;if(!_40e){function _40f(node,attr){return (node.getAttribute&&node.getAttribute(attr))||(node.parentNode&&_40f(node.parentNode,attr));};_40e={dir:_40f(root,"dir"),lang:_40f(root,"lang"),textDir:_40f(root,_40c)};for(var key in _40e){if(!_40e[key]){delete _40e[key];}}}var _410={inherited:_40e};var _411;var _412;function _413(_414){if(!_414.inherited){_414.inherited={};var node=_414.node,_415=_413(_414.parent);var _416={dir:node.getAttribute("dir")||_415.dir,lang:node.getAttribute("lang")||_415.lang,textDir:node.getAttribute(_40c)||_415.textDir};for(var key in _416){if(_416[key]){_414.inherited[key]=_416[key];}}}return _414.inherited;};while(true){if(!node){if(!_410||!_410.node){break;}node=_410.node.nextSibling;_412=false;_410=_410.parent;_411=_410.scripts;continue;}if(node.nodeType!=1){node=node.nextSibling;continue;}if(_411&&node.nodeName.toLowerCase()=="script"){type=node.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_411.push(node);}node=node.nextSibling;continue;}if(_412){node=node.nextSibling;continue;}var type=node.getAttribute(_40b)||node.getAttribute(_409);var _417=node.firstChild;if(!type&&(!_417||(_417.nodeType==3&&!_417.nextSibling))){node=node.nextSibling;continue;}var _418;var ctor=null;if(type){var _419=node.getAttribute(_40d),_41a=_419?[type].concat(_419.split(/\s*,\s*/)):[type];try{ctor=_3d2(_41a);}catch(e){}if(!ctor){_3c3.forEach(_41a,function(t){if(~t.indexOf("/")&&!_408[t]){_408[t]=true;mids[mids.length]=t;}});}var _41b=ctor&&!ctor.prototype._noScript?[]:null;_418={types:_41a,ctor:ctor,parent:_410,node:node,scripts:_41b};_418.inherited=_413(_418);list.push(_418);}else{_418={node:node,scripts:_411,parent:_410};}node=_417;_411=_41b;_412=ctor&&ctor.prototype.stopParser&&!(_407.template);_410=_418;}var d=new _3cb();if(mids.length){if(has("dojo-debug-messages")){console.warn("WARNING: Modules being Auto-Required: "+mids.join(", "));}_3c1(mids,function(){d.resolve(_3c3.filter(list,function(_41c){if(!_41c.ctor){try{_41c.ctor=_3d2(_41c.types);}catch(e){}}var _41d=_41c.parent;while(_41d&&!_41d.types){_41d=_41d.parent;}var _41e=_41c.ctor&&_41c.ctor.prototype;_41c.instantiateChildren=!(_41e&&_41e.stopParser&&!(_407.template));_41c.instantiate=!_41d||(_41d.instantiate&&_41d.instantiateChildren);return _41c.instantiate;}));});}else{d.resolve(list);}return d.promise;},_require:function(_41f){var hash=_3c8.fromJson("{"+_41f.innerHTML+"}"),vars=[],mids=[],d=new _3cb();for(var name in hash){vars.push(name);mids.push(hash[name]);}_3c1(mids,function(){for(var i=0;i<vars.length;i++){_3c2.setObject(vars[i],arguments[i]);}d.resolve(arguments);});return d.promise;},_scanAmd:function(root){var _420=new _3cb(),_421=_420.promise;_420.resolve(true);var self=this;_3cc("script[type='dojo/require']",root).forEach(function(node){_421=_421.then(function(){return self._require(node);});node.parentNode.removeChild(node);});return _421;},parse:function(_422,_423){var root;if(!_423&&_422&&_422.rootNode){_423=_422;root=_423.rootNode;}else{if(_422&&_3c2.isObject(_422)&&!("nodeType" in _422)){_423=_422;}else{root=_422;}}root=root?_3c5.byId(root):_3c6.body();_423=_423||{};var _424=_423.template?{template:true}:{},_425=[],self=this;var p=this._scanAmd(root,_423).then(function(){return self.scan(root,_423);}).then(function(_426){return _425=_425.concat(self._instantiate(_426,_424,_423));}).otherwise(function(e){console.error("dojo/parser::parse() error",e);throw e;});_3c2.mixin(_425,p);return _425;}};if(1){dojo.parser=_3d5;}if(_3c4.parseOnLoad){_3cd(100,_3d5,"parse");}return _3d5;});},"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n","dojo/dnd/Manager":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../_base/window","../dom-class","../Evented","../has","../keys","../on","../topic","../touch","./common","./autoscroll","./Avatar"],function(_427,_428,_429,lang,win,_42a,_42b,has,keys,on,_42c,_42d,dnd,_42e,_42f){var _430=_428("dojo.dnd.Manager",[_42b],{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[];},OFFSET_X:has("touch")?0:16,OFFSET_Y:has("touch")?-64:16,overSource:function(_431){if(this.avatar){this.target=(_431&&_431.targetState!="Disabled")?_431:null;this.canDropFlag=Boolean(this.target);this.avatar.update();}_42c.publish("/dnd/source/over",_431);},outSource:function(_432){if(this.avatar){if(this.target==_432){this.target=null;this.canDropFlag=false;this.avatar.update();_42c.publish("/dnd/source/over",null);}}else{_42c.publish("/dnd/source/over",null);}},startDrag:function(_433,_434,copy){_42e.autoScrollStart(win.doc);this.source=_433;this.nodes=_434;this.copy=Boolean(copy);this.avatar=this.makeAvatar();win.body().appendChild(this.avatar.node);_42c.publish("/dnd/start",_433,_434,this.copy);this.events=[on(win.doc,_42d.move,lang.hitch(this,"onMouseMove")),on(win.doc,_42d.release,lang.hitch(this,"onMouseUp")),on(win.doc,"keydown",lang.hitch(this,"onKeyDown")),on(win.doc,"keyup",lang.hitch(this,"onKeyUp")),on(win.doc,"dragstart",_429.stop),on(win.body(),"selectstart",_429.stop)];var c="dojoDnd"+(copy?"Copy":"Move");_42a.add(win.body(),c);},canDrop:function(flag){var _435=Boolean(this.target&&flag);if(this.canDropFlag!=_435){this.canDropFlag=_435;this.avatar.update();}},stopDrag:function(){_42a.remove(win.body(),["dojoDndCopy","dojoDndMove"]);_427.forEach(this.events,function(_436){_436.remove();});this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[];},makeAvatar:function(){return new _42f(this);},updateAvatar:function(){this.avatar.update();},onMouseMove:function(e){var a=this.avatar;if(a){_42e.autoScrollNodes(e);var s=a.node.style;s.left=(e.pageX+this.OFFSET_X)+"px";s.top=(e.pageY+this.OFFSET_Y)+"px";var copy=Boolean(this.source.copyState(dnd.getCopyKeyState(e)));if(this.copy!=copy){this._setCopyStatus(copy);}}if(has("touch")){e.preventDefault();}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dnd.getCopyKeyState(e)));_42c.publish("/dnd/drop/before",this.source,this.nodes,copy,this.target,e);_42c.publish("/dnd/drop",this.source,this.nodes,copy,this.target,e);}else{_42c.publish("/dnd/cancel");}this.stopDrag();}},onKeyDown:function(e){if(this.avatar){switch(e.keyCode){case keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy){this._setCopyStatus(copy);}break;case keys.ESCAPE:_42c.publish("/dnd/cancel");this.stopDrag();break;}}},onKeyUp:function(e){if(this.avatar&&e.keyCode==keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy){this._setCopyStatus(copy);}}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();_42a.replace(win.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"));}});dnd._manager=null;_430.manager=dnd.manager=function(){if(!dnd._manager){dnd._manager=new _430();}return dnd._manager;};return _430;});},"dijit/form/ToggleButton":function(){define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_437,_438,_439,_43a){return _437("dijit.form.ToggleButton",[_439,_43a],{baseClass:"dijitToggleButton",setChecked:function(_43b){_438.deprecated("setChecked("+_43b+") is deprecated. Use set('checked',"+_43b+") instead.","","2.0");this.set("checked",_43b);}});});},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(lang,_43c){var _43d={};lang.setObject("dojo.date.stamp",_43d);_43d.fromISOString=function(_43e,_43f){if(!_43d._isoRegExp){_43d._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _440=_43d._isoRegExp.exec(_43e),_441=null;if(_440){_440.shift();if(_440[1]){_440[1]--;}if(_440[6]){_440[6]*=1000;}if(_43f){_43f=new Date(_43f);_43c.forEach(_43c.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _43f["get"+prop]();}),function(_442,_443){_440[_443]=_440[_443]||_442;});}_441=new Date(_440[0]||1970,_440[1]||0,_440[2]||1,_440[3]||0,_440[4]||0,_440[5]||0,_440[6]||0);if(_440[0]<100){_441.setFullYear(_440[0]||1970);}var _444=0,_445=_440[7]&&_440[7].charAt(0);if(_445!="Z"){_444=((_440[8]||0)*60)+(Number(_440[9])||0);if(_445!="-"){_444*=-1;}}if(_445){_444-=_441.getTimezoneOffset();}if(_444){_441.setTime(_441.getTime()+_444*60000);}}return _441;};_43d.toISOString=function(_446,_447){var _448=function(n){return (n<10)?"0"+n:n;};_447=_447||{};var _449=[],_44a=_447.zulu?"getUTC":"get",date="";if(_447.selector!="time"){var year=_446[_44a+"FullYear"]();date=["0000".substr((year+"").length)+year,_448(_446[_44a+"Month"]()+1),_448(_446[_44a+"Date"]())].join("-");}_449.push(date);if(_447.selector!="date"){var time=[_448(_446[_44a+"Hours"]()),_448(_446[_44a+"Minutes"]()),_448(_446[_44a+"Seconds"]())].join(":");var _44b=_446[_44a+"Milliseconds"]();if(_447.milliseconds){time+="."+(_44b<100?"0":"")+_448(_44b);}if(_447.zulu){time+="Z";}else{if(_447.selector!="time"){var _44c=_446.getTimezoneOffset();var _44d=Math.abs(_44c);time+=(_44c>0?"-":"+")+_448(Math.floor(_44d/60))+":"+_448(_44d%60);}}_449.push(time);}return _449.join("T");};return _43d;});},"esri/layers/GridLayout":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Extent","esri/geometry/Polyline"],function(_44e,lang,_44f,has,_450,_451,_452,_453){var _454=_44e(null,{declaredClass:"esri.layers._GridLayout",constructor:function(_455,_456,_457,_458){this.origin=_455;this.cellWidth=_456.width;this.cellHeight=_456.height;this.mapWidth=_457.width;this.mapHeight=_457.height;this.srInfo=_458;},setResolution:function(_459){this._resolution=(_459.xmax-_459.xmin)/this.mapWidth;if(this.srInfo){var _45a=Math.round((2*this.srInfo.valid[1])/this._resolution),_45b=Math.round(_45a/this.cellWidth);this._frameStats=[_45b,0,_45b-1];}},getCellCoordinates:function(_45c){var res=this._resolution,_45d=this.origin;return {row:Math.floor((_45d.y-_45c.y)/(this.cellHeight*res)),col:Math.floor((_45c.x-_45d.x)/(this.cellWidth*res))};},normalize:function(col){var _45e=this._frameStats;if(_45e){var _45f=_45e[0],m180=_45e[1],p180=_45e[2];if(col<m180){col=col%_45f;col=col<m180?col+_45f:col;}else{if(col>p180){col=col%_45f;}}}return col;},intersects:function(_460,_461){var _462=this.srInfo;if(_462){return _44f.some(_461._getParts(_462),function(_463){return _460.intersects(_463.extent);});}else{return _460.intersects(_461);}},getCellExtent:function(row,col){var res=this._resolution,_464=this.origin,_465=this.cellWidth,_466=this.cellHeight;return new _452((col*_465*res)+_464.x,_464.y-((row+1)*_466*res),((col+1)*_465*res)+_464.x,_464.y-(row*_466*res),new _451(_464.spatialReference.toJson()));},getLatticeID:function(_467){var _468=this.getCellCoordinates({x:_467.xmin,y:_467.ymax}),_469=this.getCellCoordinates({x:_467.xmax,y:_467.ymin}),_46a=_468.row,_46b=_469.row,_46c=this.normalize(_468.col),_46d=this.normalize(_469.col);return _46a+"_"+_46b+"_"+_46c+"_"+_46d;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_46e,_46f){var _470=this.getCellCoordinates({x:_46e.xmin,y:_46e.ymax}),_471=this.getCellCoordinates({x:_46e.xmax,y:_46e.ymin}),_472=_470.row,_473=_471.row,_474=_470.col,_475=_471.col,_476=[],i,j,nj,_477=[],_478=[],len,xmin,xmax,ymin,ymax,_479=[],_47a,_47b;for(i=_472;i<=_473;i++){for(j=_474;j<=_475;j++){nj=this.normalize(j);_46e=this.getCellExtent(i,nj);_476.push({row:i,col:nj,extent:_46e,resolution:this._resolution});if(_46f){_477.push(_46e.xmin,_46e.xmax);_478.push(_46e.ymin,_46e.ymax);}}}_474=this.normalize(_474);_475=this.normalize(_475);_477.sort(this.sorter);_478.sort(this.sorter);len=_477.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_477[i]===_477[i+1]){_477.splice(i,1);}}}len=_478.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_478[i]===_478[i+1]){_478.splice(i,1);}}}if(_477.length&&_478.length){xmin=_477[0];xmax=_477[_477.length-1];ymin=_478[0];ymax=_478[_478.length-1];len=_477.length;for(i=0;i<len;i++){_479.push([[_477[i],ymax],[_477[i],ymin]]);}len=_478.length;for(i=0;i<len;i++){_479.push([[xmin,_478[i]],[xmax,_478[i]]]);}_47a=new _453({paths:_479,spatialReference:this.origin.spatialReference.toJson()});_47b=_472+"_"+_473+"_"+_474+"_"+_475;_476.push({latticeID:_47b,lattice:_47a,resolution:this._resolution});}return {minRow:_472,maxRow:_473,minCol:_474,maxCol:_475,cells:_476};}});if(has("extend-esri")){lang.setObject("layers._GridLayout",_454,_450);}return _454;});},"esri/layers/FeatureTemplate":function(){define("esri/layers/FeatureTemplate",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/graphic"],function(_47c,lang,has,_47d,_47e,_47f){var _480=_47c(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(json){if(json&&lang.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _481=json.prototype;this.prototype=new _47f(_481.geometry,null,_481.attributes);}},toJson:function(){return _47e.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});lang.mixin(_480,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});if(has("extend-esri")){lang.setObject("layers.FeatureTemplate",_480,_47d);}return _480;});},"dijit/form/NumberSpinner":function(){define("dijit/form/NumberSpinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","./_Spinner","./NumberTextBox"],function(_482,_483,keys,_484,_485){return _482("dijit.form.NumberSpinner",[_484,_485.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(val,_486){var tc=this.constraints,v=isNaN(val),_487=!isNaN(tc.max),_488=!isNaN(tc.min);if(v&&_486!=0){val=(_486>0)?_488?tc.min:_487?tc.max:0:_487?this.constraints.max:_488?tc.min:0;}var _489=val+_486;if(v||isNaN(_489)){return val;}if(_487&&(_489>tc.max)){_489=tc.max;}if(_488&&(_489<tc.min)){_489=tc.min;}return _489;},_onKeyPress:function(e){if((e.charOrCode==keys.HOME||e.charOrCode==keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var _48a=this.constraints[(e.charOrCode==keys.HOME?"min":"max")];if(typeof _48a=="number"){this._setValueAttr(_48a,false);}_483.stop(e);}}});});},"esri/dijit/editing/tools/Selection":function(){define("esri/dijit/editing/tools/Selection",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/Color","dojo/has","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/dijit/editing/tools/Edit","esri/dijit/editing/tools/SelectionTools","esri/dijit/editing/tools/DropDownToolBase","esri/kernel"],function(_48b,lang,_48c,_48d,_48e,has,_48f,_490,_491,Edit,_492,_493,_494){var _495=_48b([_493],{declaredClass:"esri.dijit.editing.tools.Selection",_enabled:true,activate:function(){this.inherited(arguments);this._sConnect=_48d.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd");},deactivate:function(){this.inherited(arguments);_48d.disconnect(this._sConnect);delete this._sConnect;},_initializeTool:function(){this._createSymbols();this._initializeLayers();this._toolTypes=["select","selectadd","selectremove"];},_onDrawEnd:function(_496){this.inherited(arguments);this._settings.editor._hideAttributeInspector();var _497=this._settings.layers;this._selectMethod=this._activeTool._selectMethod;this._settings.editor._selectionHelper.selectFeaturesByGeometry(_497,_496,this._selectMethod,lang.hitch(this,"onFinished"));},_createSymbols:function(){this._pointSelectionSymbol=new _48f(_48f.STYLE_CIRCLE,10,new _490(_490.STYLE_SOLID,new _48e([0,0,0]),1),new _48e([255,0,0,0.5]));this._polylineSelectionSymbol=new _490(_490.STYLE_SOLID,new _48e([0,200,255]),2);this._polygonSelectionSymbol=new _491(_491.STYLE_SOLID,new _490(_490.STYLE_SOLID,new _48e([0,0,0]),1),new _48e([0,200,255,0.5]));},_initializeLayers:function(){var _498=this._settings.layers;_48c.forEach(_498,this._setSelectionSymbol,this);},_setSelectionSymbol:function(_499){var _49a=null;switch(_499.geometryType){case "esriGeometryPoint":_49a=this._pointSelectionSymbol;break;case "esriGeometryPolyline":_49a=this._polylineSelectionSymbol;break;case "esriGeometryPolygon":_49a=this._polygonSelectionSymbol;break;}_499.setSelectionSymbol(_499._selectionSymbol||_49a);},_createTools:function(){_48c.forEach(this._toolTypes,this._createTool,this);this.inherited(arguments);},_createTool:function(_49b){var _49c=lang.mixin(_492[_49b],{settings:this._settings,onClick:lang.hitch(this,"onItemClicked",_492[_49b].id)});this._tools[_49b.toUpperCase()]=new Edit(_49c);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Selection",_495,_494);}return _495;});},"dijit/form/DateTextBox":function(){define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(_49d,_49e,_49f){return _49d("dijit.form.DateTextBox",_49f,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:_49e,_selector:"date",value:new Date("")});});},"esri/undoManager":function(){define(["dojo/_base/declare","dojo/has","esri/kernel","dojo/has!extend-esri?esri/OperationBase"],function(_4a0,has,_4a1){var _4a2=_4a0(null,{declaredClass:"esri.UndoManager",maxOperations:10,canUndo:false,canRedo:false,position:0,length:0,onUndo:function(){},onRedo:function(){},onAdd:function(){},onChange:function(){},constructor:function(_4a3){_4a3=_4a3||{};if(_4a3.maxOperations){this.maxOperations=_4a3.maxOperations;}this._historyStack=[];},add:function(_4a4){if(this.maxOperations>0){while(this._historyStack.length>=this.maxOperations){this._historyStack.shift();}}this._historyStack.splice(this.position,0,_4a4);this.position++;this.clearRedo();this.onAdd();this._checkAvailability();},undo:function(){if(this.position===0){return null;}var _4a5=this.peekUndo();this.position--;if(_4a5){_4a5.performUndo();}this.onUndo();this._checkAvailability();},redo:function(){if(this.position===this._historyStack.length){return null;}var _4a6=this.peekRedo();this.position++;if(_4a6){_4a6.performRedo();}this.onRedo();this._checkAvailability();},_checkAvailability:function(){this.length=this._historyStack.length;if(this.length===0){this.canRedo=false;this.canUndo=false;}else{if(this.position===0){this.canRedo=true;this.canUndo=false;}else{if(this.position===this.length){this.canUndo=true;this.canRedo=false;}else{this.canUndo=true;this.canRedo=true;}}}this.onChange();},clearUndo:function(){this._historyStack.splice(0,this.position);this.position=0;this._checkAvailability();},clearRedo:function(){this._historyStack.splice(this.position,this._historyStack.length-this.position);this.position=this._historyStack.length;this._checkAvailability();},peekUndo:function(){if(this._historyStack.length>0&&this.position>0){return this.get(this.position-1);}},peekRedo:function(){if(this._historyStack.length>0&&this.position<this._historyStack.length){return this.get(this.position);}},get:function(idx){return this._historyStack[idx];},remove:function(idx){if(this._historyStack.length>0){this._historyStack.splice(idx,1);if(this.position>0){if(idx<this.position){this.position--;}}this._checkAvailability();}},destroy:function(){this._historyStack=null;}});if(has("extend-esri")){_4a1.UndoManager=_4a2;}return _4a2;});},"dijit/form/ComboButton":function(){require({cache:{"url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:_onClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\" role=\"presentation\"\n\t\t/></td></tr></tbody\n></table>\n"}});define("dijit/form/ComboButton",["dojo/_base/declare","dojo/_base/event","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html"],function(_4a7,_4a8,keys,_4a9,_4aa,_4ab){return _4a7("dijit.form.ComboButton",_4aa,{templateString:_4ab,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(evt){if(evt.charOrCode==keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){_4a9.focus(this._popupStateNode);_4a8.stop(evt);}},_onArrowKeyPress:function(evt){if(evt.charOrCode==keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){_4a9.focus(this.titleNode);_4a8.stop(evt);}},focus:function(_4ac){if(!this.disabled){_4a9.focus(_4ac=="start"?this.titleNode:this._popupStateNode);}}});});},"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n","dijit/form/_AutoCompleterMixin":function(){define("dijit/form/_AutoCompleterMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/dom-attr","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","dojo/string","./DataList","../registry","./_TextBoxMixin","./_SearchMixin"],function(_4ad,_4ae,_4af,_4b0,keys,lang,_4b1,_4b2,has,_4b3,_4b4,_4b5,_4b6,_4b7){return _4ae("dijit.form._AutoCompleterMixin",_4b7,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_4b8){var pos=0;if(typeof (_4b8.selectionStart)=="number"){pos=_4b8.selectionStart;}else{if(has("ie")){var tr=_4b8.ownerDocument.selection.createRange().duplicate();var ntr=_4b8.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_4b9,_4ba){_4ba=parseInt(_4ba);_4b6.selectInputText(_4b9,_4ba,_4ba);},_setDisabledAttr:function(_4bb){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",_4bb?"true":"false");},_onKey:function(evt){if(evt.charCode>=32){return;}var key=evt.charCode||evt.keyCode;if(key==keys.ALT||key==keys.CTRL||key==keys.META||key==keys.SHIFT){return;}var pw=this.dropDown;var _4bc=null;this._abortQuery();this.inherited(arguments);if(evt.altKey||evt.ctrlKey||evt.metaKey){return;}if(this._opened){_4bc=pw.getHighlightedOption();}switch(key){case keys.PAGE_DOWN:case keys.DOWN_ARROW:case keys.PAGE_UP:case keys.UP_ARROW:if(this._opened){this._announceOption(_4bc);}_4b0.stop(evt);break;case keys.ENTER:if(_4bc){if(_4bc==pw.nextButton){this._nextSearch(1);_4b0.stop(evt);break;}else{if(_4bc==pw.previousButton){this._nextSearch(-1);_4b0.stop(evt);break;}}_4b0.stop(evt);}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}case keys.TAB:var _4bd=this.get("displayedValue");if(pw&&(_4bd==pw._messages["previousMessage"]||_4bd==pw._messages["nextMessage"])){break;}if(_4bc){this._selectOption(_4bc);}case keys.ESCAPE:if(this._opened){this._lastQuery=null;this.closeDropDown();}break;}},_autoCompleteText:function(text){var fn=this.focusNode;_4b6.selectInputText(fn,fn.value.length);var _4be=this.ignoreCase?"toLowerCase":"substr";if(text[_4be](0).indexOf(this.focusNode.value[_4be](0))==0){var cpos=this.autoComplete?this._getCaretPos(fn):fn.value.length;if((cpos+1)>fn.value.length){fn.value=text;_4b6.selectInputText(fn,cpos);}}else{fn.value=text;_4b6.selectInputText(fn);}},_openResultList:function(_4bf,_4c0,_4c1){var _4c2=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();if(!_4bf.length&&_4c1.start==0){this.closeDropDown();return;}this._nextSearch=this.dropDown.onPage=lang.hitch(this,function(_4c3){_4bf.nextPage(_4c3!==-1);this.focus();});this.dropDown.createOptions(_4bf,_4c1,lang.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if("direction" in _4c1){if(_4c1.direction){this.dropDown.highlightFirstOption();}else{if(!_4c1.direction){this.dropDown.highlightLastOption();}}if(_4c2){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_4c0[this.searchAttr].toString())){this._announceOption(this.dropDown.containerNode.firstChild.nextSibling);}}},_showResultList:function(){this.closeDropDown(true);this.openDropDown();this.domNode.setAttribute("aria-expanded","true");},loadDropDown:function(){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);this.domNode.setAttribute("aria-expanded","false");this.focusNode.removeAttribute("aria-activedescendant");}},_setBlurValue:function(){var _4c4=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_4c4==pw._messages["previousMessage"]||_4c4==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_4c4);}else{if(this.value!=this._lastValueReported){this._handleOnChange(this.value,true);}this._refreshState();}}},_setItemAttr:function(item,_4c5,_4c6){var _4c7="";if(item){if(!_4c6){_4c6=this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr];}_4c7=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_4c6;}this.set("value",_4c7,_4c5,_4c6,item);},_announceOption:function(node){if(!node){return;}var _4c8;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_4c8=node.innerHTML;this.item=undefined;this.value="";}else{var item=this.dropDown.items[node.getAttribute("item")];_4c8=(this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr]).toString();this.set("item",item,false,_4c8);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",_4af.get(node,"id"));this._autoCompleteText(_4c8);},_selectOption:function(_4c9){this.closeDropDown();if(_4c9){this._announceOption(_4c9);}this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this.item=undefined;this.inherited(arguments);},_startSearch:function(key){if(!this.dropDown){var _4ca=this.id+"_popup",_4cb=lang.isString(this.dropDownClass)?lang.getObject(this.dropDownClass,false):this.dropDownClass;this.dropDown=new _4cb({onChange:lang.hitch(this,this._selectOption),id:_4ca,dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",_4ca);}this._lastInput=key;this.inherited(arguments);},_getValueField:function(){return this.searchAttr;},postMixInProperties:function(){this.inherited(arguments);if(!this.store){var _4cc=this.srcNodeRef;this.store=new _4b4({},_4cc);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _4cd=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(item,_4cd):item[_4cd];}}}},postCreate:function(){var _4ce=_4b1("label[for=\""+this.id+"\"]");if(_4ce.length){if(!_4ce[0].id){_4ce[0].id=this.id+"_label";}this.domNode.setAttribute("aria-labelledby",_4ce[0].id);}this.inherited(arguments);this.connect(this,"onSearch","_openResultList");},_getMenuLabelFromItem:function(item){var _4cf=this.labelFunc(item,this.store),_4d0=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_4cf=this.doHighlight(_4cf,this._lastInput);_4d0="html";}return {html:_4d0=="html",label:_4cf};},doHighlight:function(_4d1,find){var _4d2=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=_4b2.escapeString(find);return this._escapeHtml(_4d1.replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_4d2),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_4d3){return (_4d3._oldAPI?_4d3.getValue(item,this.labelAttr||this.searchAttr):item[this.labelAttr||this.searchAttr]).toString();},_setValueAttr:function(_4d4,_4d5,_4d6,item){this._set("item",item||null);if(_4d4==null){_4d4="";}this.inherited(arguments);},_setTextDirAttr:function(_4d7){this.inherited(arguments);if(this.dropDown){this.dropDown._set("textDir",_4d7);}}});});},"dojox/grid/Selection":function(){define("dojox/grid/Selection",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-attr"],function(_4d8,_4d9,lang,_4da){return _4d8("dojox.grid.Selection",null,{constructor:function(_4db){this.grid=_4db;this.selected=[];this.setMode(_4db.selectionMode);},mode:"extended",selected:null,updating:0,selectedIndex:-1,rangeStartIndex:-1,setMode:function(mode){if(this.selected.length){this.deselectAll();}if(mode!="extended"&&mode!="multiple"&&mode!="single"&&mode!="none"){this.mode="extended";}else{this.mode=mode;}},onCanSelect:function(_4dc){return this.grid.onCanSelect(_4dc);},onCanDeselect:function(_4dd){return this.grid.onCanDeselect(_4dd);},onSelected:function(_4de){},onDeselected:function(_4df){},onChanging:function(){},onChanged:function(){},isSelected:function(_4e0){if(this.mode=="none"){return false;}return this.selected[_4e0];},getFirstSelected:function(){if(!this.selected.length||this.mode=="none"){return -1;}for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getNextSelected:function(_4e1){if(this.mode=="none"){return -1;}for(var i=_4e1+1,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getSelected:function(){var _4e2=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_4e2.push(i);}}return _4e2;},getSelectedCount:function(){var c=0;for(var i=0;i<this.selected.length;i++){if(this.selected[i]){c++;}}return c;},_beginUpdate:function(){if(this.updating===0){this.onChanging();}this.updating++;},_endUpdate:function(){this.updating--;if(this.updating===0){this.onChanged();}},select:function(_4e3){if(this.mode=="none"){return;}if(this.mode!="multiple"){this.deselectAll(_4e3);this.addToSelection(_4e3);}else{this.toggleSelect(_4e3);}},addToSelection:function(_4e4){if(this.mode=="none"){return;}if(lang.isArray(_4e4)){_4d9.forEach(_4e4,this.addToSelection,this);return;}_4e4=Number(_4e4);if(this.selected[_4e4]){this.selectedIndex=_4e4;}else{if(this.onCanSelect(_4e4)!==false){this.selectedIndex=_4e4;var _4e5=this.grid.getRowNode(_4e4);if(_4e5){_4da.set(_4e5,"aria-selected","true");}this._beginUpdate();this.selected[_4e4]=true;this.onSelected(_4e4);this._endUpdate();}}},deselect:function(_4e6){if(this.mode=="none"){return;}if(lang.isArray(_4e6)){_4d9.forEach(_4e6,this.deselect,this);return;}_4e6=Number(_4e6);if(this.selectedIndex==_4e6){this.selectedIndex=-1;}if(this.selected[_4e6]){if(this.onCanDeselect(_4e6)===false){return;}var _4e7=this.grid.getRowNode(_4e6);if(_4e7){_4da.set(_4e7,"aria-selected","false");}this._beginUpdate();delete this.selected[_4e6];this.onDeselected(_4e6);this._endUpdate();}},setSelected:function(_4e8,_4e9){this[(_4e9?"addToSelection":"deselect")](_4e8);},toggleSelect:function(_4ea){if(lang.isArray(_4ea)){_4d9.forEach(_4ea,this.toggleSelect,this);return;}this.setSelected(_4ea,!this.selected[_4ea]);},_range:function(_4eb,inTo,func){var s=(_4eb>=0?_4eb:inTo),e=inTo;if(s>e){e=s;s=inTo;}for(var i=s;i<=e;i++){func(i);}},selectRange:function(_4ec,inTo){this._range(_4ec,inTo,lang.hitch(this,"addToSelection"));},deselectRange:function(_4ed,inTo){this._range(_4ed,inTo,lang.hitch(this,"deselect"));},insert:function(_4ee){this.selected.splice(_4ee,0,false);if(this.selectedIndex>=_4ee){this.selectedIndex++;}},remove:function(_4ef){this.selected.splice(_4ef,1);if(this.selectedIndex>=_4ef){this.selectedIndex--;}},deselectAll:function(_4f0){for(var i in this.selected){if((i!=_4f0)&&(this.selected[i]===true)){this.deselect(i);}}},clickSelect:function(_4f1,_4f2,_4f3){if(this.mode=="none"){return;}this._beginUpdate();if(this.mode!="extended"){this.select(_4f1);}else{if(!_4f3||this.rangeStartIndex<0){this.rangeStartIndex=_4f1;}if(!_4f2){this.deselectAll(_4f1);}if(_4f3){this.selectRange(this.rangeStartIndex,_4f1);}else{if(_4f2){this.toggleSelect(_4f1);}else{this.addToSelection(_4f1);}}}this._endUpdate();},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,dojo.isCopyKey(e),e.shiftKey);},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate();}});});},"dijit/form/MappedTextBox":function(){define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(_4f4,_4f5,_4f6){return _4f4("dijit.form.MappedTextBox",_4f6,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},_setNameAttr:null,serialize:function(val){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=_4f5.place("<input type='hidden'"+(this.name?" name=\""+this.name.replace(/"/g,"&quot;")+"\"":"")+"/>",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});});},"dijit/form/ComboBoxMixin":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/ComboBoxMixin",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(_4f7,_4f8,_4f9,lang,_4fa,_4fb,_4fc,_4fd,_4fe){return _4f7("dijit.form.ComboBoxMixin",[_4fd,_4fb],{dropDownClass:_4fc,hasDownArrow:true,templateString:_4fe,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(val){this._set("hasDownArrow",val);this._buttonNode.style.display=val?"":"none";},_showResultList:function(){this.displayMessage("");this.inherited(arguments);},_setStoreAttr:function(_4ff){if(!_4ff.get){lang.mixin(_4ff,{_oldAPI:true,get:function(id){var _500=new _4f8();this.fetchItemByIdentity({identity:id,onItem:function(_501){_500.resolve(_501);},onError:function(_502){_500.reject(_502);}});return _500.promise;},query:function(_503,_504){var _505=new _4f8(function(){_506.abort&&_506.abort();});_505.total=new _4f8();var _506=this.fetch(lang.mixin({query:_503,onBegin:function(_507){_505.total.resolve(_507);},onComplete:function(_508){_505.resolve(_508);},onError:function(_509){_505.reject(_509);}},_504));return _4fa(_505);}});}this._set("store",_4ff);},postMixInProperties:function(){var _50a=this.params.store||this.store;if(_50a){this._setStoreAttr(_50a);}this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var _50b=this.declaredClass;lang.mixin(this.store,{getValue:function(item,attr){_4f9.deprecated(_50b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return item[attr];},getLabel:function(item){_4f9.deprecated(_50b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return item.name;},fetch:function(args){_4f9.deprecated(_50b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");var shim=["dojo/data/ObjectStore"];require(shim,lang.hitch(this,function(_50c){new _50c({objectStore:this}).fetch(args);}));}});}}});});},"dojo/_base/query":function(){define(["../query","./NodeList"],function(_50d){return _50d;});},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_50e,_50f,dom,_510,keys,lang,on,_511){var _512=_50f("dijit.form._TextBoxMixin",null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_513,_514,_515){var _516;if(_513!==undefined){_516=this.filter(_513);if(typeof _515!="string"){if(_516!==null&&((typeof _516!="number")||!isNaN(_516))){_515=this.filter(this.format(_516,this.constraints));}else{_515="";}}}if(_515!=null&&((typeof _515)!="number"||!isNaN(_515))&&this.textbox.value!=_515){this.textbox.value=_515;this._set("displayedValue",this.get("displayedValue"));}if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_515);}this.inherited(arguments,[_516,_514]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_517){if(_517==null){_517="";}else{if(typeof _517!="string"){_517=String(_517);}}this.textbox.value=_517;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_517);}},format:function(_518){return _518==null?"":(_518.toString?_518.toString():_518);},parse:function(_519){return _519;},_refreshState:function(){},onInput:function(){},__skipInputEvent:false,_onInput:function(evt){if(this.textDir=="auto"){this.applyTextDir(this.focusNode,this.focusNode.value);}this._processInput(evt);},_processInput:function(evt){this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);var _51a=function(e){var _51b;if(e.type=="keydown"){_51b=e.keyCode;switch(_51b){case keys.SHIFT:case keys.ALT:case keys.CTRL:case keys.META:case keys.CAPS_LOCK:case keys.NUM_LOCK:case keys.SCROLL_LOCK:return;}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(_51b){case keys.NUMPAD_0:case keys.NUMPAD_1:case keys.NUMPAD_2:case keys.NUMPAD_3:case keys.NUMPAD_4:case keys.NUMPAD_5:case keys.NUMPAD_6:case keys.NUMPAD_7:case keys.NUMPAD_8:case keys.NUMPAD_9:case keys.NUMPAD_MULTIPLY:case keys.NUMPAD_PLUS:case keys.NUMPAD_ENTER:case keys.NUMPAD_MINUS:case keys.NUMPAD_PERIOD:case keys.NUMPAD_DIVIDE:return;}if((_51b>=65&&_51b<=90)||(_51b>=48&&_51b<=57)||_51b==keys.SPACE){return;}var _51c=false;for(var i in keys){if(keys[i]===e.keyCode){_51c=true;break;}}if(!_51c){return;}}}_51b=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;if(!_51b){_51b=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==keys.SPACE?String.fromCharCode(e.keyCode):e.keyCode;}if(!_51b){_51b=229;}if(e.type=="keypress"){if(typeof _51b!="string"){return;}if((_51b>="a"&&_51b<="z")||(_51b>="A"&&_51b<="Z")||(_51b>="0"&&_51b<="9")||(_51b===" ")){if(e.ctrlKey||e.metaKey||e.altKey){return;}}}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=false;return;}}else{this.__skipInputEvent=true;}var faux={faux:true},attr;for(attr in e){if(attr!="layerX"&&attr!="layerY"){var v=e[attr];if(typeof v!="function"&&typeof v!="undefined"){faux[attr]=v;}}}lang.mixin(faux,{charOrCode:_51b,_wasConsumed:false,preventDefault:function(){faux._wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});if(this.onInput(faux)===false){faux.preventDefault();faux.stopPropagation();}if(faux._wasConsumed){return;}this.defer(function(){this._onInput(faux);});};this.own(on(this.textbox,"keydown, keypress, paste, cut, input, compositionend",lang.hitch(this,_51a)));},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=lang.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;if(!this._isTextSelected()){_512.selectInputText(this.textbox);}});this.defer(function(){if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;}},500);}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);},_setTextDirAttr:function(_51d){if(!this._created||this.textDir!=_51d){this._set("textDir",_51d);this.applyTextDir(this.focusNode,this.focusNode.value);}}});_512._setSelectionRange=_511._setSelectionRange=function(_51e,_51f,stop){if(_51e.setSelectionRange){_51e.setSelectionRange(_51f,stop);}};_512.selectInputText=_511.selectInputText=function(_520,_521,stop){_520=dom.byId(_520);if(isNaN(_521)){_521=0;}if(isNaN(stop)){stop=_520.value?_520.value.length:0;}try{_520.focus();_512._setSelectionRange(_520,_521,stop);}catch(e){}};return _512;});},"dijit/form/SimpleTextarea":function(){define("dijit/form/SimpleTextarea",["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(_522,_523,has,_524){return _522("dijit.form.SimpleTextarea",_524,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(has("ie")&&this.cols){_523.add(this.textbox,"dijitTextAreaCols");}},filter:function(_525){if(_525){_525=_525.replace(/\r/g,"");}return this.inherited(arguments);},_onInput:function(e){if(this.maxLength){var _526=parseInt(this.maxLength);var _527=this.textbox.value.replace(/\r/g,"");var _528=_527.length-_526;if(_528>0){var _529=this.textbox;if(_529.selectionStart){var pos=_529.selectionStart;var cr=0;if(has("opera")){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_527.substring(0,pos-_528-cr)+_527.substring(pos-cr);_529.setSelectionRange(pos-_528,pos-_528);}else{if(this.ownerDocument.selection){_529.focus();var _52a=this.ownerDocument.selection.createRange();_52a.moveStart("character",-_528);_52a.text="";_52a.select();}}}}this.inherited(arguments);}});});},"url:esri/dijit/editing/templates/TemplatePicker.html":"<div class=\"templatePicker\">\r\n\r\n  <table dojoType=\"dojox.grid.DataGrid\" noDataMessage=\"${emptyMessage}\" selectionMode=\"none\" autoHeight=\"${_rows}\" autoWidth=\"${_autoWidth}\"\r\n         query=\"{ query: '*' }\" dojoAttachPoint=\"grid\" class=\"grid\">\r\n  </table>\r\n  \r\n</div>","esri/toolbars/_Box":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/has","dojo/dom-style","dojox/gfx/Moveable","dojox/gfx/matrix","esri/kernel","esri/lang","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/webMercatorUtils","esri/geometry/jsonUtils","esri/graphic"],function(_52b,lang,_52c,_52d,has,_52e,_52f,_530,_531,_532,_533,_534,_535,_536,_537){var BOX=_52b(null,{declaredClass:"esri.toolbars._Box",constructor:function(_538,map,_539,_53a,_53b,_53c){this._graphic=_538;this._map=map;this._toolbar=_539;this._scale=_53a;this._rotate=_53b;this._defaultEventArgs={};this._scaleEvent="Scale";this._rotateEvent="Rotate";this._uniformScaling=_53c;var _53d=_539._options;this._markerSymbol=_53d.boxHandleSymbol;this._lineSymbol=_53d.boxLineSymbol;this._moveStartHandler=lang.hitch(this,this._moveStartHandler);this._firstMoveHandler=lang.hitch(this,this._firstMoveHandler);this._moveStopHandler=lang.hitch(this,this._moveStopHandler);this._moveHandler=lang.hitch(this,this._moveHandler);this._init();},destroy:function(){this._cleanUp();this._graphic=this._map=this._toolbar=this._markerSymbol=this._lineSymbol=null;},refresh:function(){this._draw();},suspend:function(){_52c.forEach(this._getAllGraphics(),function(g){g.hide();});},resume:function(){_52c.forEach(this._getAllGraphics(),function(g){g.show();});this._draw();},_init:function(){this._draw();},_cleanUp:function(){if(this._connects){_52c.forEach(this._connects,_52d.disconnect);}var _53e=this._toolbar._scratchGL;if(this._anchors){_52c.forEach(this._anchors,function(info){_53e.remove(info.graphic);var mov=info.moveable;if(mov){mov.destroy();}});}if(this._box){_53e.remove(this._box);}this._box=this._anchors=this._connects=null;},_draw:function(){if(!this._graphic.getDojoShape()){this._cleanUp();return;}var map=this._map,_53f=this._toolbar._scratchGL;var _540=this._getBoxCoords();var _541=new _534(map.spatialReference);var path=lang.clone(_52c.filter(_540,function(pt,_542){return (_542!==8&&_542%2===0);}));if(path[0]){path.push([path[0][0],path[0][1]]);}_541.addPath(path);if(this._rotate){_541.addPath([_540[1],_540[8]]);}if(this._box){this._box.setGeometry(_541);}else{this._box=new _537(_541,this._lineSymbol);_53f.add(this._box);}if(this._anchors){_52c.forEach(this._anchors,function(info,_543){if(!this._scale){_543=8;}var _544=new _533(_540[_543],map.spatialReference);info.graphic.setGeometry(_544);var mov=info.moveable,_545=info.graphic.getDojoShape();if(_545){if(!mov){info.moveable=this._getMoveable(info.graphic,_543);}else{if(_545!==mov.shape){mov.destroy();info.moveable=this._getMoveable(info.graphic,_543);}}}},this);}else{this._anchors=[];this._connects=[];_52c.forEach(_540,function(_546,_547){if(!this._scale&&_547<8){return;}_546=new _533(_546,map.spatialReference);var _548=new _537(_546,this._markerSymbol);_53f.add(_548);this._anchors.push({graphic:_548,moveable:this._getMoveable(_548,_547)});},this);}},_getBoxCoords:function(_549){var _54a=this._graphic,map=this._map,bbox=this._getTransformedBoundingBox(_54a),_54b=[],pt,next,_54c;_52c.forEach(bbox,function(_54d,_54e,arr){pt=_54d;next=arr[_54e+1];if(!next){next=arr[0];}_54c={x:(pt.x+next.x)/2,y:(pt.y+next.y)/2};if(!_549){pt=map.toMap(pt);_54c=map.toMap(_54c);}_54b.push([pt.x,pt.y]);_54b.push([_54c.x,_54c.y]);});if(this._rotate){var _54f=lang.clone(_54b[1]);_54f=_549?{x:_54f[0],y:_54f[1]}:map.toScreen({x:_54f[0],y:_54f[1],spatialReference:map.spatialReference});_54f.y-=this._toolbar._options.rotateHandleOffset;if(!_549){_54f=map.toMap(_54f);}_54b.push([_54f.x,_54f.y]);}return _54b;},_getTransformedBoundingBox:function(_550){var map=this._map,_551=_550.geometry.getExtent(),_552=_550.geometry.spatialReference,_553=new _533(_551.xmin,_551.ymax,_552),_554=new _533(_551.xmax,_551.ymin,_552);_553=map.toScreen(_553);_554=map.toScreen(_554);return [{x:_553.x,y:_553.y},{x:_554.x,y:_553.y},{x:_554.x,y:_554.y},{x:_553.x,y:_554.y}];},_getAllGraphics:function(){var _555=[this._box];if(this._anchors){_52c.forEach(this._anchors,function(_556){_555.push(_556.graphic);});}_555=_52c.filter(_555,_532.isDefined);return _555;},_getMoveable:function(_557,_558){var _559=_557.getDojoShape();if(!_559){return;}var _55a=new _52f(_559);_55a._index=_558;this._connects.push(_52d.connect(_55a,"onMoveStart",this._moveStartHandler));this._connects.push(_52d.connect(_55a,"onFirstMove",this._firstMoveHandler));this._connects.push(_52d.connect(_55a,"onMoveStop",this._moveStopHandler));_55a.onMove=this._moveHandler;var node=_559.getEventSource();if(node){_52e.set(node,"cursor",this._toolbar._cursors["box"+_558]);}return _55a;},_moveStartHandler:function(_55b){this._toolbar["on"+(_55b.host._index===8?this._rotateEvent:this._scaleEvent)+"Start"](this._graphic);},_firstMoveHandler:function(_55c){var _55d=_55c.host._index,_55e=(this._wrapOffset=_55c.host.shape._wrapOffsets[0]||0),_55f=this._graphic.getLayer()._div.getTransform(),mx=_530,_560,_561,_562,_563=_52c.map(this._getBoxCoords(true),function(arr){return {x:arr[0]+_55e,y:arr[1]};});_562={x:_563[1].x,y:_563[3].y};this._centerCoord=mx.multiplyPoint(mx.invert(_55f),_562);if(_55d===8){_560=mx.multiplyPoint(mx.invert(_55f),_563[1]);this._startLine=[this._centerCoord,_560];this._moveLine=lang.clone(this._startLine);}else{_560=mx.multiplyPoint(mx.invert(_55f),_563[_55d]);_561=mx.multiplyPoint(mx.invert(_55f),_563[(_55d+4)%8]);this._firstMoverToCenter=Math.sqrt((_560.x-this._centerCoord.x)*(_560.x-this._centerCoord.x)+(_560.y-this._centerCoord.y)*(_560.y-this._centerCoord.y));this._startBox=_561;this._startBox.width=(_563[4].x-_563[0].x);this._startBox.height=(_563[4].y-_563[0].y);this._moveBox=lang.clone(this._startBox);this._xfactor=_560.x>_561.x?1:-1;this._yfactor=_560.y>_561.y?1:-1;if(_55d===1||_55d===5){this._xfactor=0;}else{if(_55d===3||_55d===7){this._yfactor=0;}}}this._toolbar._beginOperation("BOX");this._toolbar["on"+(_55d===8?this._rotateEvent:this._scaleEvent)+"FirstMove"](this._graphic);},_moveHandler:function(_564,_565){var _566=_564.host._index,args=this._defaultEventArgs,_567,move,tx,pt,_568,_569,_56a,_56b=0,_56c=0,_56d,_56e,_56f;args.angle=0;args.scaleX=1;args.scaleY=1;if(_566===8){_567=this._startLine;move=this._moveLine;pt=move[1];pt.x+=_565.dx;pt.y+=_565.dy;_568=this._getAngle(_567,move);tx=_530.rotategAt(_568,_567[0]);this._graphic.getDojoShape().setTransform(tx);args.transform=tx;args.angle=_568;args.around=_567[0];}else{_567=this._startBox;move=this._moveBox;move.width+=(_565.dx*this._xfactor);move.height+=(_565.dy*this._yfactor);if(this._uniformScaling){_56d=move.x+this._xfactor*move.width;_56e=move.y+this._yfactor*move.height;_56f=Math.sqrt((_56d-this._centerCoord.x)*(_56d-this._centerCoord.x)+(_56e-this._centerCoord.y)*(_56e-this._centerCoord.y));_569=_56a=_56f/this._firstMoverToCenter;_56b=this._xfactor*_567.width/2;_56c=this._yfactor*_567.height/2;}else{_569=move.width/_567.width;_56a=move.height/_567.height;}if(isNaN(_569)||_569===Infinity||_569===-Infinity){_569=1;}if(isNaN(_56a)||_56a===Infinity||_56a===-Infinity){_56a=1;}tx=_530.scaleAt(_569,_56a,_567.x+_56b,_567.y+_56c);this._graphic.getDojoShape().setTransform(tx);args.transform=tx;args.scaleX=_569;args.scaleY=_56a;args.around={x:_567.x+_56b,y:_567.y+_56c};}this._toolbar["on"+(_566===8?this._rotateEvent:this._scaleEvent)](this._graphic,args);},_moveStopHandler:function(_570){var _571=this._graphic,_572=this._toolbar,_573=_572._geo?_535.geographicToWebMercator(_571.geometry):_571.geometry,_574=_573.spatialReference,_575=_571.getDojoShape(),_576=_575.getTransform(),_577=_571.getLayer()._div.getTransform();_573=_573.toJson();this._updateSegments(_573.paths||_573.rings,_576,_577,_574);_575.setTransform(null);_573=_536.fromJson(_573);_571.setGeometry(_572._geo?_535.webMercatorToGeographic(_573,true):_573);this._draw();this._startBox=this._moveBox=this._xfactor=this._yfactor=null;this._startLine=this._moveLine=null;_572._endOperation("BOX");this._defaultEventArgs.transform=_576;_572["on"+(_570.host._index===8?this._rotateEvent:this._scaleEvent)+"Stop"](this._graphic,this._defaultEventArgs);},_updateSegments:function(_578,_579,_57a,_57b){var mx=_530,map=this._map,_57c=this._wrapOffset||0;_52c.forEach(_578,function(_57d){_52c.forEach(_57d,function(_57e){var _57f=map.toScreen({x:_57e[0],y:_57e[1],spatialReference:_57b},true);_57f.x+=_57c;_57f=mx.multiplyPoint([_57a,_579,mx.invert(_57a)],_57f);_57f.x-=_57c;var _580=map.toMap(_57f);_57e[0]=_580.x;_57e[1]=_580.y;});});},_getAngle:function(_581,_582){var _583=Math.atan2(_581[0].y-_581[1].y,_581[0].x-_581[1].x)*180/Math.PI,_584=Math.atan2(_582[0].y-_582[1].y,_582[0].x-_582[1].x)*180/Math.PI;return _584-_583;}});if(has("extend-esri")){lang.setObject("toolbars._Box",BOX,_531);}return BOX;});},"dijit/_editor/plugins/TextColor":function(){define("dijit/_editor/plugins/TextColor",["require","dojo/colors","dojo/_base/declare","dojo/_base/lang","../_Plugin","../../form/DropDownButton"],function(_585,_586,_587,lang,_588,_589){var _58a=_587("dijit._editor.plugins.TextColor",_588,{buttonClass:_589,useDefaultCommand:false,_initButton:function(){this.inherited(arguments);var self=this;this.button.loadDropDown=function(_58b){_585(["../../ColorPalette"],lang.hitch(this,function(_58c){this.dropDown=new _58c({dir:self.editor.dir,ownerDocument:self.editor.ownerDocument,value:self.value,onChange:function(_58d){self.editor.execCommand(self.command,_58d);}});_58b();}));};},updateState:function(){var _58e=this.editor;var _58f=this.command;if(!_58e||!_58e.isLoaded||!_58f.length){return;}if(this.button){var _590=this.get("disabled");this.button.set("disabled",_590);if(_590){return;}var _591;try{_591=_58e.queryCommandValue(_58f)||"";}catch(e){_591="";}}if(_591==""){_591="#000000";}if(_591=="transparent"){_591="#ffffff";}if(typeof _591=="string"){if(_591.indexOf("rgb")>-1){_591=_586.fromRgb(_591).toHex();}}else{_591=((_591&255)<<16)|(_591&65280)|((_591&16711680)>>>16);_591=_591.toString(16);_591="#000000".slice(0,7-_591.length)+_591;}this.value=_591;var _592=this.button.dropDown;if(_592&&_591!==_592.get("value")){_592.set("value",_591,false);}}});_588.registry["foreColor"]=function(){return new _58a({command:"foreColor"});};_588.registry["hiliteColor"]=function(){return new _58a({command:"hiliteColor"});};return _58a;});},"esri/dijit/editing/tools/ButtonToolBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dijit/form/Button","esri/dijit/editing/tools/ToolBase","esri/kernel"],function(_593,lang,has,_594,_595,_596){var BTB=_593([_594,_595],{declaredClass:"esri.dijit.editing.tools.ButtonToolBase",postCreate:function(){this.inherited(arguments);if(this._setShowLabelAttr){this._setShowLabelAttr(false);}},destroy:function(){_594.prototype.destroy.apply(this,arguments);_595.prototype.destroy.apply(this,arguments);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.ButtonToolBase",BTB,_596);}return BTB;});},"dojo/hccss":function(){define(["require","./_base/config","./dom-class","./dom-style","./has","./ready","./_base/window"],function(_597,_598,_599,_59a,has,_59b,win){has.add("highcontrast",function(){var div=win.doc.createElement("div");div.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url("+(_598.blankGif||_597.toUrl("./resources/blank.gif"))+");";win.body().appendChild(div);var cs=_59a.getComputedStyle(div),_59c=cs.backgroundImage,hc=(cs.borderTopColor==cs.borderRightColor)||(_59c&&(_59c=="none"||_59c=="url(invalid-url:)"));if(has("ie")<=8){div.outerHTML="";}else{win.body().removeChild(div);}return hc;});_59b(90,function(){if(has("highcontrast")){_599.add(win.body(),"dj_a11y");}});return has;});},"esri/dijit/editing/tools/Editing":function(){define("esri/dijit/editing/tools/Editing",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/layers/FeatureTemplate","esri/dijit/editing/tools/Edit","esri/dijit/editing/tools/EditingTools","esri/dijit/editing/tools/DropDownToolBase","esri/kernel","esri/lang"],function(_59d,lang,_59e,has,_59f,Edit,_5a0,_5a1,_5a2,_5a3){var _5a4=_59d([_5a1],{declaredClass:"esri.dijit.editing.tools.Editing",_enabled:false,deactivate:function(){if(!this._enabled){return;}this._enabled=false;this.inherited(arguments);this._settings.templatePicker.clearSelection();},onItemClicked:function(_5a5,evt){this.inherited(arguments);if(this._activeTool===this._tools.AUTOCOMPLETE){this._settings.editor._drawingTool=_59f.TOOL_AUTO_COMPLETE_POLYGON;}},_activateTool:function(_5a6,_5a7){var i;this.enable(_5a7);for(i in this._tools){if(this._tools.hasOwnProperty(i)){this.dropDown.removeChild(this._tools[i]);if(this._tools[i]._enabled===true){this.dropDown.addChild(this._tools[i]);}}}if(this._geometryType!==_5a7||this._activeTool._enabled===false){this._activeTool=this._tools[_5a6.toUpperCase()];}this._geometryType=_5a7;this._activeTool.activate();this._activeTool.setChecked(true);this._updateUI();},_initializeTool:function(_5a8){this.inherited(arguments);this._initializeTools();},_initializeTools:function(){var _5a9=this._settings.layers;var _5aa=this._settings.editor;var _5ab=false,line=false,poly=false;var _5ac=this._toolTypes=[];var _5ad;_59e.forEach(_5a9,function(_5ae){_5ad=_5ae.geometryType;_5ab=_5ab||_5ad==="esriGeometryPoint";line=line||_5ad==="esriGeometryPolyline";poly=poly||_5ad==="esriGeometryPolygon";_5ac=_5ac.concat(_59e.map(this._getTemplatesFromLayer(_5ae),lang.hitch(this,function(_5af){return _5aa._toDrawTool(_5af.drawingTool,_5ae);})));},this);var _5b0=this._settings.createOptions;if(_5ab){this._toolTypes.push("point");}if(line){this._toolTypes=this._toolTypes.concat(_5b0.polylineDrawTools);}if(poly){this._toolTypes=this._toolTypes.concat(_5b0.polygonDrawTools);}this._toolTypes=this._toUnique(this._toolTypes.concat(_5ac));},_toUnique:function(arr){var test={};return _59e.filter(arr,function(val){return test[val]?false:(test[val]=true);});},_getTemplatesFromLayer:function(_5b1){var _5b2=_5b1.templates||[];var _5b3=_5b1.types;_59e.forEach(_5b3,function(type){_5b2=_5b2.concat(type.templates);});return _59e.filter(_5b2,_5a3.isDefined);},_createTools:function(){_59e.forEach(this._toolTypes,this._createTool,this);this.inherited(arguments);},_createTool:function(_5b4){var _5b5=lang.mixin(_5a0[_5b4],{settings:this._settings,onClick:lang.hitch(this,"onItemClicked",_5a0[_5b4].id)});this._tools[_5b4.toUpperCase()]=new Edit(_5b5);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Editing",_5a4,_5a2);}return _5a4;});},"esri/dijit/AttributeInspector":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/sniff","dojo/_base/kernel","dojo/has","dojo/dom-style","dojo/dom-construct","esri/kernel","esri/lang","esri/domUtils","esri/layers/InheritedDomain","esri/layers/FeatureLayer","dojo/i18n!esri/nls/jsapi","dojo/fx","dojox/gfx","dijit/_Widget","dijit/_Templated","dijit/Editor","dijit/_editor/plugins/LinkDialog","dijit/_editor/plugins/TextColor","esri/dijit/editing/AttachmentEditor","esri/dijit/editing/Util","esri/tasks/query","dijit/form/DateTextBox","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/FilteringSelect","dijit/form/NumberSpinner","dijit/form/Button","dijit/form/SimpleTextarea","dijit/Tooltip","dojo/data/ItemFileReadStore","dojox/date/islamic","dojox/date/islamic/Date","dojox/date/islamic/locale","dojo/text!esri/dijit/templates/AttributeInspector.html"],function(_5b6,lang,_5b7,_5b8,_5b9,_5ba,has,_5bb,_5bc,_5bd,_5be,_5bf,_5c0,_5c1,_5c2,fx,gfx,_5c3,_5c4,_5c5,_5c6,_5c7,_5c8,Util,_5c9,_5ca,_5cb,_5cc,_5cd,_5ce,_5cf,_5d0,_5d1,_5d2,_5d3,_5d4,_5d5,_5d6){var ATI=_5b6([_5c3,_5c4],{declaredClass:"esri.dijit.AttributeInspector",widgetsInTemplate:true,templateString:_5d6,_navMessage:"( ${idx} ${of} ${numFeatures} )",onUpdate:function(){},onDelete:function(){},onAttributeChange:function(){},onNext:function(){},onReset:function(){},onCancel:function(){},constructor:function(_5d7,_5d8){lang.mixin(this,_5c2.widgets.attributeInspector);_5d7=_5d7||{};if(!_5d7.featureLayer&&!_5d7.layerInfos){console.error("esri.AttributeInspector: please provide correct parameter in the constructor");}this._userIds={};if(_5d7.featureLayer&&_5d7.featureLayer.credential){var _5d9=_5d7.featureLayer.id;this._userIds[_5d9]=_5d7.featureLayer.credential.userId;}else{if(_5d7.layerInfos){var _5da=_5d7.layerInfos;_5b7.forEach(_5da,function(_5db){if(_5db.featureLayer){var _5dc=_5db.featureLayer.id;if(_5db.featureLayer.credential){this._userIds[_5dc]=_5db.featureLayer.credential.userId;}if(_5db.userId){this._userIds[_5dc]=_5db.userId;}}},this);}}this._datePackage=this._getDatePackage(_5d7);this._layerInfos=_5d7.layerInfos||[{featureLayer:_5d7.featureLayer,options:_5d7.options||[]}];this._aiConnects=[];this._selection=[];this._toolTips=[];this._numFeatures=0;this._featureIdx=0;this._currentLInfo=null;this._currentFeature=null;this._hideNavButtons=_5d7.hideNavButtons||false;},postCreate:function(){this._initLayerInfos();this._createAttachmentEditor();this.onFirstFeature();},destroy:function(){this._destroyAttributeTable();_5b7.forEach(this._aiConnects,_5b8.disconnect);delete this._aiConnects;if(this._attachmentEditor){this._attachmentEditor.destroy();delete this._attachmentEditor;}delete this._layerInfos;this._selection=this._currentFeature=this._currentLInfo=this._attributes=this._layerInfos=null;this.inherited(arguments);},refresh:function(){this._updateSelection();},first:function(){this.onFirstFeature();},last:function(){this.onLastFeature();},next:function(){this.onNextFeature();},previous:function(){this.onPreviousFeature();},showFeature:function(_5dd,_5de){if(_5de){this._createOnlyFirstTime=true;}this._updateSelection([_5dd],_5de);this._updateUI();},onLayerSelectionChange:function(_5df,_5e0,_5e1){this._createOnlyFirstTime=false;this._featureIdx=(_5e1===_5c1.SELECTION_NEW)?0:this._featureIdx;this._updateSelection();this._updateUI();},onLayerSelectionClear:function(){if(!this._selection||this._selection.length<=0){return;}this._numFeatures=0;this._featureIdx=0;this._selection=[];this._currentFeature=null;this._currentLInfo=null;this._updateUI();},onLayerEditsComplete:function(_5e2,adds,_5e3,_5e4){_5e4=_5e4||[];if(_5e4.length){var _5e5=this._selection;var _5e6=_5e2.featureLayer.objectIdField;_5b7.forEach(_5e4,lang.hitch(this,function(del){_5b7.some(_5e5,lang.hitch(this,function(item,idx){if(item.attributes[_5e6]!==del.objectId){return false;}this._selection.splice(idx,1);return true;}));}));}adds=adds||[];if(adds.length){this._selection=Util.findFeatures(adds,_5e2.featureLayer);this._featureIdx=0;}var _5e7=this._numFeatures=this._selection?this._selection.length:0;if(adds.length){var _5e8=_5e7?this._selection[this._featureIdx]:null;if(_5e8){var _5e9=_5e8.getLayer();var _5ea=_5e9.getEditCapabilities();if(!(_5ea.canCreate&&!_5ea.canUpdate)){this._showFeature(_5e8);}}}this._updateUI();},onFieldValueChange:function(_5eb,_5ec){_5ec=(typeof _5ec==="undefined")?null:_5ec;var _5ed=_5eb.field;if(_5ed.type==="esriFieldTypeDate"){_5ec=(_5ec&&_5ec.getTime)?_5ec.getTime():(_5ec&&_5ec.toGregorian?_5ec.toGregorian().getTime():_5ec);}if(this._currentFeature.attributes[_5ed.name]===_5ec){return;}var _5ee=this._currentLInfo;var _5ef=this._currentFeature;var _5f0=_5ed.name;if(_5f0===_5ee.typeIdField){var type=this._findFirst(_5ee.types,"id",_5ec);var _5f1=_5ee.fieldInfos;_5b7.forEach(_5f1,function(_5f2){_5ed=_5f2.field;if(!_5ed||_5ed.name===_5ee.typeIdField){return;}var node=_5f2.dijit;var _5f3=this._setFieldDomain(node,type,_5ed);if(_5f3&&node){this._setValue(node,_5ef.attributes[_5ed.name]+"");if(node.isValid()===false){this._setValue(node,null);}}},this);}this.onAttributeChange(_5ef,_5f0,_5ec);},onDeleteBtn:function(evt){this._deleteFeature();},onNextFeature:function(evt){this._onNextFeature(1);},onPreviousFeature:function(evt){this._onNextFeature(-1);},onFirstFeature:function(evt){this._onNextFeature(this._featureIdx*-1);},onLastFeature:function(evt){this._onNextFeature((this._numFeatures-1)-this._featureIdx);},_initLayerInfos:function(){var _5f4=this._layerInfos;this._editorTrackingInfos={};_5b7.forEach(_5f4,this._initLayerInfo,this);},_initLayerInfo:function(_5f5){var _5f6=_5f5.featureLayer,_5f7,_5f8;this._connect(_5f6,"onSelectionComplete",lang.hitch(this,"onLayerSelectionChange",_5f5));this._connect(_5f6,"onSelectionClear",lang.hitch(this,"onLayerSelectionClear",_5f5));this._connect(_5f6,"onEditsComplete",lang.hitch(this,"onLayerEditsComplete",_5f5));_5f5.showAttachments=_5f6.hasAttachments?(_5be.isDefined(_5f5.showAttachments)?_5f5.showAttachments:true):false;_5f5.hideFields=_5f5.hideFields||[];_5f5.htmlFields=_5f5.htmlFields||[];_5f5.isEditable=_5f6.isEditable()?(_5be.isDefined(_5f5.isEditable)?_5f5.isEditable:true):false;_5f5.typeIdField=_5f6.typeIdField;_5f5.layerId=_5f6.id;_5f5.types=_5f6.types;if(_5f6.globalIdField){_5f7=this._findFirst(_5f5.fieldInfos,"fieldName",_5f6.globalIdField);if(!_5f7&&!_5f5.showGlobalID){_5f5.hideFields.push(_5f6.globalIdField);}}_5f8=this._findFirst(_5f5.fieldInfos,"fieldName",_5f6.objectIdField);if(!_5f8&&!_5f5.showObjectID){_5f5.hideFields.push(_5f6.objectIdField);}var _5f9=this._getFields(_5f5.featureLayer);if(!_5f9){return;}var _5fa=_5f5.fieldInfos||[];_5fa=_5b7.map(_5fa,function(_5fb){return lang.mixin({},_5fb);});if(!_5fa.length){_5f9=_5b7.filter(_5f9,lang.hitch(this,function(_5fc){return !this._isInFields(_5fc.name,_5f5.hideFields);}));_5f5.fieldInfos=_5b7.map(_5f9,lang.hitch(this,function(_5fd){var _5fe=(this._isInFields(_5fd.name,_5f5.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return {"fieldName":_5fd.name,"field":_5fd,"stringFieldOption":_5fe};}));}else{_5f5.fieldInfos=_5b7.filter(_5b7.map(_5fa,lang.hitch(this,function(_5ff){var _600=_5ff.stringFieldOption||(this._isInFields(_5ff.fieldName,_5f5.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return lang.mixin(_5ff,{"field":this._findFirst(_5f9,"name",_5ff.fieldName),"stringFieldOption":_600});})),"return item.field;");}if(_5f5.showGlobalID&&!_5f7){_5fa.push(this._findFirst(_5f9,"name",_5f6.globalIdField));}if(_5f5.showObjectID&&!_5f8){_5fa.push(this._findFirst(_5f9,"name",_5f6.objectIdField));}var _601=[];if(_5f6.editFieldsInfo){if(_5f6.editFieldsInfo.creatorField){_601.push(_5f6.editFieldsInfo.creatorField);}if(_5f6.editFieldsInfo.creationDateField){_601.push(_5f6.editFieldsInfo.creationDateField);}if(_5f6.editFieldsInfo.editorField){_601.push(_5f6.editFieldsInfo.editorField);}if(_5f6.editFieldsInfo.editDateField){_601.push(_5f6.editFieldsInfo.editDateField);}}this._editorTrackingInfos[_5f6.id]=_601;},_createAttachmentEditor:function(){this._attachmentEditor=null;var _602=this._layerInfos;var _603=_5b7.filter(_602,function(item){return item.showAttachments;});if(!_603||!_603.length){return;}this._attachmentEditor=new _5c8({"class":"atiAttachmentEditor"},this.attachmentEditor);this._attachmentEditor.startup();},_setCurrentLInfo:function(_604){var _605=this._currentLInfo?this._currentLInfo.featureLayer:null;var _606=_604.featureLayer;if(_605&&_605.id===_606.id&&!_605.ownershipBasedAccessControlForFeatures){var _607=_606.getEditCapabilities();if(!(_607.canCreate&&!_607.canUpdate)){return;}}this._currentLInfo=_604;this._createTable();},_updateSelection:function(_608,_609){this._selection=_608||[];var _60a=this._layerInfos;_5b7.forEach(_60a,this._getSelection,this);var _60b=this._numFeatures=this._selection.length;var _60c=_60b?this._selection[this._featureIdx]:null;this._showFeature(_60c,_609);},_getSelection:function(_60d){var _60e=_60d.featureLayer.getSelectedFeatures();this._selection=this._selection.concat(_60e);},_updateUI:function(){var _60f=this._numFeatures;var _610=this._currentLInfo;this.layerName.innerHTML=(!_610||_60f===0)?this.NLS_noFeaturesSelected:(_610.featureLayer?_610.featureLayer.name:"");_5bb.set(this.attributeTable,"display",_60f?"":"none");_5bb.set(this.editButtons,"display",_60f?"":"none");_5bb.set(this.navButtons,"display",(!this._hideNavButtons&&(_60f>1)?"":"none"));this.navMessage.innerHTML=_5be.substitute({idx:this._featureIdx+1,of:this.NLS_of,numFeatures:this._numFeatures},this._navMessage);if(this._attachmentEditor){_5bb.set(this._attachmentEditor.domNode,"display",((_610&&_610.showAttachments)&&_60f)?"":"none");}var _611=((_610&&_610.showDeleteButton===false)||!this._canDelete)?false:true;_5bb.set(this.deleteBtn.domNode,"display",_611?"":"none");if(this.domNode.parentNode&&this.domNode.parentNode.scrollTop>0){this.domNode.parentNode.scrollTop=0;}},_onNextFeature:function(_612){this._featureIdx+=_612;if(this._featureIdx<0){this._featureIdx=this._numFeatures-1;}else{if(this._featureIdx>=this._numFeatures){this._featureIdx=0;}}var _613=this._selection.length?this._selection[this._featureIdx]:null;this._showFeature(_613);this._updateUI();this.onNext(_613);},_deleteFeature:function(){this.onDelete(this._currentFeature);},_showFeature:function(_614,_615){if(!_614){return;}this._currentFeature=_614;var _616=_615?_615:_614.getLayer();var _617=_616.getEditCapabilities({feature:_614,userId:this._userIds[_616.id]});this._canUpdate=_617.canUpdate;this._canDelete=_617.canDelete;var _618=this._getLInfoFromFeatureLayer(_616);if(!_618){return;}this._setCurrentLInfo(_618);var _619=_614.attributes;var type=this._findFirst(_618.types,"id",_619[_618.typeIdField]);var node,_61a=null;var _61b=_618.fieldInfos;_5b7.forEach(_61b,function(_61c){_61a=_61c.field;node=_61c.dijit||null;if(!node){return;}var _61d=this._setFieldDomain(node,type,_61a);var _61e=_619[_61a.name];_61e=(_61e&&_61d&&_61d.codedValues&&_61d.codedValues.length)?(_61d.codedValues[_61e]?_61d.codedValues[_61e].name:_61e):_61e;if(!_5be.isDefined(_61e)){_61e="";}if(node.declaredClass==="dijit.form.DateTextBox"){_61e=(_61e==="")?null:new Date(_61e);}else{if(node.declaredClass==="dijit.form.FilteringSelect"){node._lastValueReported=null;_61e=_619[_61a.name]+"";}}try{this._setValue(node,_61e);if(node.declaredClass==="dijit.form.FilteringSelect"&&node.isValid()===false){this._setValue(node,null);}}catch(error){node.set("displayedValue",this.NLS_errorInvalid,false);}},this);if(this._attachmentEditor&&_618.showAttachments){this._attachmentEditor.showAttachments(this._currentFeature);}var _61f=_616.getEditSummary(_614);if(_61f){this.editorTrackingInfoDiv.innerHTML=_61f;_5bf.show(this.editorTrackingInfoDiv);}else{_5bf.hide(this.editorTrackingInfoDiv);}},_setFieldDomain:function(node,type,_620){if(!node){return null;}var _621=_620.domain;if(type&&type.domains){if(type.domains[_620.name]&&type.domains[_620.name] instanceof _5c0===false){_621=type.domains[_620.name];}}if(!_621){return null;}if(_621.codedValues&&_621.codedValues.length>0){node.set("store",this._toStore(_5b7.map(_621.codedValues,function(item){return {id:item.code+="",name:item.name};})));this._setValue(node,_621.codedValues[0].code);}else{node.constraints={min:_5be.isDefined(_621.minValue)?_621.minValue:Number.MIN_VALUE,max:_5be.isDefined(_621.maxValue)?_621.maxValue:Number.MAX_VALUE};this._setValue(node,node.constraints.min);}return _621;},_setValue:function(node,_622){if(!node.set){return;}node._onChangeActive=false;node.set("value",_622,true);node._onChangeActive=true;},_getFields:function(_623){var _624=_623._getOutFields();if(!_624){return null;}var _625=_623.fields;return (_624=="*")?_625:_5b7.filter(_5b7.map(_624,lang.hitch(this,"_findFirst",_625,"name")),_5be.isDefined);},_isInFields:function(_626,_627){if(!_626||!_627&&!_627.length){return false;}return _5b7.some(_627,function(name){return name.toLowerCase()===_626.toLowerCase();});},_findFirst:function(_628,_629,_62a){var _62b=_5b7.filter(_628,function(item){return item.hasOwnProperty(_629)&&item[_629]===_62a;});return (_62b&&_62b.length)?_62b[0]:null;},_getLInfoFromFeatureLayer:function(_62c){var _62d=_62c?_62c.id:null;return this._findFirst(this._layerInfos,"layerId",_62d);},_createTable:function(){this._destroyAttributeTable();this.attributeTable.innerHTML="";this._attributes=_5bc.create("table",{cellspacing:"0",cellpadding:"0"},this.attributeTable);var _62e=_5bc.create("tbody",null,this._attributes);var _62f=this._currentFeature;var _630=this._currentLInfo;var type=this._findFirst(_630.types,"id",_62f.attributes[_630.typeIdField]);var _631=_630.fieldInfos;_5b7.forEach(_631,lang.hitch(this,"_createField",type,_62e),this);this._createOnlyFirstTime=false;},_createField:function(type,_632,_633){var _634=this._currentLInfo;var _635=_633.field;if(this._isInFields(_635.name,_634.hideFields)){return;}if(this._isInFields(_635.name,this._editorTrackingInfos[_634.featureLayer.id])){return;}var node=_5bc.create("tr",null,_632);var td=_5bc.create("td",{innerHTML:_633.label||_635.alias||_635.name,"class":"atiLabel"},node);td=_5bc.create("td",null,node);var _636=null;var _637=false;if(_633.customField){_5bc.place(_633.customField.domNode||_633.customField,_5bc.create("div",null,td),"first");_636=_633.customField;}else{if(_634.isEditable===false||_635.editable===false||_633.isEditable===false||_635.type==="esriFieldTypeOID"||_635.type==="esriFieldTypeGlobalID"||(!this._canUpdate&&!this._createOnlyFirstTime)){_637=true;}}if(!_636&&(_634.typeIdField&&_635.name.toLowerCase()==_634.typeIdField.toLowerCase())){_636=this._createTypeField(_635,_633,td);}else{if(!_636){_636=this._createDomainField(_635,_633,type,td);}}if(!_636){switch(_635.type){case "esriFieldTypeString":_636=this._createStringField(_635,_633,td);break;case "esriFieldTypeDate":_636=this._createDateField(_635,_633,td);break;case "esriFieldTypeInteger":case "esriFieldTypeSmallInteger":_636=this._createIntField(_635,_633,td);break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":_636=this._createFltField(_635,_633,td);break;default:_636=this._createStringField(_635,_633,td);break;}}if(_633.tooltip&&_633.tooltip.length){this._toolTips.push(new _5d1({connectId:[_636.id],label:_633.tooltip}));}_636.onChange=lang.hitch(this,"onFieldValueChange",_633);_636.set("disabled",_637);_633.dijit=_636;},_createTypeField:function(_638,_639,node){return new _5cd({"class":"atiField",name:_638.alias||_638.name,store:this._toStore(_5b7.map(this._currentLInfo.types,function(item){return {id:item.id,name:item.name};})),searchAttr:"name"},_5bc.create("div",null,node));},_createDomainField:function(_63a,_63b,type,node){var _63c=_63a.domain;if(type&&type.domains){if(type.domains[_63a.name]&&type.domains[_63a.name] instanceof _5c0===false){_63c=type.domains[_63a.name];}}if(!_63c){return null;}if(_63c.codedValues){return new _5cd({"class":"atiField",name:_63a.alias||_63a.name,searchAttr:"name",required:_63a.nullable||false},_5bc.create("div",null,node));}else{return new _5ce({"class":"atiField"},_5bc.create("div",null,node));}},_createStringField:function(_63d,_63e,node){var _63f={"class":"atiField",trim:true,maxLength:_63d.length};if(_63e.stringFieldOption===ATI.STRING_FIELD_OPTION_TEXTAREA){_63f["class"]+=" atiTextAreaField";return new _5d0(_63f,_5bc.create("div",null,node));}else{if(_63e.stringFieldOption===ATI.STRING_FIELD_OPTION_RICHTEXT){_63f["class"]+=" atiRichTextField";_63f.height="100%";_63f.width="100%";_63f.plugins=_63e.richTextPlugins||["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent","|","createLink"];return new _5c5(_63f,_5bc.create("div",null,node));}else{return new _5cb(_63f,_5bc.create("div",null,node));}}},_createDateField:function(_640,_641,node){var _642={"class":"atiField","trim":true};if(this._datePackage){_642.datePackage=this._datePackage;}return new _5ca(_642,_5bc.create("div",null,node));},_createIntField:function(_643,_644,node){return new _5cc({"class":"atiField",constraints:{places:0},invalidMessage:this.NLS_validationInt,trim:true},_5bc.create("div",null,node));},_createFltField:function(_645,_646,node){return new _5cc({"class":"atiField",trim:true,invalidMessage:this.NLS_validationFlt},_5bc.create("div",null,node));},_toStore:function(_647){return new _5d2({data:{identifier:"id",label:"name",items:_647}});},_connect:function(node,evt,func){this._aiConnects.push(_5b8.connect(node,evt,func));},_getDatePackage:function(_648){if(_648.datePackage===null){return null;}else{if(_648.datePackage){return _648.datePackage;}else{if(_5ba.locale==="ar"){return "dojox.date.islamic";}}}return null;},_destroyAttributeTable:function(){var _649=this._layerInfos;_5b7.forEach(_649,function(_64a){var _64b=_64a.fieldInfos;_5b7.forEach(_64b,function(_64c){var _64d=_64c.dijit;if(_64d){_64d._onChangeHandle=null;if(_64c.customField){return;}if(_64d.destroyRecursive){_64d.destroyRecursive();}else{if(_64d.destroy){_64d.destroy();}}}_64c.dijit=null;},this);},this);var _64e=this._toolTips;_5b7.forEach(_64e,function(item){item.destroy();delete item;});this._toolTips=[];if(this._attributes){_5bc.destroy(this._attributes);}}});lang.mixin(ATI,{STRING_FIELD_OPTION_RICHTEXT:"richtext",STRING_FIELD_OPTION_TEXTAREA:"textarea",STRING_FIELD_OPTION_TEXTBOX:"textbox"});if(has("extend-esri")){lang.setObject("dijit.AttributeInspector",ATI,_5bd);}return ATI;});},"esri/dijit/editing/tools/Cut":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/has","dojo/DeferredList","esri/graphicsUtils","esri/graphic","esri/tasks/query","esri/layers/FeatureLayer","esri/toolbars/draw","esri/dijit/editing/Cut","esri/dijit/editing/tools/ToggleToolBase","esri/kernel"],function(_64f,lang,_650,_651,has,_652,_653,_654,_655,_656,Draw,Cut,_657,_658){var _659=_64f([_657],{declaredClass:"esri.dijit.editing.tools.Cut",id:"btnFeatureCut",_enabledIcon:"toolbarIcon cutIcon",_disabledIcon:"toolbarIcon cutIcon",_drawType:Draw.POLYLINE,_enabled:true,_label:"NLS_cutLbl",_cutConnects:[],activate:function(){this._cutConnects.push(_651.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd"));this.inherited(arguments);},deactivate:function(){this.inherited(arguments);_650.forEach(this._cutConnects,_651.disconnect);this._cutConnects=[];this._edits=[];},_onDrawEnd:function(_65a){var _65b=this._settings.layers;var _65c=this._cutLayers=_650.filter(_65b,function(_65d){return ((_65d.geometryType==="esriGeometryPolygon")||(_65d.geometryType==="esriGeometryPolyline")&&_65d.visible&&_65d._isMapAtVisibleScale());});this._cutConnects=this._cutConnects.concat(_650.map(_65c,lang.hitch(this,function(_65e){return _651.connect(_65e,"onEditsComplete",lang.hitch(this,function(adds,_65f,_660){if(this._settings.undoRedoManager){var _661=this._settings.undoRedoManager;_650.forEach(this._edits,lang.hitch(this,function(edit){_661.add(new Cut({featureLayer:edit.layer,addedGraphics:edit.adds,preUpdatedGraphics:edit.preUpdates,postUpdatedGraphics:edit.updates}));}),this);}this.onFinished();}));})));var _662=new _655();_662.geometry=_65a;_650.forEach(_65c,function(_663,idx){this._settings.editor._selectionHelper.selectFeatures([_663],_662,_656.SELECTION_NEW,lang.hitch(this,"_cutFeatures",_663,_662));},this);},_cutFeatures:function(_664,_665,_666){if(!_666||!_666.length){return;}this._edits=[];var _667=[];_667.push(this._settings.geometryService.cut(_653.getGeometries(_666),_665.geometry,lang.hitch(this,"_cutHandler",_664,_666)));var _668=new _652(_667).addCallback(lang.hitch(this,function(){this.onApplyEdits(this._edits);}));},_cutHandler:function(_669,_66a,_66b){var _66c=[];var _66d=[];var _66e=_650.map(_66a,function(item){return new _654(lang.clone(item.toJson()));});var _66f;var _670;_650.forEach(_66b.cutIndexes,function(_671,i){if(_66f!=_671){_66f=_671;_66d.push(_66a[_671].setGeometry(_66b.geometries[i]));}else{_670=new _654(_66b.geometries[i],null,lang.mixin({},_66a[_671].attributes),null);_670.attributes[_66a[0].getLayer().objectIdField]=null;_66c.push(_670);}},this);this._edits.push({layer:_669,adds:_66c,updates:_66d,preUpdates:_66e});}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Cut",_659,_658);}return _659;});},"esri/dijit/editing/tools/Edit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/dijit/editing/tools/MenuItemBase","esri/kernel"],function(_672,lang,has,_673,_674){var Edit=_672([_673],{declaredClass:"esri.dijit.editing.tools.Edit",enable:function(_675){this._enabled=_675===this._geomType;this.inherited(arguments);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Edit",Edit,_674);}return Edit;});},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window","./a11yclick"],function(on,_676,keys,_677,has,_678,win,_679){var ret=_677("dijit._OnDijitClickMixin",null,{connect:function(obj,_67a,_67b){return this.inherited(arguments,[obj,_67a=="ondijitclick"?_679:_67a,_67b]);}});ret.a11yclick=_679;return ret;});},"dojo/dnd/autoscroll":function(){define(["../_base/lang","../sniff","../_base/window","../dom-geometry","../dom-style","../window"],function(lang,has,win,_67c,_67d,_67e){var _67f={};lang.setObject("dojo.dnd.autoscroll",_67f);_67f.getViewport=_67e.getBox;_67f.V_TRIGGER_AUTOSCROLL=32;_67f.H_TRIGGER_AUTOSCROLL=32;_67f.V_AUTOSCROLL_VALUE=16;_67f.H_AUTOSCROLL_VALUE=16;var _680,doc=win.doc,_681=Infinity,_682=Infinity;_67f.autoScrollStart=function(d){doc=d;_680=_67e.getBox(doc);var html=win.body(doc).parentNode;_681=Math.max(html.scrollHeight-_680.h,0);_682=Math.max(html.scrollWidth-_680.w,0);};_67f.autoScroll=function(e){var v=_680||_67e.getBox(doc),html=win.body(doc).parentNode,dx=0,dy=0;if(e.clientX<_67f.H_TRIGGER_AUTOSCROLL){dx=-_67f.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-_67f.H_TRIGGER_AUTOSCROLL){dx=Math.min(_67f.H_AUTOSCROLL_VALUE,_682-html.scrollLeft);}}if(e.clientY<_67f.V_TRIGGER_AUTOSCROLL){dy=-_67f.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-_67f.V_TRIGGER_AUTOSCROLL){dy=Math.min(_67f.V_AUTOSCROLL_VALUE,_681-html.scrollTop);}}window.scrollBy(dx,dy);};_67f._validNodes={"div":1,"p":1,"td":1};_67f._validOverflow={"auto":1,"scroll":1};_67f.autoScrollNodes=function(e){var b,t,w,h,rx,ry,dx=0,dy=0,_683,_684;for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in _67f._validNodes)){var s=_67d.getComputedStyle(n),_685=(s.overflow.toLowerCase() in _67f._validOverflow),_686=(s.overflowX.toLowerCase() in _67f._validOverflow),_687=(s.overflowY.toLowerCase() in _67f._validOverflow);if(_685||_686||_687){b=_67c.getContentBox(n,s);t=_67c.position(n,true);}if(_685||_686){w=Math.min(_67f.H_TRIGGER_AUTOSCROLL,b.w/2);rx=e.pageX-t.x;if(has("webkit")||has("opera")){rx+=win.body().scrollLeft;}dx=0;if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}_683=n.scrollLeft;n.scrollLeft=n.scrollLeft+dx;}}if(_685||_687){h=Math.min(_67f.V_TRIGGER_AUTOSCROLL,b.h/2);ry=e.pageY-t.y;if(has("webkit")||has("opera")){ry+=win.body().scrollTop;}dy=0;if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}_684=n.scrollTop;n.scrollTop=n.scrollTop+dy;}}if(dx||dy){return;}}try{n=n.parentNode;}catch(x){n=null;}}_67f.autoScroll(e);};return _67f;});},"esri/tasks/TrimExtendParameters":function(){define("esri/tasks/TrimExtendParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(_688,lang,_689,_68a,has,_68b){var _68c=_688(null,{declaredClass:"esri.tasks.TrimExtendParameters",polylines:null,trimExtendTo:null,extendHow:null,toJson:function(){var _68d=_689.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=_68a.toJson(_68d);json.trimExtendTo=_68a.toJson(this.trimExtendTo.toJson());json.sr=_68a.toJson(this.polylines[0].spatialReference.toJson());json.extendHow=this.extendHow||0;return json;}});lang.mixin(_68c,{DEFAULT_CURVE_EXTENSION:0,RELOCATE_ENDS:1,KEEP_END_ATTRIBUTES:2,NO_END_ATTRIBUTES:4,NO_EXTEND_AT_FROM:8,NO_EXTEND_AT_TO:16});if(has("extend-esri")){lang.setObject("tasks.TrimExtendParameters",_68c,_68b);}return _68c;});},"esri/dijit/editing/Editor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/kernel","dojo/has","dojo/query","dojo/DeferredList","dojo/dom-class","dojo/dom-construct","dijit/_Widget","dijit/_Templated","esri/domUtils","esri/graphicsUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/graphic","esri/undoManager","esri/tasks/query","esri/layers/FeatureLayer","esri/layers/FeatureTemplate","esri/toolbars/draw","esri/toolbars/edit","esri/dijit/AttributeInspector","esri/dijit/editing/Util","esri/dijit/editing/Add","esri/dijit/editing/Update","esri/dijit/editing/Delete","esri/dijit/editing/toolbars/Drawing","esri/dijit/editing/SelectionHelper","esri/dijit/editing/TemplatePicker","esri/kernel","esri/config","dojo/i18n!esri/nls/jsapi","dojo/text!esri/dijit/editing/templates/Editor.html","dijit/ProgressBar","dojo/NodeList-dom"],function(_68e,lang,_68f,_690,_691,has,_692,_693,_694,_695,_696,_697,_698,_699,_69a,_69b,_69c,_69d,_69e,_69f,_6a0,Draw,_6a1,_6a2,_6a3,Add,_6a4,_6a5,_6a6,_6a7,_6a8,_6a9,_6aa,_6ab,_6ac){var _6ad=_68e([_696,_697],{declaredClass:"esri.dijit.editing.Editor",widgetsInTemplate:true,templateString:_6ac,constructor:function(_6ae,_6af){_6ae=_6ae||{};if(!_6ae.settings){console.error("Editor: please provide 'settings' parameter in the constructor");}if(!_6ae.settings.layerInfos){console.error("Editor: please provide 'layerInfos' parameter in the constructor");}this._settings=_6ae.settings;this._eConnects=[];},postCreate:function(){this._setDefaultOptions();this._initLayers();this._connectEvents();this._createWidgets();this._reset();this._enableMapClickHandler();},stopEditing:function(_6b0){this._updateCurrentFeature(lang.hitch(this,function(){this._clearSelection(false);_6b0&&_6b0();}));},destroy:function(){if(this.drawingToolbar){this.drawingToolbar.destroy();}if(this.attributeInspector){this.attributeInspector.destroy();}if(this.templatePicker){this.templatePicker.destroy();}if(this._selectionHelper){this._selectionHelper.destroy();}if(this._drawToolbar){this._drawToolbar.deactivate();}this._reset();this._disableMapClickHandler();_68f.forEach(this._eConnects,_690.disconnect);_690.disconnect(this._dtConnect);_690.disconnect(this._templatePickerOnSelectionChangeEvent);this._layer=this._currentGraphic=this._activeType=this._activeTemplate=this._drawingTool=this._drawToolbar=this._editToolbar=this.drawingToolbar=this.attributeInspector=this.templatePicker=this.undoManager=null;if(this._settings.map.infoWindow&&this._settings.map.infoWindow.clearFeatures){this._settings.map.infoWindow.clearFeatures();}this.inherited(arguments);},_setDefaultOptions:function(){this._drawToolbar=this._settings.drawToolbar||new Draw(this._settings.map);this._settings.drawToolbar=this._drawToolbar;this._editToolbar=this._settings.editToolbar||new _6a1(this._settings.map);this._settings.editToolbar=this._editToolbar;this._settings.toolbarVisible=this._settings.toolbarVisible||false;this._settings.toolbarOptions=lang.mixin({reshapeVisible:false,cutVisible:false,mergeVisible:false},this._settings.toolbarOptions);this._settings.createOptions=lang.mixin({polylineDrawTools:[_6ad.CREATE_TOOL_POLYLINE],polygonDrawTools:[_6ad.CREATE_TOOL_POLYGON],editAttributesImmediately:true},this._settings.createOptions);this._settings.singleSelectionTolerance=this._settings.singleSelectionTolerance||3;this._settings.maxUndoRedoOperations=this._settings.maxUndoRedoOperations||10;this._settings.editor=this;this._usePopup=this._settings.usePopup=this._settings.map.infoWindow._setPagerCallbacks?true:false;this._datePackage=this._settings.datePackage;var _6b1=_6aa.defaults;this._settings.geometryService=this._settings.geometryService||_6b1.geometryService;_6b1.geometryService=_6b1.geometryService||this._settings.geometryService;},_initLayers:function(){this._settings.layers=[];this._settings.userIds={};this._settings.createOnlyLayer={};var _6b2=this._settings.layerInfos;_68f.forEach(_6b2,function(_6b3){if(_6b3.featureLayer&&_6b3.featureLayer.loaded){this._settings.layers.push(_6b3.featureLayer);var _6b4=_6b3.featureLayer.id;if(_6b3.featureLayer.credential){this._settings.userIds[_6b4]=_6b3.featureLayer.credential.userId;}if(_6b3.userId){this._settings.userIds[_6b4]=_6b3.userId;}var _6b5=_6b3.featureLayer.getEditCapabilities();if(_6b5.canCreate&&!_6b5.canUpdate){this._settings.createOnlyLayer[_6b4]=true;}else{this._settings.createOnlyLayer[_6b4]=false;}}},this);},_reset:function(){this._hideAttributeInspector();this._editToolbar.deactivate();this._editVertices=true;this._layer=null;this._currentGraphic=null;this._activeType=null;this._activeTemplate=null;this._drawingTool=null;this._attributeChanged=false;},_saveFeatureOnClient:function(_6b6){var _6b7=this.templatePicker.getSelected();var _6b8;if(_6b7.template){_6b8=_6b7.featureLayer.renderer.getSymbol(_6b7.template.prototype);}else{_6b8=_6b7.symbolInfo.symbol;}var _6b9=_6b7.featureLayer.fields;var att={};_68f.forEach(_6b9,function(_6ba,idx){att[_6ba.name]=null;});this._tempGraphic=new _69c(_6b6,_6b8,att,null);var map=this._settings.map;map.graphics.add(this._tempGraphic);var _6bb=this._findCenterPoint(_6b6);this._createAttributeInspector(true);map.infoWindow.setTitle(_6b7.featureLayer?_6b7.featureLayer.name:_6ab.widgets.attributeInspector.NLS_title);this.attributeInspector.showFeature(this._tempGraphic,_6b7.featureLayer);this._showInfoWindow(_6bb,map.getInfoWindowAnchor(_6bb));if(this._settings.createOnlyLayer[_6b7.featureLayer.id]){this._infoWindowHideEvent=_690.connect(map.infoWindow,"onHide",this,"_infoWindowHide");}_690.disconnect(this._templatePickerOnSelectionChangeEvent);this.templatePicker.clearSelection();this._drawToolbar.deactivate();this._enableMapClickHandler();if(this.drawingToolbar){this.drawingToolbar.deactivate();}this._templatePickerOnSelectionChangeEvent=_690.connect(this.templatePicker,"onSelectionChange",lang.hitch(this,"_onCreateFeature"));},_saveAttributesOnClient:function(_6bc,_6bd,_6be){this._tempGraphic.attributes[_6bd]=(typeof (_6be)==="number"&&isNaN(_6be))?null:_6be;},_infoWindowHide:function(){this._createFeature(this._tempGraphic.geometry,this._tempGraphic.attributes);_690.disconnect(this._infoWindowHideEvent);},_createFeature:function(_6bf,_6c0){this._editClickPoint=this._findCenterPoint(_6bf);if(!_6bf.rings){this._applyEdits([{layer:this._layer,adds:[this._createGraphic(_6bf,_6c0)]}]);return;}this._simplify(_6bf,lang.hitch(this,function(_6c1){if(this._drawingTool!==_6a0.TOOL_AUTO_COMPLETE_POLYGON){this._applyEdits([{layer:this._layer,adds:[this._createGraphic(_6c1,_6c0)]}]);}else{this._autoComplete(_6c1,lang.hitch(this,function(_6c2){if(_6c2&&_6c2.length){this._applyEdits([{layer:this._layer,adds:_68f.map(_6c2,lang.hitch(this,function(_6c3){return this._createGraphic(_6c3,_6c0);}))}]);}}));}}));},_updateCurrentFeature:function(_6c4){var _6c5=this._isModified();if(_6c5){this._updateFeature(_6c5,_6c4);}else{if(_6c4){_6c4(false);}}},_updateFeature:function(_6c6,_6c7){var geom=_6c6.geometry;if(!geom.rings){this._applyEdits([{layer:_6c6.getLayer(),updates:[_6c6]}],_6c7);}else{this._simplify(geom,lang.hitch(this,function(_6c8){this._applyEdits([{layer:_6c6.getLayer(),updates:[lang.mixin(_6c6,{geometry:_6c8})]}],_6c7);}));}},_deleteFeature:function(_6c9,_6ca){var _6cb=[];if(!_6c9){var _6cc=this._settings.layers;_6cb=_68f.map(_68f.filter(_6cc,function(_6cd){return _6cd.getSelectedFeatures().length>0;}),function(item){return {layer:item,deletes:item.getSelectedFeatures()};});if((!_6cb||!_6cb.length)&&this._currentGraphic){_6cb.push({layer:this._layer,deletes:[this._currentGraphic]});}}else{_6cb.push({layer:_6c9.getLayer(),deletes:[_6c9]});}this._applyEdits(_6cb,(_6ca));},_stopEditing:function(_6ce,adds,_6cf,_6d0){_698.hide(this.progressBar.domNode);this._undoRedoAdd();var _6d1;if(_6ce._isSelOnly===true){if(adds&&adds.length){this.templatePicker.clearSelection();var _6d2=new _69e();_6d2.objectIds=[adds[0].objectId];if(!this._settings.createOnlyLayer[_6ce.id]){this._selectFeatures([_6ce],_6d2,lang.hitch(this,"_onEditFeature"));}else{this._settings.map.graphics.remove(this._tempGraphic);}}}else{_6d1=this._selectionHelper.findMapService(this._settings.map,_6ce);if(_6d1){_6d1.refresh();}if(adds&&adds.length){this.templatePicker.clearSelection();if(!this._settings.createOnlyLayer[_6ce.id]){_6a3.findFeatures(adds,_6ce,lang.hitch(this,"_onEditFeature"));}else{this._settings.map.graphics.remove(this._tempGraphic);}}}if(_6d0&&_6d0.length){this._clearSelection(true);if(this._undoRedo){_6d1=this._selectionHelper.findMapService(_6ce,this._settings.map);if(_6d1){_6d1.refresh();}}}if(this._undoRedo&&_6cf&&_6cf.length){_6d1=this._selectionHelper.findMapService(_6ce,this._settings.map);if(_6d1){_6d1.refresh();}this.attributeInspector.refresh();this._undoRedo=false;}if(this.drawingToolbar){this.drawingToolbar._updateUI();}this._undoRedo=false;},_undoRedoAdd:function(){this._settings._isApplyEditsCall=false;if(!this._settings.undoManager){return;}if(this._activeTool==="CUT"||this._activeTool==="UNION"){return;}var edit=(this._edits&&this._edits.length)?this._edits[0]:null;if(!edit){return;}var adds=edit.adds||[];var _6d3=edit.updates||[];var _6d4=edit.deletes||[];var _6d5={featureLayer:edit.layer};if(adds.length){this.undoManager.add(new Add(lang.mixin(_6d5,{addedGraphics:adds})));}else{if(_6d4.length){this.undoManager.add(new _6a5(lang.mixin(_6d5,{deletedGraphics:_6d4})));}else{if(_6d3.length){this.undoManager.add(new _6a4(lang.mixin(_6d5,{preUpdatedGraphics:[this._preUpdates],postUpdatedGraphics:_6d3})));}}}this._edits=null;this._preUpdates=null;},_activateDrawToolbar:function(_6d6){this._layer=_6d6.featureLayer;this._activeType=_6d6.type;this._activeTemplate=_6d6.template;this._drawingTool=this._activeTemplate?this._activeTemplate.drawingTool:null;this._drawTool=this._toDrawTool(this._drawingTool,_6d6.featureLayer);_690.disconnect(this._dtConnect);if(this._settings.createOnlyLayer[_6d6.featureLayer.id]){this._dtConnect=_690.connect(this._drawToolbar,"onDrawEnd",this,"_saveFeatureOnClient");}else{this._dtConnect=_690.connect(this._drawToolbar,"onDrawEnd",this,"_createFeature");}this._editToolbar.deactivate();this._disableMapClickHandler();if(!this.drawingToolbar){this._drawToolbar.activate(this._drawTool);}else{this.drawingToolbar.activateEditing(this._drawTool,this._layer);}},_activateEditToolbar:function(_6d7,info){var _6d8=_6d7.getLayer();var _6d9=_6d8?_6d8.geometryType:null;var _6da=_6a1.MOVE;if(_6d9!=="esriGeometryPoint"&&this._isNotesFeature(_6d7)===true){_6da=_6da|_6a1.ROTATE|_6a1.SCALE;this._editVertices=false;}else{if(_6d9!=="esriGeometryPoint"&&this._editVertices===true){_6da=_6da|_6a1.ROTATE|_6a1.SCALE;this._editVertices=false;}else{_6da=_6da|_6a1.EDIT_VERTICES;this._editVertices=true;}}this._attributeChanged=this._isModified();this._preUpdates=new _69c(lang.clone(_6d7.toJson()));var _6db=_6d8.getEditCapabilities({feature:_6d7,userId:this._settings.userIds[_6d8.id]});var _6dc=_68f.filter(this._settings.layerInfos,function(item){return item.featureLayer["layerId"]===_6d8.layerId;})[0];if(_6db.canUpdate&&!_6dc.disableGeometryUpdate&&_6d8.allowGeometryUpdates){this._editToolbar.activate(_6da,_6d7);}if(!this._settings.map.infoWindow.isShowing){var _6dd=(info&&info.screenPoint)||this._findCenterPoint(_6d7);this._showInfoWindow(_6dd,this._settings.map.getInfoWindowAnchor(_6dd));}},_createGraphic:function(_6de,_6df){var _6e0=(this._activeType&&this._activeType.symbol)||this._layer.defaultSymbol;var _6e1=new _69c(_6de,_6e0,_6df);if(this._activeTemplate||_6df){_6e1.attributes=_6df||lang.mixin({},this._activeTemplate.prototype.attributes);}else{_6e1.attributes=_6e1.attributes||[];_68f.forEach(this._layer.fields,function(_6e2){_6e1.attributes[_6e2.name]=null;},this);}return _6e1;},_connectEvents:function(){var _6e3=this._settings.layers;_68f.forEach(_6e3,function(item){this._connect(item,"onEditsComplete",lang.hitch(this,"_stopEditing",item));},this);_68f.forEach(_6e3,function(item){this._connect(item,"onBeforeApplyEdits",lang.hitch(this,function(){_698.show(this.progressBar.domNode);this._settings._isApplyEditsCall=true;}));},this);this._connect(this._editToolbar,"onGraphicClick",lang.hitch(this,"_activateEditToolbar"));this._connect(this._editToolbar,"onGraphicFirstMove",lang.hitch(this,"_hideAttributeInspector"));this._connect(this._editToolbar,"onVertexFirstMove",lang.hitch(this,"_hideAttributeInspector"));this._connect(this._editToolbar,"onScaleStart",lang.hitch(this,"_hideAttributeInspector"));this._connect(this._editToolbar,"onRotateStart",lang.hitch(this,"_hideAttributeInspector"));},_connect:function(node,evt,func){this._eConnects.push(_690.connect(node,evt,func));},_createWidgets:function(){this._selectionHelper=new _6a7(this._settings);this._createTemplatePicker();this._createAttributeInspector();this._createDrawingToolbar();this._createUndoRedoManager();},_createTemplatePicker:function(){if(!this._settings.templatePicker){var _6e4=_68f.filter(this._settings.layers,function(item){return item.getEditCapabilities().canCreate;});this.templatePicker=new _6a8({"class":"esriTemplatePicker",featureLayers:_6e4,showTooltip:true,maxLabelLength:this._settings.typesCharacterLimit,columns:"auto",rows:"auto"},this.templatePickerDiv);this.templatePicker.startup();this._settings.templatePicker=this.templatePicker;}else{this.templatePicker=this._settings.templatePicker;_698.hide(this.templatePickerDiv);}this._templatePickerOnSelectionChangeEvent=_690.connect(this.templatePicker,"onSelectionChange",lang.hitch(this,"_onCreateFeature"));},_createAttributeInspector:function(_6e5){if(!this._settings.attributeInspector){this._customAttributeInspector=false;var map=this._settings.map;this.attributeInspector=new _6a2({layerInfos:this._settings.layerInfos,hideNavButtons:this._usePopup,datePackage:this._datePackage},_695.create("div"));this.attributeInspector.startup();map.infoWindow.setContent(this.attributeInspector.domNode);map.infoWindow.setTitle(_6ab.widgets.attributeInspector.NLS_title);map.infoWindow.resize(350,375);_691.query(".esriAttributeInspector .atiLayerName").style({display:"none"});}else{this._customAttributeInspector=true;this.attributeInspector=this._settings.attributeInspector;}this._connect(this.attributeInspector,"onDelete",lang.hitch(this,"_deleteFeature"));this._connect(this.attributeInspector,"onNext",lang.hitch(this,function(_6e6){this._updateCurrentFeature(lang.hitch(this,function(){this._attributeChanged=false;this._onEditFeature(_6e6);}));}));if(this._usePopup){this._settings.map.infoWindow._setPagerCallbacks(this.attributeInspector,lang.hitch(this.attributeInspector,"next"),lang.hitch(this.attributeInspector,"previous"));}if(_6e5){this._connect(this.attributeInspector,"onAttributeChange",lang.hitch(this,"_saveAttributesOnClient"));}else{this._connect(this.attributeInspector,"onAttributeChange",lang.hitch(this,function(_6e7,_6e8,_6e9){this._preUpdates=new _69c(lang.clone(_6e7.toJson()));this._currentGraphic.attributes[_6e8]=(typeof (_6e9)==="number"&&isNaN(_6e9))?null:_6e9;this._updateFeature(this._currentGraphic,null);this._attributeChanged=false;}));}},_createDrawingToolbar:function(){if(this._settings.toolbarVisible===true){this.drawingToolbar=new _6a6({"class":"esriDrawingToolbar",drawToolbar:this._drawToolbar,editToolbar:this._editToolbar,settings:this._settings,onDelete:lang.hitch(this,"_deleteFeature"),onApplyEdits:lang.hitch(this,"_applyEdits"),onShowAttributeInspector:lang.hitch(this,"_onEditFeature")},this.drawingToolbarDiv);}},_createUndoRedoManager:function(){if(!this._settings.enableUndoRedo&&!this._settings.undoManager){return;}this._settings.enableUndoRedo=true;this.undoManager=this._settings.undoManager;if(!this.undoManager){this.undoManager=this._settings.undoManager=new _69d({maxOperations:this._settings.maxUndoRedoOperations});}this._connect(document,"onkeypress",lang.hitch(this,function(evt){if(evt.metaKey||evt.ctrlKey){if(evt.charOrCode==="z"){this._undo();}if(evt.charOrCode==="y"){this._redo();}}}));},_enableMapClickHandler:function(){this._mapClickHandler=_690.connect(this._settings.map,"onClick",lang.hitch(this,function(evt){if(this._drawToolbar._geometryType){return;}if(this._activeTool==="SELECT"){this._activeTool="";return;}this._updateCurrentFeature(lang.hitch(this,function(){this._reset();this._updateSelection(evt);}));}));},_disableMapClickHandler:function(){_690.disconnect(this._mapClickHandler);},_onCreateFeature:function(){var _6ea=this.templatePicker.getSelected();if(_6ea){this._updateCurrentFeature(lang.hitch(this,function(){if(this._currentGraphic){this._clearSelection(false);}this._reset();this._activateDrawToolbar(_6ea);}));}else{this._reset();_690.disconnect(this._dtConnect);this._drawToolbar.deactivate();this._enableMapClickHandler();if(this.drawingToolbar){this.drawingToolbar.deactivate();}}},_onEditFeature:function(_6eb,_6ec){_6eb=(lang.isArray(_6eb)?_6eb[0]:_6eb)||null;if(!_6eb){return;}if(!this._customAttributeInspector){_6ec=_6ec||this._editClickPoint||this._findCenterPoint(_6eb);var _6ed=_6eb.getLayer();this._settings.map.infoWindow.setTitle(_6ed?_6ed.name:_6ab.widgets.attributeInspector.NLS_title);if(this.drawingToolbar||!this._settings.map.infoWindow.isShowing){this._showInfoWindow(_6ec,this._settings.map.getInfoWindowAnchor(_6ec));}this._editClickPoint=null;}if(_6eb===this._currentGraphic){return;}this._editVertices=true;this._layer=_6eb.getLayer();this._currentGraphic=_6eb;if(_6eb.getDojoShape()){_6eb.getDojoShape().moveToFront();}this._activateEditToolbar(_6eb);},_applyEdits:function(_6ee,_6ef){_6ee=_6ee||[];if(_6ee.length<=0){return;}this._edits=_6ee;var _6f0=_68f.map(_6ee,function(edit){return edit.layer.applyEdits(edit.adds,edit.updates,edit.deletes);});this._deferredsList=new _693(_6f0).addCallback(lang.hitch(this,function(){_698.hide(this.progressBar.domNode);if(_6ef){_6ef();}var map=this._settings.map;if(map&&map.infoWindow.reposition&&map.infoWindow.isShowing){map.infoWindow.reposition();}}));},_undo:function(){if(this._settings.undoManager&&!this._settings._isApplyEditsCall){this._editToolbar.deactivate();this._undoRedo=true;this._settings.undoManager.undo();}},_redo:function(){if(this._settings.undoManager&&!this._settings._isApplyEditsCall){this._editToolbar.deactivate();this._undoRedo=true;this._settings.undoManager.redo();}},_simplify:function(_6f1,_6f2){if(_69b.prototype.isSelfIntersecting(_6f1)){this._settings.geometryService.simplify([_6f1],function(_6f3){var _6f4=(_6f3&&_6f3.length)?_6f3[0]:_6f4;if(_6f2){_6f2(_6f4);}});}else{if(_6f2){_6f2(_6f1);}}},_autoComplete:function(_6f5,_6f6){var _6f7=this._getLayers("esriGeometryPolygon");var _6f8=new _69e();_6f8.geometry=_6f5;_6f8.returnGeometry=true;this._selectFeatures(_6f7,_6f8,lang.hitch(this,function(_6f9){if(!_6f9||_6f9.length<=0){if(_6f6){_6f6([_6f5]);}}else{this._settings.geometryService.autoComplete(_699.getGeometries(_6f9),this._toPolylines([_6f8.geometry]),function(_6fa){if(_6f6){_6f6(_6fa);}});}}));},_getLayers:function(_6fb){var _6fc=this._settings.layers;return _68f.filter(_6fc,function(_6fd){return _6fd.geometryType===_6fb;});},_selectFeatures:function(_6fe,_6ff,_700,mode){this._selectionHelper.selectFeatures(_6fe,_6ff,mode||_69f.SELECTION_NEW,_700);},_updateSelection:function(evt){var _701=evt.mapPoint;var _702=evt.graphic;this._selectionHelper.selectFeaturesByGeometry(this._settings.layers,_701,_69f.SELECTION_NEW,lang.hitch(this,function(_703){var _704=_68f.some(_703,lang.hitch(this,function(item){return item==_702;}));if(_702&&!_704){var _705=_702.getLayer();if(this._isValidLayer(_705)){var _706=new _69e();_706.objectIds=[_702.attributes[_705.objectIdField]];this._selectionHelper.selectFeatures([_705],_706,_69f.SELECTION_ADD,lang.hitch(this,function(_707){this._updatePopupButtons(_707);this._onEditFeature(_707,_701);}));}else{this._clearSelection();}}else{if(_703&&_703.length){this._updatePopupButtons(_703);this._onEditFeature(_703,_701);}else{this._clearSelection();}}}));},_updatePopupButtons:function(_708){if(!this._usePopup||!_708){return;}var _709=_708.length;var _70a=[this._settings.map.infoWindow._prevFeatureButton,this._settings.map.infoWindow._nextFeatureButton];_68f.forEach(_70a,lang.hitch(this,function(item){(_709>1)?_694.remove(item,"hidden"):_694.add(item,"hidden");}));},_clearSelection:function(_70b){this._selectionHelper.clearSelection(_70b||false);this._reset();},_findCenterPoint:function(_70c){var _70d=_70c.geometry||_70c;var _70e;switch(_70d.type){case "point":_70e=_70d;break;case "polyline":var _70f=_70d.paths[0].length;_70e=_70d.getPoint(0,Math.ceil(_70f/2));break;case "polygon":var _710=_70d.rings.length-1;var _711=_70d.rings[_710].length-1;_70e=_70d.getPoint(_710,_711);break;}return this._settings.map.toScreen(_70e);},_hideAttributeInspector:function(){if(!this._customAttributeInspector&&this._settings.map.infoWindow){this._settings.map.infoWindow.hide();}},_toPolylines:function(_712){var _713=_68f.map(_712,function(_714){var _715=new _69a(_714.spatialReference);_68f.forEach(_714.rings,function(ring){_715.addPath(ring);});return _715;});return _713;},_isNotesFeature:function(_716){var _717=_716.getLayer();var _718=_717?_717.types||null:null;if(!_718){return false;}var _719=_716.attributes[_717.typeIdField];var _71a;_68f.some(_718,function(type){if(type.id===_719){_71a=type.templates;return true;}return false;});if(!_71a){return false;}var _71b=_71a[0]||null;if(!_71b){return false;}var _71c=this._isShapeTool(_71b.drawingTool)||null;return _71c?true:false;},_isValidLayer:function(_71d){var i;var _71e=this._settings.layerInfos;for(i=0;i<_71e.length;i++){var _71f=_71e[i];if(_71d.id==_71f.layerId){return true;}}return false;},_isShapeTool:function(_720){switch(_720){case _6a0.TOOL_ARROW:return Draw.ARROW;case _6a0.TOOL_LEFT_ARROW:return Draw.LEFT_ARROW;case _6a0.TOOL_RIGHT_ARROW:return Draw.RIGHT_ARROW;case _6a0.TOOL_UP_ARROW:return Draw.UP_ARROW;case _6a0.TOOL_DOWN_ARROW:return Draw.DOWN_ARROW;case _6a0.TOOL_CIRCLE:return Draw.CIRCLE;case _6a0.TOOL_ELLIPSE:return Draw.ELLIPSE;case _6a0.TOOL_TRIANGLE:return Draw.TRIANGLE;case _6a0.TOOL_RECTANGLE:return Draw.RECTANGLE;default:return null;}},_toDrawTool:function(_721,_722){var _723=_722.geometryType;switch(_721){case _6a0.TOOL_POINT:return Draw.POINT;case _6a0.TOOL_ARROW:return Draw.ARROW;case _6a0.TOOL_LEFT_ARROW:return Draw.LEFT_ARROW;case _6a0.TOOL_RIGHT_ARROW:return Draw.RIGHT_ARROW;case _6a0.TOOL_UP_ARROW:return Draw.UP_ARROW;case _6a0.TOOL_DOWN_ARROW:return Draw.DOWN_ARROW;case _6a0.TOOL_CIRCLE:return Draw.CIRCLE;case _6a0.TOOL_ELLIPSE:return Draw.ELLIPSE;case _6a0.TOOL_TRIANGLE:return Draw.TRIANGLE;case _6a0.TOOL_RECTANGLE:return Draw.RECTANGLE;case _6a0.TOOL_LINE:return Draw.POLYLINE;case _6a0.TOOL_POLYGON:return Draw.POLYGON;case _6a0.TOOL_FREEHAND:if(_723==="esriGeometryPolyline"){return Draw.FREEHAND_POLYLINE;}else{return Draw.FREEHAND_POLYGON;}break;default:var _724=Draw.POINT;if(_723==="esriGeometryPolyline"){_724=Draw.POLYLINE;if(this._settings.createOptions.polylineDrawTools[0]===_6ad.CREATE_TOOL_FREEHAND_POLYLINE){_724=Draw.FREEHAND_POLYLINE;}}else{if(_723==="esriGeometryPolygon"){_724=Draw.POLYGON;if(this._settings.createOptions.polygonDrawTools[0]===_6ad.CREATE_TOOL_FREEHAND_POLYGON){_724=Draw.FREEHAND_POLYGON;}}}return _724;}},_isModified:function(){var _725=this._editToolbar.getCurrentState();return ((_725.isModified||this._attributeChanged)&&_725.graphic)?_725.graphic:null;},_showInfoWindow:function(_726,_727){if(!this._customAttributeInspector){this._settings.map.infoWindow.show(_726,_727);}}});lang.mixin(_6ad,{CREATE_TOOL_POLYLINE:"polyline",CREATE_TOOL_FREEHAND_POLYLINE:"freehandpolyline",CREATE_TOOL_POLYGON:"polygon",CREATE_TOOL_FREEHAND_POLYGON:"freehandpolygon",CREATE_TOOL_AUTOCOMPLETE:"autocomplete",CREATE_TOOL_RECTANGLE:"rectangle",CREATE_TOOL_TRIANGLE:"triangle",CREATE_TOOL_CIRCLE:"circle",CREATE_TOOL_ELLIPSE:"ellipse",CREATE_TOOL_ARROW:"arrow",CREATE_TOOL_UP_ARROW:"uparrow",CREATE_TOOL_DOWN_ARROW:"downarrow",CREATE_TOOL_RIGHT_ARROW:"rightarrow",CREATE_TOOL_LEFT_ARROW:"leftarrow"});if(has("extend-esri")){lang.setObject("dijit.editing.Editor",_6ad,_6a9);}return _6ad;});},"esri/dijit/editing/tools/DropDownToolBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/dom-style","dijit/registry","dijit/Menu","dijit/form/ComboButton","esri/dijit/editing/tools/ToolBase","esri/kernel","esri/lang"],function(_728,lang,has,_729,_72a,Menu,_72b,_72c,_72d,_72e){var DDTB=_728([_72b,_72c],{declaredClass:"esri.dijit.editing.tools.DropDownToolBase",_enabled:false,_checked:false,postCreate:function(){this._tools=[];this._createTools();this.inherited(arguments);if(this._setShowLabelAttr){this._setShowLabelAttr(false);}},destroy:function(){var tool;var _72f=this._tools;for(tool in _72f){if(_72f.hasOwnProperty(tool)&&_72e.isDefined(_72f[tool])){_72f[tool].destroy();}}this.inherited(arguments);},_createTools:function(){var i;var mnu=new Menu();this.dropDown=mnu;for(i in this._tools){if(this._tools.hasOwnProperty(i)){mnu.addChild(this._tools[i]);}}this._activeTool=mnu.getChildren()[0];this._updateUI();},activate:function(_730){this.inherited(arguments);if(!this._activeTool){this._activateDefaultTool();}else{this._activeTool.activate();}},deactivate:function(){this.inherited(arguments);if(this._activeTool){this._activeTool.deactivate();}},enable:function(_731){var tool;for(tool in this._tools){if(this._tools.hasOwnProperty(tool)){this._tools[tool].enable(_731);}}this.setEnabled(true);this.inherited(arguments);},setChecked:function(_732){this._checked=_732;this._updateUI();},_onDrawEnd:function(_733){},onLayerChange:function(_734,type,_735){this._activeTool=null;this._activeType=type;this._activeTemplate=_735;this._activeLayer=_734;},onItemClicked:function(_736,evt){if(this._activeTool){this._activeTool.deactivate();}this._activeTool=_72a.byId(_736);if(this._checked===false){this._onClick();}else{this._updateUI();if(this._activeTool){this._activeTool.activate();this._activeTool.setChecked(true);}}},_onClick:function(evt){if(this._enabled===false){return;}this._checked=!this._checked;this.inherited(arguments);},_updateUI:function(){this.attr("disabled",!this._enabled);_729.set(this.focusNode,{outline:"none"});_729.set(this.titleNode,{padding:"0px",border:"none"});if(this._checked){_729.set(this.titleNode,{backgroundColor:"#D4DFF2",border:"1px solid #316AC5"});}else{_729.set(this.titleNode,{backgroundColor:"",border:""});}if(this._activeTool){this.attr("iconClass",this._checked?this._activeTool._enabledIcon:this._activeTool._disabledIcon);this.attr("label",this._activeTool.label);}}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.DropDownToolBase",DDTB,_72d);}return DDTB;});},"dijit/form/_ListMouseMixin":function(){define("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(_737,_738,on,_739,_73a){return _737("dijit.form._ListMouseMixin",_73a,{postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,_739.press,function(evt){evt.preventDefault();}));this._listConnect(_739.press,"_onMouseDown");this._listConnect(_739.release,"_onMouseUp");this._listConnect(_738.enter,"_onMouseOver");this._listConnect(_738.leave,"_onMouseOut");},_onMouseDown:function(evt,_73b){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}this._isDragging=true;this._setSelectedAttr(_73b);},_onMouseUp:function(evt,_73c){this._isDragging=false;var _73d=this.selected;var _73e=this._hoveredNode;if(_73d&&_73c==_73d){this.onClick(_73d);}else{if(_73e&&_73c==_73e){this._setSelectedAttr(_73e);this.onClick(_73e);}}},_onMouseOut:function(evt,_73f){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}if(this._isDragging){this._cancelDrag=(new Date()).getTime()+1000;}},_onMouseOver:function(evt,_740){if(this._cancelDrag){var time=(new Date()).getTime();if(time>this._cancelDrag){this._isDragging=false;}this._cancelDrag=null;}this._hoveredNode=_740;this.onHover(_740);if(this._isDragging){this._setSelectedAttr(_740);}}});});},"esri/dijit/editing/Update":function(){define("esri/dijit/editing/Update",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/jsonUtils","esri/OperationBase"],function(_741,lang,has,_742,_743,_744){var _745=_741(_744,{declaredClass:"esri.dijit.editing.Update",type:"edit",label:"Update Features",constructor:function(_746){var i;_746=_746||{};if(!_746.featureLayer){console.error("In constructor of 'esri.dijit.editing.Update', featureLayer not provided");return;}this._featureLayer=_746.featureLayer;if(!_746.preUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Update', preUpdatedGraphics not provided");return;}this._preUpdatedGraphicsGeometries=[];this._preUpdatedGraphicsAttributes=[];for(i=0;i<_746.preUpdatedGraphics.length;i++){this._preUpdatedGraphicsGeometries.push(_746.preUpdatedGraphics[i].geometry.toJson());this._preUpdatedGraphicsAttributes.push(_746.preUpdatedGraphics[i].attributes);}if(!_746.postUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Update', postUpdatedGraphics not provided");return;}this._postUpdatedGraphics=_746.postUpdatedGraphics;this._postUpdatedGraphicsGeometries=[];this._postUpdatedGraphicsAttributes=[];for(i=0;i<_746.postUpdatedGraphics.length;i++){this._postUpdatedGraphicsGeometries.push(_746.postUpdatedGraphics[i].geometry.toJson());this._postUpdatedGraphicsAttributes.push(lang.clone(_746.postUpdatedGraphics[i].attributes));}},performUndo:function(){var i;for(i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(_743.fromJson(this._preUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._preUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,null);},performRedo:function(){var i;for(i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(_743.fromJson(this._postUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._postUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,null);}});if(has("extend-esri")){lang.setObject("dijit.editing.Update",_745,_742);}return _745;});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo){return dojo.cache;});},"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n","dijit/ProgressBar":function(){require({cache:{"url:dijit/templates/ProgressBar.html":"<div class=\"dijitProgressBar dijitProgressBarEmpty\" role=\"progressbar\"\n\t><div  data-dojo-attach-point=\"internalProgress\" class=\"dijitProgressBarFull\"\n\t\t><div class=\"dijitProgressBarTile\" role=\"presentation\"></div\n\t\t><span style=\"visibility:hidden\">&#160;</span\n\t></div\n\t><div data-dojo-attach-point=\"labelNode\" class=\"dijitProgressBarLabel\" id=\"${id}_label\"></div\n\t><img data-dojo-attach-point=\"indeterminateHighContrastImage\" class=\"dijitProgressBarIndeterminateHighContrastImage\" alt=\"\"\n/></div>\n"}});define("dijit/ProgressBar",["require","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/number","./_Widget","./_TemplatedMixin","dojo/text!./templates/ProgressBar.html"],function(_747,_748,_749,lang,_74a,_74b,_74c,_74d){return _748("dijit.ProgressBar",[_74b,_74c],{progress:"0",value:"",maximum:100,places:0,indeterminate:false,label:"",name:"",templateString:_74d,_indeterminateHighContrastImagePath:_747.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);if(!(this.params&&"value" in this.params)){this.value=this.indeterminate?Infinity:this.progress;}},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update();},update:function(_74e){lang.mixin(this,_74e||{});var tip=this.internalProgress,ap=this.domNode;var _74f=1;if(this.indeterminate){ap.removeAttribute("aria-valuenow");}else{if(String(this.progress).indexOf("%")!=-1){_74f=Math.min(parseFloat(this.progress)/100,1);this.progress=_74f*this.maximum;}else{this.progress=Math.min(this.progress,this.maximum);_74f=this.maximum?this.progress/this.maximum:0;}ap.setAttribute("aria-valuenow",this.progress);}ap.setAttribute("aria-describedby",this.labelNode.id);ap.setAttribute("aria-valuemin",0);ap.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(_74f);_749.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);tip.style.width=(_74f*100)+"%";this.onChange();},_setValueAttr:function(v){this._set("value",v);if(v==Infinity){this.update({indeterminate:true});}else{this.update({indeterminate:false,progress:v});}},_setLabelAttr:function(_750){this._set("label",_750);this.update();},_setIndeterminateAttr:function(_751){this.indeterminate=_751;this.update();},report:function(_752){return this.label?this.label:(this.indeterminate?"&#160;":_74a.format(_752,{type:"percent",places:this.places,locale:this.lang}));},onChange:function(){}});});},"esri/layers/RenderMode":function(){define("esri/layers/RenderMode",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","dojo/io/script","esri/kernel"],function(_753,_754,lang,_755,has,_756,_757){var _758=_754(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(_753._scopeName||"dojo")+"IoScript";},initialize:function(map){this.map=map;this._init=true;},startup:function(){},propertyChangeHandler:function(type){},destroy:function(){this._init=false;},drawFeature:function(_759){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _75a=this._featureMap[oid];if(_75a){_75a._count++;}},_decRefCount:function(oid){var _75b=this._featureMap[oid];if(_75b){_75b._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_75c){var fmap=this._featureMap,_75d=fmap[oid],_75e=this.featureLayer;if(!_75d){fmap[oid]=_75c;_75e._add(_75c);_75c._count=0;}return _75d||_75c;},_removeFeatureIIf:function(oid){var _75f=this._featureMap[oid],_760=this.featureLayer;if(_75f){if(_75f._count){return;}delete this._featureMap[oid];_760._remove(_75f);}return _75f;},_clearIIf:function(){var i,_761=this.featureLayer,_762=_761.graphics,_763=_761._selectedFeatures,_764=_761.objectIdField;for(i=_762.length-1;i>=0;i--){var _765=_762[i];var oid=_765.attributes[_764];if(oid in _763){_765._count=1;continue;}_765._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=_756[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||_756[this._prefix+id];if(dfd){try{dfd.cancel();_756._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){_756._validCheck(null);},_toggleVisibility:function(show){var _766=this.featureLayer,_767=_766.graphics,_768=show?"show":"hide",i,len=_767.length;show=show&&_766._ager;for(i=0;i<len;i++){var _769=_767[i];_769[_768]();if(show){_766._repaint(_769);}}},_applyTimeFilter:function(_76a){var _76b=this.featureLayer;if(!_76b.timeInfo||_76b.suspended){return;}if(!_76a){_76b._fireUpdateStart();}var _76c=_76b._trackManager;if(_76c){_76c.clearTracks();}var defn=_76b.getTimeDefinition(),_76d=_76b._getOffsettedTE(_76b._mapTimeExtent);if(_76d){_76d=_76b._getTimeOverlap(defn,_76d);if(_76d){var _76e=_76b._filterByTime(_76b.graphics,_76d.startTime,_76d.endTime);if(_76c){_76c.addFeatures(_76e.match);}_755.forEach(_76e.match,function(_76f){var _770=_76f._shape;if(!_76f.visible){_76f.show();_770=_76f._shape;_770&&_770._moveToFront();}if(_76b._ager&&_770){_76b._repaint(_76f);}});_755.forEach(_76e.noMatch,function(_771){if(_771.visible){_771.hide();}});}else{this._toggleVisibility(false);}}else{if(_76c){_76c.addFeatures(_76b.graphics);}this._toggleVisibility(true);}if(_76c){_76c.moveLatestToFront();_76c.drawTracks();}if(!_76a){_76b._fireUpdateEnd();}}});if(has("extend-esri")){lang.setObject("layers._RenderMode",_758,_757);}return _758;});},"dojox/grid/_ViewManager":function(){define("dojox/grid/_ViewManager",["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(_772,has,_773){return _772("dojox.grid._ViewManager",null,{constructor:function(_774){this.grid=_774;},defaultWidth:200,views:[],resize:function(){this.onEach("resize");},render:function(){this.onEach("render");},addView:function(_775){_775.idx=this.views.length;this.views.push(_775);},destroyViews:function(){for(var i=0,v;v=this.views[i];i++){v.destroy();}this.views=[];},getContentNodes:function(){var _776=[];for(var i=0,v;v=this.views[i];i++){_776.push(v.contentNode);}return _776;},forEach:function(_777){for(var i=0,v;v=this.views[i];i++){_777(v,i);}},onEach:function(_778,_779){_779=_779||[];for(var i=0,v;v=this.views[i];i++){if(_778 in v){v[_778].apply(v,_779);}}},normalizeHeaderNodeHeight:function(){var _77a=[];for(var i=0,v;(v=this.views[i]);i++){if(v.headerContentNode.firstChild){_77a.push(v.headerContentNode);}}this.normalizeRowNodeHeights(_77a);},normalizeRowNodeHeights:function(_77b){var h=0;var _77c=[];if(this.grid.rowHeight){h=this.grid.rowHeight;}else{if(_77b.length<=1){return;}for(var i=0,n;(n=_77b[i]);i++){if(!_773.contains(n,"dojoxGridNonNormalizedCell")){_77c[i]=n.firstChild.offsetHeight;h=Math.max(h,_77c[i]);}}h=(h>=0?h:0);if((has("mozilla")||has("ie")>8)&&h){h++;}}for(i=0;(n=_77b[i]);i++){if(_77c[i]!=h){n.firstChild.style.height=h+"px";}}},resetHeaderNodeHeight:function(){for(var i=0,v,n;(v=this.views[i]);i++){n=v.headerContentNode.firstChild;if(n){n.style.height="";}}},renormalizeRow:function(_77d){var _77e=[];for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(_77d));i++){n.firstChild.style.height="";_77e.push(n);}this.normalizeRowNodeHeights(_77e);},getViewWidth:function(_77f){return this.views[_77f].getWidth()||this.defaultWidth;},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(_780){_780.headerContentNode.style.height="";});var h=0;this.forEach(function(_781){h=Math.max(_781.headerNode.offsetHeight,h);});return h;},measureContent:function(){var h=0;this.forEach(function(_782){h=Math.max(_782.domNode.offsetHeight,h);});return h;},findClient:function(_783){var c=this.grid.elasticView||-1;if(c<0){for(var i=1,v;(v=this.views[i]);i++){if(v.viewWidth){for(i=1;(v=this.views[i]);i++){if(!v.viewWidth){c=i;break;}}break;}}}if(c<0){c=Math.floor(this.views.length/2);}return c;},arrange:function(l,w){var i,v,vw,len=this.views.length,self=this;var c=(w<=0?len:this.findClient());var _784=function(v,l){var ds=v.domNode.style;var hs=v.headerNode.style;if(!self.grid.isLeftToRight()){ds.right=l+"px";if(has("ff")<4){hs.right=l+v.getScrollbarWidth()+"px";}else{hs.right=l+"px";}if(!has("webkit")){hs.width=parseInt(hs.width,10)-v.getScrollbarWidth()+"px";}}else{ds.left=l+"px";hs.left=l+"px";}ds.top=0+"px";hs.top=0;};for(i=0;(v=this.views[i])&&(i<c);i++){vw=this.getViewWidth(i);v.setSize(vw,0);_784(v,l);if(v.headerContentNode&&v.headerContentNode.firstChild){vw=v.getColumnsWidth()+v.getScrollbarWidth();}else{vw=v.domNode.offsetWidth;}l+=vw;}i++;var r=w;for(var j=len-1;(v=this.views[j])&&(i<=j);j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;_784(v,r);}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);_784(v,l);}return l;},renderRow:function(_785,_786,_787){var _788=[];for(var i=0,v,n,_789;(v=this.views[i])&&(n=_786[i]);i++){_789=v.renderRow(_785);n.appendChild(_789);_788.push(_789);}if(!_787){this.normalizeRowNodeHeights(_788);}},rowRemoved:function(_78a){this.onEach("rowRemoved",[_78a]);},updateRow:function(_78b,_78c){for(var i=0,v;v=this.views[i];i++){v.updateRow(_78b);}if(!_78c){this.renormalizeRow(_78b);}},updateRowStyles:function(_78d){this.onEach("updateRowStyles",[_78d]);},setScrollTop:function(_78e){var top=_78e;for(var i=0,v;v=this.views[i];i++){top=v.setScrollTop(_78e);if(has("ie")&&v.headerNode&&v.scrollboxNode){v.headerNode.scrollLeft=v.scrollboxNode.scrollLeft;}}return top;},getFirstScrollingView:function(){for(var i=0,v;(v=this.views[i]);i++){if(v.hasHScrollbar()||v.hasVScrollbar()){return v;}}return null;}});});},"esri/dijit/editing/tools/SelectionTools":function(){define(["dojo/_base/lang","dojo/has","esri/layers/FeatureLayer","esri/toolbars/draw","esri/kernel"],function(lang,has,_78f,Draw,_790){var _791={select:{id:"btnNewSelection",_enabledIcon:"toolbarIcon newSelectionIcon",_disabledIcon:"toolbarIcon newSelectionIcon",_drawType:Draw.EXTENT,_selectMethod:_78f.SELECTION_NEW,_label:"NLS_selectionNewLbl"},selectadd:{id:"btnAddToSelection",_enabledIcon:"toolbarIcon addToSelectionIcon",_disabledIcon:"toolbarIcon addToSelectionIcon",_drawType:Draw.EXTENT,_selectMethod:_78f.SELECTION_ADD,_label:"NLS_selectionAddLbl"},selectremove:{id:"btnSubtractFromSelection",_enabledIcon:"toolbarIcon removeFromSelectionIcon",_disabledIcon:"toolbarIcon removeFromSelectionIcon",_drawType:Draw.EXTENT,_selectMethod:_78f.SELECTION_SUBTRACT,_label:"NLS_selectionRemoveLbl"},selectClear:{id:"btnClearSelection",_enabledIcon:"toolbarIcon clearSelectionIcon",_disabledIcon:"toolbarIcon clearSelectionIcon",_enabled:false,_label:"NLS_selectionClearLbl"}};if(has("extend-esri")){lang.setObject("dijit.editing.tools.SelectionTools",_791,_790);}return _791;});},"dijit/form/NumberTextBox":function(){define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(_792,lang,_793,_794){var _795=_792("dijit.form.NumberTextBoxMixin",null,{pattern:_793.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:_793.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},_setConstraintsAttr:function(_796){var _797=typeof _796.places=="number"?_796.places:0;if(_797){_797++;}if(typeof _796.max!="number"){_796.max=9*Math.pow(10,15-_797);}if(typeof _796.min!="number"){_796.min=-9*Math.pow(10,15-_797);}this.inherited(arguments,[_796]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}},_onFocus:function(){if(this.disabled){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _798=this.format(val,this.constraints);if(_798!==undefined){this.textbox.value=_798;}}this.inherited(arguments);},format:function(_799,_79a){var _79b=String(_799);if(typeof _799!="number"){return _79b;}if(isNaN(_799)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(_799,_79a))&&_79a.exponent!==false&&/\de[-+]?\d/i.test(_79b)){return _79b;}if(this.editOptions&&this.focused){_79a=lang.mixin({},_79a,this.editOptions);}return this._formatter(_799,_79a);},_parser:_793.parse,parse:function(_79c,_79d){var v=this._parser(_79c,lang.mixin({},_79d,(this.editOptions&&this.focused)?this.editOptions:{}));if(this.editOptions&&this.focused&&isNaN(v)){v=this._parser(_79c,_79d);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(_79e){return (_79e==null||_79e==="")?NaN:this.inherited(arguments);},serialize:function(_79f,_7a0){return (typeof _79f!="number"||isNaN(_79f))?"":this.inherited(arguments);},_setBlurValue:function(){var val=lang.hitch(lang.mixin({},this,{focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(_7a1,_7a2,_7a3){if(_7a1!==undefined&&_7a3===undefined){_7a3=String(_7a1);if(typeof _7a1=="number"){if(isNaN(_7a1)){_7a3="";}else{if(("rangeCheck" in this&&this.rangeCheck(_7a1,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_7a3)){_7a3=undefined;}}}else{if(!_7a1){_7a3="";_7a1=NaN;}else{_7a1=undefined;}}}this.inherited(arguments,[_7a1,_7a2,_7a3]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+_793._realNumberRegexp(lang.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_7a4){if(!this.focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});var _7a5=_792("dijit.form.NumberTextBox",[_794,_795],{baseClass:"dijitTextBox dijitNumberTextBox"});_7a5.Mixin=_795;return _7a5;});},"esri/tasks/BufferParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/Polygon","esri/geometry/jsonUtils"],function(_7a6,lang,_7a7,_7a8,has,_7a9,_7aa,_7ab){var _7ac=_7a6(null,{declaredClass:"esri.tasks.BufferParameters",geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:false,geodesic:false,toJson:function(){var json={unit:this.unit,unionResults:this.unionResults,geodesic:this.geodesic},dt=this.distances,_7ad=this.outSpatialReference,_7ae=this.bufferSpatialReference;var _7af=_7a7.map(this.geometries,function(geom){geom=(geom.type==="extent")?this._extentToPolygon(geom):geom;return geom.toJson();},this);var _7b0=this.geometries;if(_7b0&&_7b0.length>0){var _7b1=_7b0[0].type==="extent"?"esriGeometryPolygon":_7ab.getJsonType(_7b0[0]);json.geometries=_7a8.toJson({geometryType:_7b1,geometries:_7af});json.inSR=_7b0[0].spatialReference.wkid?_7b0[0].spatialReference.wkid:_7a8.toJson(_7b0[0].spatialReference.toJson());}if(dt){json.distances=dt.join(",");}if(_7ad){json.outSR=_7ad.wkid?_7ad.wkid:_7a8.toJson(_7ad.toJson());}if(_7ae){json.bufferSR=_7ae.wkid?_7ae.wkid:_7a8.toJson(_7ae.toJson());}return json;},_extentToPolygon:function(_7b2){var xmin=_7b2.xmin,ymin=_7b2.ymin,xmax=_7b2.xmax,ymax=_7b2.ymax;return new _7aa({"rings":[[[xmin,ymin],[xmin,ymax],[xmax,ymax],[xmax,ymin],[xmin,ymin]]],"spatialReference":_7b2.spatialReference.toJson()});}});if(has("extend-esri")){lang.setObject("tasks.BufferParameters",_7ac,_7a9);}return _7ac;});},"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n","esri/toolbars/_GraphicMover":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/json","dojo/has","dojo/dom-style","dojox/gfx/Moveable","dojox/gfx/Mover","dojox/gfx/matrix","esri/kernel","esri/geometry/webMercatorUtils","esri/geometry/ScreenPoint"],function(_7b3,lang,_7b4,_7b5,has,_7b6,_7b7,_7b8,_7b9,_7ba,_7bb,_7bc){var GM=_7b3(null,{declaredClass:"esri.toolbars._GraphicMover",constructor:function(_7bd,map,_7be){this.graphic=_7bd;this.map=map;this.toolbar=_7be;this._enableGraphicMover();this._moved=false;},refresh:function(_7bf){var _7c0=this.graphic.getDojoShape();if(_7c0&&(_7bf||!_7c0._hostGraphic)){this._disableGraphicMover();this._enableGraphicMover();}},destroy:function(){this._disableGraphicMover();},hasMoved:function(){return this._moved;},_enableGraphicMover:function(){var _7c1=this.graphic,_7c2=_7c1.getDojoShape();if(_7c2){_7c2._hostGraphic=_7c1;this._moveable=new _7b7(_7c2,{mover:GM.Mover});this._moveStartHandle=_7b4.connect(this._moveable,"onMoveStart",this,this._moveStartHandler);this._firstMoveHandle=_7b4.connect(this._moveable,"onFirstMove",this,this._firstMoveHandler);this._movingHandle=_7b4.connect(this._moveable,"onMoving",this,this._movingHandler);this._moveStopHandle=_7b4.connect(this._moveable,"onMoveStop",this,this._moveStopHandler);var node=_7c2.getEventSource();if(node){_7b6.set(node,"cursor",this.toolbar._cursors.move);}}},_disableGraphicMover:function(){var _7c3=this._moveable;if(_7c3){_7b4.disconnect(this._moveStartHandle);_7b4.disconnect(this._firstMoveHandle);_7b4.disconnect(this._movingHandle);_7b4.disconnect(this._moveStopHandle);var _7c4=_7c3.shape;if(_7c4){_7c4._hostGraphic=null;var node=_7c4.getEventSource();if(node){_7b6.set(node,"cursor",null);}}_7c3.destroy();}this._moveable=null;},_moveStartHandler:function(){var _7c5=this.graphic,map=this.map;this._startTx=_7c5.getDojoShape().getTransform();if(this.graphic.geometry.type==="point"){if(map.snappingManager){map.snappingManager._setUpSnapping();}}this.toolbar.onGraphicMoveStart(_7c5);},_firstMoveHandler:function(){this.toolbar._beginOperation("MOVE");this.toolbar.onGraphicFirstMove(this.graphic);},_movingHandler:function(_7c6){this.toolbar.onGraphicMove(this.graphic,_7c6.shape.getTransform());},_moveStopHandler:function(_7c7){var _7c8=this.graphic,_7c9=this.toolbar,map=this.map,mx=_7b9,_7ca=_7c9._geo?_7bb.geographicToWebMercator(_7c8.geometry):_7c8.geometry,type=_7ca.type,_7cb=_7c8.getDojoShape(),tx=_7cb.getTransform();if(_7b5.toJson(tx)!==_7b5.toJson(this._startTx)){this._moved=true;switch(type){case "point":var _7cc=[tx,mx.invert(this._startTx)],_7cd;if(map.snappingManager){_7cd=map.snappingManager._snappingPoint;}_7ca=_7cd||map.toMap(mx.multiplyPoint(_7cc,map.toScreen(_7ca,true)));if(map.snappingManager){map.snappingManager._killOffSnapping();}break;case "polyline":_7ca=this._updatePolyGeometry(_7ca,_7ca.paths,tx);break;case "polygon":_7ca=this._updatePolyGeometry(_7ca,_7ca.rings,tx);break;}_7cb.setTransform(null);_7c8.setGeometry(_7c9._geo?_7bb.webMercatorToGeographic(_7ca,true):_7ca);}else{this._moved=false;}_7c9._endOperation("MOVE");_7c9.onGraphicMoveStop(_7c8,tx);if(!this._moved){var e=_7c7.__e,_7ce=this.map.position,pt=new _7bc(e.pageX-_7ce.x,e.pageY-_7ce.y);_7c9.onGraphicClick(_7c8,{screenPoint:pt,mapPoint:this.map.toMap(pt)});}},_updatePolyGeometry:function(_7cf,_7d0,_7d1){var map=this.map,_7d2=_7cf.getPoint(0,0),_7d3=map.toMap(map.toScreen(_7d2).offset(_7d1.dx,_7d1.dy)),_7d4=_7d3.x-_7d2.x,_7d5=_7d3.y-_7d2.y,i,j,seg,_7d6;for(i=0;i<_7d0.length;i++){seg=_7d0[i];for(j=0;j<seg.length;j++){_7d6=_7cf.getPoint(i,j);_7cf.setPoint(i,j,_7d6.offset(_7d4,_7d5));}}return _7cf;}});GM.Mover=_7b3(_7b8,{declaredClass:"esri.toolbars._Mover",constructor:function(_7d7,e,host){this.__e=e;}});if(has("extend-esri")){lang.setObject("toolbars._GraphicMover",GM,_7ba);lang.setObject("toolbars._Mover",GM.Mover,_7ba);}return GM;});},"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n","esri/dijit/editing/Util":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel"],function(lang,_7d8,has,_7d9){var util={};util={findFeatures:function(ids,_7da,_7db){var _7dc=_7da.objectIdField;var _7dd=_7da.graphics;var _7de=_7d8.filter(_7dd,function(_7df){return _7d8.some(ids,function(id){return _7df.attributes[_7dc]===id.objectId;});});if(_7db){_7db(_7de);}else{return _7de;}},getSelection:function(_7e0){var _7e1=[];_7d8.forEach(_7e0,function(_7e2){var _7e3=_7e2.getSelectedFeatures();_7d8.forEach(_7e3,function(_7e4){_7e1.push(_7e4);});});return _7e1;}};if(has("extend-esri")){lang.setObject("dijit.editing.Util.LayerHelper",util,_7d9);}return util;});},"esri/tasks/FeatureSet":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/graphic","esri/SpatialReference","esri/graphicsUtils","esri/geometry/jsonUtils","esri/symbols/jsonUtils"],function(_7e5,lang,_7e6,has,_7e7,_7e8,_7e9,_7ea,_7eb,_7ec,_7ed){var _7ee=_7e5(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(json){if(json){lang.mixin(this,json);var _7ef=this.features,sr=json.spatialReference,_7f0=_7ec.getGeometryType(json.geometryType);sr=(this.spatialReference=new _7ea(sr));this.geometryType=json.geometryType;if(json.fields){this.fields=json.fields;}_7e6.forEach(_7ef,function(_7f1,i){var _7f2=_7f1.geometry&&_7f1.geometry.spatialReference;_7ef[i]=new _7e9((_7f0&&_7f1.geometry)?new _7f0(_7f1.geometry):null,_7f1.symbol&&_7ed.fromJson(_7f1.symbol),_7f1.attributes);if(_7ef[i].geometry&&!_7f2){_7ef[i].geometry.setSpatialReference(sr);}});}else{this.features=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(_7f3){var json={};if(this.displayFieldName){json.displayFieldName=this.displayFieldName;}if(this.fields){json.fields=this.fields;}if(this.spatialReference){json.spatialReference=this.spatialReference.toJson();}else{if(this.features[0]&&this.features[0].geometry){json.spatialReference=this.features[0].geometry.spatialReference.toJson();}}if(this.features[0]){if(this.features[0].geometry){json.geometryType=_7ec.getJsonType(this.features[0].geometry);}json.features=_7eb._encodeGraphics(this.features,_7f3);}json.exceededTransferLimit=this.exceededTransferLimit;return _7e8.fixJson(json);}});if(has("extend-esri")){lang.setObject("tasks.FeatureSet",_7ee,_7e7);}return _7ee;});},"esri/tasks/LengthsParameters":function(){define("esri/tasks/LengthsParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(_7f4,lang,_7f5,_7f6,has,_7f7){var _7f8=_7f4(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var _7f9=_7f5.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=_7f6.toJson(_7f9);var _7fa=this.polylines[0].spatialReference;json.sr=_7fa.wkid?_7fa.wkid:_7f6.toJson(_7fa.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.geodesic){json.geodesic=this.geodesic;}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});if(has("extend-esri")){lang.setObject("tasks.LengthsParameters",_7f8,_7f7);}return _7f8;});},"esri/dijit/editing/TemplatePickerItem":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","dojo/sniff","dojo/dom-style","dijit/_Widget","dijit/_Templated","dojox/gfx","esri/symbols/jsonUtils","esri/kernel"],function(_7fb,lang,_7fc,has,_7fd,_7fe,_7ff,_800,gfx,_801,_802){var TPI=_7fb([_7ff,_800],{declaredClass:"esri.dijit.editing.TemplatePickerItem",templateString:"<div class='item' style='text-align: center;'>"+"<div class='itemSymbol' dojoAttachPoint='_surfaceNode'></div>"+"<div class='itemLabel'>${label}</div>"+"</div>",startup:function(){if(this._started){return;}this.inherited(arguments);this._surface=this._draw(this._surfaceNode,this.symbol,this.surfaceWidth,this.surfaceHeight,this.template);},_draw:function(node,_803,_804,_805,_806){if(!_803){return;}var _807=gfx.createSurface(node,_804,_805);if(has("ie")<9){var _808=_807.getEventSource();_7fe.set(_808,"position","relative");_7fe.set(_808.parentNode,"position","relative");}var _809=(!this.legendOverride&&this._getDrawingToolShape(_803,_806))||_801.getShapeDescriptors(_803);var _80a;try{_80a=_807.createShape(_809.defaultShape).setFill(_809.fill).setStroke(_809.stroke);}catch(e){_807.clear();_807.destroy();return;}var bbox=_80a.getBoundingBox(),_80b=bbox.width,_80c=bbox.height,_80d=-(bbox.x+(_80b/2)),_80e=-(bbox.y+(_80c/2)),dim=_807.getDimensions(),_80f={dx:_80d+dim.width/2,dy:_80e+dim.height/2};if(_80b>_804||_80c>_805){var _810=_80b>_80c?_80b:_80c;var _811=_804<_805?_804:_805;var _812=(_811-5)/_810;lang.mixin(_80f,{xx:_812,yy:_812});}_80a.applyTransform(_80f);return _807;},_getDrawingToolShape:function(_813,_814){var _815,_816=_814?_814.drawingTool||null:null;switch(_816){case "esriFeatureEditToolArrow":_815={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 E"};break;case "esriFeatureEditToolLeftArrow":_815={type:"path",path:"M -15,1 L -8,8 L -8,5 L 10,5 L 10,-2 L -8,-2 L -8,-5 L -15,1 E"};break;case "esriFeatureEditToolRightArrow":_815={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 E"};break;case "esriFeatureEditToolUpArrow":_815={type:"path",path:"M 1,-10 L 8,-3 L 5,-3 L 5,15 L -2,15 L -2,-3 L -5,-3 L 1,-10 E"};break;case "esriFeatureEditToolDownArrow":_815={type:"path",path:"M 1,15 L 8,8 L 5,8 L 5,-10 L -2,-10 L -2,8 L -5,8 L 1,15 E"};break;case "esriFeatureEditToolTriangle":_815={type:"path",path:"M -10,14 L 2,-10 L 14,14 L -10,14 E"};break;case "esriFeatureEditToolRectangle":_815={type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 E"};break;case "esriFeatureEditToolCircle":_815={type:"circle",cx:0,cy:0,r:10};break;case "esriFeatureEditToolEllipse":_815={type:"ellipse",cx:0,cy:0,rx:10,ry:5};break;case "esriFeatureEditToolFreehand":if(_813.type==="simplelinesymbol"||_813.type==="cartographiclinesymbol"){_815={type:"path",path:"m -11, -7c-1.5,-3.75 7.25,-9.25 12.5,-7c5.25,2.25 6.75,9.75 3.75,12.75c-3,3 -3.25,2.5 -9.75,5.25c-6.5,2.75 -7.25,14.25 2,15.25c9.25,1 11.75,-4 13.25,-6.75c1.5,-2.75 3.5,-11.75 12,-6.5"};}else{_815={type:"path",path:"M 10,-13 c3.1,0.16667 4.42564,2.09743 2.76923,3.69231c-2.61025,2.87179 -5.61025,5.6718 -6.14358,6.20513c-0.66667,0.93333 -0.46667,1.2 -0.53333,1.93333c-0.00001,0.86666 0.6,1.66667 1.13334,2c1.03077,0.38462 2.8,0.93333 3.38974,1.70769c0.47693,0.42564 0.87693,0.75897 1.41026,1.75897c0.13333,1.06667 -0.46667,2.86667 -1.8,3.8c-0.73333,0.73333 -3.86667,2.66666 -4.86667,3.13333c-0.93333,0.8 -7.4,3.2 -7.6,3.06667c-1.06667,0.46667 -4.73333,1.13334 -5.2,1.26667c-1.6,0.33334 -4.6,0.4 -6.25128,0.05128c-1.41539,-0.18462 -2.34872,-2.31796 -1.41539,-4.45129c0.93333,-1.73333 1.86667,-3.13333 2.64615,-3.85641c1.28718,-1.47692 2.57437,-2.68204 3.88718,-3.54359c0.88718,-1.13845 1.8,-1.33333 2.26666,-2.45641c0.33334,-0.74359 0.37949,-1.7641 0.06667,-2.87692c-0.66666,-1.46666 -1.66666,-1.86666 -2.98975,-2.2c-1.27692,-0.26666 -2.12307,-0.64102 -3.27692,-1.46666c-0.66667,-1.00001 -1.01538,-3.01539 0.73333,-4.06667c1.73333,-1.2 3.6,-1.93333 4.93333,-2.2c1.33333,-0.46667 4.84104,-1.09743 5.84103,-1.23076c1.60001,-0.46667 6.02564,-0.50257 7.29231,-0.56924z"};}break;default:return null;}return {defaultShape:_815,fill:_813.getFill(),stroke:_813.getStroke()};},_repaint:function(_817){if(!_817){this._surface=this._draw(this._surfaceNode,this.symbol,this.surfaceWidth,this.surfaceHeight,this.template);return;}if(_817.getStroke&&_817.setStroke){_817.setStroke(_817.getStroke());}if(_817.getFill&&_817.setFill){_817.setFill(_817.getFill());}if(_817.children&&lang.isArray(_817.children)){_7fc.forEach(_817.children,this._repaint,this);}},destroy:function(){if(this._surface){this._surface.destroy();delete this._surface;}this.inherited(arguments);}});if(has("extend-esri")){lang.setObject("dijit.editing.TemplatePickerItem",TPI,_802);}return TPI;});},"esri/dijit/editing/Add":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/OperationBase"],function(_818,lang,has,_819,_81a){var Add=_818(_81a,{declaredClass:"esri.dijit.editing.Add",type:"edit",label:"Add Features",constructor:function(_81b){_81b=_81b||{};if(!_81b.featureLayer){console.error("In constructor of 'esri.dijit.editing.Add', featureLayer is not provided");return;}this._featureLayer=_81b.featureLayer;if(!_81b.addedGraphics){console.error("In constructor of 'esri.dijit.editing.Add', no graphics provided");return;}this._addedGraphics=_81b.addedGraphics;},performUndo:function(){this._featureLayer.applyEdits(null,null,this._addedGraphics);},performRedo:function(){this._featureLayer.applyEdits(this._addedGraphics,null,null);}});if(has("extend-esri")){lang.setObject("dijit.editing.Add",Add,_819);}return Add;});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(_81c,_81d,fx,dom,_81e,_81f,_820,lang,_821,on,has,_822,_823,_824,_825,_826,_827,_828){var _829=_81d("dijit._MasterTooltip",[_824,_825],{duration:_822.defaultDuration,templateString:_827,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new _826(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_82a,_82b,_82c,rtl,_82d){if(this.aroundNode&&this.aroundNode===_82b&&this.containerNode.innerHTML==_82a){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_82a;if(_82d){this.set("textDir",_82d);}this.containerNode.align=rtl?"right":"left";var pos=_823.around(this.domNode,_82b,_82c&&_82c.length?_82c:_82e.defaultPosition,!rtl,lang.hitch(this,"orient"));var _82f=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_82f.y+((_82f.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_82f.x+((_82f.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}else{this.connectorNode.style.left="";this.connectorNode.style.top="";}}_820.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_82b;},orient:function(node,_830,_831,_832,_833){this.connectorNode.style.top="";var _834=_832.h,_835=_832.w;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_830+"-"+_831];this.domNode.style.width="auto";var size=_81f.position(this.domNode);if(has("ie")==9){size.w+=2;}var _836=Math.min((Math.max(_835,1)),size.w);_81f.setMarginBox(this.domNode,{w:_836});if(_831.charAt(0)=="B"&&_830.charAt(0)=="B"){var bb=_81f.position(node);var _837=this.connectorNode.offsetHeight;if(bb.h>_834){var _838=_834-((_833.h+_837)>>1);this.connectorNode.style.top=_838+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_833.h/2-_837/2,0),bb.h-_837)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_835);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_839){if(this._onDeck&&this._onDeck[1]==_839){this._onDeck=null;}else{if(this.aroundNode===_839){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_81c.forEach(node.children,function(_83a){this._setAutoTextDir(_83a);},this);},_setTextDirAttr:function(_83b){this._set("textDir",_83b);if(_83b=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_828.showTooltip=function(_83c,_83d,_83e,rtl,_83f){if(_83e){_83e=_81c.map(_83e,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_82e._masterTT){_828._masterTT=_82e._masterTT=new _829();}return _82e._masterTT.show(_83c,_83d,_83e,rtl,_83f);};_828.hideTooltip=function(_840){return _82e._masterTT&&_82e._masterTT.hide(_840);};var _82e=_81d("dijit.Tooltip",_824,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(_841){_81c.forEach(this._connections||[],function(_842){_81c.forEach(_842,function(_843){_843.remove();});},this);this._connectIds=_81c.filter(lang.isArrayLike(_841)?_841:(_841?[_841]:[]),function(id){return dom.byId(id,this.ownerDocument);},this);this._connections=_81c.map(this._connectIds,function(id){var node=dom.byId(id,this.ownerDocument),_844=this.selector,_845=_844?function(_846){return on.selector(_844,_846);}:function(_847){return _847;},self=this;return [on(node,_845(_821.enter),function(){self._onHover(this);}),on(node,_845("focusin"),function(){self._onHover(this);}),on(node,_845(_821.leave),lang.hitch(self,"_onUnHover")),on(node,_845("focusout"),lang.hitch(self,"_onUnHover"))];},this);this._set("connectId",_841);},addTarget:function(node){var id=node.id||node;if(_81c.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_81c.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_81e.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_81c.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},getContent:function(node){return this.label||this.domNode.innerHTML;},_onHover:function(_848){if(!this._showTimer){this._showTimer=this.defer(function(){this.open(_848);},this.showDelay);}},_onUnHover:function(){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}this.close();},open:function(_849){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}var _84a=this.getContent(_849);if(!_84a){return;}_82e.show(_84a,_849,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_849;this.onShow(_849,this.position);},close:function(){if(this._connectNode){_82e.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){this._showTimer.remove();delete this._showTimer;}},onShow:function(){},onHide:function(){},destroy:function(){this.close();_81c.forEach(this._connections||[],function(_84b){_81c.forEach(_84b,function(_84c){_84c.remove();});},this);this.inherited(arguments);}});_82e._MasterTooltip=_829;_82e.show=_828.showTooltip;_82e.hide=_828.hideTooltip;_82e.defaultPosition=["after-centered","before-centered"];return _82e;});},"dijit/form/DropDownButton":function(){require({cache:{"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n"}});define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(_84d,lang,_84e,_84f,_850,_851,_852,_853,_854){return _84d("dijit.form.DropDownButton",[_851,_852,_853],{baseClass:"dijitDropDownButton",templateString:_854,_fillContent:function(){if(this.srcNodeRef){var _855=_84e("*",this.srcNodeRef);this.inherited(arguments,[_855[0]]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){var _856=_84e("[widgetId]",this.dropDownContainer)[0];this.dropDown=_84f.byNode(_856);delete this.dropDownContainer;}if(this.dropDown){_850.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _857=this.dropDown;return (!!_857&&(!_857.href||_857.isLoaded));},loadDropDown:function(_858){var _859=this.dropDown;var _85a=_859.on("load",lang.hitch(this,function(){_85a.remove();_858();}));_859.refresh();},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});});},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(_85b,_85c,keys,has,_85d){return _85b("dijit.form._FormValueMixin",_85d,{readOnly:false,_setReadOnlyAttr:function(_85e){_85c.set(this.focusNode,"readOnly",_85e);this._set("readOnly",_85e);},postCreate:function(){this.inherited(arguments);if(has("ie")){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_85f,_860){this._handleOnChange(_85f,_860);},_handleOnChange:function(_861,_862){this._set("value",_861);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){if(has("ie")<9||(has("ie")&&has("quirks"))){e.preventDefault();var node=e.srcElement,te=node.ownerDocument.createEventObject();te.keyCode=keys.ESCAPE;te.shiftKey=e.shiftKey;node.fireEvent("onkeypress",te);}}}});});},"dojox/date/islamic/locale":function(){define("dojox/date/islamic/locale",["../..","dojo/_base/lang","dojo/_base/array","dojo/date","dojo/i18n","dojo/regexp","dojo/string","./Date","dojo/i18n!dojo/cldr/nls/islamic"],function(_863,lang,arr,dd,i18n,_864,_865,_866,_867){var _868=lang.getObject("date.islamic.locale",true,_863);function _869(_86a,_86b,_86c,_86d,_86e){return _86e.replace(/([a-z])\1*/ig,function(_86f){var s,pad;var c=_86f.charAt(0);var l=_86f.length;var _870=["abbr","wide","narrow"];switch(c){case "G":s=_86b["eraAbbr"][0];break;case "y":s=String(_86a.getFullYear());break;case "M":var m=_86a.getMonth();if(l<3){s=m+1;pad=true;}else{var _871=["months","format",_870[l-3]].join("-");s=_86b[_871][m];}break;case "d":s=_86a.getDate(true);pad=true;break;case "E":var d=_86a.getDay();if(l<3){s=d+1;pad=true;}else{var _872=["days","format",_870[l-3]].join("-");s=_86b[_872][d];}break;case "a":var _873=(_86a.getHours()<12)?"am":"pm";s=_86b["dayPeriods-format-wide-"+_873];break;case "h":case "H":case "K":case "k":var h=_86a.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_86a.getMinutes();pad=true;break;case "s":s=_86a.getSeconds();pad=true;break;case "S":s=Math.round(_86a.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "z":s=dd.getTimezoneName(_86a.toGregorian());if(s){break;}l=4;case "Z":var _874=_86a.toGregorian().getTimezoneOffset();var tz=[(_874<=0?"+":"-"),_865.pad(Math.floor(Math.abs(_874)/60),2),_865.pad(Math.abs(_874)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+_86e);}if(pad){s=_865.pad(s,l);}return s;});};_868.format=function(_875,_876){_876=_876||{};var _877=i18n.normalizeLocale(_876.locale);var _878=_876.formatLength||"short";var _879=_868._getIslamicBundle(_877);var str=[];var _87a=lang.hitch(this,_869,_875,_879,_877,_876.fullYear);if(_876.selector=="year"){var year=_875.getFullYear();return year;}if(_876.selector!="time"){var _87b=_876.datePattern||_879["dateFormat-"+_878];if(_87b){str.push(_87c(_87b,_87a));}}if(_876.selector!="date"){var _87d=_876.timePattern||_879["timeFormat-"+_878];if(_87d){str.push(_87c(_87d,_87a));}}var _87e=str.join(" ");return _87e;};_868.regexp=function(_87f){return _868._parseInfo(_87f).regexp;};_868._parseInfo=function(_880){_880=_880||{};var _881=i18n.normalizeLocale(_880.locale);var _882=_868._getIslamicBundle(_881);var _883=_880.formatLength||"short";var _884=_880.datePattern||_882["dateFormat-"+_883];var _885=_880.timePattern||_882["timeFormat-"+_883];var _886;if(_880.selector=="date"){_886=_884;}else{if(_880.selector=="time"){_886=_885;}else{_886=(typeof (_885)=="undefined")?_884:_884+" "+_885;}}var _887=[];var re=_87c(_886,lang.hitch(this,_888,_887,_882,_880));return {regexp:re,tokens:_887,bundle:_882};};_868.parse=function(_889,_88a){_889=_889.replace(/[\u200E\u200F\u202A\u202E]/g,"");if(!_88a){_88a={};}var info=_868._parseInfo(_88a);var _88b=info.tokens,_867=info.bundle;var _88c=info.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,"");var re=new RegExp("^"+_88c+"$");var _88d=re.exec(_889);var _88e=i18n.normalizeLocale(_88a.locale);if(!_88d){return null;}var date,_88f;var _890=[1389,0,1,0,0,0,0];var amPm="";var _891=0;var _892=["abbr","wide","narrow"];var _893=arr.every(_88d,function(v,i){if(!i){return true;}var _894=_88b[i-1];var l=_894.length;switch(_894.charAt(0)){case "y":_890[0]=Number(v);break;case "M":if(l>2){var _895=_867["months-format-"+_892[l-3]].concat();if(!_88a.strict){v=v.replace(".","").toLowerCase();_895=arr.map(_895,function(s){return s?s.replace(".","").toLowerCase():s;});}v=arr.indexOf(_895,v);if(v==-1){return false;}_891=l;}else{v--;}_890[1]=Number(v);break;case "D":_890[1]=0;case "d":_890[2]=Number(v);break;case "a":var am=_88a.am||_867["dayPeriods-format-wide-am"],pm=_88a.pm||_867["dayPeriods-format-wide-pm"];if(!_88a.strict){var _896=/\./g;v=v.replace(_896,"").toLowerCase();am=am.replace(_896,"").toLowerCase();pm=pm.replace(_896,"").toLowerCase();}if(_88a.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":_890[3]=Number(v);break;case "m":_890[4]=Number(v);break;case "s":_890[5]=Number(v);break;case "S":_890[6]=Number(v);}return true;});var _897=+_890[3];if(amPm==="p"&&_897<12){_890[3]=_897+12;}else{if(amPm==="a"&&_897==12){_890[3]=0;}}var _898=new _866(_890[0],_890[1],_890[2],_890[3],_890[4],_890[5],_890[6]);return _898;};function _87c(_899,_89a,_89b,_89c){var _89d=function(x){return x;};_89a=_89a||_89d;_89b=_89b||_89d;_89c=_89c||_89d;var _89e=_899.match(/(''|[^'])+/g);var _89f=_899.charAt(0)=="'";arr.forEach(_89e,function(_8a0,i){if(!_8a0){_89e[i]="";}else{_89e[i]=(_89f?_89b:_89a)(_8a0);_89f=!_89f;}});return _89c(_89e.join(""));};function _888(_8a1,_8a2,_8a3,_8a4){_8a4=_864.escapeString(_8a4);var _8a5=i18n.normalizeLocale(_8a3.locale);return _8a4.replace(/([a-z])\1*/ig,function(_8a6){var s;var c=_8a6.charAt(0);var l=_8a6.length;var p2="",p3="";if(_8a3.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d+";break;case "M":s=(l>2)?"\\S+ ?\\S+":p2+"[1-9]|1[0-2]";break;case "d":s="[12]\\d|"+p2+"[1-9]|3[01]";break;case "E":s="\\S+";break;case "h":s=p2+"[1-9]|1[0-2]";break;case "k":s=p2+"\\d|1[01]";break;case "H":s=p2+"\\d|1\\d|2[0-3]";break;case "K":s=p2+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":s=p2+"\\d|[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_8a3.am||_8a2["dayPeriods-format-wide-am"],pm=_8a3.pm||_8a2["dayPeriods-format-wide-pm"];if(_8a3.strict){s=am+"|"+pm;}else{s=am+"|"+pm;if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}}break;default:s=".*";}if(_8a1){_8a1.push(_8a6);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _8a7=[];_868.addCustomFormats=function(_8a8,_8a9){_8a7.push({pkg:_8a8,name:_8a9});};_868._getIslamicBundle=function(_8aa){var _8ab={};arr.forEach(_8a7,function(desc){var _8ac=i18n.getLocalization(desc.pkg,desc.name,_8aa);_8ab=lang.mixin(_8ab,_8ac);},this);return _8ab;};_868.addCustomFormats("dojo.cldr","islamic");_868.getNames=function(item,type,_8ad,_8ae,date){var _8af;var _8b0=_868._getIslamicBundle(_8ae);var _8b1=[item,_8ad,type];if(_8ad=="standAlone"){var key=_8b1.join("-");_8af=_8b0[key];if(_8af[0]==1){_8af=undefined;}}_8b1[1]="format";return (_8af||_8b0[_8b1.join("-")]).concat();};_868.weekDays=_868.getNames("days","wide","format");_868.months=_868.getNames("months","wide","format");return _868;});},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/sniff","dojo/window","../a11y"],function(_8b2,_8b3,_8b4,_8b5,lang,_8b6,has,_8b7,a11y){return _8b3("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_8b8){this._set("disabled",_8b8);_8b4.set(this.focusNode,"disabled",_8b8);if(this.valueNode){_8b4.set(this.valueNode,"disabled",_8b8);}this.focusNode.setAttribute("aria-disabled",_8b8?"true":"false");if(_8b8){this._set("hovering",false);this._set("active",false);var _8b9="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";_8b2.forEach(lang.isArray(_8b9)?_8b9:[_8b9],function(_8ba){var node=this[_8ba];if(has("webkit")||a11y.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.set("tabIndex",this.tabIndex);}}},_onFocus:function(by){if(by=="mouse"&&this.isFocusable()){var _8bb=this.connect(this.focusNode,"onfocus",function(){this.disconnect(_8bc);this.disconnect(_8bb);});var _8bc=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(_8bc);this.disconnect(_8bb);if(this.focused){this.focus();}});}if(this.scrollOnFocus){this.defer(function(){_8b7.scrollIntoView(this.domNode);});}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(_8b5.get(this.domNode,"display")!="none");},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(){},_onChangeActive:false,_handleOnChange:function(_8bd,_8be){if(this._lastValueReported==undefined&&(_8be===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_8bd;}this._pendingOnChange=this._pendingOnChange||(typeof _8bd!=typeof this._lastValueReported)||(this.compare(_8bd,this._lastValueReported)!=0);if((this.intermediateChanges||_8be||_8be===undefined)&&this._pendingOnChange){this._lastValueReported=_8bd;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){this._onChangeHandle.remove();}this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(_8bd);});}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){this._onChangeHandle.remove();this.onChange(this._lastValueReported);}this.inherited(arguments);}});});},"dijit/a11yclick":function(){define("dijit/a11yclick",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window"],function(on,_8bf,keys,_8c0,has,_8c1,win){var _8c2=null;if(has("dom-addeventlistener")){win.doc.addEventListener("keydown",function(evt){_8c2=evt.target;},true);}else{(function(){var _8c3=function(evt){_8c2=evt.srcElement;};win.doc.attachEvent("onkeydown",_8c3);_8c1.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",_8c3);});})();}function _8c4(e){return (e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey;};return function(node,_8c5){if(/input|button/i.test(node.nodeName)){return on(node,"click",_8c5);}else{var _8c6=[on(node,"keydown",function(e){if(_8c4(e)){_8c2=e.target;e.preventDefault();}}),on(node,"keyup",function(e){if(_8c4(e)&&e.target==_8c2){_8c2=null;on.emit(e.target,"click",{cancelable:true,bubbles:true});}}),on(node,"click",function(e){_8c5.call(this,e);})];if(has("touch")){var _8c7;_8c6.push(on(node,"touchend",function(e){var _8c8=e.target;_8c7=setTimeout(function(){_8c7=null;on.emit(_8c8,"click",{cancelable:true,bubbles:true});},600);}),on(node,"click",function(e){if(_8c7){clearTimeout(_8c7);}}));}return {remove:function(){_8bf.forEach(_8c6,function(h){h.remove();});if(_8c7){clearTimeout(_8c7);_8c7=null;}}};}};return ret;});},"url:dijit/templates/ProgressBar.html":"<div class=\"dijitProgressBar dijitProgressBarEmpty\" role=\"progressbar\"\n\t><div  data-dojo-attach-point=\"internalProgress\" class=\"dijitProgressBarFull\"\n\t\t><div class=\"dijitProgressBarTile\" role=\"presentation\"></div\n\t\t><span style=\"visibility:hidden\">&#160;</span\n\t></div\n\t><div data-dojo-attach-point=\"labelNode\" class=\"dijitProgressBarLabel\" id=\"${id}_label\"></div\n\t><img data-dojo-attach-point=\"indeterminateHighContrastImage\" class=\"dijitProgressBarIndeterminateHighContrastImage\" alt=\"\"\n/></div>\n","esri/toolbars/draw":function(){define("esri/toolbars/draw",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/Color","dojo/_base/window","dojo/has","dojo/keys","dojo/dom-construct","dojo/dom-style","esri/kernel","esri/sniff","esri/toolbars/_toolbar","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/graphic","esri/geometry/jsonUtils","esri/geometry/webMercatorUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/Rect","dojo/i18n!esri/nls/jsapi"],function(_8c9,lang,_8ca,_8cb,_8cc,win,has,keys,_8cd,_8ce,_8cf,_8d0,_8d1,_8d2,_8d3,_8d4,_8d5,_8d6,_8d7,_8d8,_8d9,_8da,Rect,_8db){var DRAW=_8c9(_8d1,{declaredClass:"esri.toolbars.Draw",constructor:function(map,_8dc){this.markerSymbol=new _8d2(_8d2.STYLE_SOLID,10,new _8d3(_8d3.STYLE_SOLID,new _8cc([255,0,0]),2),new _8cc([0,0,0,0.25]));this.lineSymbol=new _8d3(_8d3.STYLE_SOLID,new _8cc([255,0,0]),2);this.fillSymbol=new _8d4(_8d4.STYLE_SOLID,new _8d3(_8d3.STYLE_SOLID,new _8cc([255,0,0]),2),new _8cc([0,0,0,0.25]));this._points=[];this._defaultOptions={showTooltips:true,drawTime:75,tolerance:8,tooltipOffset:15};this._options=lang.mixin(lang.mixin({},this._defaultOptions),_8dc||{});this._mouse=!has("esri-touch")&&!has("esri-pointer");if(!this._mouse){this._options.showTooltips=false;}this._onKeyDownHandler=lang.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=lang.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=lang.hitch(this,this._onMouseUpHandler);this._onClickHandler=lang.hitch(this,this._onClickHandler);this._onMouseMoveHandler=lang.hitch(this,this._onMouseMoveHandler);this._onMouseDragHandler=lang.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=lang.hitch(this,this._onDblClickHandler);this._updateTooltip=lang.hitch(this,this._updateTooltip);this._hideTooltip=lang.hitch(this,this._hideTooltip);this._redrawGraphic=lang.hitch(this,this._redrawGraphic);},_geometryType:null,respectDrawingVertexOrder:false,setRespectDrawingVertexOrder:function(set){this.respectDrawingVertexOrder=set;},setMarkerSymbol:function(_8dd){this.markerSymbol=_8dd;},setLineSymbol:function(_8de){this.lineSymbol=_8de;},setFillSymbol:function(_8df){this.fillSymbol=_8df;},activate:function(_8e0,_8e1){if(this._geometryType){this.deactivate();}var map=this.map,dc=_8cb.connect,Draw=DRAW;this._options=lang.mixin(lang.mixin({},this._options),_8e1||{});map.navigationManager.setImmediateClick(false);switch(_8e0){case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.TRIANGLE:case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.RECTANGLE:this._deactivateMapTools(true,false,false,true);this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);this._onMouseDownHandler_connect=dc(map,!this._mouse?"onSwipeStart":"onMouseDown",this._onMouseDownHandler);this._onMouseDragHandler_connect=dc(map,!this._mouse?"onSwipeMove":"onMouseDrag",this._onMouseDragHandler);this._onMouseUpHandler_connect=dc(map,!this._mouse?"onSwipeEnd":"onMouseUp",this._onMouseUpHandler);break;case Draw.POINT:this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);break;case Draw.LINE:case Draw.EXTENT:case Draw.FREEHAND_POLYLINE:case Draw.FREEHAND_POLYGON:this._deactivateMapTools(true,false,false,true);this._onMouseDownHandler_connect=dc(map,!this._mouse?"onSwipeStart":"onMouseDown",this._onMouseDownHandler);this._onMouseDragHandler_connect=dc(map,!this._mouse?"onSwipeMove":"onMouseDrag",this._onMouseDragHandler);this._onMouseUpHandler_connect=dc(map,!this._mouse?"onSwipeEnd":"onMouseUp",this._onMouseUpHandler);break;case Draw.POLYLINE:case Draw.POLYGON:case Draw.MULTI_POINT:map.navigationManager.setImmediateClick(true);this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);this._onDblClickHandler_connect=dc(map,"onDblClick",this._onDblClickHandler);map.disableDoubleClickZoom();break;default:console.error("Unsupported geometry type: "+_8e0);return;}this._onKeyDown_connect=dc(map,"onKeyDown",this._onKeyDownHandler);this._redrawConnect=dc(map,"onExtentChange",this._redrawGraphic);this._geometryType=_8e0;this._toggleTooltip(true);if(map.snappingManager&&this._geometryType!=="freehandpolyline"&&this._geometryType!=="freehandpolygon"&&this._mouse){map.snappingManager._startSelectionLayerQuery();map.snappingManager._setUpSnapping();}this.onActivate(this._geometryType);},deactivate:function(){var map=this.map;this._clear();var ddc=_8cb.disconnect;ddc(this._onMouseDownHandler_connect);ddc(this._onMouseMoveHandler_connect);ddc(this._onMouseDragHandler_connect);ddc(this._onMouseUpHandler_connect);ddc(this._onClickHandler_connect);ddc(this._onDblClickHandler_connect);ddc(this._onKeyDown_connect);ddc(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onClickHandler_connect=this._onDblClickHandler_connect=this._onKeyDown_connect=this._redrawConnect=null;if(map.snappingManager){map.snappingManager._stopSelectionLayerQuery();map.snappingManager._killOffSnapping();}switch(this._geometryType){case DRAW.CIRCLE:case DRAW.ELLIPSE:case DRAW.TRIANGLE:case DRAW.ARROW:case DRAW.LEFT_ARROW:case DRAW.RIGHT_ARROW:case DRAW.UP_ARROW:case DRAW.DOWN_ARROW:case DRAW.RECTANGLE:case DRAW.LINE:case DRAW.EXTENT:case DRAW.FREEHAND_POLYLINE:case DRAW.FREEHAND_POLYGON:this._activateMapTools(true,false,false,true);break;case this.POLYLINE:case this.POLYGON:case this.MULTI_POINT:map.enableDoubleClickZoom();break;}var _8e2=this._geometryType;this._geometryType=null;map.navigationManager.setImmediateClick(false);this._toggleTooltip(false);this.onDeactivate(_8e2);},_clear:function(){if(this._graphic){this.map.graphics.remove(this._graphic,true);}if(this._tGraphic){this.map.graphics.remove(this._tGraphic,true);}this._graphic=this._tGraphic=null;if(this.map.snappingManager){this.map.snappingManager._setGraphic(null);}this._points=[];},finishDrawing:function(){var _8e3,_8e4=this._points,map=this.map,_8e5=map.spatialReference,Draw=DRAW;_8e4=_8e4.slice(0,_8e4.length);switch(this._geometryType){case Draw.POLYLINE:if(!this._graphic||_8e4.length<2){return;}_8e3=new _8d8(_8e5);_8e3.addPath([].concat(_8e4));break;case Draw.POLYGON:if(!this._graphic||_8e4.length<3){return;}_8e3=new _8d9(_8e5);var ring=[].concat(_8e4,[_8e4[0].offset(0,0)]);if(!_8d9.prototype.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise.");ring.reverse();}_8e3.addRing(ring);break;case Draw.MULTI_POINT:_8e3=new _8da(_8e5);_8ca.forEach(_8e4,function(pt){_8e3.addPoint(pt);});break;}_8cb.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(_8e3);},_drawEnd:function(_8e6){if(_8e6){var _8e7=this.map.spatialReference,geo;this.onDrawEnd(_8e6);if(_8e7){if(_8e7.isWebMercator()){geo=_8d7.webMercatorToGeographic(_8e6,true);}else{if(_8e7.wkid===4326){geo=_8d6.fromJson(_8e6.toJson());}}}this.onDrawComplete({geometry:_8e6,geographicGeometry:geo});}},_normalizeRect:function(_8e8,end,_8e9){var sx=_8e8.x,sy=_8e8.y,ex=end.x,ey=end.y,_8ea=Math.abs(sx-ex),_8eb=Math.abs(sy-ey);return {x:Math.min(sx,ex),y:Math.max(sy,ey),width:_8ea,height:_8eb,spatialReference:_8e9};},_onMouseDownHandler:function(evt){this._dragged=false;var _8ec;if(this.map.snappingManager){_8ec=this.map.snappingManager._snappingPoint;}var _8ed=_8ec||evt.mapPoint,Draw=DRAW,map=this.map,_8ee=map.spatialReference;this._points.push(_8ed.offset(0,0));switch(this._geometryType){case Draw.LINE:this._graphic=map.graphics.add(new _8d5(new _8d8({paths:[[[_8ed.x,_8ed.y],[_8ed.x,_8ed.y]]],spatialReference:_8ee}),this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.EXTENT:break;case Draw.FREEHAND_POLYLINE:this._oldPoint=evt.screenPoint;var _8ef=new _8d8(_8ee);_8ef.addPath(this._points);this._graphic=map.graphics.add(new _8d5(_8ef,this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.TRIANGLE:case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.RECTANGLE:case Draw.FREEHAND_POLYGON:this._oldPoint=evt.screenPoint;var _8f0=new _8d9(_8ee);_8f0.addRing(this._points);this._graphic=map.graphics.add(new _8d5(_8f0,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;}if(has("esri-touch")){evt.preventDefault();}},_onMouseMoveHandler:function(evt){var _8f1;if(this.map.snappingManager){_8f1=this.map.snappingManager._snappingPoint;}var _8f2=this._points[this._points.length-1],end=_8f1||evt.mapPoint,_8f3=this._tGraphic,geom=_8f3.geometry;switch(this._geometryType){case DRAW.POLYLINE:case DRAW.POLYGON:geom.setPoint(0,0,{x:_8f2.x,y:_8f2.y});geom.setPoint(0,1,{x:end.x,y:end.y});_8f3.setGeometry(geom);break;}},_onMouseDragHandler:function(evt){if(has("esri-touch")&&!this._points.length){evt.preventDefault();return;}this._dragged=true;var _8f4;if(this.map.snappingManager){_8f4=this.map.snappingManager._snappingPoint;}var _8f5=this._points[0],end=_8f4||evt.mapPoint,map=this.map,_8f6=map.spatialReference,_8f7=this._graphic,Draw=DRAW,_8f8=map.toScreen(_8f5),_8f9=map.toScreen(end),pts=[],a=_8f9.x-_8f8.x,b=_8f9.y-_8f8.y,_8fa=60,d=Math.sqrt(a*a+b*b);switch(this._geometryType){case Draw.CIRCLE:this._hideTooltip();_8f7.geometry=_8d9.createCircle({center:_8f8,r:d,numberOfPoints:_8fa,map:map});_8f7.setGeometry(_8f7.geometry);break;case Draw.ELLIPSE:this._hideTooltip();_8f7.geometry=_8d9.createEllipse({center:_8f8,longAxis:a,shortAxis:b,numberOfPoints:_8fa,map:map});_8f7.setGeometry(_8f7.geometry);break;case Draw.TRIANGLE:this._hideTooltip();pts=[[0,-d],[0.8660254037844386*d,0.5*d],[-0.8660254037844386*d,0.5*d],[0,-d]];_8f7.geometry=this._toPolygon(pts,_8f8.x,_8f8.y);_8f7.setGeometry(_8f7.geometry);break;case Draw.ARROW:this._hideTooltip();var sina=b/d,cosa=a/d,tana=b/a;var f=cosa*0.25*d,e=0.25*d/tana,g=sina*0.25*d;pts=[[a,b],[a-f*(1+24/e),b+24*cosa-g],[a-f*(1+12/e),b+12*cosa-g],[-12*sina,12*cosa],[12*sina,-12*cosa],[a-f*(1-12/e),b-12*cosa-g],[a-f*(1-24/e),b-24*cosa-g],[a,b]];_8f7.geometry=this._toPolygon(pts,_8f8.x,_8f8.y);_8f7.setGeometry(_8f7.geometry);break;case Draw.LEFT_ARROW:this._hideTooltip();if(a<=0){pts=[[a,0],[0.75*a,b],[0.75*a,0.5*b],[0,0.5*b],[0,-0.5*b],[0.75*a,-0.5*b],[0.75*a,-b],[a,0]];}else{pts=[[0,0],[0.25*a,b],[0.25*a,0.5*b],[a,0.5*b],[a,-0.5*b],[0.25*a,-0.5*b],[0.25*a,-b],[0,0]];}_8f7.geometry=this._toPolygon(pts,_8f8.x,_8f8.y);_8f7.setGeometry(_8f7.geometry);break;case Draw.RIGHT_ARROW:this._hideTooltip();if(a>=0){pts=[[a,0],[0.75*a,b],[0.75*a,0.5*b],[0,0.5*b],[0,-0.5*b],[0.75*a,-0.5*b],[0.75*a,-b],[a,0]];}else{pts=[[0,0],[0.25*a,b],[0.25*a,0.5*b],[a,0.5*b],[a,-0.5*b],[0.25*a,-0.5*b],[0.25*a,-b],[0,0]];}_8f7.geometry=this._toPolygon(pts,_8f8.x,_8f8.y);_8f7.setGeometry(_8f7.geometry);break;case Draw.UP_ARROW:this._hideTooltip();if(b<=0){pts=[[0,b],[-a,0.75*b],[-0.5*a,0.75*b],[-0.5*a,0],[0.5*a,0],[0.5*a,0.75*b],[a,0.75*b],[0,b]];}else{pts=[[0,0],[-a,0.25*b],[-0.5*a,0.25*b],[-0.5*a,b],[0.5*a,b],[0.5*a,0.25*b],[a,0.25*b],[0,0]];}_8f7.geometry=this._toPolygon(pts,_8f8.x,_8f8.y);_8f7.setGeometry(_8f7.geometry);break;case Draw.DOWN_ARROW:this._hideTooltip();if(b>=0){pts=[[0,b],[-a,0.75*b],[-0.5*a,0.75*b],[-0.5*a,0],[0.5*a,0],[0.5*a,0.75*b],[a,0.75*b],[0,b]];}else{pts=[[0,0],[-a,0.25*b],[-0.5*a,0.25*b],[-0.5*a,b],[0.5*a,b],[0.5*a,0.25*b],[a,0.25*b],[0,0]];}_8f7.geometry=this._toPolygon(pts,_8f8.x,_8f8.y);_8f7.setGeometry(_8f7.geometry);break;case Draw.RECTANGLE:this._hideTooltip();pts=[[0,0],[a,0],[a,b],[0,b],[0,0]];_8f7.geometry=this._toPolygon(pts,_8f8.x,_8f8.y);_8f7.setGeometry(_8f7.geometry);break;case Draw.LINE:_8f7.setGeometry(lang.mixin(_8f7.geometry,{paths:[[[_8f5.x,_8f5.y],[end.x,end.y]]]}));break;case Draw.EXTENT:if(_8f7){map.graphics.remove(_8f7,true);}var rect=new Rect(this._normalizeRect(_8f5,end,_8f6));rect._originOnly=true;this._graphic=map.graphics.add(new _8d5(rect,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.FREEHAND_POLYLINE:this._hideTooltip();if(this._canDrawFreehandPoint(evt)===false){if(has("esri-touch")){evt.preventDefault();}return;}this._points.push(evt.mapPoint.offset(0,0));_8f7.geometry._insertPoints([end.offset(0,0)],0);_8f7.setGeometry(_8f7.geometry);break;case Draw.FREEHAND_POLYGON:this._hideTooltip();if(this._canDrawFreehandPoint(evt)===false){if(has("esri-touch")){evt.preventDefault();}return;}this._points.push(evt.mapPoint.offset(0,0));_8f7.geometry._insertPoints([end.offset(0,0)],0);_8f7.setGeometry(_8f7.geometry);break;}if(has("esri-touch")){evt.preventDefault();}},_canDrawFreehandPoint:function(evt){if(!this._oldPoint){return false;}var dx=this._oldPoint.x-evt.screenPoint.x;dx=(dx<0)?dx*-1:dx;var dy=this._oldPoint.y-evt.screenPoint.y;dy=(dy<0)?dy*-1:dy;var _8fb=this._options.tolerance;if(dx<_8fb&&dy<_8fb){return false;}var now=new Date();var _8fc=now-this._startTime;if(_8fc<this._options.drawTime){return false;}this._startTime=now;this._oldPoint=evt.screenPoint;return true;},_onMouseUpHandler:function(evt){if(!this._dragged){this._clear();return;}if(this._points.length===0){this._points.push(evt.mapPoint.offset(0,0));}var _8fd;if(this.map.snappingManager){_8fd=this.map.snappingManager._snappingPoint;}var _8fe=this._points[0],end=_8fd||evt.mapPoint,map=this.map,_8ff=map.spatialReference,Draw=DRAW,_900;switch(this._geometryType){case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.TRIANGLE:case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.RECTANGLE:_900=this._graphic.geometry;break;case Draw.LINE:_900=new _8d8({paths:[[[_8fe.x,_8fe.y],[end.x,end.y]]],spatialReference:_8ff});break;case Draw.EXTENT:_900=(new Rect(this._normalizeRect(_8fe,end,_8ff))).getExtent();break;case Draw.FREEHAND_POLYLINE:_900=new _8d8(_8ff);_900.addPath([].concat(this._points,[end.offset(0,0)]));break;case Draw.FREEHAND_POLYGON:_900=new _8d9(_8ff);var ring=[].concat(this._points,[end.offset(0,0),this._points[0].offset(0,0)]);if(!_8d9.prototype.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise.");ring.reverse();}_900.addRing(ring);break;}if(has("esri-touch")){evt.preventDefault();}this._clear();this._drawEnd(_900);},_onClickHandler:function(evt){var _901;if(this.map.snappingManager){_901=this.map.snappingManager._snappingPoint;}var _902=_901||evt.mapPoint,map=this.map,_903=map.toScreen(_902),Draw=DRAW,pts,dx,dy,_904,geom,_905;this._points.push(_902.offset(0,0));switch(this._geometryType){case Draw.POINT:this._drawEnd(_902.offset(0,0));this._setTooltipMessage(0);break;case Draw.POLYLINE:if(this._points.length===1){var _906=new _8d8(map.spatialReference);_906.addPath(this._points);this._graphic=map.graphics.add(new _8d5(_906,this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}this._onMouseMoveHandler_connect=_8cb.connect(map,"onMouseMove",this._onMouseMoveHandler);this._tGraphic=map.graphics.add(new _8d5(new _8d8({paths:[[[_902.x,_902.y],[_902.x,_902.y]]],spatialReference:map.spatialReference}),this.lineSymbol),true);}else{this._graphic.geometry._insertPoints([_902.offset(0,0)],0);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol);_904=this._tGraphic;geom=_904.geometry;geom.setPoint(0,0,_902.offset(0,0));geom.setPoint(0,1,_902.offset(0,0));_904.setGeometry(geom);}break;case Draw.POLYGON:if(this._points.length===1){_905=new _8d9(map.spatialReference);_905.addRing(this._points);this._graphic=map.graphics.add(new _8d5(_905,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}this._onMouseMoveHandler_connect=_8cb.connect(map,"onMouseMove",this._onMouseMoveHandler);this._tGraphic=map.graphics.add(new _8d5(new _8d8({paths:[[[_902.x,_902.y],[_902.x,_902.y]]],spatialReference:map.spatialReference}),this.fillSymbol),true);}else{this._graphic.geometry._insertPoints([_902.offset(0,0)],0);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol);_904=this._tGraphic;geom=_904.geometry;geom.setPoint(0,0,_902.offset(0,0));geom.setPoint(0,1,_902.offset(0,0));_904.setGeometry(geom);}break;case Draw.MULTI_POINT:var tps=this._points;if(tps.length===1){var _907=new _8da(map.spatialReference);_907.addPoint(tps[tps.length-1]);this._graphic=map.graphics.add(new _8d5(_907,this.markerSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}}else{this._graphic.geometry.addPoint(tps[tps.length-1]);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol);}break;case Draw.ARROW:pts=[[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]];dx=_903.x;dy=_903.y;this._addShape(pts,dx,dy);break;case Draw.LEFT_ARROW:pts=[[0,0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]];dx=_903.x;dy=_903.y;this._addShape(pts,dx,dy);break;case Draw.RIGHT_ARROW:pts=[[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]];dx=_903.x;dy=_903.y;this._addShape(pts,dx,dy);break;case Draw.UP_ARROW:pts=[[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]];dx=_903.x;dy=_903.y;this._addShape(pts,dx,dy);break;case Draw.DOWN_ARROW:pts=[[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]];dx=_903.x;dy=_903.y;this._addShape(pts,dx,dy);break;case Draw.TRIANGLE:pts=[[0,-48],[41.56921938165306,24],[-41.56921938165306,24],[0,-48]];dx=_903.x;dy=_903.y;this._addShape(pts,dx,dy);break;case Draw.RECTANGLE:pts=[[0,-96],[96,-96],[96,0],[0,0],[0,-96]];dx=_903.x-48;dy=_903.y+48;this._addShape(pts,dx,dy);break;case Draw.CIRCLE:_905=new _8d9(map.spatialReference);this._graphic=map.graphics.add(new _8d5(_905,this.fillSymbol),true);this._graphic.geometry=_8d9.createCircle({center:_903,r:48,numberOfPoints:60,map:map});this._graphic.setGeometry(this._graphic.geometry);this._drawEnd(this._graphic.geometry);break;case Draw.ELLIPSE:_905=new _8d9(map.spatialReference);this._graphic=map.graphics.add(new _8d5(_905,this.fillSymbol),true);this._graphic.geometry=_8d9.createEllipse({center:_903,longAxis:48,shortAxis:24,numberOfPoints:60,map:map});this._graphic.setGeometry(this._graphic.geometry);this._drawEnd(this._graphic.geometry);break;}this._setTooltipMessage(this._points.length);},_addShape:function(path,dx,dy){var _908=this.map.graphics.add(new _8d5(this._toPolygon(path,dx,dy),this.fillSymbol),true);this._setTooltipMessage(0);var geom;if(_908){geom=_8d6.fromJson(_908.geometry.toJson());this.map.graphics.remove(_908,true);}this._drawEnd(geom);_908=geom=null;},_toPolygon:function(path,dx,dy){var map=this.map;var _909=new _8d9(map.spatialReference);_909.addRing(_8ca.map(path,function(pt){return map.toMap({x:pt[0]+dx,y:pt[1]+dy});}));return _909;},_onDblClickHandler:function(evt){var _90a,_90b=this._points,map=this.map,_90c=map.spatialReference,Draw=DRAW;if(has("esri-touch")){_90b.push(evt.mapPoint);}_90b=_90b.slice(0,_90b.length);switch(this._geometryType){case Draw.POLYLINE:if(!this._graphic||_90b.length<2){_8cb.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(evt);return;}_90a=new _8d8(_90c);_90a.addPath([].concat(_90b));break;case Draw.POLYGON:if(!this._graphic||_90b.length<2){_8cb.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(evt);return;}_90a=new _8d9(_90c);var ring=[].concat(_90b,[_90b[0].offset(0,0)]);if(!_8d9.prototype.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise.");ring.reverse();}_90a.addRing(ring);break;case Draw.MULTI_POINT:_90a=new _8da(_90c);_8ca.forEach(_90b,function(pt){_90a.addPoint(pt);});break;}_8cb.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(_90a);},_onKeyDownHandler:function(evt){if(evt.keyCode===keys.ESCAPE){_8cb.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);}},_toggleTooltip:function(show){if(!this._options.showTooltips){return;}if(show){if(this._tooltip){return;}var _90d=this.map.container;this._tooltip=_8cd.create("div",{"class":"tooltip"},_90d);this._tooltip.style.display="none";this._tooltip.style.position="fixed";this._setTooltipMessage(0);this._onTooltipMouseEnterHandler_connect=_8cb.connect(this.map,"onMouseOver",this._updateTooltip);this._onTooltipMouseLeaveHandler_connect=_8cb.connect(this.map,"onMouseOut",this._hideTooltip);this._onTooltipMouseMoveHandler_connect=_8cb.connect(this.map,"onMouseMove",this._updateTooltip);}else{if(this._tooltip){_8cb.disconnect(this._onTooltipMouseEnterHandler_connect);_8cb.disconnect(this._onTooltipMouseLeaveHandler_connect);_8cb.disconnect(this._onTooltipMouseMoveHandler_connect);_8cd.destroy(this._tooltip);this._tooltip=null;}}},_hideTooltip:function(){var _90e=this._tooltip;if(!_90e){return;}_90e.style.display="none";},_setTooltipMessage:function(_90f){var _910=this._tooltip;if(!_910){return;}var _911=_90f;var _912="";switch(this._geometryType){case DRAW.POINT:_912=_8db.toolbars.draw.addPoint;break;case DRAW.ARROW:case DRAW.LEFT_ARROW:case DRAW.RIGHT_ARROW:case DRAW.UP_ARROW:case DRAW.DOWN_ARROW:case DRAW.TRIANGLE:case DRAW.RECTANGLE:case DRAW.CIRCLE:case DRAW.ELLIPSE:_912=_8db.toolbars.draw.addShape;break;case DRAW.LINE:case DRAW.EXTENT:case DRAW.FREEHAND_POLYLINE:case DRAW.FREEHAND_POLYGON:_912=_8db.toolbars.draw.freehand;break;case DRAW.POLYLINE:case DRAW.POLYGON:_912=_8db.toolbars.draw.start;if(_911===1){_912=_8db.toolbars.draw.resume;}else{if(_911>=2){_912=_8db.toolbars.draw.complete;}}break;case DRAW.MULTI_POINT:_912=_8db.toolbars.draw.addMultipoint;if(_911>=1){_912=_8db.toolbars.draw.finish;}break;}_910.innerHTML=_912;},_updateTooltip:function(evt){var _913=this._tooltip;if(!_913){return;}var px,py;if(evt.clientX||evt.pageY){px=evt.clientX;py=evt.clientY;}else{px=evt.clientX+win.body().scrollLeft-win.body().clientLeft;py=evt.clientY+win.body().scrollTop-win.body().clientTop;}_913.style.display="none";_8ce.set(_913,{left:(px+this._options.tooltipOffset)+"px",top:py+"px"});_913.style.display="";},_redrawGraphic:function(_914,_915,_916,lod){if(_916||this.map.wrapAround180){var g=this._graphic;if(g){g.setGeometry(g.geometry);}g=this._tGraphic;if(g){g.setGeometry(g.geometry);}}},onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawEnd:function(){}});lang.mixin(DRAW,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});if(has("extend-esri")){lang.setObject("toolbars.Draw",DRAW,_8cf);}return DRAW;});},"dojox/grid/cells":function(){define("dojox/grid/cells",["../main","./cells/_base"],function(_917){return _917.grid.cells;});},"esri/dijit/editing/Union":function(){define("esri/dijit/editing/Union",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/OperationBase","esri/dijit/editing/Cut"],function(_918,lang,has,_919,_91a,Cut){var _91b=_918(_91a,{declaredClass:"esri.dijit.editing.Union",type:"edit",label:"Union Features",constructor:function(_91c){_91c=_91c||{};this._cut=new Cut({featureLayer:_91c.featureLayer,addedGraphics:_91c.deletedGraphics,preUpdatedGraphics:_91c.preUpdatedGraphics,postUpdatedGraphics:_91c.postUpdatedGraphics});},performUndo:function(){this._cut.performRedo();},performRedo:function(){this._cut.performUndo();}});if(has("extend-esri")){lang.setObject("dijit.editing.Union",_91b,_919);}return _91b;});},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_91d,_91e,_91f){return _91f("dijit.Destroyable",null,{destroy:function(_920){this._destroyed=true;},own:function(){_91d.forEach(arguments,function(_921){var _922="destroyRecursive" in _921?"destroyRecursive":"destroy" in _921?"destroy":"remove";var odh=_91e.before(this,"destroy",function(_923){_921[_922](_923);});var hdh=_91e.after(_921,_922,function(){odh.remove();hdh.remove();},true);},this);return arguments;}});});},"dojox/grid/_Layout":function(){define("dojox/grid/_Layout",["dojo/_base/kernel","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-geometry","./cells","./_RowSelector"],function(dojo,_924,_925,_926,lang,_927){return _925("dojox.grid._Layout",null,{constructor:function(_928){this.grid=_928;},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(_929,_92a,_92b,_92c,_92d){var _92e=this.structure[_929].cells[0];var _92f=this.structure[_92a].cells[0];var cell=null;var _930=0;var _931=0;for(var i=0,c;c=_92e[i];i++){if(c.index==_92b){_930=i;break;}}cell=_92e.splice(_930,1)[0];cell.view=this.grid.views.views[_92a];for(i=0,c=null;c=_92f[i];i++){if(c.index==_92c){_931=i;break;}}if(!_92d){_931+=1;}_92f.splice(_931,0,cell);var _932=this.grid.getCell(this.grid.getSortIndex());if(_932){_932._currentlySorted=this.grid.getSortAsc();}this.cells=[];_92b=0;var v;for(i=0;v=this.structure[i];i++){for(var j=0,cs;cs=v.cells[j];j++){for(var k=0;c=cs[k];k++){c.index=_92b;this.cells.push(c);if("_currentlySorted" in c){var si=_92b+1;si*=c._currentlySorted?1:-1;this.grid.sortInfo=si;delete c._currentlySorted;}_92b++;}}}_926.forEach(this.cells,function(c){var _933=c.markup[2].split(" ");var _934=parseInt(_933[1].substring(5));if(_934!=c.index){_933[1]="idx=\""+c.index+"\"";c.markup[2]=_933.join(" ");}});this.grid.setupHeaderMenu();},setColumnVisibility:function(_935,_936){var cell=this.cells[_935];if(cell.hidden==_936){cell.hidden=!_936;var v=cell.view,w=v.viewWidth;if(w&&w!="auto"){v._togglingColumn=_927.getMarginBox(cell.getHeaderNode()).w||0;}v.update();return true;}else{return false;}},addCellDef:function(_937,_938,_939){var self=this;var _93a=function(_93b){var w=0;if(_93b.colSpan>1){w=0;}else{w=_93b.width||self._defaultCellProps.width||self.defaultWidth;if(!isNaN(w)){w=w+"em";}}return w;};var _93c={grid:this.grid,subrow:_937,layoutIndex:_938,index:this.cells.length};if(_939&&_939 instanceof _924.grid.cells._Base){var _93d=lang.clone(_939);_93c.unitWidth=_93a(_93d._props);_93d=lang.mixin(_93d,this._defaultCellProps,_939._props,_93c);return _93d;}var _93e=_939.type||_939.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||_924.grid.cells.Cell;if(lang.isString(_93e)){_93e=lang.getObject(_93e);}_93c.unitWidth=_93a(_939);return new _93e(lang.mixin({},this._defaultCellProps,_939,_93c));},addRowDef:function(_93f,_940){var _941=[];var _942=0,_943=0,_944=true;for(var i=0,def,cell;(def=_940[i]);i++){cell=this.addCellDef(_93f,i,def);_941.push(cell);this.cells.push(cell);if(_944&&cell.relWidth){_942+=cell.relWidth;}else{if(cell.width){var w=cell.width;if(typeof w=="string"&&w.slice(-1)=="%"){_943+=window.parseInt(w,10);}else{if(w=="auto"){_944=false;}}}}}if(_942&&_944){_926.forEach(_941,function(cell){if(cell.relWidth){cell.width=cell.unitWidth=((cell.relWidth/_942)*(100-_943))+"%";}});}return _941;},addRowsDef:function(_945){var _946=[];if(lang.isArray(_945)){if(lang.isArray(_945[0])){for(var i=0,row;_945&&(row=_945[i]);i++){_946.push(this.addRowDef(i,row));}}else{_946.push(this.addRowDef(0,_945));}}return _946;},addViewDef:function(_947){this._defaultCellProps=_947.defaultCell||{};if(_947.width&&_947.width=="auto"){delete _947.width;}return lang.mixin({},_947,{cells:this.addRowsDef(_947.rows||_947.cells)});},setStructure:function(_948){this.fieldIndex=0;this.cells=[];var s=this.structure=[];if(this.grid.rowSelector){var sel={type:_924._scopeName+".grid._RowSelector"};if(lang.isString(this.grid.rowSelector)){var _949=this.grid.rowSelector;if(_949=="false"){sel=null;}else{if(_949!="true"){sel["width"]=_949;}}}else{if(!this.grid.rowSelector){sel=null;}}if(sel){s.push(this.addViewDef(sel));}}var _94a=function(def){return ("name" in def||"field" in def||"get" in def);};var _94b=function(def){if(lang.isArray(def)){if(lang.isArray(def[0])||_94a(def[0])){return true;}}return false;};var _94c=function(def){return (def!==null&&lang.isObject(def)&&("cells" in def||"rows" in def||("type" in def&&!_94a(def))));};if(lang.isArray(_948)){var _94d=false;for(var i=0,st;(st=_948[i]);i++){if(_94c(st)){_94d=true;break;}}if(!_94d){s.push(this.addViewDef({cells:_948}));}else{for(i=0;(st=_948[i]);i++){if(_94b(st)){s.push(this.addViewDef({cells:st}));}else{if(_94c(st)){s.push(this.addViewDef(st));}}}}}else{if(_94c(_948)){s.push(this.addViewDef(_948));}}this.cellCount=this.cells.length;this.grid.setupHeaderMenu();}});});},"dijit/form/RangeBoundTextBox":function(){define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(_94e,i18n,_94f){var _950=_94e("dijit.form.RangeBoundTextBox",_94f,{rangeMessage:"",rangeCheck:function(_951,_952){return ("min" in _952?(this.compare(_951,_952.min)>=0):true)&&("max" in _952?(this.compare(_951,_952.max)<=0):true);},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");if(val==null){return false;}var _953=false;if("min" in this.constraints){var min=this.constraints.min;_953=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min)<0;}if(!_953&&("max" in this.constraints)){var max=this.constraints.max;_953=this.compare(val,((typeof max!="number")||max>0)?max:0)>0;}return _953;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_954){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_954));},getErrorMessage:function(_955){var v=this.get("value");if(v!=null&&v!==""&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_955)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},applyTextDir:function(){}});return _950;});},"dijit/_editor/RichText":function(){define("dijit/_editor/RichText",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/query","dojo/ready","dojo/sniff","dojo/topic","dojo/_base/unload","dojo/_base/url","dojo/_base/window","../_Widget","../_CssStateMixin","./selection","./range","./html","../focus","../main"],function(_956,_957,_958,_959,dom,_95a,_95b,_95c,_95d,_95e,_95f,_960,keys,lang,on,_961,_962,has,_963,_964,_965,win,_966,_967,_968,_969,_96a,_96b,_96c){var _96d=_958("dijit._editor.RichText",[_966,_967],{constructor:function(_96e){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_96e&&lang.isString(_96e.value)){this.value=_96e.value;}this.onLoadDeferred=new _959();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"===this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[lang.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(has("mozilla")){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(has("webkit")){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(has("ie")){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);this.contentDomPostFilters=[lang.hitch(this,this._stripBreakerNodes)].concat(this.contentDomPostFilters);}this.inherited(arguments);_963.publish(_96c._scopeName+"._editor.RichText::init",this);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=lang.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _96f={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!has("ie")){_96f.Z=exec("redo");}var key;for(key in _96f){this.addKeyHandler(key,true,false,_96f[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(_96d._editorCommandsLocalized){this._local2NativeFormatNames=_96d._local2NativeFormatNames;this._native2LocalFormatNames=_96d._native2LocalFormatNames;return;}_96d._editorCommandsLocalized=true;_96d._local2NativeFormatNames={};_96d._native2LocalFormatNames={};this._local2NativeFormatNames=_96d._local2NativeFormatNames;this._native2LocalFormatNames=_96d._native2LocalFormatNames;var _970=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _971="",_972,i=0;while((_972=_970[i++])){if(_972.charAt(1)!=="l"){_971+="<"+_972+"><span>content</span></"+_972+"><br/>";}else{_971+="<"+_972+"><li>content</li></"+_972+"><br/>";}}var _973={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=_95c.create("div",{style:_973,innerHTML:_971});this.ownerDocumentBody.appendChild(div);var _974=lang.hitch(this,function(){var node=div.firstChild;while(node){try{this._sCall("selectElement",[node.firstChild]);var _975=node.tagName.toLowerCase();this._local2NativeFormatNames[_975]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_975]]=_975;node=node.nextSibling.nextSibling;}catch(e){}}_95c.destroy(div);});this.defer(_974);},open:function(_976){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new _959();}if(!this.isClosed){this.close();}_963.publish(_96c._scopeName+"._editor.RichText::open",this);if(arguments.length===1&&_976.nodeName){this.domNode=_976;}var dn=this.domNode;var html;if(lang.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=this.ownerDocument.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;_95c.place(dn,ta,"before");var _977=lang.hitch(this,function(){_95e.set(ta,{display:"block",position:"absolute",top:"-1000px"});if(has("ie")){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(has("ie")){this.defer(_977,10);}else{_977();}if(ta.form){var _978=ta.value;this.reset=function(){var _979=this.getValue();if(_979!==_978){this.replaceValue(_978);}};on(ta.form,"submit",lang.hitch(this,function(){_95a.set(ta,"disabled",this.disabled);ta.value=this.getValue();}));}}else{html=_96a.getChildrenHtml(dn);dn.innerHTML="";}}this.value=html;if(dn.nodeName&&dn.nodeName==="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!_957["useXDomain"]||_957["allowXdRichTextSave"])){var _97a=dom.byId(_96c._scopeName+"._editor.RichText.value");if(_97a&&_97a.value!==""){var _97b=_97a.value.split(this._SEPARATOR),i=0,dat;while((dat=_97b[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]===this.name){html=data[1];_97b=_97b.splice(i,1);_97a.value=_97b.join(this._SEPARATOR);break;}}}if(!_96d._globalSaveHandler){_96d._globalSaveHandler={};_964.addOnUnload(function(){var id;for(id in _96d._globalSaveHandler){var f=_96d._globalSaveHandler[id];if(lang.isFunction(f)){f();}}});}_96d._globalSaveHandler[this.id]=lang.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=this.ownerDocument.createElement("iframe"));ifr.id=this.id+"_iframe";ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(has("ie")>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=lang.hitch(this,function(w){this.window=w;this.document=this.window.document;if(has("ie")){this._localizeEditorCommands();}this.onLoad(html);});var src=this._getIframeDocTxt(),s="javascript: '"+src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(has("safari")<=4){src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")===-1){this.defer(function(){ifr.setAttribute("src",s);});}}if(dn.nodeName==="LI"){dn.lastChild.style.marginTop="-1.2em";}_95b.add(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _97c=_95e.getComputedStyle(this.domNode);var html="";var _97d=true;if(has("ie")||has("webkit")||(!this.height&&!has("mozilla"))){html="<div id='dijitEditorBody'></div>";_97d=false;}else{if(has("mozilla")){this._cursorToStart=true;html="&#160;";}}var font=[_97c.fontWeight,_97c.fontSize,_97c.fontFamily].join(" ");var _97e=_97c.lineHeight;if(_97e.indexOf("px")>=0){_97e=parseFloat(_97e)/parseFloat(_97c.fontSize);}else{if(_97e.indexOf("em")>=0){_97e=parseFloat(_97e);}else{_97e="normal";}}var _97f="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_980){_980=_980.replace(/^;/ig,"")+";";var s=_980.split(":")[0];if(s){s=lang.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}_95e.set(self.domNode,sC,"");}_97f+=_980+";";});var _981=_961("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(has("mozilla")&&_981.length?"<title>"+_981[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((has("webkit"))?"\t\twidth: 100%;\n":""),((has("webkit"))?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||has("opera"))?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_97e,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_97d&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!has("ie")?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_97d?"id='dijitEditorBody' ":""),"onload='frameElement && frameElement._loadFunc(window,document)' ","style='"+_97f+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _982=[];if(this.styleSheets){_982=this.styleSheets.split(";");this.styleSheets="";}_982=_982.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_982[i++])){var _983=(new _965(win.global.location,url)).toString();this.editingAreaStyleSheets.push(_983);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_983+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _965(win.global.location,url)).toString();}if(_956.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.then(lang.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _984=this.document.createElement("link");_984.rel="stylesheet";_984.type="text/css";_984.href=url;head.appendChild(_984);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _965(win.global.location,url)).toString();}var _985=_956.indexOf(this.editingAreaStyleSheets,url);if(_985===-1){return;}delete this.editingAreaStyleSheets[_985];_961("link:[href=\""+url+"\"]",this.window.document).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_986){_986=!!_986;this._set("disabled",_986);if(!this.isLoaded){return;}if(has("ie")||has("webkit")||has("opera")){var _987=has("ie")&&(this.isLoaded||!this.focusOnLoad);if(_987){this.editNode.unselectable="on";}this.editNode.contentEditable=!_986;if(_987){this.defer(function(){if(this.editNode){this.editNode.unselectable="off";}});}}else{try{this.document.designMode=(_986?"off":"on");}catch(e){return;}if(!_986&&this._mozSettingProps){var ps=this._mozSettingProps;var n;for(n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=_96b.registerIframe(this.iframe);}if(!has("ie")&&!has("webkit")&&(this.height||has("mozilla"))){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _988=this;if(has("ie")){this.tabStop=_95c.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_988.editNode.setActive();};}}this.focusNode=this.editNode;var _989=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;_956.forEach(_989,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(has("ie")){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(has("webkit")){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){this.defer("placeCursorAtEnd");}});}if(has("ie")){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _98a=lang.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.resolve(true);}this.onDisplayChanged();if(this.focusOnLoad){_962(lang.hitch(this,"defer","focus",this.updateInterval));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.then(_98a);}else{_98a();}},onKeyDown:function(e){if(e.keyCode===keys.TAB&&this.isTabIndent){_95f.stop(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(has("ie")){if(e.keyCode==keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===keys.BACKSPACE&&this.document.selection.type==="Control"){_95f.stop(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}if(has("ff")){if(e.keyCode===keys.PAGE_UP||e.keyCode===keys.PAGE_DOWN){if(this.editNode.clientHeight>=this.editNode.scrollHeight){e.preventDefault();}}}return true;},onKeyUp:function(){},setDisabled:function(_98b){_960.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_98b);},_setValueAttr:function(_98c){this.setValue(_98c);},_setDisableSpellCheckAttr:function(_98d){if(this.document){_95a.set(this.document.body,"spellcheck",!_98d);}else{this.onLoadDeferred.then(lang.hitch(this,function(){_95a.set(this.document.body,"spellcheck",!_98d);}));}this._set("disableSpellCheck",_98d);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_98e=this._keyHandlers[c],args=arguments;if(_98e&&!e.altKey){_956.some(_98e,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=lang.hitch(this,"onKeyPressed");}this.defer("_onKeyHitch",1);return true;},addKeyHandler:function(key,ctrl,_98f,_990){if(!lang.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_98f||false,ctrl:ctrl||false,handler:_990});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(){if(!this.focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _991=this.getValue(true);if(_991!==this.value){this.onChange(_991);}this._set("value",_991);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!has("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(this.ownerDocumentBody.focus){this.ownerDocumentBody.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!has("ie")){_96b.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){if(this._updateTimer){this._updateTimer.remove();}this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(){},_normalizeCommand:function(cmd,_992){var _993=cmd.toLowerCase();if(_993==="formatblock"){if(has("safari")&&_992===undefined){_993="heading";}}else{if(_993==="hilitecolor"&&!has("mozilla")){_993="backcolor";}}return _993;},_qcaCache:{},queryCommandAvailable:function(_994){var ca=this._qcaCache[_994];if(ca!==undefined){return ca;}return (this._qcaCache[_994]=this._queryCommandAvailable(_994));},_queryCommandAvailable:function(_995){var ie=1;var _996=1<<1;var _997=1<<2;var _998=1<<3;function _999(_99a){return {ie:Boolean(_99a&ie),mozilla:Boolean(_99a&_996),webkit:Boolean(_99a&_997),opera:Boolean(_99a&_998)};};var _99b=null;switch(_995.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_99b=_999(_996|ie|_997|_998);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_99b=_999(_996|ie|_998|_997);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_99b=_999(ie);break;case "cut":case "copy":case "paste":_99b=_999(ie|_996|_997|_998);break;case "inserttable":_99b=_999(_996|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_99b=_999(ie|_996);break;default:return false;}return (has("ie")&&_99b.ie)||(has("mozilla")&&_99b.mozilla)||(has("webkit")&&_99b.webkit)||(has("opera")&&_99b.opera);},execCommand:function(_99c,_99d){var _99e;this.focus();_99c=this._normalizeCommand(_99c,_99d);if(_99d!==undefined){if(_99c==="heading"){throw new Error("unimplemented");}else{if((_99c==="formatblock")&&has("ie")){_99d="<"+_99d+">";}}}var _99f="_"+_99c+"Impl";if(this[_99f]){_99e=this[_99f](_99d);}else{_99d=arguments.length>1?_99d:null;if(_99d||_99c!=="createlink"){_99e=this.document.execCommand(_99c,false,_99d);}}this.onDisplayChanged();return _99e;},queryCommandEnabled:function(_9a0){if(this.disabled||!this._disabledOK){return false;}_9a0=this._normalizeCommand(_9a0);var _9a1="_"+_9a0+"EnabledImpl";if(this[_9a1]){return this[_9a1](_9a0);}else{return this._browserQueryCommandEnabled(_9a0);}},queryCommandState:function(_9a2){if(this.disabled||!this._disabledOK){return false;}_9a2=this._normalizeCommand(_9a2);try{return this.document.queryCommandState(_9a2);}catch(e){return false;}},queryCommandValue:function(_9a3){if(this.disabled||!this._disabledOK){return false;}var r;_9a3=this._normalizeCommand(_9a3);if(has("ie")&&_9a3==="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_9a3)];}else{if(has("mozilla")&&_9a3==="hilitecolor"){var _9a4;try{_9a4=this.document.queryCommandValue("styleWithCSS");}catch(e){_9a4=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_9a3);this.document.execCommand("styleWithCSS",false,_9a4);}else{r=this.document.queryCommandValue(_9a3);}}return r;},_sCall:function(name,args){return win.withGlobal(this.window,name,_968,args);},placeCursorAtStart:function(){this.focus();var _9a5=false;if(has("mozilla")){var _9a6=this.editNode.firstChild;while(_9a6){if(_9a6.nodeType===3){if(_9a6.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_9a5=true;this._sCall("selectElement",[_9a6]);break;}}else{if(_9a6.nodeType===1){_9a5=true;var tg=_9a6.tagName?_9a6.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_9a6]);}else{this._sCall("selectElementChildren",[_9a6]);}break;}}_9a6=_9a6.nextSibling;}}else{_9a5=true;this._sCall("selectElementChildren",[this.editNode]);}if(_9a5){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _9a7=false;if(has("mozilla")){var last=this.editNode.lastChild;while(last){if(last.nodeType===3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_9a7=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType===1){_9a7=true;this._sCall("selectElement",[last.lastChild||last]);break;}}last=last.previousSibling;}}else{_9a7=true;this._sCall("selectElementChildren",[this.editNode]);}if(_9a7){this._sCall("collapse",[false]);}},getValue:function(_9a8){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_9a8);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.then(lang.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&has("mozilla")&&html.toLowerCase()==="<p></p>"){html="<p>&#160;</p>";}if(!html&&has("webkit")){html="&#160;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!has("mozilla")){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&#160;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;_956.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;_956.forEach(this.contentDomPreFilters,function(ef){if(ef&&lang.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_9a9){var ec;if(!lang.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_9a9){dom=lang.clone(dom);}_956.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=_96a.getChildrenHtml(dom);}else{ec=dom;}if(!lang.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}_956.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(){var _9aa=dom.byId(_96c._scopeName+"._editor.RichText.value");if(_9aa){if(_9aa.value){_9aa.value+=this._SEPARATOR;}_9aa.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);}},escapeXml:function(str,_9ab){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_9ab){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){_960.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",2);return _96a.getNodeHtml(node);},getNodeChildrenHtml:function(dom){_960.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return _96a.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(has("ie")){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){this._iframeRegHandle.remove();delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(has("ie")){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;_95c.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;_95b.remove(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}if(this._updateTimer){this._updateTimer.remove();}this.inherited(arguments);if(_96d._globalSaveHandler){delete _96d._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_browserQueryCommandEnabled:function(_9ac){if(!_9ac){return false;}var elem=has("ie")?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_9ac);}catch(e){return false;}},_createlinkEnabledImpl:function(){var _9ad=true;if(has("opera")){var sel=this.window.getSelection();if(sel.isCollapsed){_9ad=true;}else{_9ad=this.document.queryCommandEnabled("createlink");}}else{_9ad=this._browserQueryCommandEnabled("createlink");}return _9ad;},_unlinkEnabledImpl:function(){var _9ae=true;if(has("mozilla")||has("webkit")){_9ae=this._sCall("hasAncestorElement",["a"]);}else{_9ae=this._browserQueryCommandEnabled("unlink");}return _9ae;},_inserttableEnabledImpl:function(){var _9af=true;if(has("mozilla")||has("webkit")){_9af=true;}else{_9af=this._browserQueryCommandEnabled("inserttable");}return _9af;},_cutEnabledImpl:function(){var _9b0=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_9b0=!!sel;}else{_9b0=this._browserQueryCommandEnabled("cut");}return _9b0;},_copyEnabledImpl:function(){var _9b1=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_9b1=!!sel;}else{_9b1=this._browserQueryCommandEnabled("copy");}return _9b1;},_pasteEnabledImpl:function(){var _9b2=true;if(has("webkit")){return true;}else{_9b2=this._browserQueryCommandEnabled("paste");}return _9b2;},_inserthorizontalruleImpl:function(_9b3){if(has("ie")){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_9b3);},_unlinkImpl:function(_9b4){if((this.queryCommandEnabled("unlink"))&&(has("mozilla")||has("webkit"))){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_9b4);},_hilitecolorImpl:function(_9b5){var _9b6;var _9b7=this._handleTextColorOrProperties("hilitecolor",_9b5);if(!_9b7){if(has("mozilla")){this.document.execCommand("styleWithCSS",false,true);console.log("Executing color command.");_9b6=this.document.execCommand("hilitecolor",false,_9b5);this.document.execCommand("styleWithCSS",false,false);}else{_9b6=this.document.execCommand("hilitecolor",false,_9b5);}}return _9b6;},_backcolorImpl:function(_9b8){if(has("ie")){_9b8=_9b8?_9b8:null;}var _9b9=this._handleTextColorOrProperties("backcolor",_9b8);if(!_9b9){_9b9=this.document.execCommand("backcolor",false,_9b8);}return _9b9;},_forecolorImpl:function(_9ba){if(has("ie")){_9ba=_9ba?_9ba:null;}var _9bb=false;_9bb=this._handleTextColorOrProperties("forecolor",_9ba);if(!_9bb){_9bb=this.document.execCommand("forecolor",false,_9ba);}return _9bb;},_inserthtmlImpl:function(_9bc){_9bc=this._preFilterContent(_9bc);var rv=true;if(has("ie")){var _9bd=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()==="CONTROL"){var n=_9bd.item(0);while(_9bd.length){_9bd.remove(_9bd.item(0));}n.outerHTML=_9bc;}else{_9bd.pasteHTML(_9bc);}_9bd.select();}else{if(has("mozilla")&&!_9bc.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_9bc);}}return rv;},_boldImpl:function(_9be){var _9bf=false;if(has("ie")){this._adaptIESelection();_9bf=this._adaptIEFormatAreaAndExec("bold");}if(!_9bf){_9bf=this.document.execCommand("bold",false,_9be);}return _9bf;},_italicImpl:function(_9c0){var _9c1=false;if(has("ie")){this._adaptIESelection();_9c1=this._adaptIEFormatAreaAndExec("italic");}if(!_9c1){_9c1=this.document.execCommand("italic",false,_9c0);}return _9c1;},_underlineImpl:function(_9c2){var _9c3=false;if(has("ie")){this._adaptIESelection();_9c3=this._adaptIEFormatAreaAndExec("underline");}if(!_9c3){_9c3=this.document.execCommand("underline",false,_9c2);}return _9c3;},_strikethroughImpl:function(_9c4){var _9c5=false;if(has("ie")){this._adaptIESelection();_9c5=this._adaptIEFormatAreaAndExec("strikethrough");}if(!_9c5){_9c5=this.document.execCommand("strikethrough",false,_9c4);}return _9c5;},_superscriptImpl:function(_9c6){var _9c7=false;if(has("ie")){this._adaptIESelection();_9c7=this._adaptIEFormatAreaAndExec("superscript");}if(!_9c7){_9c7=this.document.execCommand("superscript",false,_9c6);}return _9c7;},_subscriptImpl:function(_9c8){var _9c9=false;if(has("ie")){this._adaptIESelection();_9c9=this._adaptIEFormatAreaAndExec("subscript");}if(!_9c9){_9c9=this.document.execCommand("subscript",false,_9c8);}return _9c9;},_fontnameImpl:function(_9ca){var _9cb;if(has("ie")){_9cb=this._handleTextColorOrProperties("fontname",_9ca);}if(!_9cb){_9cb=this.document.execCommand("fontname",false,_9ca);}return _9cb;},_fontsizeImpl:function(_9cc){var _9cd;if(has("ie")){_9cd=this._handleTextColorOrProperties("fontsize",_9cc);}if(!_9cd){_9cd=this.document.execCommand("fontsize",false,_9cc);}return _9cd;},_insertorderedlistImpl:function(_9ce){var _9cf=false;if(has("ie")){_9cf=this._adaptIEList("insertorderedlist",_9ce);}if(!_9cf){_9cf=this.document.execCommand("insertorderedlist",false,_9ce);}return _9cf;},_insertunorderedlistImpl:function(_9d0){var _9d1=false;if(has("ie")){_9d1=this._adaptIEList("insertunorderedlist",_9d0);}if(!_9d1){_9d1=this.document.execCommand("insertunorderedlist",false,_9d0);}return _9d1;},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=_95d.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_9d2){if(node.nodeType===1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_9d2);}return true;}else{if(node.nodeType===3){return (node.nodeValue.substring(_9d2)==="");}}return false;},_removeStartingRangeFromRange:function(node,_9d3){if(node.nextSibling){_9d3.setStart(node.nextSibling,0);}else{var _9d4=node.parentNode;while(_9d4&&_9d4.nextSibling==null){_9d4=_9d4.parentNode;}if(_9d4){_9d3.setStart(_9d4.nextSibling,0);}}return _9d3;},_adaptIESelection:function(){var _9d5=_969.getSelection(this.window);if(_9d5&&_9d5.rangeCount&&!_9d5.isCollapsed){var _9d6=_9d5.getRangeAt(0);var _9d7=_9d6.startContainer;var _9d8=_9d6.startOffset;while(_9d7.nodeType===3&&_9d8>=_9d7.length&&_9d7.nextSibling){_9d8=_9d8-_9d7.length;_9d7=_9d7.nextSibling;}var _9d9=null;while(this._isNodeEmpty(_9d7,_9d8)&&_9d7!==_9d9){_9d9=_9d7;_9d6=this._removeStartingRangeFromRange(_9d7,_9d6);_9d7=_9d6.startContainer;_9d8=0;}_9d5.removeAllRanges();_9d5.addRange(_9d6);}},_adaptIEFormatAreaAndExec:function(_9da){var _9db=_969.getSelection(this.window);var doc=this.document;var rs,ret,_9dc,txt,_9dd,_9de,_9df,_9e0;if(_9da&&_9db&&_9db.isCollapsed){var _9e1=this.queryCommandValue(_9da);if(_9e1){var _9e2=this._tagNamesForCommand(_9da);_9dc=_9db.getRangeAt(0);var fs=_9dc.startContainer;if(fs.nodeType===3){var _9e3=_9dc.endOffset;if(fs.length<_9e3){ret=this._adjustNodeAndOffset(rs,_9e3);fs=ret.node;_9e3=ret.offset;}}var _9e4;while(fs&&fs!==this.editNode){var _9e5=fs.tagName?fs.tagName.toLowerCase():"";if(_956.indexOf(_9e2,_9e5)>-1){_9e4=fs;break;}fs=fs.parentNode;}if(_9e4){rs=_9dc.startContainer;var _9e6=doc.createElement(_9e4.tagName);_95c.place(_9e6,_9e4,"after");if(rs&&rs.nodeType===3){var _9e7,_9e8;var _9e9=_9dc.endOffset;if(rs.length<_9e9){ret=this._adjustNodeAndOffset(rs,_9e9);rs=ret.node;_9e9=ret.offset;}txt=rs.nodeValue;_9dd=doc.createTextNode(txt.substring(0,_9e9));var _9ea=txt.substring(_9e9,txt.length);if(_9ea){_9de=doc.createTextNode(_9ea);}_95c.place(_9dd,rs,"before");if(_9de){_9df=doc.createElement("span");_9df.className="ieFormatBreakerSpan";_95c.place(_9df,rs,"after");_95c.place(_9de,_9df,"after");_9de=_9df;}_95c.destroy(rs);var _9eb=_9dd.parentNode;var _9ec=[];var _9ed;while(_9eb!==_9e4){var tg=_9eb.tagName;_9ed={tagName:tg};_9ec.push(_9ed);var _9ee=doc.createElement(tg);if(_9eb.style){if(_9ee.style){if(_9eb.style.cssText){_9ee.style.cssText=_9eb.style.cssText;_9ed.cssText=_9eb.style.cssText;}}}if(_9eb.tagName==="FONT"){if(_9eb.color){_9ee.color=_9eb.color;_9ed.color=_9eb.color;}if(_9eb.face){_9ee.face=_9eb.face;_9ed.face=_9eb.face;}if(_9eb.size){_9ee.size=_9eb.size;_9ed.size=_9eb.size;}}if(_9eb.className){_9ee.className=_9eb.className;_9ed.className=_9eb.className;}if(_9de){_9e7=_9de;while(_9e7){_9e8=_9e7.nextSibling;_9ee.appendChild(_9e7);_9e7=_9e8;}}if(_9ee.tagName==_9eb.tagName){_9df=doc.createElement("span");_9df.className="ieFormatBreakerSpan";_95c.place(_9df,_9eb,"after");_95c.place(_9ee,_9df,"after");}else{_95c.place(_9ee,_9eb,"after");}_9dd=_9eb;_9de=_9ee;_9eb=_9eb.parentNode;}if(_9de){_9e7=_9de;if(_9e7.nodeType===1||(_9e7.nodeType===3&&_9e7.nodeValue)){_9e6.innerHTML="";}while(_9e7){_9e8=_9e7.nextSibling;_9e6.appendChild(_9e7);_9e7=_9e8;}}var _9ef;if(_9ec.length){_9ed=_9ec.pop();var _9f0=doc.createElement(_9ed.tagName);if(_9ed.cssText&&_9f0.style){_9f0.style.cssText=_9ed.cssText;}if(_9ed.className){_9f0.className=_9ed.className;}if(_9ed.tagName==="FONT"){if(_9ed.color){_9f0.color=_9ed.color;}if(_9ed.face){_9f0.face=_9ed.face;}if(_9ed.size){_9f0.size=_9ed.size;}}_95c.place(_9f0,_9e6,"before");while(_9ec.length){_9ed=_9ec.pop();var _9f1=doc.createElement(_9ed.tagName);if(_9ed.cssText&&_9f1.style){_9f1.style.cssText=_9ed.cssText;}if(_9ed.className){_9f1.className=_9ed.className;}if(_9ed.tagName==="FONT"){if(_9ed.color){_9f1.color=_9ed.color;}if(_9ed.face){_9f1.face=_9ed.face;}if(_9ed.size){_9f1.size=_9ed.size;}}_9f0.appendChild(_9f1);_9f0=_9f1;}_9e0=doc.createTextNode(".");_9df.appendChild(_9e0);_9f0.appendChild(_9e0);_9ef=_969.create(this.window);_9ef.setStart(_9e0,0);_9ef.setEnd(_9e0,_9e0.length);_9db.removeAllRanges();_9db.addRange(_9ef);this._sCall("collapse",[false]);_9e0.parentNode.innerHTML="";}else{_9df=doc.createElement("span");_9df.className="ieFormatBreakerSpan";_9e0=doc.createTextNode(".");_9df.appendChild(_9e0);_95c.place(_9df,_9e6,"before");_9ef=_969.create(this.window);_9ef.setStart(_9e0,0);_9ef.setEnd(_9e0,_9e0.length);_9db.removeAllRanges();_9db.addRange(_9ef);this._sCall("collapse",[false]);_9e0.parentNode.innerHTML="";}if(!_9e6.firstChild){_95c.destroy(_9e6);}return true;}}return false;}else{_9dc=_9db.getRangeAt(0);rs=_9dc.startContainer;if(rs&&rs.nodeType===3){var _9e3=_9dc.startOffset;if(rs.length<_9e3){ret=this._adjustNodeAndOffset(rs,_9e3);rs=ret.node;_9e3=ret.offset;}txt=rs.nodeValue;_9dd=doc.createTextNode(txt.substring(0,_9e3));var _9ea=txt.substring(_9e3);if(_9ea!==""){_9de=doc.createTextNode(txt.substring(_9e3));}_9df=doc.createElement("span");_9e0=doc.createTextNode(".");_9df.appendChild(_9e0);if(_9dd.length){_95c.place(_9dd,rs,"after");}else{_9dd=rs;}_95c.place(_9df,_9dd,"after");if(_9de){_95c.place(_9de,_9df,"after");}_95c.destroy(rs);var _9ef=_969.create(this.window);_9ef.setStart(_9e0,0);_9ef.setEnd(_9e0,_9e0.length);_9db.removeAllRanges();_9db.addRange(_9ef);doc.execCommand(_9da);_95c.place(_9df.firstChild,_9df,"before");_95c.destroy(_9df);_9ef.setStart(_9e0,0);_9ef.setEnd(_9e0,_9e0.length);_9db.removeAllRanges();_9db.addRange(_9ef);this._sCall("collapse",[false]);_9e0.parentNode.innerHTML="";return true;}}}else{return false;}},_adaptIEList:function(_9f2){var _9f3=_969.getSelection(this.window);if(_9f3.isCollapsed){if(_9f3.rangeCount&&!this.queryCommandValue(_9f2)){var _9f4=_9f3.getRangeAt(0);var sc=_9f4.startContainer;if(sc&&sc.nodeType==3){if(!_9f4.startOffset){var _9f5="ul";if(_9f2==="insertorderedlist"){_9f5="ol";}var list=this.document.createElement(_9f5);var li=_95c.create("li",null,list);_95c.place(list,sc,"before");li.appendChild(sc);_95c.create("br",null,list,"after");var _9f6=_969.create(this.window);_9f6.setStart(sc,0);_9f6.setEnd(sc,sc.length);_9f3.removeAllRanges();_9f3.addRange(_9f6);this._sCall("collapse",[true]);return true;}}}}return false;},_handleTextColorOrProperties:function(_9f7,_9f8){var _9f9=_969.getSelection(this.window);var doc=this.document;var rs,ret,_9fa,txt,_9fb,_9fc,_9fd,_9fe;_9f8=_9f8||null;if(_9f7&&_9f9&&_9f9.isCollapsed){if(_9f9.rangeCount){_9fa=_9f9.getRangeAt(0);rs=_9fa.startContainer;if(rs&&rs.nodeType===3){var _9ff=_9fa.startOffset;if(rs.length<_9ff){ret=this._adjustNodeAndOffset(rs,_9ff);rs=ret.node;_9ff=ret.offset;}txt=rs.nodeValue;_9fb=doc.createTextNode(txt.substring(0,_9ff));var _a00=txt.substring(_9ff);if(_a00!==""){_9fc=doc.createTextNode(txt.substring(_9ff));}_9fd=doc.createElement("span");_9fe=doc.createTextNode(".");_9fd.appendChild(_9fe);var _a01=doc.createElement("span");_9fd.appendChild(_a01);if(_9fb.length){_95c.place(_9fb,rs,"after");}else{_9fb=rs;}_95c.place(_9fd,_9fb,"after");if(_9fc){_95c.place(_9fc,_9fd,"after");}_95c.destroy(rs);var _a02=_969.create(this.window);_a02.setStart(_9fe,0);_a02.setEnd(_9fe,_9fe.length);_9f9.removeAllRanges();_9f9.addRange(_a02);if(has("webkit")){var _a03="color";if(_9f7==="hilitecolor"||_9f7==="backcolor"){_a03="backgroundColor";}_95e.set(_9fd,_a03,_9f8);this._sCall("remove",[]);_95c.destroy(_a01);_9fd.innerHTML="&#160;";this._sCall("selectElement",[_9fd]);this.focus();}else{this.execCommand(_9f7,_9f8);_95c.place(_9fd.firstChild,_9fd,"before");_95c.destroy(_9fd);_a02.setStart(_9fe,0);_a02.setEnd(_9fe,_9fe.length);_9f9.removeAllRanges();_9f9.addRange(_a02);this._sCall("collapse",[false]);_9fe.parentNode.removeChild(_9fe);}return true;}}}return false;},_adjustNodeAndOffset:function(node,_a04){while(node.length<_a04&&node.nextSibling&&node.nextSibling.nodeType===3){_a04=_a04-node.length;node=node.nextSibling;}return {"node":node,"offset":_a04};},_tagNamesForCommand:function(_a05){if(_a05==="bold"){return ["b","strong"];}else{if(_a05==="italic"){return ["i","em"];}else{if(_a05==="strikethrough"){return ["s","strike"];}else{if(_a05==="superscript"){return ["sup"];}else{if(_a05==="subscript"){return ["sub"];}else{if(_a05==="underline"){return ["u"];}}}}}}return [];},_stripBreakerNodes:function(node){if(!this.isLoaded){return;}_961(".ieFormatBreakerSpan",node).forEach(function(b){while(b.firstChild){_95c.place(b.firstChild,b,"before");}_95c.destroy(b);});return node;}});return _96d;});},"esri/tasks/AreasAndLengthsParameters":function(){define("esri/tasks/AreasAndLengthsParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(_a06,lang,_a07,_a08,has,_a09){var _a0a=_a06(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var _a0b=_a07.map(this.polygons,function(geom){return geom.toJson();});var json={};json.polygons=_a08.toJson(_a0b);var _a0c=this.polygons[0].spatialReference;json.sr=_a0c.wkid?_a0c.wkid:_a08.toJson(_a0c.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.areaUnit){if(lang.isString(this.areaUnit)){json.areaUnit=_a08.toJson({"areaUnit":this.areaUnit});}else{json.areaUnit=this.areaUnit;}}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});if(has("extend-esri")){lang.setObject("tasks.AreasAndLengthsParameters",_a0a,_a09);}return _a0a;});},"dojo/dnd/Moveable":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../dom","../dom-class","../Evented","../on","../topic","../touch","./common","./Mover","../_base/window"],function(_a0d,_a0e,_a0f,lang,dom,_a10,_a11,on,_a12,_a13,dnd,_a14,win){var _a15=_a0e("dojo.dnd.Moveable",[_a11],{handle:"",delay:0,skip:false,constructor:function(node,_a16){this.node=dom.byId(node);if(!_a16){_a16={};}this.handle=_a16.handle?dom.byId(_a16.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_a16.delay>0?_a16.delay:0;this.skip=_a16.skip;this.mover=_a16.mover?_a16.mover:_a14;this.events=[on(this.handle,_a13.press,lang.hitch(this,"onMouseDown")),on(this.handle,"dragstart",lang.hitch(this,"onSelectStart")),on(this.handle,"selectstart",lang.hitch(this,"onSelectStart"))];},markupFactory:function(_a17,node,Ctor){return new Ctor(node,_a17);},destroy:function(){_a0d.forEach(this.events,function(_a18){_a18.remove();});this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dnd.isFormElement(e)){return;}if(this.delay){this.events.push(on(this.handle,_a13.move,lang.hitch(this,"onMouseMove")),on(this.handle,_a13.release,lang.hitch(this,"onMouseUp")));this._lastX=e.pageX;this._lastY=e.pageY;}else{this.onDragDetected(e);}_a0f.stop(e);},onMouseMove:function(e){if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}_a0f.stop(e);},onMouseUp:function(e){for(var i=0;i<2;++i){this.events.pop().remove();}_a0f.stop(e);},onSelectStart:function(e){if(!this.skip||!dnd.isFormElement(e)){_a0f.stop(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_a19){_a12.publish("/dnd/move/start",_a19);_a10.add(win.body(),"dojoMove");_a10.add(this.node,"dojoMoveItem");},onMoveStop:function(_a1a){_a12.publish("/dnd/move/stop",_a1a);_a10.remove(win.body(),"dojoMove");_a10.remove(this.node,"dojoMoveItem");},onFirstMove:function(){},onMove:function(_a1b,_a1c){this.onMoving(_a1b,_a1c);var s=_a1b.node.style;s.left=_a1c.l+"px";s.top=_a1c.t+"px";this.onMoved(_a1b,_a1c);},onMoving:function(){},onMoved:function(){}});return _a15;});},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(_a1d){return function(_a1e,_a1f){switch(typeof _a1e){default:throw new Error("Can not query with a "+typeof _a1e);case "object":case "undefined":var _a20=_a1e;_a1e=function(_a21){for(var key in _a20){var _a22=_a20[key];if(_a22&&_a22.test){if(!_a22.test(_a21[key],_a21)){return false;}}else{if(_a22!=_a21[key]){return false;}}}return true;};break;case "string":if(!this[_a1e]){throw new Error("No filter function "+_a1e+" was found in store");}_a1e=this[_a1e];case "function":}function _a23(_a24){var _a25=_a1d.filter(_a24,_a1e);var _a26=_a1f&&_a1f.sort;if(_a26){_a25.sort(typeof _a26=="function"?_a26:function(a,b){for(var sort,i=0;sort=_a26[i];i++){var _a27=a[sort.attribute];var _a28=b[sort.attribute];if(_a27!=_a28){return !!sort.descending==(_a27==null||_a27>_a28)?-1:1;}}return 0;});}if(_a1f&&(_a1f.start||_a1f.count)){var _a29=_a25.length;_a25=_a25.slice(_a1f.start||0,(_a1f.start||0)+(_a1f.count||Infinity));_a25.total=_a29;}return _a25;};_a23.matches=_a1e;return _a23;};});},"dojox/grid/_View":function(){require({cache:{"url:dojox/grid/resources/View.html":"<div class=\"dojoxGridView\" role=\"presentation\">\n\t<div class=\"dojoxGridHeader\" dojoAttachPoint=\"headerNode\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"headerNodeContainer\" style=\"width:9000em\" role=\"presentation\">\n\t\t\t<div dojoAttachPoint=\"headerContentNode\" role=\"row\"></div>\n\t\t</div>\n\t</div>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" dojoAttachPoint=\"hiddenFocusNode\" role=\"presentation\" />\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" role=\"presentation\" />\n\t<div class=\"dojoxGridScrollbox\" dojoAttachPoint=\"scrollboxNode\" role=\"presentation\">\n\t\t<div class=\"dojoxGridContent\" dojoAttachPoint=\"contentNode\" hidefocus=\"hidefocus\" role=\"presentation\"></div>\n\t</div>\n</div>\n"}});define("dojox/grid/_View",["dojo","dijit/registry","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/connect","dojo/_base/sniff","dojo/query","dojo/_base/window","dojo/text!./resources/View.html","dojo/dnd/Source","dijit/_Widget","dijit/_TemplatedMixin","dojox/html/metrics","./util","dojo/_base/html","./_Builder","dojo/dnd/Avatar","dojo/dnd/Manager"],function(dojo,_a2a,_a2b,_a2c,_a2d,lang,_a2e,has,_a2f,win,_a30,_a31,_a32,_a33,_a34,util,html,_a35,_a36,_a37){var _a38=function(_a39,_a3a){return _a39.style.cssText==undefined?_a39.getAttribute("style"):_a39.style.cssText;};var _a3b=_a2c("dojox.grid._View",[_a32,_a33],{defaultWidth:"18em",viewWidth:"",templateString:_a30,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:_a35._HeaderBuilder,_contentBuilderClass:_a35._ContentBuilder,postMixInProperties:function(){this.rowNodes={};},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);util.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!this.grid.isLeftToRight()){this.headerNodeContainer.style.width="";}},destroy:function(){html.destroy(this.headerNode);delete this.headerNode;for(var i in this.rowNodes){this._cleanupRowWidgets(this.rowNodes[i]);html.destroy(this.rowNodes[i]);}this.rowNodes={};if(this.source){this.source.destroy();}this.inherited(arguments);},focus:function(){if(has("ie")||has("webkit")||has("opera")){this.hiddenFocusNode.focus();}else{this.scrollboxNode.focus();}},setStructure:function(_a3c){var vs=(this.structure=_a3c);if(vs.width&&!isNaN(vs.width)){this.viewWidth=vs.width+"em";}else{this.viewWidth=vs.width||(vs.noscroll?"auto":this.viewWidth);}this._onBeforeRow=vs.onBeforeRow||function(){};this._onAfterRow=vs.onAfterRow||function(){};this.noscroll=vs.noscroll;if(this.noscroll){this.scrollboxNode.style.overflow="hidden";}this.simpleStructure=Boolean(vs.cells.length==1);this.testFlexCells();this.updateStructure();},_cleanupRowWidgets:function(_a3d){if(_a3d){_a2d.forEach(_a2f("[widgetId]",_a3d).map(_a2a.byNode),function(w){if(w._destroyOnRemove){w.destroy();delete w;}else{if(w.domNode&&w.domNode.parentNode){w.domNode.parentNode.removeChild(w.domNode);}}});}},onBeforeRow:function(_a3e,_a3f){this._onBeforeRow(_a3e,_a3f);if(_a3e>=0){this._cleanupRowWidgets(this.getRowNode(_a3e));}},onAfterRow:function(_a40,_a41,_a42){this._onAfterRow(_a40,_a41,_a42);var g=this.grid;_a2d.forEach(_a2f(".dojoxGridStubNode",_a42),function(n){if(n&&n.parentNode){var lw=n.getAttribute("linkWidget");var _a43=window.parseInt(html.attr(n,"cellIdx"),10);var _a44=g.getCell(_a43);var w=_a2a.byId(lw);if(w){n.parentNode.replaceChild(w.domNode,n);if(!w._started){w.startup();}dojo.destroy(n);}else{n.innerHTML="";}}},this);},testFlexCells:function(){this.flexCells=false;for(var j=0,row;(row=this.structure.cells[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.view=this;this.flexCells=this.flexCells||cell.isFlex();}}return this.flexCells;},updateStructure:function(){this.header.update();this.content.update();},getScrollbarWidth:function(){var _a45=this.hasVScrollbar();var _a46=html.style(this.scrollboxNode,"overflow");if(this.noscroll||!_a46||_a46=="hidden"){_a45=false;}else{if(_a46=="scroll"){_a45=true;}}return (_a45?_a34.getScrollbar().w:0);},getColumnsWidth:function(){var h=this.headerContentNode;return h&&h.firstChild?(h.firstChild.offsetWidth||html.style(h.firstChild,"width")):0;},setColumnsWidth:function(_a47){this.headerContentNode.firstChild.style.width=_a47+"px";if(this.viewWidth){this.viewWidth=_a47+"px";}},getWidth:function(){return this.viewWidth||(this.getColumnsWidth()+this.getScrollbarWidth())+"px";},getContentWidth:function(){return Math.max(0,html._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px";},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1;}var _a48=this.grid.layout.cells;var _a49=lang.hitch(this,function(node,_a4a){!this.grid.isLeftToRight()&&(_a4a=!_a4a);var inc=_a4a?-1:1;var idx=this.header.getCellNodeIndex(node)+inc;var cell=_a48[idx];while(cell&&cell.getHeaderNode()&&cell.getHeaderNode().style.display=="none"){idx+=inc;cell=_a48[idx];}if(cell){return cell.getHeaderNode();}return null;});if(this.grid.columnReordering&&this.simpleStructure){if(this.source){this.source.destroy();}var _a4b="dojoxGrid_bottomMarker";var _a4c="dojoxGrid_topMarker";if(this.bottomMarker){html.destroy(this.bottomMarker);}this.bottomMarker=html.byId(_a4b);if(this.topMarker){html.destroy(this.topMarker);}this.topMarker=html.byId(_a4c);if(!this.bottomMarker){this.bottomMarker=html.create("div",{"id":_a4b,"class":"dojoxGridColPlaceBottom"},win.body());this._hide(this.bottomMarker);this.topMarker=html.create("div",{"id":_a4c,"class":"dojoxGridColPlaceTop"},win.body());this._hide(this.topMarker);}this.arrowDim=html.contentBox(this.bottomMarker);var _a4d=html.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new _a31(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:false,onMouseDown:lang.hitch(this,function(e){this.header.decorateEvent(e);if((this.header.overRightResizeArea(e)||this.header.overLeftResizeArea(e))&&this.header.canResize(e)&&!this.header.moveable){this.header.beginColumnResize(e);}else{if(this.grid.headerMenu){this.grid.headerMenu.onCancel(true);}if(e.button===(has("ie")<9?1:0)){_a31.prototype.onMouseDown.call(this.source,e);}}}),onMouseOver:lang.hitch(this,function(e){var src=this.source;if(src._getChildByEvent(e)){_a31.prototype.onMouseOver.apply(src,arguments);}}),_markTargetAnchor:lang.hitch(this,function(_a4e){var src=this.source;if(src.current==src.targetAnchor&&src.before==_a4e){return;}if(src.targetAnchor&&_a49(src.targetAnchor,src.before)){src._removeItemClass(_a49(src.targetAnchor,src.before),src.before?"After":"Before");}_a31.prototype._markTargetAnchor.call(src,_a4e);var _a4f=_a4e?src.targetAnchor:_a49(src.targetAnchor,src.before);var _a50=0;if(!_a4f){_a4f=src.targetAnchor;_a50=html.contentBox(_a4f).w+this.arrowDim.w/2+2;}var pos=html.position(_a4f,true);var left=Math.floor(pos.x-this.arrowDim.w/2+_a50);html.style(this.bottomMarker,"visibility","visible");html.style(this.topMarker,"visibility","visible");html.style(this.bottomMarker,{"left":left+"px","top":(_a4d+pos.y)+"px"});html.style(this.topMarker,{"left":left+"px","top":(pos.y-this.arrowDim.h)+"px"});if(src.targetAnchor&&_a49(src.targetAnchor,src.before)){src._addItemClass(_a49(src.targetAnchor,src.before),src.before?"After":"Before");}}),_unmarkTargetAnchor:lang.hitch(this,function(){var src=this.source;if(!src.targetAnchor){return;}if(src.targetAnchor&&_a49(src.targetAnchor,src.before)){src._removeItemClass(_a49(src.targetAnchor,src.before),src.before?"After":"Before");}this._hide(this.bottomMarker);this._hide(this.topMarker);_a31.prototype._unmarkTargetAnchor.call(src);}),destroy:lang.hitch(this,function(){_a2e.disconnect(this._source_conn);_a2e.unsubscribe(this._source_sub);_a31.prototype.destroy.call(this.source);if(this.bottomMarker){html.destroy(this.bottomMarker);delete this.bottomMarker;}if(this.topMarker){html.destroy(this.topMarker);delete this.topMarker;}}),onDndCancel:lang.hitch(this,function(){_a31.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker);})});this._source_conn=_a2e.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=_a2e.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup();}},_hide:function(node){html.style(node,{top:"-10000px","visibility":"hidden"});},_onDndDropBefore:function(_a51,_a52,copy){if(_a37.manager().target!==this.source){return;}this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var _a53=this.grid.views.views;var _a54=_a53[_a51.viewIndex];var _a55=_a53[this.index];if(_a55!=_a54){_a54.convertColPctToFixed();_a55.convertColPctToFixed();}},_onDndDrop:function(_a56,_a57,copy){if(_a37.manager().target!==this.source){if(_a37.manager().source===this.source){this._removingColumn=true;}return;}this._hide(this.bottomMarker);this._hide(this.topMarker);var _a58=function(n){return n?html.attr(n,"idx"):null;};var w=html.marginBox(_a57[0]).w;if(_a56.viewIndex!==this.index){var _a59=this.grid.views.views;var _a5a=_a59[_a56.viewIndex];var _a5b=_a59[this.index];if(_a5a.viewWidth&&_a5a.viewWidth!="auto"){_a5a.setColumnsWidth(_a5a.getColumnsWidth()-w);}if(_a5b.viewWidth&&_a5b.viewWidth!="auto"){_a5b.setColumnsWidth(_a5b.getColumnsWidth());}}var stn=this.source._targetNode;var stb=this.source._beforeTarget;!this.grid.isLeftToRight()&&(stb=!stb);var _a5c=this.grid.layout;var idx=this.index;delete this.source._targetNode;delete this.source._beforeTarget;_a5c.moveColumn(_a56.viewIndex,idx,_a58(_a57[0]),_a58(stn),stb);},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode]);},_getHeaderContent:function(_a5d){var n=_a5d.name||_a5d.grid.getCellName(_a5d);if(/^\s+$/.test(n)){n="&nbsp;";}var ret=["<div class=\"dojoxGridSortNode"];if(_a5d.index!=_a5d.grid.getSortIndex()){ret.push("\">");}else{ret=ret.concat([" ",_a5d.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown","\"><div class=\"dojoxGridArrowButtonChar\">",_a5d.grid.sortInfo>0?"&#9650;":"&#9660;","</div><div class=\"dojoxGridArrowButtonNode\" role=\"presentation\"></div>","<div class=\"dojoxGridColCaption\">"]);}ret=ret.concat([n,"</div></div>"]);return ret.join("");},resize:function(){this.adaptHeight();this.adaptWidth();},hasHScrollbar:function(_a5e){var _a5f=this._hasHScroll||false;if(this._hasHScroll==undefined||_a5e){if(this.noscroll){this._hasHScroll=false;}else{var _a60=html.style(this.scrollboxNode,"overflow");if(_a60=="hidden"){this._hasHScroll=false;}else{if(_a60=="scroll"){this._hasHScroll=true;}else{this._hasHScroll=(this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);}}}}if(_a5f!==this._hasHScroll){this.grid.update();}return this._hasHScroll;},hasVScrollbar:function(_a61){var _a62=this._hasVScroll||false;if(this._hasVScroll==undefined||_a61){if(this.noscroll){this._hasVScroll=false;}else{var _a63=html.style(this.scrollboxNode,"overflow");if(_a63=="hidden"){this._hasVScroll=false;}else{if(_a63=="scroll"){this._hasVScroll=true;}else{this._hasVScroll=(this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);}}}}if(_a62!==this._hasVScroll){this.grid.update();}return this._hasVScroll;},convertColPctToFixed:function(){var _a64=false;this.grid.initialWidth="";var _a65=_a2f("th",this.headerContentNode);var _a66=_a2d.map(_a65,function(c,vIdx){var w=c.style.width;html.attr(c,"vIdx",vIdx);if(w&&w.slice(-1)=="%"){_a64=true;}else{if(w&&w.slice(-2)=="px"){return window.parseInt(w,10);}}return html.contentBox(c).w;});if(_a64){_a2d.forEach(this.grid.layout.cells,function(cell,idx){if(cell.view==this){var _a67=cell.view.getHeaderCellNode(cell.index);if(_a67&&html.hasAttr(_a67,"vIdx")){var vIdx=window.parseInt(html.attr(_a67,"vIdx"));this.setColWidth(idx,_a66[vIdx]);html.removeAttr(_a67,"vIdx");}}},this);return true;}return false;},adaptHeight:function(_a68){if(!this.grid._autoHeight){var h=(this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10))||this.domNode.clientHeight;var self=this;var _a69=function(){var v;for(var i in self.grid.views.views){v=self.grid.views.views[i];if(v!==self&&v.hasHScrollbar()){return true;}}return false;};if(_a68||(this.noscroll&&_a69())){h-=_a34.getScrollbar().h;}util.setStyleHeightPx(this.scrollboxNode,h);}this.hasVScrollbar(true);},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(!this._removingColumn){w=Math.max(w,this.getColumnsWidth())+"px";}else{w=Math.min(w,this.getColumnsWidth())+"px";this._removingColumn=false;}var cn=this.contentNode;cn.style.width=w;this.hasHScrollbar(true);},setSize:function(w,h){var ds=this.domNode.style;var hs=this.headerNode.style;if(w){ds.width=w;hs.width=w;}ds.height=(h>=0?h+"px":"");},renderRow:function(_a6a){var _a6b=this.createRowNode(_a6a);this.buildRow(_a6a,_a6b);return _a6b;},createRowNode:function(_a6c){var node=document.createElement("div");node.className=this.classTag+"Row";if(this instanceof _a2b.grid._RowSelector){html.attr(node,"role","presentation");}else{html.attr(node,"role","row");if(this.grid.selectionMode!="none"){node.setAttribute("aria-selected","false");}}node[util.gridViewTag]=this.id;node[util.rowIndexTag]=_a6c;this.rowNodes[_a6c]=node;return node;},buildRow:function(_a6d,_a6e){this.buildRowContent(_a6d,_a6e);this.styleRow(_a6d,_a6e);},buildRowContent:function(_a6f,_a70){_a70.innerHTML=this.content.generateHtml(_a6f,_a6f);if(this.flexCells&&this.contentWidth){_a70.firstChild.style.width=this.contentWidth;}util.fire(this,"onAfterRow",[_a6f,this.structure.cells,_a70]);},rowRemoved:function(_a71){if(_a71>=0){this._cleanupRowWidgets(this.getRowNode(_a71));}this.grid.edit.save(this,_a71);delete this.rowNodes[_a71];},getRowNode:function(_a72){return this.rowNodes[_a72];},getCellNode:function(_a73,_a74){var row=this.getRowNode(_a73);if(row){return this.content.getCellNode(row,_a74);}},getHeaderCellNode:function(_a75){if(this.headerContentNode){return this.header.getCellNode(this.headerContentNode,_a75);}},styleRow:function(_a76,_a77){_a77._style=_a38(_a77);this.styleRowNode(_a76,_a77);},styleRowNode:function(_a78,_a79){if(_a79){this.doStyleRowNode(_a78,_a79);}},doStyleRowNode:function(_a7a,_a7b){this.grid.styleRowNode(_a7a,_a7b);},updateRow:function(_a7c){var _a7d=this.getRowNode(_a7c);if(_a7d){_a7d.style.height="";this.buildRow(_a7c,_a7d);}return _a7d;},updateRowStyles:function(_a7e){this.styleRowNode(_a7e,this.getRowNode(_a7e));},lastTop:0,firstScroll:0,_nativeScroll:false,doscroll:function(_a7f){if(has("ff")>=13){this._nativeScroll=true;}var _a80=this.grid.isLeftToRight();if(this.firstScroll<2){if((!_a80&&this.firstScroll==1)||(_a80&&this.firstScroll===0)){var s=html.marginBox(this.headerNodeContainer);if(has("ie")){this.headerNodeContainer.style.width=s.w+this.getScrollbarWidth()+"px";}else{if(has("mozilla")){this.headerNodeContainer.style.width=s.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=_a80?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth;}}}this.firstScroll++;}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var top=this.scrollboxNode.scrollTop;if(top!==this.lastTop){this.grid.scrollTo(top);}this._nativeScroll=false;},setScrollTop:function(_a81){this.lastTop=_a81;if(!this._nativeScroll){this.scrollboxNode.scrollTop=_a81;}return this.scrollboxNode.scrollTop;},doContentEvent:function(e){if(this.content.decorateEvent(e)){this.grid.onContentEvent(e);}},doHeaderEvent:function(e){if(this.header.decorateEvent(e)){this.grid.onHeaderEvent(e);}},dispatchContentEvent:function(e){return this.content.dispatchEvent(e);},dispatchHeaderEvent:function(e){return this.header.dispatchEvent(e);},setColWidth:function(_a82,_a83){this.grid.setCellWidth(_a82,_a83+"px");},update:function(){if(!this.domNode){return;}this.content.update();this.grid.update();var left=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=left;this.headerNode.scrollLeft=left;}});var _a84=_a2c("dojox.grid._GridAvatar",_a36,{construct:function(){var dd=win.doc;var a=dd.createElement("table");a.cellPadding=a.cellSpacing="0";a.className="dojoxGridDndAvatar";a.style.position="absolute";a.style.zIndex=1999;a.style.margin="0px";var b=dd.createElement("tbody");var tr=dd.createElement("tr");var td=dd.createElement("td");var img=dd.createElement("td");tr.className="dojoxGridDndAvatarItem";img.className="dojoxGridDndAvatarItemImage";img.style.width="16px";var _a85=this.manager.source,node;if(_a85.creator){node=_a85._normalizedCreator(_a85.getItem(this.manager.nodes[0].id).data,"avatar").node;}else{node=this.manager.nodes[0].cloneNode(true);var _a86,_a87;if(node.tagName.toLowerCase()=="tr"){_a86=dd.createElement("table");_a87=dd.createElement("tbody");_a87.appendChild(node);_a86.appendChild(_a87);node=_a86;}else{if(node.tagName.toLowerCase()=="th"){_a86=dd.createElement("table");_a87=dd.createElement("tbody");var r=dd.createElement("tr");_a86.cellPadding=_a86.cellSpacing="0";r.appendChild(node);_a87.appendChild(r);_a86.appendChild(_a87);node=_a86;}}}node.id="";td.appendChild(node);tr.appendChild(img);tr.appendChild(td);html.style(tr,"opacity",0.9);b.appendChild(tr);a.appendChild(b);this.node=a;var m=_a37.manager();this.oldOffsetY=m.OFFSET_Y;m.OFFSET_Y=1;},destroy:function(){_a37.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments);}});var _a88=_a37.manager().makeAvatar;_a37.manager().makeAvatar=function(){var src=this.source;if(src.viewIndex!==undefined&&!html.hasClass(win.body(),"dijit_a11y")){return new _a84(this);}return _a88.call(_a37.manager());};return _a3b;});},"dijit/typematic":function(){define("dijit/typematic",["dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(_a89,_a8a,_a8b,_a8c,lang,on,has,_a8d){var _a8e=(_a8d.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(lang.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_a8f,node,_a90,obj,_a91,_a92,_a93){if(obj!=this._obj){this.stop();this._initialDelay=_a92||500;this._subsequentDelay=_a91||0.9;this._minDelay=_a93||10;this._obj=obj;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=lang.hitch(_a8f,_a90);this._evt={faux:true};for(var attr in evt){if(attr!="layerX"&&attr!="layerY"){var v=evt[attr];if(typeof v!="function"&&typeof v!="undefined"){this._evt[attr]=v;}}}this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_a94,_a95,_a96,_a97,_a98,_a99){if(_a94.keyCode){_a94.charOrCode=_a94.keyCode;_a8c.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_a94.charCode){_a94.charOrCode=String.fromCharCode(_a94.charCode);_a8c.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}var _a9a=[on(node,_a8a._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==_a94.charOrCode&&(_a94.ctrlKey===undefined||_a94.ctrlKey==evt.ctrlKey)&&(_a94.altKey===undefined||_a94.altKey==evt.altKey)&&(_a94.metaKey===undefined||_a94.metaKey==(evt.metaKey||false))&&(_a94.shiftKey===undefined||_a94.shiftKey==evt.shiftKey)){_a8b.stop(evt);_a8e.trigger(evt,_a95,node,_a96,_a94,_a97,_a98,_a99);}else{if(_a8e._obj==_a94){_a8e.stop();}}})),on(node,"keyup",lang.hitch(this,function(){if(_a8e._obj==_a94){_a8e.stop();}}))];return {remove:function(){_a89.forEach(_a9a,function(h){h.remove();});}};},addMouseListener:function(node,_a9b,_a9c,_a9d,_a9e,_a9f){var _aa0=[on(node,"mousedown",lang.hitch(this,function(evt){evt.preventDefault();_a8e.trigger(evt,_a9b,node,_a9c,node,_a9d,_a9e,_a9f);})),on(node,"mouseup",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_a8e.stop();})),on(node,"mouseout",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_a8e.stop();})),on(node,"dblclick",lang.hitch(this,function(evt){evt.preventDefault();if(has("ie")<9){_a8e.trigger(evt,_a9b,node,_a9c,node,_a9d,_a9e,_a9f);setTimeout(lang.hitch(this,_a8e.stop),50);}}))];return {remove:function(){_a89.forEach(_aa0,function(h){h.remove();});}};},addListener:function(_aa1,_aa2,_aa3,_aa4,_aa5,_aa6,_aa7,_aa8){var _aa9=[this.addKeyListener(_aa2,_aa3,_aa4,_aa5,_aa6,_aa7,_aa8),this.addMouseListener(_aa1,_aa4,_aa5,_aa6,_aa7,_aa8)];return {remove:function(){_a89.forEach(_aa9,function(h){h.remove();});}};}});return _a8e;});},"dijit/MenuItem":function(){require({cache:{"url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n"}});define("dijit/MenuItem",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_aaa,dom,_aab,_aac,_aad,has,_aae,_aaf,_ab0,_ab1,_ab2){return _aaa("dijit.MenuItem",[_aae,_aaf,_ab0,_ab1],{templateString:_ab2,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(val){this.containerNode.innerHTML=val;this._set("label",val);if(this.textDir==="auto"){this.applyTextDir(this.focusNode,this.label);}},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_ab3){if(_ab3&&!("label" in this.params)){this.set("label",_ab3.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _ab4=this.id+"_text";_aab.set(this.containerNode,"id",_ab4);if(this.accelKeyNode){_aab.set(this.accelKeyNode,"id",this.id+"_accel");_ab4+=" "+this.id+"_accel";}this.domNode.setAttribute("aria-labelledby",_ab4);dom.setSelectable(this.domNode,false);},onClick:function(){},focus:function(){try{if(has("ie")==8){this.containerNode.focus();}this.focusNode.focus();}catch(e){}},_onFocus:function(){this._setSelected(true);this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_ab5){_aac.toggle(this.domNode,"dijitMenuItemSelected",_ab5);},setLabel:function(_ab6){_aad.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_ab6);},setDisabled:function(_ab7){_aad.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_ab7);},_setDisabledAttr:function(_ab8){this.focusNode.setAttribute("aria-disabled",_ab8?"true":"false");this._set("disabled",_ab8);},_setAccelKeyAttr:function(_ab9){this.accelKeyNode.style.display=_ab9?"":"none";this.accelKeyNode.innerHTML=_ab9;_aab.set(this.containerNode,"colSpan",_ab9?"1":"2");this._set("accelKey",_ab9);},_setTextDirAttr:function(_aba){if(!this._created||this.textDir!=_aba){this._set("textDir",_aba);this.applyTextDir(this.focusNode,this.label);}}});});},"esri/dijit/editing/AttachmentEditor":function(){define(["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/kernel","dojo/has","dojo/query","dojo/io-query","dojo/dom-attr","dijit/_Widget","dijit/_Templated","esri/kernel","esri/lang","esri/domUtils","dojo/text!esri/dijit/editing/templates/AttachmentEditor.html","dojo/i18n!esri/nls/jsapi","dojo/NodeList-dom"],function(_abb,_abc,lang,_abd,_abe,_abf,has,_ac0,_ac1,_ac2,_ac3,_ac4,_ac5,_ac6,_ac7,_ac8,_ac9){var AE=_abc([_ac3,_ac4],{declaredClass:"esri.dijit.editing.AttachmentEditor",widgetsInTemplate:true,templateString:_ac8,basePath:_abb.toUrl("esri/dijit/editing")+"/",_listHtml:"<span id='node_${oid}_${attid}'><a href='${href}' target='_blank'>${name}</a>",_deleteBtnHtml:"(<span style='cursor:pointer;color:red;font-weight:bold;' class='deleteAttachment' id='${attid}');'>X</span>)",_endHtml:"<br/></span>",_aeConnects:[],_layerEditingCapChecked:{},_layerEditingCap:{},constructor:function(_aca,_acb){lang.mixin(this,_ac9.widgets.attachmentEditor);},startup:function(){this.inherited(arguments);this._uploadField_connect=_abd.connect(this._uploadField,"onchange",this,"_addAttachment");this._uploadFieldFocus_connect=_abd.connect(this._uploadField,"onfocus",lang.hitch(this,function(e){_ac7.hide(this._attachmentError);}));},destroy:function(){_abe.forEach(this._aeConnects,_abd.disconnect);_abd.disconnect(this._uploadField_connect);_abd.disconnect(this._uploadFieldFocus_connect);this.inherited(arguments);},showAttachments:function(_acc,_acd){var list=this._attachmentList;list.innerHTML=this.NLS_none;this._uploadField.value="";_abe.forEach(this.domNode.children,function(_ace,idx){_ac7.show(_ace);});_ac7.hide(this._attachmentError);if(!_acc){return;}this._featureLayer=_acc.getLayer()||_acd;if(!this._featureLayer){return;}if(this._featureLayer.declaredClass!=="esri.layers.FeatureLayer"||!this._featureLayer.getEditCapabilities){_ac7.hide(this._uploadForm);_abe.forEach(this.domNode.children,function(_acf,idx){_ac7.hide(_acf);});return;}this._currentLayerId=this._featureLayer.id;if(!this._layerEditingCapChecked[this._currentLayerId]){this._layerEditingCap[this._currentLayerId]=this._featureLayer.getEditCapabilities();this._layerEditingCapChecked[this._currentLayerId]=true;}this._featureCanUpdate=this._featureLayer.getEditCapabilities({feature:_acc}).canUpdate;this._oid=_acc.attributes[this._featureLayer.objectIdField];this._getAttachments(_acc);},_getAttachments:function(_ad0){if(!this._featureLayer||!this._featureLayer.queryAttachmentInfos){return;}this._featureLayer.queryAttachmentInfos(this._oid,lang.hitch(this,"_onQueryAttachmentInfosComplete"));},_addAttachment:function(){_ac7.hide(this._attachmentError);if(!this._featureLayer||!this._featureLayer.addAttachment){return;}this._featureLayer.addAttachment(this._oid,this._uploadForm,lang.hitch(this,"_onAddAttachmentComplete"),lang.hitch(this,"_onAddAttachmentError"));},_deleteAttachment:function(oid,_ad1){this._featureLayer.deleteAttachments(oid,[_ad1],lang.hitch(this,"_onDeleteAttachmentComplete"));},_onQueryAttachmentInfosComplete:function(_ad2){var _ad3=this._listHtml+this._deleteBtnHtml+this._endHtml;this._uploadForm.style.display="block";if((!this._featureCanUpdate&&this._layerEditingCap[this._currentLayerId].canUpdate)||(!this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate)){_ad3=this._listHtml+this._endHtml;this._uploadForm.style.display="none";}else{if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_ad3=this._listHtml+this._endHtml;}}var list=this._attachmentList,_ad4=_abe.map(_ad2,lang.hitch(this,function(info){return _ac6.substitute({href:info.url,name:info.name,oid:info.objectId,attid:info.id},_ad3);}));list.innerHTML=_ad4.join("")||this.NLS_none;this._updateConnects();},_onAddAttachmentComplete:function(_ad5){var _ad6=this._uploadField;var _ad7=_ad6.value;var pos=_ad7.lastIndexOf("\\");if(pos>-1){_ad7=_ad7.substring(pos+1,_ad7.length);}_ad7=_ad7.replace(/\ /g,"_");var list=this._attachmentList,_ad8=_ac1.objectToQuery({gdbVersion:this._featureLayer.gdbVersion,token:this._featureLayer._getToken()});var _ad9=this._listHtml+this._deleteBtnHtml+this._endHtml;if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_ad9=this._listHtml+this._endHtml;}var link=_ac6.substitute({href:this._featureLayer._url.path+"/"+_ad5.objectId+"/attachments/"+_ad5.attachmentId+(_ad8?("?"+_ad8):""),name:_ad7,oid:_ad5.objectId,attid:_ad5.attachmentId},_ad9);list.innerHTML=list.innerHTML==this.NLS_none?link:(list.innerHTML+link);this._updateConnects();_ad6.value="";},_onAddAttachmentError:function(_ada){if(_ada&&_ac6.isDefined(_ada.code)){var _adb,_adc=this._attachmentError;if(_ada.code===400){_adb=this.NLS_fileNotSupported;}else{_adb=_ada.message||(_ada.details&&_ada.details.length&&_ada.details[0]);}_ac2.set(_adc,"innerHTML",(_adb||this.NLS_error));_ac7.show(_adc);}},_onDeleteAttachmentComplete:function(_add){var _ade=_abe.every(_add,function(_adf){return _adf.success;}),list=this._attachmentList;if(_ade){_abf.query("#node_"+_add[0].objectId+"_"+_add[0].attachmentId).orphan();if(!list.children||!list.children.length){list.innerHTML=this.NLS_none;}}},_updateConnects:function(){_abe.forEach(this._aeConnects,_abd.disconnect);_abf.query(".deleteAttachment").forEach(function(item){this._aeConnects.push(_abd.connect(item,"onclick",lang.hitch(this,"_deleteAttachment",this._oid,item.id)));},this);}});if(has("extend-esri")){lang.setObject("dijit.editing.AttachmentEditor",AE,_ac5);}return AE;});},"dijit/ToolbarSeparator":function(){define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(_ae0,dom,_ae1,_ae2){return _ae0("dijit.ToolbarSeparator",[_ae1,_ae2],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget",["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_ae3,_ae4,_ae5,_ae6,_ae7,_ae8,_ae9,_aea){return _ae7("dijit.layout._LayoutWidget",[_ae3,_ae4,_ae5],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_ae8.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _aeb=this.getParent&&this.getParent();if(!(_aeb&&_aeb.isLayoutContainer)){this.resize();this.own(_ae6.on("resize",lang.hitch(this,"resize")));}},resize:function(_aec,_aed){var node=this.domNode;if(_aec){_ae9.setMarginBox(node,_aec);}var mb=_aed||{};lang.mixin(mb,_aec||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_ae9.getMarginBox(node),mb);}var cs=_aea.getComputedStyle(node);var me=_ae9.getMarginExtents(node,cs);var be=_ae9.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_ae9.getPadExtents(node,cs);this._contentBox={l:_aea.toPixelValue(node,cs.paddingLeft),t:_aea.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_aee){var cls=this.baseClass+"-child "+(_aee.baseClass?this.baseClass+"-"+_aee.baseClass:"");_ae8.add(_aee.domNode,cls);},addChild:function(_aef,_af0){this.inherited(arguments);if(this._started){this._setupChild(_aef);}},removeChild:function(_af1){var cls=this.baseClass+"-child"+(_af1.baseClass?" "+this.baseClass+"-"+_af1.baseClass:"");_ae8.remove(_af1.domNode,cls);this.inherited(arguments);}});});},"dijit/popup":function(){define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./place","./BackgroundIframe","./main"],function(_af2,_af3,_af4,_af5,dom,_af6,_af7,_af8,_af9,_afa,keys,lang,on,has,_afb,_afc,_afd){function _afe(){if(this._popupWrapper){_af7.destroy(this._popupWrapper);delete this._popupWrapper;}};var _aff=_af5(null,{_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_b00){var _b01=_b00._popupWrapper,node=_b00.domNode;if(!_b01){_b01=_af7.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},_b00.ownerDocumentBody);_b01.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";_b00._popupWrapper=_b01;_af3.after(_b00,"destroy",_afe,true);}return _b01;},moveOffScreen:function(_b02){var _b03=this._createWrapper(_b02);_af9.set(_b03,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_b04){var _b05=this._createWrapper(_b04);_af9.set(_b05,"display","none");},getTopPopup:function(){var _b06=this._stack;for(var pi=_b06.length-1;pi>0&&_b06[pi].parent===_b06[pi-1].widget;pi--){}return _b06[pi];},open:function(args){var _b07=this._stack,_b08=args.popup,_b09=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():_af8.isBodyLtr(_b08.ownerDocument),_b0a=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_b07.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,_b07[_b07.length-1].widget.domNode))){this.close(_b07[_b07.length-1].widget);}var _b0b=this._createWrapper(_b08);_af6.set(_b0b,{id:id,style:{zIndex:this._beginZIndex+_b07.length},"class":"dijitPopup "+(_b08.baseClass||_b08["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(has("ie")||has("mozilla")){if(!_b08.bgIframe){_b08.bgIframe=new _afc(_b0b);}}var best=_b0a?_afb.around(_b0b,_b0a,_b09,ltr,_b08.orient?lang.hitch(_b08,"orient"):null):_afb.at(_b0b,args,_b09=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_b0b.style.display="";_b0b.style.visibility="visible";_b08.domNode.style.visibility="visible";var _b0c=[];_b0c.push(on(_b0b,_af4._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==keys.ESCAPE&&args.onCancel){_afa.stop(evt);args.onCancel();}else{if(evt.charOrCode===keys.TAB){_afa.stop(evt);var _b0d=this.getTopPopup();if(_b0d&&_b0d.onCancel){_b0d.onCancel();}}}})));if(_b08.onCancel&&args.onCancel){_b0c.push(_b08.on("cancel",args.onCancel));}_b0c.push(_b08.on(_b08.onExecute?"execute":"change",lang.hitch(this,function(){var _b0e=this.getTopPopup();if(_b0e&&_b0e.onExecute){_b0e.onExecute();}})));_b07.push({widget:_b08,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_b0c});if(_b08.onOpen){_b08.onOpen(best);}return best;},close:function(_b0f){var _b10=this._stack;while((_b0f&&_af2.some(_b10,function(elem){return elem.widget==_b0f;}))||(!_b0f&&_b10.length)){var top=_b10.pop(),_b11=top.widget,_b12=top.onClose;if(_b11.onClose){_b11.onClose();}var h;while(h=top.handlers.pop()){h.remove();}if(_b11&&_b11.domNode){this.hide(_b11);}if(_b12){_b12();}}}});return (_afd.popup=new _aff());});},"dojox/grid/_RowManager":function(){define("dojox/grid/_RowManager",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class"],function(_b13,lang,_b14){var _b15=function(_b16,_b17){if(_b16.style.cssText==undefined){_b16.setAttribute("style",_b17);}else{_b16.style.cssText=_b17;}};return _b13("dojox.grid._RowManager",null,{constructor:function(_b18){this.grid=_b18;},linesToEms:2,overRow:-2,prepareStylingRow:function(_b19,_b1a){return {index:_b19,node:_b1a,odd:Boolean(_b19&1),selected:!!this.grid.selection.isSelected(_b19),over:this.isOver(_b19),customStyles:"",customClasses:"dojoxGridRow"};},styleRowNode:function(_b1b,_b1c){var row=this.prepareStylingRow(_b1b,_b1c);this.grid.onStyleRow(row);this.applyStyles(row);},applyStyles:function(_b1d){var i=_b1d;i.node.className=i.customClasses;var h=i.node.style.height;_b15(i.node,i.customStyles+";"+(i.node._style||""));i.node.style.height=h;},updateStyles:function(_b1e){this.grid.updateRowStyles(_b1e);},setOverRow:function(_b1f){var last=this.overRow;this.overRow=_b1f;if((last!=this.overRow)&&(lang.isString(last)||last>=0)){this.updateStyles(last);}this.updateStyles(this.overRow);},isOver:function(_b20){return (this.overRow==_b20&&!_b14.contains(this.grid.domNode,"dojoxGridColumnResizing"));}});});},"dojo/dnd/Mover":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(_b21,_b22,_b23,lang,has,win,dom,_b24,_b25,_b26,on,_b27,dnd,_b28){return _b22("dojo.dnd.Mover",[_b26],{constructor:function(node,e,host){this.node=dom.byId(node);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=(this.host=host),d=node.ownerDocument;this.events=[on(d,_b27.move,lang.hitch(this,"onFirstMove")),on(d,_b27.move,lang.hitch(this,"onMouseMove")),on(d,_b27.release,lang.hitch(this,"onMouseUp")),on(d,"dragstart",_b23.stop),on(d.body,"selectstart",_b23.stop)];_b28.autoScrollStart(d);if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){_b28.autoScroll(e);var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY},e);_b23.stop(e);},onMouseUp:function(e){if(has("webkit")&&has("mac")&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}_b23.stop(e);},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=_b24.getMarginBox(this.node);var b=win.doc.body;var bs=_b25.getComputedStyle(b);var bm=_b24.getMarginBox(b,bs);var bc=_b24.getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this,e);}this.events.shift().remove();},destroy:function(){_b21.forEach(this.events,function(_b29){_b29.remove();});var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});});},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window"],function(_b2a,_b2b,_b2c,_b2d,_b2e,lang,on,has,win){var _b2f=new function(){var _b30=[];this.pop=function(){var _b31;if(_b30.length){_b31=_b30.pop();_b31.style.display="";}else{if(has("ie")<9){var burl=_b2c["dojoBlankHtmlUrl"]||_b2a.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_b31=win.doc.createElement(html);}else{_b31=_b2d.create("iframe");_b31.src="javascript:\"\"";_b31.className="dijitBackgroundIframe";_b31.setAttribute("role","presentation");_b2e.set(_b31,"opacity",0.1);}_b31.tabIndex=-1;}return _b31;};this.push=function(_b32){_b32.style.display="none";_b30.push(_b32);};}();_b2b.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("ie")||has("mozilla")){var _b33=(this.iframe=_b2f.pop());node.appendChild(_b33);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,function(){this.resize(node);}));}else{_b2e.set(_b33,{width:"100%",height:"100%"});}}};lang.extend(_b2b.BackgroundIframe,{resize:function(node){if(this.iframe){_b2e.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){_b2f.push(this.iframe);delete this.iframe;}}});return _b2b.BackgroundIframe;});},"url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   data-dojo-attach-event=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n","dojo/dnd/Avatar":function(){define(["../_base/declare","../_base/window","../dom","../dom-attr","../dom-class","../dom-construct","../hccss","../query"],function(_b34,win,dom,_b35,_b36,_b37,has,_b38){return _b34("dojo.dnd.Avatar",null,{constructor:function(_b39){this.manager=_b39;this.construct();},construct:function(){var a=_b37.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),_b3a=this.manager.source,node,b=_b37.create("tbody",null,a),tr=_b37.create("tr",null,b),td=_b37.create("td",null,tr),k=Math.min(5,this.manager.nodes.length),i=0;if(has("highcontrast")){_b37.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},td);}_b37.create("span",{innerHTML:_b3a.generateText?this._generateText():""},td);_b35.set(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(_b3a.creator){node=_b3a._normalizedCreator(_b3a.getItem(this.manager.nodes[i].id).data,"avatar").node;}else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _b3b=_b37.create("table"),_b3c=_b37.create("tbody",null,_b3b);_b3c.appendChild(node);node=_b3b;}}node.id="";tr=_b37.create("tr",null,b);td=_b37.create("td",null,tr);td.appendChild(node);_b35.set(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}this.node=a;},destroy:function(){_b37.destroy(this.node);this.node=false;},update:function(){_b36.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(has("highcontrast")){var icon=dom.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy){text="< ";}else{if(!this.manager.canDropFlag&&!this.manager.copy){text="o";}else{if(!this.manager.canDropFlag){text="x";}}}icon.innerHTML=text;}_b38(("tr.dojoDndAvatarHeader td span"+(has("highcontrast")?" span":"")),this.node).forEach(function(node){node.innerHTML=this.manager.source.generateText?this._generateText():"";},this);},_generateText:function(){return this.manager.nodes.length.toString();}});});},"dijit/form/_Spinner":function(){require({cache:{"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n"}});define("dijit/form/_Spinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/mouse","../typematic","./RangeBoundTextBox","dojo/text!./templates/Spinner.html","./_TextBoxMixin"],function(_b3d,_b3e,keys,lang,has,_b3f,_b40,_b41,_b42,_b43){return _b3d("dijit.form._Spinner",_b41,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:_b42,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val){return val;},_arrowPressed:function(_b44,_b45,_b46){if(this.disabled||this.readOnly){return;}this._setValueAttr(this.adjust(this.get("value"),_b45*_b46),false);_b43.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(){this._wheelTimer=null;},_typematicCallback:function(_b47,node,evt){var inc=this.smallDelta;if(node==this.textbox){var key=evt.charOrCode;inc=(key==keys.PAGE_UP||key==keys.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==keys.UP_ARROW||key==keys.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(_b47==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){_b3e.stop(evt);var _b48=evt.wheelDelta/120;if(Math.floor(_b48)!=_b48){_b48=evt.wheelDelta>0?1:-1;}var _b49=evt.detail?(evt.detail*-1):_b48;if(_b49!==0){var node=this[(_b49>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_b49,this.smallDelta);if(this._wheelTimer){this._wheelTimer.remove();}this._wheelTimer=this.defer(function(){this._arrowReleased(node);},50);}},_setConstraintsAttr:function(_b4a){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){this.focusNode.setAttribute("aria-valuemin",this.constraints.min);}else{this.focusNode.removeAttribute("aria-valuemin");}if(this.constraints.max!==undefined){this.focusNode.setAttribute("aria-valuemax",this.constraints.max);}else{this.focusNode.removeAttribute("aria-valuemax");}}},_setValueAttr:function(_b4b,_b4c){this.focusNode.setAttribute("aria-valuenow",_b4b);this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,_b3f.wheel,"_mouseWheeled");this.own(_b40.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_b40.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_b40.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_b40.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));}});});},"dijit/form/Button":function(){require({cache:{"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n"}});define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(_b4d,_b4e,_b4f,has,_b50,lang,_b51,_b52,_b53,_b54){if(has("dijit-legacy-requires")){_b51(0,function(){var _b55=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];_b4d(_b55);});}return _b4e("dijit.form.Button",[_b52,_b53],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_b54,_setValueAttr:"valueNode",_onClick:function(e){var ok=this.inherited(arguments);if(ok){if(this.valueNode){this.valueNode.click();e.preventDefault();e.stopPropagation();}}return ok;},_fillContent:function(_b56){if(_b56&&(!this.params||!("label" in this.params))){var _b57=lang.trim(_b56.innerHTML);if(_b57){this.label=_b57;}}},_setShowLabelAttr:function(val){if(this.containerNode){_b4f.toggle(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},setLabel:function(_b58){_b50.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_b58);},_setLabelAttr:function(_b59){this.inherited(arguments);if(!this.showLabel&&!("title" in this.params)){this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});});},"dojox/gfx/Moveable":function(){define("dojox/gfx/Moveable",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/topic","dojo/touch","dojo/dom-class","dojo/_base/window","./Mover","dojo/mouse"],function(lang,_b5a,arr,_b5b,_b5c,_b5d,_b5e,win,_b5f,_b60){return _b5a("dojox.gfx.Moveable",null,{constructor:function(_b61,_b62){this.shape=_b61;this.delay=(_b62&&_b62.delay>0)?_b62.delay:0;this.mover=(_b62&&_b62.mover)?_b62.mover:_b5f;this.leftButtonOnly=_b62&&_b62.leftButtonOnly;this.events=[this.shape.connect(_b5d.press,lang.hitch(this,"onMouseDown"))];},destroy:function(){arr.forEach(this.events,function(_b63){_b63.remove();});this.events=this.shape=null;},onMouseDown:function(e){if(this.delay){this.events.push(this.shape.connect(_b5d.move,lang.hitch(this,"onMouseMove")),this.shape.connect(_b5d.release,lang.hitch(this,"onMouseUp")));this._lastX=e.clientX;this._lastY=e.clientY;}else{if(!this.leftButtonOnly||_b60.isLeft(e)){new this.mover(this.shape,e,this);}}_b5b.stop(e);},onMouseMove:function(e){var _b64=e.clientX,_b65=e.clientY;if(Math.abs(_b64-this._lastX)>this.delay||Math.abs(_b65-this._lastY)>this.delay){this.onMouseUp(e);new this.mover(this.shape,e,this);}_b5b.stop(e);},onMouseUp:function(e){this.events.pop().remove();},onMoveStart:function(_b66){_b5c.publish("/gfx/move/start",_b66);_b5e.add(win.body(),"dojoMove");},onMoveStop:function(_b67){_b5c.publish("/gfx/move/stop",_b67);_b5e.remove(win.body(),"dojoMove");},onFirstMove:function(_b68){},onMove:function(_b69,_b6a){this.onMoving(_b69,_b6a);this.shape.applyLeftTransform(_b6a);this.onMoved(_b69,_b6a);},onMoving:function(_b6b,_b6c){},onMoved:function(_b6d,_b6e){}});});},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","./registry"],function(_b6f,_b70,_b71,_b72,_b73,_b74,dom,_b75,_b76,_b77,_b78,_b79,has,_b7a,lang,on,_b7b,_b7c,_b7d,win,_b7e,_b7f){has.add("dijit-legacy-requires",!_b7a.isAsync);if(has("dijit-legacy-requires")){_b7b(0,function(){var _b80=["dijit/_base/manager"];_b6f(_b80);});}var _b81={};function _b82(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _b83(attr){return function(val){_b75[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};return _b74("dijit._WidgetBase",[_b7c,_b7e],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_b83("lang"),dir:"",_setDirAttr:_b83("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val);},attributeMap:{},_blankGif:_b72.blankGif||_b6f.toUrl("dojo/resources/blank.gif"),postscript:function(_b84,_b85){this.create(_b84,_b85);},create:function(_b86,_b87){this.srcNodeRef=dom.byId(_b87);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_b86){this.params=_b86;lang.mixin(this,_b86);}this.postMixInProperties();if(!this.id){this.id=_b7f.getUniqueId(this.declaredClass.replace(/\./g,"_"));if(this.params){delete this.params.id;}}this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:win.doc);this.ownerDocumentBody=win.body(this.ownerDocument);_b7f.add(this);this.buildRendering();var _b88;if(this.domNode){this._applyAttributes();var _b89=this.srcNodeRef;if(_b89&&_b89.parentNode&&this.domNode!==_b89){_b89.parentNode.replaceChild(this.domNode,_b89);_b88=true;}this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(_b88){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=(ctor._setterAttrs=[]);for(var attr in this.attributeMap){list.push(attr);}var _b8a=ctor.prototype;for(var _b8b in _b8a){if(_b8b in this.attributeMap){continue;}var _b8c="_set"+_b8b.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();})+"Attr";if(_b8c in _b8a){list.push(_b8b);}}}var _b8d={};for(var key in this.params||{}){_b8d[key]=this[key];}_b70.forEach(list,function(attr){if(attr in _b8d){}else{if(this[attr]){this.set(attr,this[attr]);}}},this);for(key in _b8d){this.set(key,_b8d[key]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");}if(this.baseClass){var _b8e=this.baseClass.split(" ");if(!this.isLeftToRight()){_b8e=_b8e.concat(_b70.map(_b8e,function(name){return name+"Rtl";}));}_b76.add(this.domNode,_b8e);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_b70.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_b8f){this._beingDestroyed=true;this.destroyDescendants(_b8f);this.destroy(_b8f);},destroy:function(_b90){this._beingDestroyed=true;this.uninitialize();function _b91(w){if(w.destroyRecursive){w.destroyRecursive(_b90);}else{if(w.destroy){w.destroy(_b90);}}};_b70.forEach(this._connects,lang.hitch(this,"disconnect"));_b70.forEach(this._supportingWidgets,_b91);if(this.domNode){_b70.forEach(_b7f.findWidgets(this.domNode,this.containerNode),_b91);}this.destroyRendering(_b90);_b7f.remove(this.id);this._destroyed=true;},destroyRendering:function(_b92){if(this.bgIframe){this.bgIframe.destroy(_b92);delete this.bgIframe;}if(this.domNode){if(_b92){_b75.remove(this.domNode,"widgetId");}else{_b77.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_b92){_b77.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_b93){_b70.forEach(this.getChildren(),function(_b94){if(_b94.destroyRecursive){_b94.destroyRecursive(_b93);}});},uninitialize:function(){return false;},_setStyleAttr:function(_b95){var _b96=this.domNode;if(lang.isObject(_b95)){_b79.set(_b96,_b95);}else{if(_b96.style.cssText){_b96.style.cssText+="; "+_b95;}else{_b96.style.cssText=_b95;}}this._set("style",_b95);},_attrToDom:function(attr,_b97,_b98){_b98=arguments.length>=3?_b98:this.attributeMap[attr];_b70.forEach(lang.isArray(_b98)?_b98:[_b98],function(_b99){var _b9a=this[_b99.node||_b99||"domNode"];var type=_b99.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_b97)){_b97=lang.hitch(this,_b97);}var _b9b=_b99.attribute?_b99.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);if(_b9a.tagName){_b75.set(_b9a,_b9b,_b97);}else{_b9a.set(_b9b,_b97);}break;case "innerText":_b9a.innerHTML="";_b9a.appendChild(this.ownerDocument.createTextNode(_b97));break;case "innerHTML":_b9a.innerHTML=_b97;break;case "class":_b76.replace(_b9a,_b97,this[attr]);break;}},this);},get:function(name){var _b9c=this._getAttrNames(name);return this[_b9c.g]?this[_b9c.g]():this[name];},set:function(name,_b9d){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _b9e=this._getAttrNames(name),_b9f=this[_b9e.s];if(lang.isFunction(_b9f)){var _ba0=_b9f.apply(this,Array.prototype.slice.call(arguments,1));}else{var _ba1=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",_ba2,map,tag;tag=this[_ba1]&&this[_ba1].tagName;if(tag){_ba2=_b81[tag]||(_b81[tag]=_b82(this[_ba1]));}map=name in this.attributeMap?this.attributeMap[name]:_b9e.s in this?this[_b9e.s]:((_ba2&&_b9e.l in _ba2&&typeof _b9d!="function")||/^aria-|^data-|^role$/.test(name))?_ba1:null;if(map!=null){this._attrToDom(name,_b9d,map);}this._set(name,_b9d);}return _ba0||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_ba3){var _ba4=this[name];this[name]=_ba3;if(this._created&&_ba3!==_ba4){if(this._watchCallbacks){this._watchCallbacks(name,_ba4,_ba3);}this.emit("attrmodified-"+name,{detail:{prevValue:_ba4,newValue:_ba3}});}},emit:function(type,_ba5,_ba6){_ba5=_ba5||{};if(_ba5.bubbles===undefined){_ba5.bubbles=true;}if(_ba5.cancelable===undefined){_ba5.cancelable=true;}if(!_ba5.detail){_ba5.detail={};}_ba5.detail.widget=this;var ret,_ba7=this["on"+type];if(_ba7){ret=_ba7.apply(this,_ba6?_ba6:[_ba5]);}if(this._started&&!this._beingDestroyed){on.emit(this.domNode,type.toLowerCase(),_ba5);}return ret;},on:function(type,func){var _ba8=this._onMap(type);if(_ba8){return _b71.after(this,_ba8,func,true);}return this.own(on(this.domNode,type,func))[0];},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[typeof type=="string"&&type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_b7f.findWidgets(this.containerNode):[];},getParent:function(){return _b7f.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_ba9,_baa){return this.own(_b73.connect(obj,_ba9,this,_baa))[0];},disconnect:function(_bab){_bab.remove();},subscribe:function(t,_bac){return this.own(_b7d.subscribe(t,lang.hitch(this,_bac)))[0];},unsubscribe:function(_bad){_bad.remove();},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_b78.isBodyLtr(this.ownerDocument);},isFocusable:function(){return this.focus&&(_b79.get(this.domNode,"display")!="none");},placeAt:function(_bae,_baf){var _bb0=!_bae.tagName&&_b7f.byId(_bae);if(_bb0&&_bb0.addChild&&(!_baf||typeof _baf==="number")){_bb0.addChild(this,_baf);}else{var ref=_bb0?(_bb0.containerNode&&!/after|before|replace/.test(_baf||"")?_bb0.containerNode:_bb0.domNode):dom.byId(_bae,this.ownerDocument);_b77.place(this.domNode,ref,_baf);if(!this._started&&(this.getParent()||{})._started){this.startup();}}return this;},getTextDir:function(text,_bb1){return _bb1;},applyTextDir:function(){},defer:function(fcn,_bb2){var _bb3=setTimeout(lang.hitch(this,function(){_bb3=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_bb2||0);return {remove:function(){if(_bb3){clearTimeout(_bb3);_bb3=null;}return null;}};}});});},"esri/tasks/RelationParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_bb4,lang,_bb5,_bb6,has,_bb7,_bb8){var _bb9=_bb4(null,{declaredClass:"esri.tasks.RelationParameters",geometries1:null,geometries2:null,relation:null,relationParam:null,toJson:function(){var _bba=_bb5.map(this.geometries1,function(geom){return geom.toJson();});var _bbb=_bb5.map(this.geometries2,function(geom){return geom.toJson();});var json={};var _bbc=this.geometries1;if(_bbc&&_bbc.length>0){json.geometries1=_bb6.toJson({geometryType:_bb8.getJsonType(_bbc[0]),geometries:_bba});var _bbd=this.geometries1[0].spatialReference;json.sr=_bbd.wkid?_bbd.wkid:_bb6.toJson(_bbd.toJson());}var _bbe=this.geometries2;if(_bbe&&_bbe.length>0){json.geometries2=_bb6.toJson({geometryType:_bb8.getJsonType(_bbe[0]),geometries:_bbb});}if(this.relation){json.relation=this.relation;}if(this.relationParam){json.relationParam=_bb6.toJson(this.relationParam);}return json;}});lang.mixin(_bb9,{SPATIAL_REL_CROSS:"esriGeometryRelationCross",SPATIAL_REL_DISJOINT:"esriGeometryRelationDisjoint",SPATIAL_REL_IN:"esriGeometryRelationIn",SPATIAL_REL_INTERIORINTERSECTION:"esriGeometryRelationInteriorIntersection",SPATIAL_REL_INTERSECTION:"esriGeometryRelationIntersection",SPATIAL_REL_COINCIDENCE:"esriGeometryRelationLineCoincidence",SPATIAL_REL_LINETOUCH:"esriGeometryRelationLineTouch",SPATIAL_REL_OVERLAP:"esriGeometryRelationOverlap",SPATIAL_REL_POINTTOUCH:"esriGeometryRelationPointTouch",SPATIAL_REL_TOUCH:"esriGeometryRelationTouch",SPATIAL_REL_WITHIN:"esriGeometryRelationWithin",SPATIAL_REL_RELATION:"esriGeometryRelationRelation"});if(has("extend-esri")){lang.setObject("tasks.RelationParameters",_bb9,_bb7);}return _bb9;});},"esri/layers/TrackManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/graphic","esri/geometry/Polyline","esri/layers/GraphicsLayer"],function(_bbf,lang,_bc0,has,_bc1,_bc2,_bc3,_bc4){var _bc5=_bbf(null,{declaredClass:"esri.layers._TrackManager",constructor:function(_bc6){this.layer=_bc6;this.trackMap={};},initialize:function(map){this.map=map;var _bc7=this.layer,_bc8=_bc7.renderer.trackRenderer;if(_bc8&&(_bc7.geometryType==="esriGeometryPoint")){var _bc9=(this.container=new _bc4._GraphicsLayer({id:_bc7.id+"_tracks",_child:true}));_bc9.loaded=true;_bc9.onLoad(_bc9);_bc9._setMap(map,_bc7._div);_bc9.setRenderer(_bc8);}},addFeatures:function(_bca){var tkid,_bcb=this.trackMap,_bcc=this.layer,_bcd=_bcc._trackIdField;_bc0.forEach(_bca,function(_bce){var _bcf=_bce.attributes;tkid=_bcf[_bcd];var ary=(_bcb[tkid]=(_bcb[tkid]||[]));ary.push(_bce);});var _bd0=_bcc._startTimeField,_bd1=_bcc.objectIdField;var _bd2=function(a,b){var _bd3=a.attributes[_bd0],_bd4=b.attributes[_bd0];if(_bd3===_bd4){return (a.attributes[_bd1]<b.attributes[_bd1])?-1:1;}else{return (_bd3<_bd4)?-1:1;}};for(tkid in _bcb){_bcb[tkid].sort(_bd2);}},drawTracks:function(){var _bd5=this.container;if(!_bd5){return;}var _bd6=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,_bd7,_bd8=this.layer._trackIdField,_bd9;for(tkid in _bd6){ary=_bd6[tkid];path=[];for(i=ary.length-1;i>=0;i--){_bd7=ary[i].geometry;if(_bd7){path.push([_bd7.x,_bd7.y]);}}_bd9={};_bd9[_bd8]=tkid;if(path.length>0){_bd5.add(new _bc2(new _bc3({paths:[path],spatialReference:sr}),null,_bd9));}}},moveLatestToFront:function(){_bc0.forEach(this.getLatestObservations(),function(_bda){var _bdb=_bda._shape;_bdb&&_bdb._moveToFront();this._repaint(_bda,null,true);},this.layer);},getLatestObservations:function(){var _bdc=[];if(!this.layer.renderer.latestObservationRenderer){return _bdc;}var _bdd=this.trackMap,tkid;for(tkid in _bdd){var ary=_bdd[tkid];_bdc.push(ary[ary.length-1]);}return _bdc;},clearTracks:function(){var _bde=this.getLatestObservations();this.trackMap={};var _bdf=this.container;if(_bdf){_bdf.clear();}_bc0.forEach(_bde,function(_be0){this._repaint(_be0,null,true);},this.layer);},isLatestObservation:function(_be1){var _be2=this.layer._trackIdField;var _be3=this.trackMap[_be1.attributes[_be2]];if(_be3){return (_be3[_be3.length-1]===_be1);}return false;},destroy:function(){var _be4=this.container;if(_be4){_be4.clear();_be4._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});if(has("extend-esri")){lang.setObject("layers._TrackManager",_bc5,_bc1);}return _bc5;});},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_be5,_be6,_be7){var base=null;return _be5("dojo.store.Memory",base,{constructor:function(_be8){for(var i in _be8){this[i]=_be8[i];}this.setData(this.data||[]);},data:null,idProperty:"id",index:null,queryEngine:_be7,get:function(id){return this.data[this.index[id]];},getIdentity:function(_be9){return _be9[this.idProperty];},put:function(_bea,_beb){var data=this.data,_bec=this.index,_bed=this.idProperty;var id=_bea[_bed]=(_beb&&"id" in _beb)?_beb.id:_bed in _bea?_bea[_bed]:Math.random();if(id in _bec){if(_beb&&_beb.overwrite===false){throw new Error("Object already exists");}data[_bec[id]]=_bea;}else{_bec[id]=data.push(_bea)-1;}return id;},add:function(_bee,_bef){(_bef=_bef||{}).overwrite=false;return this.put(_bee,_bef);},remove:function(id){var _bf0=this.index;var data=this.data;if(id in _bf0){data.splice(_bf0[id],1);this.setData(data);return true;}},query:function(_bf1,_bf2){return _be6(this.queryEngine(_bf1,_bf2)(this.data));},setData:function(data){if(data.items){this.idProperty=data.identifier;data=this.data=data.items;}else{this.data=data;}this.index={};for(var i=0,l=data.length;i<l;i++){this.index[data[i][this.idProperty]]=i;}}});});},"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n","dojox/grid/_Grid":function(){require({cache:{"url:dojox/grid/resources/_Grid.html":"<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\n</div>\n"}});define("dojox/grid/_Grid",["dojo/_base/kernel","../main","dojo/_base/declare","./_Events","./_Scroller","./_Layout","./_View","./_ViewManager","./_RowManager","./_FocusManager","./_EditManager","./Selection","./_RowSelector","./util","dijit/_Widget","dijit/_TemplatedMixin","dijit/CheckedMenuItem","dojo/text!./resources/_Grid.html","dojo/string","dojo/_base/array","dojo/_base/lang","dojo/_base/sniff","dojox/html/metrics","dojo/_base/html","dojo/query","dojo/dnd/common","dojo/i18n!dijit/nls/loading"],function(dojo,_bf3,_bf4,_bf5,_bf6,_bf7,_bf8,_bf9,_bfa,_bfb,_bfc,_bfd,_bfe,util,_bff,_c00,_c01,_c02,_c03,_c04,lang,has,_c05,html,_c06){if(!dojo.isCopyKey){dojo.isCopyKey=dojo.dnd.getCopyKeyState;}var _c07=_bf4("dojox.grid._Grid",[_bff,_c00,_bf5],{templateString:_c02,classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:true,formatterScope:null,editable:false,summary:"",_setSummaryAttr:"domNode",sortInfo:0,_placeholders:null,_layoutClass:_bf7,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex")){this.domNode.tabIndex="0";}this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");_c05.initOnFontResize();this.connect(_c05,"onFontResize","textSizeChanged");util.funnelEvents(this.domNode,this,"doKeyEvent",util.keyEvents);if(this.selectionMode!="none"){this.domNode.setAttribute("aria-multiselectable",this.selectionMode=="single"?"false":"true");}html.addClass(this.domNode,this.classTag);if(!this.isLeftToRight()){html.addClass(this.domNode,this.classTag+"Rtl");}if(this.rowHeight>0){html.addClass(this.viewsNode,this.classTag+"FixedRowHeight");}},postMixInProperties:function(){this.inherited(arguments);var _c08=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=_c03.substitute(this.loadingMessage,_c08);this.errorMessage=_c03.substitute(this.errorMessage,_c08);if(this.srcNodeRef&&this.srcNodeRef.style.height){this.height=this.srcNodeRef.style.height;}this._setAutoHeightAttr(this.autoHeight,true);this.lastScrollTop=this.scrollTop=0;},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth){this.domNode.style.width=this.initialWidth;}if(this.domNode&&!this.editable){html.attr(this.domNode,"aria-readonly","true");}},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;if(this.scroller){this.scroller.destroy();delete this.scroller;}this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.focus){this.focus.destroy();delete this.focus;}if(this.headerMenu&&this._placeholders.length){_c04.forEach(this._placeholders,function(p){p.unReplace(true);});this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.inherited(arguments);},_setAutoHeightAttr:function(ah,_c09){if(typeof ah=="string"){if(!ah||ah=="false"){ah=false;}else{if(ah=="true"){ah=true;}else{ah=window.parseInt(ah,10);}}}if(typeof ah=="number"){if(isNaN(ah)){ah=false;}if(ah<0){ah=true;}else{if(ah===0){ah=false;}}}this.autoHeight=ah;if(typeof ah=="boolean"){this._autoHeight=ah;}else{if(typeof ah=="number"){this._autoHeight=(ah>=this.get("rowCount"));}else{this._autoHeight=false;}}if(this._started&&!_c09){this.render();}},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount;},textSizeChanged:function(){this.render();},sizeChange:function(){this.update();},createManagers:function(){this.rows=new _bfa(this);this.focus=new _bfb(this);this.edit=new _bfc(this);},createSelection:function(){this.selection=new _bfd(this);},createScroller:function(){this.scroller=new _bf6();this.scroller.grid=this;this.scroller.renderRow=lang.hitch(this,"renderRow");this.scroller.removeRow=lang.hitch(this,"rowRemoved");},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn");},onMoveColumn:function(){this.update();},onResizeColumn:function(_c0a){},createViews:function(){this.views=new _bf9(this);this.views.createView=lang.hitch(this,"createView");},createView:function(_c0b,idx){var c=lang.getObject(_c0b);var view=new c({grid:this,index:idx});this.viewsNode.appendChild(view.domNode);this.viewsHeaderNode.appendChild(view.headerNode);this.views.addView(view);html.attr(this.domNode,"align",this.isLeftToRight()?"left":"right");return view;},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){this.createView(vs.type||_bf3._scopeName+".grid._View",i).setStructure(vs);}this.scroller.setContentNodes(this.views.getContentNodes());},_setStructureAttr:function(_c0c){var s=_c0c;if(s&&lang.isString(s)){dojo.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0");s=lang.getObject(s);}this.structure=s;if(!s){if(this.layout.structure){s=this.layout.structure;}else{return;}}this.views.destroyViews();this.focus.focusView=null;if(s!==this.layout.structure){this.layout.setStructure(s);}this._structureChanged();},setStructure:function(_c0d){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(_c0d);},getColumnTogglingItems:function(){var _c0e,_c0f=[];_c0e=_c04.map(this.layout.cells,function(cell){if(!cell.menuItems){cell.menuItems=[];}var self=this;var item=new _c01({label:cell.name,checked:!cell.hidden,_gridCell:cell,onChange:function(_c10){if(self.layout.setColumnVisibility(this._gridCell.index,_c10)){var _c11=this._gridCell.menuItems;if(_c11.length>1){_c04.forEach(_c11,function(item){if(item!==this){item.setAttribute("checked",_c10);}},this);}_c10=_c04.filter(self.layout.cells,function(c){if(c.menuItems.length>1){_c04.forEach(c.menuItems,"item.set('disabled', false);");}else{c.menuItems[0].set("disabled",false);}return !c.hidden;});if(_c10.length==1){_c04.forEach(_c10[0].menuItems,"item.set('disabled', true);");}}},destroy:function(){var _c12=_c04.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(_c12,1);delete this._gridCell;_c01.prototype.destroy.apply(this,arguments);}});cell.menuItems.push(item);if(!cell.hidden){_c0f.push(item);}return item;},this);if(_c0f.length==1){_c0f[0].set("disabled",true);}return _c0e;},_setHeaderMenuAttr:function(menu){if(this._placeholders&&this._placeholders.length){_c04.forEach(this._placeholders,function(p){p.unReplace(true);});this._placeholders=[];}if(this.headerMenu){this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.headerMenu=menu;if(!menu){return;}this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders){this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel);}},setHeaderMenu:function(menu){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(menu);},setupHeaderMenu:function(){if(this._placeholders&&this._placeholders.length){_c04.forEach(this._placeholders,function(p){if(p._replaced){p.unReplace(true);}p.replace(this.getColumnTogglingItems());},this);}},_fetch:function(_c13){this.setScrollTop(0);},getItem:function(_c14){return null;},showMessage:function(_c15){if(_c15){this.messagesNode.innerHTML=_c15;this.messagesNode.style.display="";}else{this.messagesNode.innerHTML="";this.messagesNode.style.display="none";}},_structureChanged:function(){this.buildViews();if(this.autoRender&&this._started){this.render();}},hasLayout:function(){return this.layout.cells.length;},resize:function(_c16,_c17){this._pendingChangeSize=_c16;this._pendingResultSize=_c17;this.sizeChange();},_getPadBorder:function(){this._padBorder=this._padBorder||html._getPadBorderExtents(this.domNode);return this._padBorder;},_getHeaderHeight:function(){var vns=this.viewsHeaderNode.style,t=vns.display=="none"?0:this.views.measureHeader();vns.height=t+"px";this.views.normalizeHeaderNodeHeight();return t;},_resize:function(_c18,_c19){_c18=_c18||this._pendingChangeSize;_c19=_c19||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(!this.domNode){return;}var pn=this.domNode.parentNode;if(!pn||pn.nodeType!=1||!this.hasLayout()||pn.style.visibility=="hidden"||pn.style.display=="none"){return;}var _c1a=this._getPadBorder();var hh=undefined;var h;if(this._autoHeight){this.domNode.style.height="auto";}else{if(typeof this.autoHeight=="number"){h=hh=this._getHeaderHeight();h+=(this.scroller.averageRowHeight*this.autoHeight);this.domNode.style.height=h+"px";}else{if(this.domNode.clientHeight<=_c1a.h){if(pn==document.body){this.domNode.style.height=this.defaultHeight;}else{if(this.height){this.domNode.style.height=this.height;}else{this.fitTo="parent";}}}}}if(_c19){_c18=_c19;}if(!this._autoHeight&&_c18){html.marginBox(this.domNode,_c18);this.height=this.domNode.style.height;delete this.fitTo;}else{if(this.fitTo=="parent"){h=this._parentContentBoxHeight=(this._parentContentBoxHeight>0?this._parentContentBoxHeight:html._getContentBox(pn).h);this.domNode.style.height=Math.max(0,h)+"px";}}var _c1b=_c04.some(this.views.views,function(v){return v.flexCells;});if(!this._autoHeight&&(h||html._getContentBox(this.domNode).h)===0){this.viewsHeaderNode.style.display="none";}else{this.viewsHeaderNode.style.display="block";if(!_c1b&&hh===undefined){hh=this._getHeaderHeight();}}if(_c1b){hh=undefined;}this.adaptWidth();this.adaptHeight(hh);this.postresize();},adaptWidth:function(){var _c1c=(!this.initialWidth&&this.autoWidth);var w=_c1c?0:this.domNode.clientWidth||(this.domNode.offsetWidth-this._getPadBorder().w),vw=this.views.arrange(1,w);this.views.onEach("adaptWidth");if(_c1c){this.domNode.style.width=vw+"px";}},adaptHeight:function(_c1d){var t=_c1d===undefined?this._getHeaderHeight():_c1d;var h=(this._autoHeight?-1:Math.max(this.domNode.clientHeight-t,0)||0);this.views.onEach("setSize",[0,h]);this.views.onEach("adaptHeight");if(!this._autoHeight){var _c1e=0,_c1f=0;var _c20=_c04.filter(this.views.views,function(v){var has=v.hasHScrollbar();if(has){_c1e++;}else{_c1f++;}return (!has);});if(_c1e>0&&_c1f>0){_c04.forEach(_c20,function(v){v.adaptHeight(true);});}}if(this.autoHeight===true||h!=-1||(typeof this.autoHeight=="number"&&this.autoHeight>=this.get("rowCount"))){this.scroller.windowHeight=h;}else{this.scroller.windowHeight=Math.max(this.domNode.clientHeight-t,0);}},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.autoRender){this.render();}},render:function(){if(!this.domNode){return;}if(!this._started){return;}if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return;}this.update=this.defaultUpdate;this._render();},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender();},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize();},postrender:function(){this.postresize();this.focus.initFocusView();html.setSelectable(this.domNode,this.selectable);},postresize:function(){if(this._autoHeight){var size=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=size;}},renderRow:function(_c21,_c22){this.views.renderRow(_c21,_c22,this._skipRowRenormalize);},rowRemoved:function(_c23){this.views.rowRemoved(_c23);},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true;},endUpdate:function(){this.updating=false;var i=this.invalidated,r;if(i.all){this.update();}else{if(i.rowCount!=undefined){this.updateRowCount(i.rowCount);}else{for(r in i){this.updateRow(Number(r));}}}this.invalidated=[];},defaultUpdate:function(){if(!this.domNode){return;}if(this.updating){this.invalidated.all=true;return;}this.lastScrollTop=this.scrollTop;this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.lastScrollTop);this.postrender();},update:function(){this.render();},updateRow:function(_c24){_c24=Number(_c24);if(this.updating){this.invalidated[_c24]=true;}else{this.views.updateRow(_c24);this.scroller.rowHeightChanged(_c24);}},updateRows:function(_c25,_c26){_c25=Number(_c25);_c26=Number(_c26);var i;if(this.updating){for(i=0;i<_c26;i++){this.invalidated[i+_c25]=true;}}else{for(i=0;i<_c26;i++){this.views.updateRow(i+_c25,this._skipRowRenormalize);}this.scroller.rowHeightChanged(_c25);}},updateRowCount:function(_c27){if(this.updating){this.invalidated.rowCount=_c27;}else{this.rowCount=_c27;this._setAutoHeightAttr(this.autoHeight,true);if(this.layout.cells.length){this.scroller.updateRowCount(_c27);}this._resize();if(this.layout.cells.length){this.setScrollTop(this.scrollTop);}}},updateRowStyles:function(_c28){this.views.updateRowStyles(_c28);},getRowNode:function(_c29){if(this.focus.focusView&&!(this.focus.focusView instanceof _bfe)){return this.focus.focusView.rowNodes[_c29];}else{for(var i=0,_c2a;(_c2a=this.views.views[i]);i++){if(!(_c2a instanceof _bfe)){return _c2a.rowNodes[_c29];}}}return null;},rowHeightChanged:function(_c2b){this.views.renormalizeRow(_c2b);this.scroller.rowHeightChanged(_c2b);},fastScroll:true,delayScroll:false,scrollRedrawThreshold:(has("ie")?100:50),scrollTo:function(_c2c){if(!this.fastScroll){this.setScrollTop(_c2c);return;}var _c2d=Math.abs(this.lastScrollTop-_c2c);this.lastScrollTop=_c2c;if(_c2d>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=_c2c;this.views.setScrollTop(_c2c);if(this._pendingScroll){window.clearTimeout(this._pendingScroll);}var _c2e=this;this._pendingScroll=window.setTimeout(function(){delete _c2e._pendingScroll;_c2e.finishScrollJob();},200);}else{this.setScrollTop(_c2c);}},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop);},setScrollTop:function(_c2f){this.scroller.scroll(this.views.setScrollTop(_c2f));},scrollToRow:function(_c30){this.setScrollTop(this.scroller.findScrollTop(_c30)+1);},styleRowNode:function(_c31,_c32){if(_c32){this.rows.styleRowNode(_c31,_c32);}},_mouseOut:function(e){this.rows.setOverRow(-2);},getCell:function(_c33){return this.layout.cells[_c33];},setCellWidth:function(_c34,_c35){this.getCell(_c34).unitWidth=_c35;},getCellName:function(_c36){return "Cell "+_c36.index;},canSort:function(_c37){},sort:function(){},getSortAsc:function(_c38){_c38=_c38==undefined?this.sortInfo:_c38;return Boolean(_c38>0);},getSortIndex:function(_c39){_c39=_c39==undefined?this.sortInfo:_c39;return Math.abs(_c39)-1;},setSortIndex:function(_c3a,_c3b){var si=_c3a+1;if(_c3b!=undefined){si*=(_c3b?1:-1);}else{if(this.getSortIndex()==_c3a){si=-this.sortInfo;}}this.setSortInfo(si);},setSortInfo:function(_c3c){if(this.canSort(_c3c)){this.sortInfo=_c3c;this.sort();this.update();}},doKeyEvent:function(e){e.dispatch="do"+e.type;this.onKeyEvent(e);},_dispatch:function(m,e){if(m in this){return this[m](e);}return false;},dispatchKeyEvent:function(e){this._dispatch(e.dispatch,e);},dispatchContentEvent:function(e){this.edit.dispatchEvent(e)||e.sourceView.dispatchContentEvent(e)||this._dispatch(e.dispatch,e);},dispatchHeaderEvent:function(e){e.sourceView.dispatchHeaderEvent(e)||this._dispatch("doheader"+e.type,e);},dokeydown:function(e){this.onKeyDown(e);},doclick:function(e){if(e.cellNode){this.onCellClick(e);}else{this.onRowClick(e);}},dodblclick:function(e){if(e.cellNode){this.onCellDblClick(e);}else{this.onRowDblClick(e);}},docontextmenu:function(e){if(e.cellNode){this.onCellContextMenu(e);}else{this.onRowContextMenu(e);}},doheaderclick:function(e){if(e.cellNode){this.onHeaderCellClick(e);}else{this.onHeaderClick(e);}},doheaderdblclick:function(e){if(e.cellNode){this.onHeaderCellDblClick(e);}else{this.onHeaderDblClick(e);}},doheadercontextmenu:function(e){if(e.cellNode){this.onHeaderCellContextMenu(e);}else{this.onHeaderContextMenu(e);}},doStartEdit:function(_c3d,_c3e){this.onStartEdit(_c3d,_c3e);},doApplyCellEdit:function(_c3f,_c40,_c41){this.onApplyCellEdit(_c3f,_c40,_c41);},doCancelEdit:function(_c42){this.onCancelEdit(_c42);},doApplyEdit:function(_c43){this.onApplyEdit(_c43);},addRow:function(){this.updateRowCount(this.get("rowCount")+1);},removeSelectedRows:function(){if(this.allItemsSelected){this.updateRowCount(0);}else{this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));}this.selection.clear();}});_c07.markupFactory=function(_c44,node,ctor,_c45){var _c46=function(n){var w=html.attr(n,"width")||"auto";if((w!="auto")&&(w.slice(-2)!="em")&&(w.slice(-1)!="%")){w=parseInt(w,10)+"px";}return w;};if(!_c44.structure&&node.nodeName.toLowerCase()=="table"){_c44.structure=_c06("> colgroup",node).map(function(cg){var sv=html.attr(cg,"span");var v={noscroll:(html.attr(cg,"noscroll")=="true")?true:false,__span:(!!sv?parseInt(sv,10):1),cells:[]};if(html.hasAttr(cg,"width")){v.width=_c46(cg);}return v;});if(!_c44.structure.length){_c44.structure.push({__span:Infinity,cells:[]});}_c06("thead > tr",node).forEach(function(tr,_c47){var _c48=0;var _c49=0;var _c4a;var _c4b=null;_c06("> th",tr).map(function(th){if(!_c4b){_c4a=0;_c4b=_c44.structure[0];}else{if(_c48>=(_c4a+_c4b.__span)){_c49++;_c4a+=_c4b.__span;var _c4c=_c4b;_c4b=_c44.structure[_c49];}}var cell={name:lang.trim(html.attr(th,"name")||th.innerHTML),colSpan:parseInt(html.attr(th,"colspan")||1,10),type:lang.trim(html.attr(th,"cellType")||""),id:lang.trim(html.attr(th,"id")||"")};_c48+=cell.colSpan;var _c4d=html.attr(th,"rowspan");if(_c4d){cell.rowSpan=_c4d;}if(html.hasAttr(th,"width")){cell.width=_c46(th);}if(html.hasAttr(th,"relWidth")){cell.relWidth=window.parseInt(html.attr(th,"relWidth"),10);}if(html.hasAttr(th,"hidden")){cell.hidden=(html.attr(th,"hidden")=="true"||html.attr(th,"hidden")===true);}if(_c45){_c45(th,cell);}cell.type=cell.type?lang.getObject(cell.type):_bf3.grid.cells.Cell;if(cell.type&&cell.type.markupFactory){cell.type.markupFactory(th,cell);}if(!_c4b.cells[_c47]){_c4b.cells[_c47]=[];}_c4b.cells[_c47].push(cell);});});}return new ctor(_c44,node);};return _c07;});},"dijit/Editor":function(){define("dijit/Editor",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/i18n","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/string","dojo/topic","dojo/_base/window","./_base/focus","./_Container","./Toolbar","./ToolbarSeparator","./layout/_LayoutWidget","./form/ToggleButton","./_editor/_Plugin","./_editor/plugins/EnterKeyHandling","./_editor/html","./_editor/range","./_editor/RichText","./main","dojo/i18n!./_editor/nls/commands"],function(_c4e,_c4f,_c50,_c51,i18n,_c52,_c53,_c54,_c55,_c56,keys,lang,has,_c57,_c58,win,_c59,_c5a,_c5b,_c5c,_c5d,_c5e,_c5f,_c60,html,_c61,_c62,_c63){var _c64=_c50("dijit.Editor",_c62,{plugins:null,extraPlugins:null,constructor:function(){if(!lang.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",_c60];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(has("ie")){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},postMixInProperties:function(){this.setValueDeferred=new _c51();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(lang.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new _c5b({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}_c4f.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(true);_c53.add(this.iframe.parentNode,"dijitEditorIFrameContainer");_c53.add(this.iframe,"dijitEditorIFrame");_c52.set(this.iframe,"allowTransparency",true);if(has("webkit")){_c55.set(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){_c4f.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_c65,_c66){var args=lang.isString(_c65)?{name:_c65}:lang.isFunction(_c65)?{ctor:_c65}:_c65;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};if(args.name){if(_c5f.registry[args.name]){o.plugin=_c5f.registry[args.name](args);}else{_c58.publish(_c63._scopeName+".Editor.getPlugin",o);}}if(!o.plugin){try{var pc=args.ctor||lang.getObject(args.name)||_c4e(args.name);if(pc){o.plugin=new pc(args);}}catch(e){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}}if(!o.plugin){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}_c65=o.plugin;}if(arguments.length>1){this._plugins[_c66]=_c65;}else{this._plugins.push(_c65);}_c65.setEditor(this);if(lang.isFunction(_c65.setToolbar)){_c65.setToolbar(this.toolbar);}},resize:function(size){if(size){_c5d.prototype.resize.apply(this,arguments);}},layout:function(){var _c67=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+_c54.getPadBorderExtents(this.iframe.parentNode).h+_c54.getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_c67+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _c68;var b=this.document.body;var _c69=b.clientWidth;var _c6a=b.clientHeight;var _c6b=b.clientLeft;var _c6c=b.offsetWidth;var _c6d=b.offsetHeight;var _c6e=b.offsetLeft;if(/^rtl$/i.test(b.dir||"")){if(_c69<_c6c&&e.x>_c69&&e.x<_c6c){_c68=true;}}else{if(e.x<_c6b&&e.x>_c6e){_c68=true;}}if(!_c68){if(_c6a<_c6d&&e.y>_c6a&&e.y<_c6d){_c68=true;}}if(!_c68){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){this.defer("placeCursorAtEnd");}this.inherited(arguments);}},onBeforeActivate:function(){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){this._editTimer.remove();}this._editTimer=this.defer("endEditing",this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r=this.inherited(arguments);if(this.customUndo){this._endEditing();}return r;}},_pasteImpl:function(){return this._clipboardCommand("paste");},_cutImpl:function(){return this._clipboardCommand("cut");},_copyImpl:function(){return this._clipboardCommand("copy");},_clipboardCommand:function(cmd){var r;try{r=this.document.execCommand(cmd,false,null);if(has("webkit")&&!r){throw {code:1011};}}catch(e){if(e.code==1011||(e.code==9&&has("opera"))){var sub=_c57.substitute,_c6f={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[has("mac")?"appleKey":"ctrlKey"],[_c6f[cmd]])]));}r=false;}return r;},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _c70=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,_c71,_c72,sel;if(mark){if(has("ie")<9){if(lang.isArray(mark)){_c70=[];_c4f.forEach(mark,function(n){_c70.push(_c61.getNode(n,this.editNode));},this);win.withGlobal(this.window,"moveToBookmark",_c59,[{mark:_c70,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=_c61.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_c61.create(this.window);_c71=_c61.getNode(mark.startContainer,this.editNode);_c72=_c61.getNode(mark.endContainer,this.editNode);if(_c71&&_c72){r.setStart(_c71,mark.startOffset);r.setEnd(_c72,mark.endOffset);sel.addRange(r);}}}}}else{sel=_c61.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_c61.create(this.window);_c71=_c61.getNode(mark.startContainer,this.editNode);_c72=_c61.getNode(mark.endContainer,this.editNode);if(_c71&&_c72){r.setStart(_c71,mark.startOffset);r.setEnd(_c72,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_c73){if(this._editTimer){this._editTimer=this._editTimer.remove();}if(this._inEditing){this._endEditing(_c73);this._inEditing=false;}},_getBookmark:function(){var b=win.withGlobal(this.window,_c59.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(has("ie")<9){var sel=_c61.getSelection(this.window);if(!lang.isArray(mark)){if(sel){var _c74;if(sel.rangeCount){_c74=sel.getRangeAt(0);}if(_c74){b.mark=_c74.cloneRange();}else{b.mark=win.withGlobal(this.window,_c59.getBookmark);}}}else{_c4f.forEach(b.mark,function(n){tmp.push(_c61.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=_c61.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:_c61.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(){if(this._steps.length===0){this._steps.push({"text":html.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(){var v=html.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!has("ie")&&!this.iframe&&e.keyCode==keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){_c56.stop(e);this.undo();return;}else{if(k==89||k==121){_c56.stop(e);this.redo();return;}}}this.inherited(arguments);switch(k){case keys.ENTER:case keys.BACKSPACE:case keys.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");}else{this.beginEditing("paste");}this.defer("endEditing",1);break;}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<keys.F1||e.keyCode>keys.F15)){this.beginEditing();break;}case keys.ALT:this.endEditing();break;case keys.UP_ARROW:case keys.DOWN_ARROW:case keys.LEFT_ARROW:case keys.RIGHT_ARROW:case keys.HOME:case keys.END:case keys.PAGE_UP:case keys.PAGE_DOWN:this.endEditing(true);break;case keys.CTRL:case keys.SHIFT:case keys.TAB:break;}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(win.withGlobal(this.window,"isCollapsed",_c59)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&#160;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(_c75){this.setValueDeferred.then(lang.hitch(this,function(){if((!this.disabled&&_c75)||(!this._buttonEnabledPlugins&&_c75)){_c4f.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!_c75){_c4f.forEach(this._plugins,function(p){p.set("disabled",false);});}}}));this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){_c55.set(this.document.body,"color",_c55.get(this.iframe,"color"));}}catch(e){}}});function _c76(args){return new _c5f({command:args.name});};function _c77(args){return new _c5f({buttonClass:_c5e,command:args.name});};lang.mixin(_c5f.registry,{"undo":_c76,"redo":_c76,"cut":_c76,"copy":_c76,"paste":_c76,"insertOrderedList":_c76,"insertUnorderedList":_c76,"indent":_c76,"outdent":_c76,"justifyCenter":_c76,"justifyFull":_c76,"justifyLeft":_c76,"justifyRight":_c76,"delete":_c76,"selectAll":_c76,"removeFormat":_c76,"unlink":_c76,"insertHorizontalRule":_c76,"bold":_c77,"italic":_c77,"underline":_c77,"strikethrough":_c77,"subscript":_c77,"superscript":_c77,"|":function(){return new _c5f({setEditor:function(_c78){this.editor=_c78;this.button=new _c5c({ownerDocument:_c78.ownerDocument});}});}});return _c64;});},"esri/tasks/ProjectParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/lang","esri/geometry/jsonUtils"],function(_c79,lang,_c7a,_c7b,has,_c7c,_c7d,_c7e){var _c7f=_c79(null,{declaredClass:"esri.tasks.ProjectParameters",geometries:null,outSR:null,transformation:null,transformForward:null,toJson:function(){var _c80=_c7a.map(this.geometries,function(geom){return geom.toJson();});var json={};json.outSR=this.outSR.wkid||_c7b.toJson(this.outSR.toJson());json.inSR=this.geometries[0].spatialReference.wkid||_c7b.toJson(this.geometries[0].spatialReference.toJson());json.geometries=_c7b.toJson({geometryType:_c7e.getJsonType(this.geometries[0]),geometries:_c80});if(this.transformation){json.transformation=this.transformation.wkid||_c7b.toJson(this.transformation);}if(_c7d.isDefined(this.transformForward)){json.transformForward=this.transformForward;}return json;}});if(has("extend-esri")){lang.setObject("tasks.ProjectParameters",_c7f,_c7c);}return _c7f;});},"dijit/Toolbar":function(){define("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_c81,_c82,has,keys,_c83,_c84,_c85,_c86){if(has("dijit-legacy-requires")){_c83(0,function(){var _c87=["dijit/ToolbarSeparator"];_c81(_c87);});}return _c82("dijit.Toolbar",[_c84,_c86,_c85],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" data-dojo-attach-point=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[keys.LEFT_ARROW]:[keys.RIGHT_ARROW],this.isLeftToRight()?[keys.RIGHT_ARROW]:[keys.LEFT_ARROW]);}});});},"esri/layers/SnapshotMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/tasks/query","esri/layers/RenderMode"],function(_c88,lang,has,_c89,_c8a,_c8b,_c8c){var _c8d=_c88([_c8c],{declaredClass:"esri.layers._SnapshotMode",constructor:function(_c8e){this.featureLayer=_c8e;this._featureMap={};this._drawFeatures=lang.hitch(this,this._drawFeatures);this._queryErrorHandler=lang.hitch(this,this._queryErrorHandler);},startup:function(){if(this.featureLayer._collection){this._applyTimeFilter();}else{this._fetchAll();}},propertyChangeHandler:function(type){if(this._init){if(type){if(this.featureLayer._collection){console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id = "+this.featureLayer.id);}else{this._fetchAll();}}else{this._applyTimeFilter();}}},drawFeature:function(_c8f){var _c90=this.featureLayer,_c91=_c90.objectIdField,oid=_c8f.attributes[_c91];this._addFeatureIIf(oid,_c8f);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _c92=this.featureLayer;if(_c92._collection){_c92._fireUpdateStart();_c92._refresh(true);_c92._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_c93){var id="_"+_c93.name+_c93.layerId+_c93._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _c94=this.featureLayer;if(_c94._collection){return;}_c94._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_c95=this.featureLayer,_c96=_c95.getDefinitionExpression();var _c97=new _c8b();_c97.outFields=_c95.getOutFields();_c97.where=_c96||"1=1";_c97.returnGeometry=true;_c97.outSpatialReference=new _c8a(map.spatialReference.toJson());_c97.timeExtent=_c95.getTimeDefinition();_c97.maxAllowableOffset=_c95._maxOffset;if(_c95._ts){_c97._ts=(new Date()).getTime();}var _c98;if(_c95._usePatch){_c98=this._getRequestId(_c95);this._cancelPendingRequest(null,_c98);}_c95._task.execute(_c97,this._drawFeatures,this._queryErrorHandler,_c98);},_drawFeatures:function(_c99){this._purgeRequests();var _c9a=_c99.features,_c9b=this.featureLayer,_c9c=_c9b.objectIdField,i,len=_c9a.length,_c9d,oid;for(i=0;i<len;i++){_c9d=_c9a[i];oid=_c9d.attributes[_c9c];this._addFeatureIIf(oid,_c9d);this._incRefCount(oid);}this._applyTimeFilter(true);_c9b._fireUpdateEnd(null,_c99.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_c99.exceededTransferLimit){_c9b.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _c9e=this.featureLayer;_c9e._errorHandler(err);_c9e._fireUpdateEnd(err);}});if(has("extend-esri")){lang.setObject("layers._SnapshotMode",_c8d,_c89);}return _c8d;});},"url:dojox/grid/resources/_Grid.html":"<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\n</div>\n","dijit/DropDownMenu":function(){require({cache:{"url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   data-dojo-attach-event=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n"}});define("dijit/DropDownMenu",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(_c9f,_ca0,keys,_ca1,_ca2,_ca3){return _c9f("dijit.DropDownMenu",[_ca3,_ca2],{templateString:_ca1,baseClass:"dijitMenu",postCreate:function(){this.inherited(arguments);var l=this.isLeftToRight();this._openSubMenuKey=l?keys.RIGHT_ARROW:keys.LEFT_ARROW;this._closeSubMenuKey=l?keys.LEFT_ARROW:keys.RIGHT_ARROW;this.connectKeyNavHandlers([keys.UP_ARROW],[keys.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);_ca0.stop(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{_ca0.stop(evt);}break;}}});});},"dijit/_editor/plugins/LinkDialog":function(){define("dijit/_editor/plugins/LinkDialog",["require","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/query","dojo/string","../../_Widget","../_Plugin","../../form/DropDownButton","../range"],function(_ca4,_ca5,_ca6,keys,lang,has,_ca7,_ca8,_ca9,_caa,_cab,_cac){var _cad=_ca5("dijit._editor.plugins.LinkDialog",_caa,{buttonClass:_cab,useDefaultCommand:false,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+"+"@"+"((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:"<a href=\"${urlInput}\" _djrealurl=\"${urlInput}\""+" target=\"${targetSelect}\""+">${textInput}</a>",tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' "+"id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_targetSelect'>${target}</label>","</td><td>","<select id='${id}_targetSelect' name='targetSelect' data-dojo-type='dijit.form.Select'>","<option selected='selected' value='_self'>${currentWindow}</option>","<option value='_blank'>${newWindow}</option>","<option value='_top'>${topWindow}</option>","<option value='_parent'>${parentWindow}</option>","</select>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),_initButton:function(){this.inherited(arguments);this.button.loadDropDown=lang.hitch(this,"_loadDropDown");this._connectTagEvents();},_loadDropDown:function(_cae){_ca4(["dojo/i18n","../../TooltipDialog","../../registry","../../form/Button","../../form/Select","../../form/ValidationTextBox","dojo/i18n!../../nls/common","dojo/i18n!../nls/LinkDialog"],lang.hitch(this,function(i18n,_caf,_cb0){var _cb1=this;this.tag=this.command=="insertImage"?"img":"a";var _cb2=lang.delegate(i18n.getLocalization("dijit","common",this.lang),i18n.getLocalization("dijit._editor","LinkDialog",this.lang));var _cb3=(this.dropDown=this.button.dropDown=new _caf({title:_cb2[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:lang.hitch(this,"setValue"),onOpen:function(){_cb1._onOpenDialog();_caf.prototype.onOpen.apply(this,arguments);},onCancel:function(){setTimeout(lang.hitch(_cb1,"_onCloseDialog"),0);}}));_cb2.urlRegExp=this.urlRegExp;_cb2.id=_cb0.getUniqueId(this.editor.id);this._uniqueId=_cb2.id;this._setContent(_cb3.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+_ca8.substitute(this.linkDialogTemplate,_cb2));_cb3.startup();this._urlInput=_cb0.byId(this._uniqueId+"_urlInput");this._textInput=_cb0.byId(this._uniqueId+"_textInput");this._setButton=_cb0.byId(this._uniqueId+"_setButton");this.connect(_cb0.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel();});if(this._urlInput){this.connect(this._urlInput,"onChange","_checkAndFixInput");}if(this._textInput){this.connect(this._textInput,"onChange","_checkAndFixInput");}this._urlRegExp=new RegExp("^"+this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=lang.hitch(this,function(){var _cb4=this._urlInput.get("value");return this._urlRegExp.test(_cb4)||this._emailRegExp.test(_cb4);});this.connect(_cb3.domNode,"onkeypress",function(e){if(e&&e.charOrCode==keys.ENTER&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!e.altKey){if(!this._setButton.get("disabled")){_cb3.onExecute();_cb3.execute(_cb3.get("value"));}}});_cae();}));},_checkAndFixInput:function(){var self=this;var url=this._urlInput.get("value");var _cb5=function(url){var _cb6=false;var _cb7=false;if(url&&url.length>1){url=lang.trim(url);if(url.indexOf("mailto:")!==0){if(url.indexOf("/")>0){if(url.indexOf("://")===-1){if(url.charAt(0)!=="/"&&url.indexOf("./")&&url.indexOf("../")!==0){if(self._hostRxp.test(url)){_cb6=true;}}}}else{if(self._userAtRxp.test(url)){_cb7=true;}}}}if(_cb6){self._urlInput.set("value","http://"+url);}if(_cb7){self._urlInput.set("value","mailto:"+url);}self._setButton.set("disabled",!self._isValid());};if(this._delayedCheck){clearTimeout(this._delayedCheck);this._delayedCheck=null;}this._delayedCheck=setTimeout(function(){_cb5(url);},250);},_connectTagEvents:function(){this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);}));},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid();},_setContent:function(_cb8){this.dropDown.set({parserScope:"dojo",content:_cb8});},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}return args;},setValue:function(args){this._onCloseDialog();if(has("ie")<9){var sel=_cac.getSelection(this.editor.window);var _cb9=sel.getRangeAt(0);var a=_cb9.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(a&&(a.nodeName&&a.nodeName.toLowerCase()===this.tag)){if(this.editor.queryCommandEnabled("unlink")){this.editor._sCall("selectElementChildren",[a]);this.editor.execCommand("unlink");}}}args=this._checkValues(args);this.editor.execCommand("inserthtml",_ca8.substitute(this.htmlTemplate,args));_ca7("a",this.editor.document).forEach(function(a){if(!a.innerHTML&&!_ca6.has(a,"name")){a.parentNode.removeChild(a);}},this);},_onCloseDialog:function(){this.editor.focus();},_getCurrentValues:function(a){var url,text,_cba;if(a&&a.tagName.toLowerCase()===this.tag){url=a.getAttribute("_djrealurl")||a.getAttribute("href");_cba=a.getAttribute("target")||"_self";text=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,true]);}else{text=this.editor._sCall("getSelectedText");}return {urlInput:url||"",textInput:text||"",targetSelect:_cba||""};},_onOpenDialog:function(){var a,b,fc;if(has("ie")){var sel=_cac.getSelection(this.editor.window);if(sel.rangeCount){var _cbb=sel.getRangeAt(0);a=_cbb.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(!a||(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){b=this.editor._sCall("getAncestorElement",[this.tag]);if(b&&(b.nodeName&&b.nodeName.toLowerCase()==this.tag)){a=b;this.editor._sCall("selectElement",[a]);}else{if(_cbb.startContainer===_cbb.endContainer){fc=_cbb.startContainer.firstChild;if(fc&&(fc.nodeName&&fc.nodeName.toLowerCase()==this.tag)){a=fc;this.editor._sCall("selectElement",[a]);}}}}}}else{a=this.editor._sCall("getAncestorElement",[this.tag]);}this.dropDown.reset();this._setButton.set("disabled",true);this.dropDown.set("value",this._getCurrentValues(a));},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_ca6.get(t,"href")){var _cbc=this.editor;this.editor._sCall("selectElement",[t]);_cbc.onDisplayChanged();if(_cbc._updateTimer){_cbc._updateTimer.remove();delete _cbc._updateTimer;}_cbc.onNormalizedDisplayChanged();var _cbd=this.button;setTimeout(function(){_cbd.set("disabled",false);_cbd.loadAndOpenDropDown().then(function(){if(_cbd.dropDown.focus){_cbd.dropDown.focus();}});},10);}}}});var _cbe=_ca5("dijit._editor.plugins.ImgLinkDialog",[_cad],{linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' "+"required='true' id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","</td><td>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),htmlTemplate:"<img src=\"${urlInput}\" _djrealurl=\"${urlInput}\" alt=\"${textInput}\" />",tag:"img",_getCurrentValues:function(img){var url,text;if(img&&img.tagName.toLowerCase()===this.tag){url=img.getAttribute("_djrealurl")||img.getAttribute("src");text=img.getAttribute("alt");this.editor._sCall("selectElement",[img,true]);}else{text=this.editor._sCall("getSelectedText",[]);}return {urlInput:url||"",textInput:text||""};},_isValid:function(){return this._urlInput.isValid();},_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"onmousedown",this._selectTag);}));},_selectTag:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag){this.editor._sCall("selectElement",[t]);}}},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}if(args&&args.textInput){args.textInput=args.textInput.replace(/"/g,"&quot;");}return args;},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_ca6.get(t,"src")){var _cbf=this.editor;this.editor._sCall("selectElement",[t]);_cbf.onDisplayChanged();if(_cbf._updateTimer){_cbf._updateTimer.remove();delete _cbf._updateTimer;}_cbf.onNormalizedDisplayChanged();var _cc0=this.button;setTimeout(function(){_cc0.set("disabled",false);_cc0.loadAndOpenDropDown().then(function(){if(_cc0.dropDown.focus){_cc0.dropDown.focus();}});},10);}}}});_caa.registry["createLink"]=function(){return new _cad({command:"createLink"});};_caa.registry["insertImage"]=function(){return new _cbe({command:"insertImage"});};_cad.ImgLinkDialog=_cbe;return _cad;});},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,_cc1,_cc2){var _cc3={};lang.setObject("dojo.data.util.simpleFetch",_cc3);_cc3.errorHandler=function(_cc4,_cc5){if(_cc5.onError){var _cc6=_cc5.scope||_cc1.global;_cc5.onError.call(_cc6,_cc4,_cc5);}};_cc3.fetchHandler=function(_cc7,_cc8){var _cc9=_cc8.abort||null,_cca=false,_ccb=_cc8.start?_cc8.start:0,_ccc=(_cc8.count&&(_cc8.count!==Infinity))?(_ccb+_cc8.count):_cc7.length;_cc8.abort=function(){_cca=true;if(_cc9){_cc9.call(_cc8);}};var _ccd=_cc8.scope||_cc1.global;if(!_cc8.store){_cc8.store=this;}if(_cc8.onBegin){_cc8.onBegin.call(_ccd,_cc7.length,_cc8);}if(_cc8.sort){_cc7.sort(_cc2.createSortFunction(_cc8.sort,this));}if(_cc8.onItem){for(var i=_ccb;(i<_cc7.length)&&(i<_ccc);++i){var item=_cc7[i];if(!_cca){_cc8.onItem.call(_ccd,item,_cc8);}}}if(_cc8.onComplete&&!_cca){var _cce=null;if(!_cc8.onItem){_cce=_cc7.slice(_ccb,_ccc);}_cc8.onComplete.call(_ccd,_cce,_cc8);}};_cc3.fetch=function(_ccf){_ccf=_ccf||{};if(!_ccf.store){_ccf.store=this;}this._fetchItems(_ccf,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));return _ccf;};return _cc3;});},"dijit/Menu":function(){define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(_cd0,_cd1,_cd2,_cd3,dom,_cd4,_cd5,_cd6,keys,lang,on,has,win,_cd7,pm,_cd8,_cd9){if(has("dijit-legacy-requires")){_cd9(0,function(){var _cda=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];_cd0(_cda);});}return _cd2("dijit.Menu",_cd8,{constructor:function(){this._bindings=[];},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(this.ownerDocumentBody);}else{_cd1.forEach(this.targetNodeIds,this.bindDomNode,this);}this.inherited(arguments);},_iframeContentWindow:function(_cdb){return _cd7.get(this._iframeContentDocument(_cdb))||this._iframeContentDocument(_cdb)["__parent__"]||(_cdb.name&&win.doc.frames[_cdb.name])||null;},_iframeContentDocument:function(_cdc){return _cdc.contentDocument||(_cdc.contentWindow&&_cdc.contentWindow.document)||(_cdc.name&&win.doc.frames[_cdc.name]&&win.doc.frames[_cdc.name].document)||null;},bindDomNode:function(node){node=dom.byId(node,this.ownerDocument);var cn;if(node.tagName.toLowerCase()=="iframe"){var _cdd=node,_cde=this._iframeContentWindow(_cdd);cn=win.body(_cde.document);}else{cn=(node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node);}var _cdf={node:node,iframe:_cdd};_cd4.set(node,"_dijitMenu"+this.id,this._bindings.push(_cdf));var _ce0=lang.hitch(this,function(cn){var _ce1=this.selector,_ce2=_ce1?function(_ce3){return on.selector(_ce1,_ce3);}:function(_ce4){return _ce4;},self=this;return [on(cn,_ce2(this.leftClickToOpen?"click":"contextmenu"),function(evt){_cd3.stop(evt);self._scheduleOpen(this,_cdd,{x:evt.pageX,y:evt.pageY});}),on(cn,_ce2("keydown"),function(evt){if(evt.shiftKey&&evt.keyCode==keys.F10){_cd3.stop(evt);self._scheduleOpen(this,_cdd);}})];});_cdf.connects=cn?_ce0(cn):[];if(_cdd){_cdf.onloadHandler=lang.hitch(this,function(){var _ce5=this._iframeContentWindow(_cdd);cn=win.body(_ce5.document);_cdf.connects=_ce0(cn);});if(_cdd.addEventListener){_cdd.addEventListener("load",_cdf.onloadHandler,false);}else{_cdd.attachEvent("onload",_cdf.onloadHandler);}}},unBindDomNode:function(_ce6){var node;try{node=dom.byId(_ce6,this.ownerDocument);}catch(e){return;}var _ce7="_dijitMenu"+this.id;if(node&&_cd4.has(node,_ce7)){var bid=_cd4.get(node,_ce7)-1,b=this._bindings[bid],h;while((h=b.connects.pop())){h.remove();}var _ce8=b.iframe;if(_ce8){if(_ce8.removeEventListener){_ce8.removeEventListener("load",b.onloadHandler,false);}else{_ce8.detachEvent("onload",b.onloadHandler);}}_cd4.remove(node,_ce7);delete this._bindings[bid];}},_scheduleOpen:function(_ce9,_cea,_ceb){if(!this._openTimer){this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:_ce9,iframe:_cea,coords:_ceb});},1);}},_openMyself:function(args){var _cec=args.target,_ced=args.iframe,_cee=args.coords;this.currentTarget=_cec;if(_cee){if(_ced){var ifc=_cd5.position(_ced,true),_cef=this._iframeContentWindow(_ced),_cf0=_cd5.docScroll(_cef.document);var cs=_cd6.getComputedStyle(_ced),tp=_cd6.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(_ced,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(_ced,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(_ced,cs.paddingTop))+(has("ie")&&has("quirks")?tp(_ced,cs.borderTopWidth):0);_cee.x+=ifc.x+left-_cf0.x;_cee.y+=ifc.y+top-_cf0.y;}}else{_cee=_cd5.position(_cec,true);_cee.x+=10;_cee.y+=10;}var self=this;var _cf1=this._focusManager.get("prevNode");var _cf2=this._focusManager.get("curNode");var _cf3=!_cf2||(dom.isDescendant(_cf2,this.domNode))?_cf1:_cf2;function _cf4(){if(self.refocus&&_cf3){_cf3.focus();}pm.close(self);};pm.open({popup:this,x:_cee.x,y:_cee.y,onExecute:_cf4,onCancel:_cf4,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);pm.close(this);};},destroy:function(){_cd1.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});});},"esri/toolbars/_toolbar":function(){define("esri/toolbars/_toolbar",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_cf5,lang,has,_cf6){var TB=_cf5(null,{declaredClass:"esri.toolbars._Toolbar",constructor:function(map){this.map=map;},_cursors:{"move":"pointer","move-v":"pointer","move-gv":"pointer","box0":"nw-resize","box1":"n-resize","box2":"ne-resize","box3":"e-resize","box4":"se-resize","box5":"s-resize","box6":"sw-resize","box7":"w-resize","box8":"pointer"},_deactivateMapTools:function(nav,_cf7,_cf8,_cf9){var map=this.map;if(nav){this._mapNavState={isDoubleClickZoom:map.isDoubleClickZoom,isClickRecenter:map.isClickRecenter,isPan:map.isPan,isRubberBandZoom:map.isRubberBandZoom,isKeyboardNavigation:map.isKeyboardNavigation,isScrollWheelZoom:map.isScrollWheelZoom};map.disableDoubleClickZoom();map.disableClickRecenter();map.disablePan();map.disableRubberBandZoom();map.disableKeyboardNavigation();}if(_cf7){map.hideZoomSlider();}if(_cf8){map.hidePanArrows();}if(_cf9){map.graphics.disableMouseEvents();}},_activateMapTools:function(nav,_cfa,_cfb,_cfc){var map=this.map,_cfd=this._mapNavState;if(nav&&_cfd){if(_cfd.isDoubleClickZoom){map.enableDoubleClickZoom();}if(_cfd.isClickRecenter){map.enableClickRecenter();}if(_cfd.isPan){map.enablePan();}if(_cfd.isRubberBandZoom){map.enableRubberBandZoom();}if(_cfd.isKeyboardNavigation){map.enableKeyboardNavigation();}if(_cfd.isScrollWheelZoom){map.enableScrollWheelZoom();}}if(_cfa){map.showZoomSlider();}if(_cfb){map.showPanArrows();}if(_cfc){map.graphics.enableMouseEvents();}}});if(has("extend-esri")){lang.setObject("toolbars._Toolbar",TB,_cf6);}return TB;});},"esri/tasks/GeometryService":function(){define("esri/tasks/GeometryService",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/_base/Deferred","dojo/has","esri/kernel","esri/request","esri/deferredUtils","esri/tasks/Task","esri/geometry/Extent","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/jsonUtils"],function(_cfe,lang,_cff,_d00,_d01,has,_d02,_d03,_d04,Task,_d05,_d06,_d07,_d08,_d09){var _d0a=_cfe(Task,{declaredClass:"esri.tasks.GeometryService",constructor:function(url){var _d0b=lang.hitch;this._projectHandler=_d0b(this,this._projectHandler);this._simplifyHandler=_d0b(this,this._simplifyHandler);this._bufferHandler=_d0b(this,this._bufferHandler);this._areasAndLengthsHandler=_d0b(this,this._areasAndLengthsHandler);this._lengthsHandler=_d0b(this,this._lengthsHandler);this._labelPointsHandler=_d0b(this,this._labelPointsHandler);this._relationHandler=_d0b(this,this._relationHandler);this._convexHullHandler=_d0b(this,this._convexHullHandler);this._unionHandler=_d0b(this,this._unionHandler);this._autoCompleteHandler=_d0b(this,this._autoCompleteHandler);this._reshapeHandler=_d0b(this,this._reshapeHandler);this._cutHandler=_d0b(this,this._cutHandler);this._intersectHandler=_d0b(this,this._intersectHandler);this._differenceHandler=_d0b(this,this._differenceHandler);this._trimExtendHandler=_d0b(this,this._trimExtendHandler);this._densifyHandler=_d0b(this,this._densifyHandler);this._generalizeHandler=_d0b(this,this._densifyHandler);this._offsetHandler=_d0b(this,this._offsetHandler);this._distanceHandler=_d0b(this,this._distanceHandler);this.registerConnectEvents("esri.tasks.GeometryService",{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]});},_encodeGeometries:function(_d0c){var gs=[],i,il=_d0c.length;for(i=0;i<il;i++){gs.push(_d0c[i].toJson());}return {geometryType:_d09.getJsonType(_d0c[0]),geometries:gs};},_decodeGeometries:function(_d0d,_d0e,sr){var _d0f=_d09.getGeometryType(_d0e),_d10=_d0d.geometries,fs=[],_d11={spatialReference:sr.toJson()},_d12=lang.mixin;_cff.forEach(_d10,function(g,i){fs[i]=new _d0f(_d12(g,_d11));});return fs;},_toProjectGeometry:function(_d13){var sr=_d13.spatialReference.toJson();if(_d13 instanceof _d05){return new _d07({rings:[[[_d13.xmin,_d13.ymin],[_d13.xmin,_d13.ymax],[_d13.xmax,_d13.ymax],[_d13.xmax,_d13.ymin],[_d13.xmin,_d13.ymin]]],spatialReference:sr});}else{return new _d06({paths:[[].concat(_d13.points)],spatialReference:sr});}},_fromProjectedGeometry:function(_d14,_d15,_d16){if(_d15==="esriGeometryEnvelope"){var ring=_d14.rings[0];return new _d05(ring[0][0],ring[0][1],ring[2][0],ring[2][1],_d16);}else{return new _d08({points:_d14.paths[0],spatialReference:_d16.toJson()});}},project:function(_d17,_d18,_d19,_d1a){var _d1b=lang.mixin({},this._url.query,{f:"json"}),_d1c;if(!_d17.geometries){_d1c=_d17[0];_d1b=lang.mixin(_d1b,{outSR:_d18.wkid||_d00.toJson(_d18.toJson()),inSR:_d1c.spatialReference.wkid||_d00.toJson(_d1c.spatialReference.toJson()),geometries:_d00.toJson(this._encodeGeometries(_d17))});}else{_d1a=_d19;_d19=_d18;_d18=_d17.outSR;_d1c=_d17.geometries[0];_d1b=lang.mixin(_d1b,_d17.toJson());}var _d1d=_d09.getJsonType(_d1c),_d1e=this._projectHandler,_d1f=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/project",content:_d1b,callbackParamName:"callback",load:function(r,i){_d1e(r,i,_d1d,_d18,_d19,_d1a,dfd);},error:function(r){_d1f(r,_d1a,dfd);}});return dfd;},_projectHandler:function(_d20,io,_d21,_d22,_d23,_d24,dfd){try{var fs=this._decodeGeometries(_d20,_d21,_d22);this._successHandler([fs],"onProjectComplete",_d23,dfd);}catch(err){this._errorHandler(err,_d24,dfd);}},onProjectComplete:function(){},simplify:function(_d25,_d26,_d27){var _d28=_d25[0].spatialReference;var _d29=lang.mixin({},this._url.query,{f:"json",sr:_d28.wkid?_d28.wkid:_d00.toJson(_d28.toJson()),geometries:_d00.toJson(this._encodeGeometries(_d25))}),_d2a=_d09.getJsonType(_d25[0]),_d2b=this._simplifyHandler,_d2c=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/simplify",content:_d29,callbackParamName:"callback",load:function(r,i){_d2b(r,i,_d2a,_d28,_d26,_d27,dfd);},error:function(r){_d2c(r,_d27,dfd);}});return dfd;},_simplifyHandler:function(_d2d,io,_d2e,sr,_d2f,_d30,dfd){try{var fs=this._decodeGeometries(_d2d,_d2e,sr);this._successHandler([fs],"onSimplifyComplete",_d2f,dfd);}catch(err){this._errorHandler(err,_d30,dfd);}},onSimplifyComplete:function(){},convexHull:function(_d31,_d32,_d33){var _d34=_d31[0].spatialReference;var _d35=lang.mixin({},this._url.query,{f:"json",sr:_d00.toJson(_d34.toJson()),geometries:_d00.toJson(this._encodeGeometries(_d31))}),_d36=this._convexHullHandler,_d37=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/convexHull",content:_d35,callbackParamName:"callback",load:function(r,i){_d36(r,i,_d34,_d32,_d33,dfd);},error:function(r){_d37(r,_d33,dfd);}});return dfd;},_convexHullHandler:function(_d38,io,_d39,_d3a,_d3b,dfd){try{var geom=_d09.fromJson(_d38.geometry).setSpatialReference(_d39);this._successHandler([geom],"onConvexHullComplete",_d3a,dfd);}catch(err){this._errorHandler(err,_d3b,dfd);}},onConvexHullComplete:function(){},union:function(_d3c,_d3d,_d3e){var _d3f=_d3c[0].spatialReference;var _d40=lang.mixin({},this._url.query,{f:"json",sr:_d00.toJson(_d3f.toJson()),geometries:_d00.toJson(this._encodeGeometries(_d3c))}),_d41=this._unionHandler,_d42=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/union",content:_d40,callbackParamName:"callback",load:function(r,i){_d41(r,i,_d3f,_d3d,_d3e,dfd);},error:function(r){_d42(r,_d3e,dfd);}});return dfd;},_unionHandler:function(_d43,io,_d44,_d45,_d46,dfd){try{var geom=_d09.fromJson(_d43.geometry).setSpatialReference(_d44);this._successHandler([geom],"onUnionComplete",_d45,dfd);}catch(err){this._errorHandler(err,_d46,dfd);}},onUnionComplete:function(){},autoComplete:function(_d47,_d48,_d49,_d4a){var _d4b=_d47[0].spatialReference;var _d4c=lang.mixin({},this._url.query,{f:"json",sr:_d00.toJson(_d4b.toJson()),polygons:_d00.toJson(this._encodeGeometries(_d47).geometries),polylines:_d00.toJson(this._encodeGeometries(_d48).geometries)}),_d4d=this._autoCompleteHandler,_d4e=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/autoComplete",content:_d4c,callbackParamName:"callback",load:function(r,i){_d4d(r,i,_d4b,_d49,_d4a,dfd);},error:function(r){_d4e(r,_d4a,dfd);}});return dfd;},_autoCompleteHandler:function(_d4f,io,_d50,_d51,_d52,dfd){try{var _d53=_d4f.geometries,_d54=[],i,il=_d53.length;for(i=0;i<il;i++){_d54[i]=new _d07({spatialReference:_d50,rings:_d53[i].rings});}this._successHandler([_d54],"onAutoCompleteComplete",_d51,dfd);}catch(err){this._errorHandler(err,_d52,dfd);}},onAutoCompleteComplete:function(){},reshape:function(_d55,_d56,_d57,_d58){var _d59=_d55.spatialReference;var _d5a=lang.mixin({},this._url.query,{f:"json",sr:_d00.toJson(_d59.toJson()),target:_d00.toJson({geometryType:_d09.getJsonType(_d55),geometry:_d55.toJson()}),reshaper:_d00.toJson(_d56.toJson())}),_d5b=this._reshapeHandler,_d5c=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/reshape",content:_d5a,callbackParamName:"callback",load:function(r,i){_d5b(r,i,_d59,_d57,_d58,dfd);},error:function(r){_d5c(r,_d58,dfd);}});return dfd;},_reshapeHandler:function(_d5d,io,_d5e,_d5f,_d60,dfd){try{var geom=_d09.fromJson(_d5d.geometry).setSpatialReference(_d5e);this._successHandler([geom],"onReshapeComplete",_d5f,dfd);}catch(err){this._errorHandler(err,_d60,dfd);}},onReshapeComplete:function(){},cut:function(_d61,_d62,_d63,_d64){var _d65=_d61[0].spatialReference;var _d66=_cff.map(_d61,function(_d67){return _d67.toJson();});var _d68=lang.mixin({},this._url.query,{f:"json",sr:_d00.toJson(_d65.toJson()),target:_d00.toJson({geometryType:_d09.getJsonType(_d61[0]),geometries:_d66}),cutter:_d00.toJson(_d62.toJson())}),_d69=this._cutHandler,_d6a=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/cut",content:_d68,callbackParamName:"callback",load:function(r,i){_d69(r,i,_d65,_d63,_d64,dfd);},error:function(r){_d6a(r,_d64,dfd);}});return dfd;},_cutHandler:function(_d6b,io,_d6c,_d6d,_d6e,dfd){try{var _d6f=_d6b.geometries;var _d70={};_d70.cutIndexes=_d6b.cutIndexes;_d70.geometries=[];_cff.forEach(_d6f,function(geom){_d70.geometries.push(_d09.fromJson(geom).setSpatialReference(_d6c));});this._successHandler([_d70],"onCutComplete",_d6d,dfd);}catch(err){this._errorHandler(err,_d6e,dfd);}},onCutComplete:function(){},intersect:function(_d71,_d72,_d73,_d74){var _d75=_d71[0].spatialReference;var _d76=lang.mixin({},this._url.query,{f:"json",sr:_d00.toJson(_d75.toJson()),geometries:_d00.toJson(this._encodeGeometries(_d71)),geometry:_d00.toJson({geometryType:_d09.getJsonType(_d72),geometry:_d72.toJson()})}),_d77=this._intersectHandler,_d78=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/intersect",content:_d76,callbackParamName:"callback",load:function(r,i){_d77(r,i,_d75,_d73,_d74,dfd);},error:function(r){_d78(r,_d74,dfd);}});return dfd;},_intersectHandler:function(_d79,io,_d7a,_d7b,_d7c,dfd){try{var _d7d=_d79.geometries,_d7e=[];_cff.forEach(_d7d,function(geom){_d7e.push(_d09.fromJson(geom).setSpatialReference(_d7a));});this._successHandler([_d7e],"onIntersectComplete",_d7b,dfd);}catch(err){this._errorHandler(err,_d7c,dfd);}},onIntersectComplete:function(){},difference:function(_d7f,_d80,_d81,_d82){var _d83=_d7f[0].spatialReference;var _d84=lang.mixin({},this._url.query,{f:"json",sr:_d00.toJson(_d83.toJson()),geometries:_d00.toJson(this._encodeGeometries(_d7f)),geometry:_d00.toJson({geometryType:_d09.getJsonType(_d80),geometry:_d80.toJson()})}),_d85=this._differenceHandler,_d86=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/difference",content:_d84,callbackParamName:"callback",load:function(r,i){_d85(r,i,_d83,_d81,_d82,dfd);},error:function(r){_d86(r,_d82,dfd);}});return dfd;},_differenceHandler:function(_d87,io,_d88,_d89,_d8a,dfd){try{var _d8b=_d87.geometries,_d8c=[];_cff.forEach(_d8b,function(geom){_d8c.push(_d09.fromJson(geom).setSpatialReference(_d88));});this._successHandler([_d8c],"onDifferenceComplete",_d89,dfd);}catch(err){this._errorHandler(err,_d8a,dfd);}},onDifferenceComplete:function(){},buffer:function(_d8d,_d8e,_d8f){var _d90=lang.mixin({},this._url.query,{f:"json"},_d8d.toJson()),sr=_d8d.outSpatialReference||_d8d.geometries[0].spatialReference,_d91=this._bufferHandler,_d92=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/buffer",content:_d90,callbackParamName:"callback",load:function(r,i){_d91(r,i,sr,_d8e,_d8f,dfd);},error:function(r){_d92(r,_d8f,dfd);}});return dfd;},_bufferHandler:function(_d93,io,sr,_d94,_d95,dfd){try{var _d96=_d93.geometries,_d97=[],i,il=_d96.length;for(i=0;i<il;i++){_d97[i]=new _d07({spatialReference:sr,rings:_d96[i].rings});}this._successHandler([_d97],"onBufferComplete",_d94,dfd);}catch(err){this._errorHandler(err,_d95,dfd);}},onBufferComplete:function(){},areasAndLengths:function(_d98,_d99,_d9a){var _d9b=lang.mixin({},this._url.query,{f:"json"},_d98.toJson()),_d9c=this._areasAndLengthsHandler,_d9d=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/areasAndLengths",content:_d9b,callbackParamName:"callback",load:function(r,i){_d9c(r,i,_d99,_d9a,dfd);},error:function(r){_d9d(r,_d9a,dfd);}});return dfd;},_areasAndLengthsHandler:function(_d9e,io,_d9f,_da0,dfd){try{this._successHandler([_d9e],"onAreasAndLengthsComplete",_d9f,dfd);}catch(err){this._errorHandler(err,_da0,dfd);}},onAreasAndLengthsComplete:function(){},lengths:function(_da1,_da2,_da3){var _da4=lang.mixin({},this._url.query,{f:"json"},_da1.toJson()),_da5=this._lengthsHandler,_da6=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/lengths",content:_da4,callbackParamName:"callback",load:function(r,i){_da5(r,i,_da2,_da3,dfd);},error:function(r){_da6(r,_da3,dfd);}});return dfd;},_lengthsHandler:function(_da7,io,_da8,_da9,dfd){try{this._successHandler([_da7],"onLengthsComplete",_da8,dfd);}catch(err){this._errorHandler(err,_da9,dfd);}},onLengthsComplete:function(){},labelPoints:function(_daa,_dab,_dac){var _dad=_cff.map(_daa,function(geom){return geom.toJson();});var sr=_daa[0].spatialReference,_dae=lang.mixin({},this._url.query,{f:"json",sr:sr.wkid?sr.wkid:_d00.toJson(sr.toJson()),polygons:_d00.toJson(_dad)}),_daf=this._labelPointsHandler,_db0=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/labelPoints",content:_dae,callbackParamName:"callback",load:function(r,i){_daf(r,i,_daa,sr,_dab,_dac,dfd);},error:function(r){_db0(r,_dac,dfd);}});return dfd;},_labelPointsHandler:function(_db1,io,_db2,sr,_db3,_db4,dfd){try{var _db5=_db1.labelPoints,_db6=[];_cff.forEach(_db5,function(geom){_db6.push(_d09.fromJson(geom).setSpatialReference(sr));});this._successHandler([_db6],"onLabelPointsComplete",_db3,dfd);}catch(err){this._errorHandler(err,_db4,dfd);}},onLabelPointsComplete:function(){},relation:function(_db7,_db8,_db9){var _dba=lang.mixin({},this._url.query,{f:"json"},_db7.toJson()),_dbb=this._relationHandler,_dbc=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/relation",content:_dba,callbackParamName:"callback",load:function(r,i){_dbb(r,i,_db8,_db9,dfd);},error:function(r){_dbc(r,_db9,dfd);}});return dfd;},_relationHandler:function(_dbd,io,_dbe,_dbf,dfd){try{var _dc0=_dbd.relations;this._successHandler([_dc0],"onRelationComplete",_dbe,dfd);}catch(err){this._errorHandler(err,_dbf,dfd);}},onRelationComplete:function(){},trimExtend:function(_dc1,_dc2,_dc3){var _dc4=lang.mixin({},this._url.query,{f:"json"},_dc1.toJson()),_dc5=_dc1.sr,_dc6=this._trimExtendHandler,_dc7=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/trimExtend",content:_dc4,callbackParamName:"callback",load:function(r,i){_dc6(r,i,_dc5,_dc2,_dc3,dfd);},error:function(r){_dc7(r,_dc3,dfd);}});return dfd;},_trimExtendHandler:function(_dc8,io,_dc9,_dca,_dcb,dfd){try{var _dcc=_dc8.geometries,_dcd=[],i,il=_dcc.length;for(i=0;i<il;i++){_dcd[i]=new _d06({spatialReference:_dc9,paths:_dcc[i].paths});}this._successHandler([_dcd],"onTrimExtendComplete",_dca,dfd);}catch(err){this._errorHandler(err,_dcb,dfd);}},onTrimExtendComplete:function(){},densify:function(_dce,_dcf,_dd0){var _dd1=lang.mixin({},this._url.query,{f:"json"},_dce.toJson()),_dd2=_dce.geometries[0].spatialReference,_dd3=this._densifyHandler,_dd4=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/densify",content:_dd1,callbackParamName:"callback",load:function(r,i){_dd3(r,i,_dd2,_dcf,_dd0,dfd);},error:function(r){_dd4(r,_dd0,dfd);}});return dfd;},_densifyHandler:function(_dd5,io,_dd6,_dd7,_dd8,dfd){try{var _dd9=_dd5.geometries,_dda=[];_cff.forEach(_dd9,function(geom){_dda.push(_d09.fromJson(geom).setSpatialReference(_dd6));});this._successHandler([_dda],"onDensifyComplete",_dd7,dfd);}catch(err){this._errorHandler(err,_dd8,dfd);}},onDensifyComplete:function(){},generalize:function(_ddb,_ddc,_ddd){var _dde=lang.mixin({},this._url.query,{f:"json"},_ddb.toJson()),_ddf=_ddb.geometries[0].spatialReference,_de0=this._generalizeHandler,_de1=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/generalize",content:_dde,callbackParamName:"callback",load:function(r,i){_de0(r,i,_ddf,_ddc,_ddd,dfd);},error:function(r){_de1(r,_ddd,dfd);}});return dfd;},_generalizeHandler:function(_de2,io,_de3,_de4,_de5,dfd){try{var _de6=_de2.geometries,_de7=[];_cff.forEach(_de6,function(geom){_de7.push(_d09.fromJson(geom).setSpatialReference(_de3));});this._successHandler([_de7],"onGeneralizeComplete",_de4,dfd);}catch(err){this._errorHandler(err,_de5,dfd);}},onGeneralizeComplete:function(){},offset:function(_de8,_de9,_dea){var _deb=lang.mixin({},this._url.query,{f:"json"},_de8.toJson()),_dec=_de8.geometries[0].spatialReference,_ded=this._offsetHandler,_dee=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/offset",content:_deb,callbackParamName:"callback",load:function(r,i){_ded(r,i,_dec,_de9,_dea,dfd);},error:function(r){_dee(r,_dea,dfd);}});return dfd;},_offsetHandler:function(_def,io,_df0,_df1,_df2,dfd){try{var _df3=_def.geometries,_df4=[];_cff.forEach(_df3,function(geom){_df4.push(_d09.fromJson(geom).setSpatialReference(_df0));});this._successHandler([_df4],"onOffsetComplete",_df1,dfd);}catch(err){this._errorHandler(err,_df2,dfd);}},onOffsetComplete:function(){},distance:function(_df5,_df6,_df7){var _df8=lang.mixin({},this._url.query,{f:"json"},_df5.toJson()),_df9=_df5.geometry1.spatialReference,_dfa=this._distanceHandler,_dfb=this._errorHandler,dfd=new _d01(_d04._dfdCanceller);dfd._pendingDfd=_d03({url:this._url.path+"/distance",content:_df8,callbackParamName:"callback",load:function(r,i){_dfa(r,i,_df9,_df6,_df7,dfd);},error:function(r){_dfb(r,_df7,dfd);}});return dfd;},_distanceHandler:function(_dfc,io,_dfd,_dfe,_dff,dfd){try{_dfc=_dfc&&_dfc.distance;this._successHandler([_dfc],"onDistanceComplete",_dfe,dfd);}catch(err){this._errorHandler(err,_dff,dfd);}},onDistanceComplete:function(){}});lang.mixin(_d0a,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});if(has("extend-esri")){lang.setObject("tasks.GeometryService",_d0a,_d02);}return _d0a;});},"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","esri/tasks/GeneralizeParameters":function(){define("esri/tasks/GeneralizeParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_e00,lang,_e01,_e02,has,_e03,_e04){var _e05=_e00(null,{declaredClass:"esri.tasks.GeneralizeParameters",geometries:null,deviationUnit:null,maxDeviation:null,toJson:function(){var _e06=_e01.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_e02.toJson({geometryType:_e04.getJsonType(this.geometries[0]),geometries:_e06});json.sr=_e02.toJson(this.geometries[0].spatialReference.toJson());}if(this.deviationUnit){json.deviationUnit=this.deviationUnit;}if(this.maxDeviation){json.maxDeviation=this.maxDeviation;}return json;}});if(has("extend-esri")){lang.setObject("tasks.GeneralizeParameters",_e05,_e03);}return _e05;});},"esri/layers/FeatureType":function(){define("esri/layers/FeatureType",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/layers/RangeDomain","esri/layers/CodedValueDomain","esri/layers/InheritedDomain","esri/layers/FeatureTemplate"],function(_e07,lang,_e08,has,_e09,_e0a,_e0b,_e0c,_e0d,_e0e,_e0f){var _e10=_e07(null,{declaredClass:"esri.layers.FeatureType",constructor:function(json){if(json&&lang.isObject(json)){this.id=json.id;this.name=json.name;var _e11=json.symbol;if(_e11){this.symbol=_e0b.fromJson(_e11);}var _e12=json.domains,_e13,i;var _e14=this.domains={};for(_e13 in _e12){if(_e12.hasOwnProperty(_e13)){var _e15=_e12[_e13];switch(_e15.type){case "range":_e14[_e13]=new _e0c(_e15);break;case "codedValue":_e14[_e13]=new _e0d(_e15);break;case "inherited":_e14[_e13]=new _e0e(_e15);break;}}}var _e16=json.templates;if(_e16){var _e17=this.templates=[];for(i=0;i<_e16.length;i++){_e17.push(new _e0f(_e16[i]));}}}},toJson:function(){var json={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _e18,_e19=this.domains,_e1a=this.templates,_e1b=_e0a.fixJson;if(_e19){var _e1c=json.domains={};for(_e18 in _e19){if(_e19.hasOwnProperty(_e18)){_e1c[_e18]=_e19[_e18]&&_e19[_e18].toJson();}}_e1b(_e1c);}if(_e1a){json.templates=_e08.map(_e1a,function(_e1d){return _e1d.toJson();});}return _e1b(json);}});if(has("extend-esri")){lang.setObject("layers.FeatureType",_e10,_e09);}return _e10;});},"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_e1e,_e1f){return _e1e("dijit._Contained",null,{_getSibling:function(_e20){var node=this.domNode;do{node=node[_e20+"Sibling"];}while(node&&node.nodeType!=1);return node&&_e1f.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer",["dojo/_base/kernel","./_Container","./_FocusMixin","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/event","dojo/dom-attr","dojo/_base/lang"],function(_e21,_e22,_e23,_e24,keys,_e25,_e26,_e27,lang){return _e25("dijit._KeyNavContainer",[_e23,_e22],{tabIndex:"0",connectKeyNavHandlers:function(_e28,_e29){var _e2a=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_e24.forEach(_e28,function(code){_e2a[code]=prev;});_e24.forEach(_e29,function(code){_e2a[code]=next;});_e2a[keys.HOME]=lang.hitch(this,"focusFirstChild");_e2a[keys.END]=lang.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){_e21.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_e24.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_e2b,_e2c){this.inherited(arguments);this._startupChild(_e2b);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},focusChild:function(_e2d,last){if(!_e2d){return;}if(this.focusedChild&&_e2d!==this.focusedChild){this._onChildBlur(this.focusedChild);}_e2d.set("tabIndex",this.tabIndex);_e2d.focus(last?"end":"start");this._set("focusedChild",_e2d);},_startupChild:function(_e2e){_e2e.set("tabIndex","-1");this.connect(_e2e,"_onFocus",function(){_e2e.set("tabIndex",this.tabIndex);});this.connect(_e2e,"_onBlur",function(){_e2e.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focusFirstChild();_e27.set(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){_e27.set(this.domNode,"tabIndex",this.tabIndex);}this.focusedChild=null;this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();_e26.stop(evt);}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_e2f,dir){if(_e2f){_e2f=this._getSiblingOfChild(_e2f,dir);}var _e30=this.getChildren();for(var i=0;i<_e30.length;i++){if(!_e2f){_e2f=_e30[(dir>0)?0:(_e30.length-1)];}if(_e2f.isFocusable()){return _e2f;}_e2f=this._getSiblingOfChild(_e2f,dir);}return null;}});});},"esri/tasks/Task":function(){define("esri/tasks/Task",["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/deferredUtils","esri/urlUtils","esri/Evented"],function(_e31,lang,_e32,has,_e33,_e34,_e35,_e36){var Task=_e31(_e36,{declaredClass:"esri.tasks._Task",constructor:function(url){if(url&&lang.isString(url)){this._url=_e35.urlToObject(this.url=url);}this.normalization=true;this._errorHandler=lang.hitch(this,this._errorHandler);this.registerConnectEvents("esri.tasks._Task",{"error":["error"]});},_useSSL:function(){var _e37=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_e37&&_e37.path){_e37.path=_e37.path.replace(re,rep);}},_encode:function(_e38,_e39,_e3a){var _e3b,type,_e3c={},i,p,pl;for(i in _e38){if(i==="declaredClass"){continue;}_e3b=_e38[i];type=typeof _e3b;if(_e3b!==null&&_e3b!==undefined&&type!=="function"){if(lang.isArray(_e3b)){_e3c[i]=[];pl=_e3b.length;for(p=0;p<pl;p++){_e3c[i][p]=this._encode(_e3b[p]);}}else{if(type==="object"){if(_e3b.toJson){var json=_e3b.toJson(_e3a&&_e3a[i]);if(_e3b.declaredClass==="esri.tasks.FeatureSet"){if(json.spatialReference){json.sr=json.spatialReference;delete json.spatialReference;}}_e3c[i]=_e39?json:_e32.toJson(json);}}else{_e3c[i]=_e3b;}}}}return _e3c;},_successHandler:function(args,_e3d,_e3e,dfd){if(_e3d){this[_e3d].apply(this,args);}if(_e3e){_e3e.apply(null,args);}if(dfd){_e34._resDfd(dfd,args);}},_errorHandler:function(err,_e3f,dfd){this.onError(err);if(_e3f){_e3f(err);}if(dfd){dfd.errback(err);}},setNormalization:function(_e40){this.normalization=_e40;},onError:function(){}});if(has("extend-esri")){_e33.Task=Task;}return Task;});},"dijit/form/DataList":function(){define("dijit/form/DataList",["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(_e41,dom,lang,_e42,_e43,_e44){function _e45(_e46){return {id:_e46.value,value:_e46.value,name:lang.trim(_e46.innerText||_e46.textContent||"")};};return _e41("dijit.form.DataList",_e43,{constructor:function(_e47,_e48){this.domNode=dom.byId(_e48);lang.mixin(this,_e47);if(this.id){_e44.add(this);}this.domNode.style.display="none";this.inherited(arguments,[{data:_e42("option",this.domNode).map(_e45)}]);},destroy:function(){_e44.remove(this.id);},fetchSelectedItem:function(){var _e49=_e42("> option[selected]",this.domNode)[0]||_e42("> option",this.domNode)[0];return _e49&&_e45(_e49);}});});},"dijit/_editor/_Plugin":function(){define("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../form/Button"],function(_e4a,_e4b,lang,_e4c){var _e4d=_e4b("dijit._editor._Plugin",null,{constructor:function(args){this.params=args||{};lang.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:_e4c,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _e4e=this.getLabel(this.command),_e4f=this.editor,_e50=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _e51=lang.mixin({label:_e4e,ownerDocument:_e4f.ownerDocument,dir:_e4f.dir,lang:_e4f.lang,showLabel:false,iconClass:_e50,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_e51);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){var h;while(h=this._connects.pop()){h.remove();}if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(_e4a.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_e52,_e53;if(!e||!e.isLoaded||!c.length){return;}var _e54=this.get("disabled");if(this.button){try{_e53=!_e54&&e.queryCommandEnabled(c);if(this.enabled!==_e53){this.enabled=_e53;this.button.set("disabled",!_e53);}if(_e53){if(typeof this.button.checked=="boolean"){_e52=e.queryCommandState(c);if(this.checked!==_e52){this.checked=_e52;this.button.set("checked",e.queryCommandState(c));}}}}catch(e){console.log(e);}}},setEditor:function(_e55){this.editor=_e55;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",lang.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_e56){if(this.button){_e56.addChild(this.button);}},set:function(name,_e57){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _e58=this._getAttrNames(name);if(this[_e58.s]){var _e59=this[_e58.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_e57);}return _e59||this;},get:function(name){var _e5a=this._getAttrNames(name);return this[_e5a.g]?this[_e5a.g]():this[name];},_setDisabledAttr:function(_e5b){this.disabled=_e5b;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_e5c){this[name]=_e5c;}});_e4d.registry={};return _e4d;});},"esri/tasks/SpatialRelationship":function(){define("esri/tasks/SpatialRelationship",["dojo/_base/lang","dojo/has","esri/kernel"],function(lang,has,_e5d){var _e5e={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};if(has("extend-esri")){lang.setObject("tasks._SpatialRelationship",_e5e,_e5d);}return _e5e;});},"esri/dijit/editing/tools/EditingTools":function(){define(["dojo/_base/lang","dojo/has","esri/toolbars/draw","esri/kernel"],function(lang,has,Draw,_e5f){var _e60={point:{id:"esriPointTool",_enabledIcon:"toolbarIcon pointIcon",_disabledIcon:"toolbarIcon pointIconDisabled",_drawType:Draw.POINT,_geomType:"esriGeometryPoint",_label:"NLS_pointLbl"},polyline:{id:"toolDrawFreehandPolyline",_enabledIcon:"toolbarIcon polylineIcon",_disabledIcon:"toolbarIcon polylineIconDisabled",_drawType:Draw.POLYLINE,_geomType:"esriGeometryPolyline",_label:"NLS_polylineLbl"},freehandpolyline:{id:"toolDrawPolyline",_enabledIcon:"toolbarIcon freehandPolylineIcon",_disabledIcon:"toolbarIcon freehandPolylineIcon",_drawType:Draw.FREEHAND_POLYLINE,_geomType:"esriGeometryPolyline",_label:"NLS_freehandPolylineLbl"},polygon:{id:"toolDrawPolygon",_enabledIcon:"toolbarIcon polygonIcon",_disabledIcon:"toolbarIcon polygonIconDisabled",_drawType:Draw.POLYGON,_geomType:"esriGeometryPolygon",_label:"NLS_polygonLbl"},freehandpolygon:{id:"toolDrawFreehandPolygon",_enabledIcon:"toolbarIcon freehandPolygonIcon",_disabledIcon:"toolbarIcon freehandPolygonIconDisabled",_drawType:Draw.FREEHAND_POLYGON,_label:"NLS_freehandPolygonLbl",_geomType:"esriGeometryPolygon"},autocomplete:{id:"btnFeatureAutoComplete",_enabledIcon:"toolbarIcon autoCompleteIcon",_disabledIcon:"toolbarIcon autoCompleteIcon",_drawType:Draw.POLYGON,_label:"NLS_autoCompleteLbl",_geomType:"esriGeometryPolygon"},rectangle:{id:"toolDrawRect",_enabledIcon:"toolbarIcon rectangleIcon",_disabledIcon:"toolbarIcon rectangleIcon",_drawType:Draw.RECTANGLE,_geomType:"esriGeometryPolygon",_label:"NLS_rectangleLbl"},arrow:{id:"toolDrawArrow",_enabledIcon:"toolbarIcon arrowIcon",_disabledIcon:"toolbarIcon arrowIcon",_drawType:Draw.ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowLbl"},uparrow:{id:"toolDrawArrowUp",_enabledIcon:"toolbarIcon arrowUpIcon",_disabledIcon:"toolbarIcon arrowUpIcon",_drawType:Draw.UP_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowUpLbl"},downarrow:{id:"toolDrawDownArrow",_enabledIcon:"toolbarIcon arrowDownIcon",_disabledIcon:"toolbarIcon arrowDownIcon",_drawType:Draw.DOWN_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowDownLbl"},leftarrow:{id:"toolDrawLeftArrow",_enabledIcon:"toolbarIcon arrowLeftIcon",_disabledIcon:"toolbarIcon arrowLeftIcon",_drawType:Draw.LEFT_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowLeftLbl"},rightarrow:{id:"toolDrawRightArrow",_enabledIcon:"toolbarIcon arrowIcon",_disabledIcon:"toolbarIcon arrowIcon",_drawType:Draw.RIGHT_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowRightLbl"},circle:{id:"toolDrawCircle",_enabledIcon:"toolbarIcon circleIcon",_disabledIcon:"toolbarIcon circleIcon",_drawType:Draw.CIRCLE,_geomType:"esriGeometryPolygon",_label:"NLS_circleLbl"},ellipse:{id:"toolDrawEllipse",_enabledIcon:"toolbarIcon ellipseIcon",_disabledIcon:"toolbarIcon ellipseIcon",_drawType:Draw.ELLIPSE,_geomType:"esriGeometryPolygon",_label:"NLS_ellipseLbl"},triangle:{id:"toolDrawTriangle",_enabledIcon:"toolbarIcon triangleIcon",_disabledIcon:"toolbarIcon triangleIcon",_drawType:Draw.TRIANGLE,_geomType:"esriGeometryPolygon",_label:"NLS_triangleLbl"},attributes:{id:"btnAttributes",_enabledIcon:"toolbarIcon attributesIcon",_disabledIcon:"toolbarIcon attributesIcon",_enabled:false,_label:"NLS_attributesLbl"},del:{id:"btnDelete2",_enabledIcon:"toolbarIcon deleteFeatureIcon",_disabledIcon:"toolbarIcon deleteFeatureIcon",_enabled:false,_label:"NLS_deleteLbl"},undo:{id:"btnUndo",_enabledIcon:"dijitEditorIcon dijitEditorIconUndo",_disabledIcon:"dijitEditorIcon dijitEditorIconUndo",_enabled:false,_label:"NLS_undoLbl"},redo:{id:"btnRedo",_enabledIcon:"dijitEditorIcon dijitEditorIconRedo",_disabledIcon:"dijitEditorIcon dijitEditorIconRedo",_enabled:false,_label:"NLS_redoLbl"}};if(has("extend-esri")){lang.setObject("dijit.editing.tools.EditingTools",_e60,_e5f);}return _e60;});},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(_e61,_e62,_e63){return _e62("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_e64,_e65){var _e66=this.containerNode;if(_e65&&typeof _e65=="number"){var _e67=this.getChildren();if(_e67&&_e67.length>=_e65){_e66=_e67[_e65-1].domNode;_e65="after";}}_e63.place(_e64.domNode,_e66,_e65);if(this._started&&!_e64._started){_e64.startup();}},removeChild:function(_e68){if(typeof _e68=="number"){_e68=this.getChildren()[_e68];}if(_e68){var node=_e68.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},_getSiblingOfChild:function(_e69,dir){var _e6a=this.getChildren(),idx=_e61.indexOf(this.getChildren(),_e69);return _e6a[idx+dir];},getIndexOfChild:function(_e6b){return _e61.indexOf(this.getChildren(),_e6b);}});});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_e6c,lang,_e6d,_e6e,xhr,_e6f,_e70,_e71,_e72){var _e73=_e6d("dojo.data.ItemFileReadStore",[_e6f],{constructor:function(_e74){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_e74.url;this._ccUrl=_e74.url;this.url=_e74.url;this._jsonData=_e74.data;this.data=null;this._datatypeMap=_e74.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_e75){return _e72.fromISOString(_e75);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_e74.urlPreventCache!==undefined){this.urlPreventCache=_e74.urlPreventCache?true:false;}if(_e74.hierarchical!==undefined){this.hierarchical=_e74.hierarchical?true:false;}if(_e74.clearOnClose){this.clearOnClose=true;}if("failOk" in _e74){this.failOk=_e74.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_e76){if(typeof _e76!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_e77,_e78){var _e79=this.getValues(item,_e77);return (_e79.length>0)?_e79[0]:_e78;},getValues:function(item,_e7a){this._assertIsItem(item);this._assertIsAttribute(_e7a);return (item[_e7a]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _e7b=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_e7b.push(key);}}return _e7b;},hasAttribute:function(item,_e7c){this._assertIsItem(item);this._assertIsAttribute(_e7c);return (_e7c in item);},containsValue:function(item,_e7d,_e7e){var _e7f=undefined;if(typeof _e7e==="string"){_e7f=_e70.patternToRegExp(_e7e,false);}return this._containsValue(item,_e7d,_e7e,_e7f);},_containsValue:function(item,_e80,_e81,_e82){return _e6e.some(this.getValues(item,_e80),function(_e83){if(_e83!==null&&!lang.isObject(_e83)&&_e82){if(_e83.toString().match(_e82)){return true;}}else{if(_e81===_e83){return true;}}});},isItem:function(_e84){if(_e84&&_e84[this._storeRefPropName]===this){if(this._arrayOfAllItems[_e84[this._itemNumPropName]]===_e84){return true;}}return false;},isItemLoaded:function(_e85){return this.isItem(_e85);},loadItem:function(_e86){this._assertIsItem(_e86.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_e87,_e88,_e89){var _e8a=[],i,key;if(_e87.query){var _e8b,_e8c=_e87.queryOptions?_e87.queryOptions.ignoreCase:false;var _e8d={};for(key in _e87.query){_e8b=_e87.query[key];if(typeof _e8b==="string"){_e8d[key]=_e70.patternToRegExp(_e8b,_e8c);}else{if(_e8b instanceof RegExp){_e8d[key]=_e8b;}}}for(i=0;i<_e88.length;++i){var _e8e=true;var _e8f=_e88[i];if(_e8f===null){_e8e=false;}else{for(key in _e87.query){_e8b=_e87.query[key];if(!this._containsValue(_e8f,key,_e8b,_e8d[key])){_e8e=false;}}}if(_e8e){_e8a.push(_e8f);}}_e89(_e8a,_e87);}else{for(i=0;i<_e88.length;++i){var item=_e88[i];if(item!==null){_e8a.push(item);}}_e89(_e8a,_e87);}},_fetchItems:function(_e90,_e91,_e92){var self=this;if(this._loadFinished){this.filter(_e90,this._getItemsArray(_e90.queryOptions),_e91);}else{if(this._jsonFileUrl!==this._ccUrl){_e6c.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_e90,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_e91)});}else{this._loadInProgress=true;var _e93={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _e94=xhr.get(_e93);_e94.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_e90,self._getItemsArray(_e90.queryOptions),_e91);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_e92(e,_e90);}});_e94.addErrback(function(_e95){self._loadInProgress=false;_e92(_e95,_e90);});var _e96=null;if(_e90.abort){_e96=_e90.abort;}_e90.abort=function(){var df=_e94;if(df&&df.fired===-1){df.cancel();df=null;}if(_e96){_e96.call(_e90);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_e90,this._getItemsArray(_e90.queryOptions),_e91);}catch(e){_e92(e,_e90);}}else{_e92(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_e90);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _e97=this._queuedFetches[i],_e98=_e97.args,_e99=_e97.filter,_e9a=_e97.findCallback;if(_e99){_e99(_e98,this._getItemsArray(_e98.queryOptions),_e9a);}else{this.fetchItemByIdentity(_e98);}}this._queuedFetches=[];}},_getItemsArray:function(_e9b){if(_e9b&&_e9b.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_e9c){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){console.debug(this.declaredClass+": WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_e9d){var _e9e=false,self=this;function _e9f(_ea0){return (_ea0!==null)&&(typeof _ea0==="object")&&(!lang.isArray(_ea0)||_e9e)&&(!lang.isFunction(_ea0))&&(_ea0.constructor==Object||lang.isArray(_ea0))&&(typeof _ea0._reference==="undefined")&&(typeof _ea0._type==="undefined")&&(typeof _ea0._value==="undefined")&&self.hierarchical;};function _ea1(_ea2){self._arrayOfAllItems.push(_ea2);for(var _ea3 in _ea2){var _ea4=_ea2[_ea3];if(_ea4){if(lang.isArray(_ea4)){var _ea5=_ea4;for(var k=0;k<_ea5.length;++k){var _ea6=_ea5[k];if(_e9f(_ea6)){_ea1(_ea6);}}}else{if(_e9f(_ea4)){_ea1(_ea4);}}}}};this._labelAttr=_e9d.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_e9d.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_e9e=true;}_ea1(item);item[this._rootItemPropName]=true;}var _ea7={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _ea8=item[key];if(_ea8!==null){if(!lang.isArray(_ea8)){item[key]=[_ea8];}}else{item[key]=[null];}}_ea7[key]=key;}}while(_ea7[this._storeRefPropName]){this._storeRefPropName+="_";}while(_ea7[this._itemNumPropName]){this._itemNumPropName+="_";}while(_ea7[this._reverseRefMap]){this._reverseRefMap+="_";}var _ea9;var _eaa=_e9d.identifier;if(_eaa){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_eaa;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_ea9=item[_eaa];var _eab=_ea9[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_eab)){this._itemsByIdentity[_eab]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_eaa+"].  Value collided: ["+_eab+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_eaa+"].  Value collided: ["+_eab+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_ea9=item[key];for(var j=0;j<_ea9.length;++j){_ea8=_ea9[j];if(_ea8!==null&&typeof _ea8=="object"){if(("_type" in _ea8)&&("_value" in _ea8)){var type=_ea8._type;var _eac=this._datatypeMap[type];if(!_eac){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_eac)){_ea9[j]=new _eac(_ea8._value);}else{if(lang.isFunction(_eac.deserialize)){_ea9[j]=_eac.deserialize(_ea8._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_ea8._reference){var _ead=_ea8._reference;if(!lang.isObject(_ead)){_ea9[j]=this._getItemByIdentity(_ead);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _eae=this._arrayOfAllItems[k],_eaf=true;for(var _eb0 in _ead){if(_eae[_eb0]!=_ead[_eb0]){_eaf=false;}}if(_eaf){_ea9[j]=_eae;}}}if(this.referenceIntegrity){var _eb1=_ea9[j];if(this.isItem(_eb1)){this._addReferenceToMap(_eb1,item,key);}}}else{if(this.isItem(_ea8)){if(this.referenceIntegrity){this._addReferenceToMap(_ea8,item,key);}}}}}}}},_addReferenceToMap:function(_eb2,_eb3,_eb4){},getIdentity:function(item){var _eb5=this._features["dojo.data.api.Identity"];if(_eb5===Number){return item[this._itemNumPropName];}else{var _eb6=item[_eb5];if(_eb6){return _eb6[0];}}return null;},fetchItemByIdentity:function(_eb7){var item,_eb8;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_e6c.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_eb7});}else{this._loadInProgress=true;var _eb9={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _eba=xhr.get(_eb9);_eba.addCallback(function(data){var _ebb=_eb7.scope?_eb7.scope:_e6c.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_eb7.identity);if(_eb7.onItem){_eb7.onItem.call(_ebb,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_eb7.onError){_eb7.onError.call(_ebb,error);}}});_eba.addErrback(function(_ebc){self._loadInProgress=false;if(_eb7.onError){var _ebd=_eb7.scope?_eb7.scope:_e6c.global;_eb7.onError.call(_ebd,_ebc);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_eb7.identity);if(_eb7.onItem){_eb8=_eb7.scope?_eb7.scope:_e6c.global;_eb7.onItem.call(_eb8,item);}}}}else{item=this._getItemByIdentity(_eb7.identity);if(_eb7.onItem){_eb8=_eb7.scope?_eb7.scope:_e6c.global;_eb7.onItem.call(_eb8,item);}}},_getItemByIdentity:function(_ebe){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_ebe)){item=this._itemsByIdentity[_ebe];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_ebe)){item=this._arrayOfAllItems[_ebe];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _ebf=this._features["dojo.data.api.Identity"];if(_ebf===Number){return null;}else{return [_ebf];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_e6c.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _ec0={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _ec1=xhr.get(_ec0);_ec1.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_ec1.addErrback(function(_ec2){throw _ec2;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_e73,_e71);return _e73;});},"dojo/dnd/Source":function(){define(["../_base/array","../_base/connect","../_base/declare","../_base/kernel","../_base/lang","../dom-class","../dom-geometry","../mouse","../ready","../topic","./common","./Selector","./Manager"],function(_ec3,_ec4,_ec5,_ec6,lang,_ec7,_ec8,_ec9,_eca,_ecb,dnd,_ecc,_ecd){if(!_ec6.isAsync){_eca(0,function(){var _ece=["dojo/dnd/AutoSource","dojo/dnd/Target"];require(_ece);});}var _ecf=_ec5("dojo.dnd.Source",_ecc,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(node,_ed0){lang.mixin(this,lang.mixin({},_ed0));var type=this.accept;if(type.length){this.accept={};for(var i=0;i<type.length;++i){this.accept[type[i]]=1;}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){_ec7.add(this.node,"dojoDndSource");}this.targetState="";if(this.accept){_ec7.add(this.node,"dojoDndTarget");}if(this.horizontal){_ec7.add(this.node,"dojoDndHorizontal");}this.topics=[_ecb.subscribe("/dnd/source/over",lang.hitch(this,"onDndSourceOver")),_ecb.subscribe("/dnd/start",lang.hitch(this,"onDndStart")),_ecb.subscribe("/dnd/drop",lang.hitch(this,"onDndDrop")),_ecb.subscribe("/dnd/cancel",lang.hitch(this,"onDndCancel"))];},checkAcceptance:function(_ed1,_ed2){if(this==_ed1){return !this.copyOnly||this.selfAccept;}for(var i=0;i<_ed2.length;++i){var type=_ed1.getItem(_ed2[i].id).type;var flag=false;for(var j=0;j<type.length;++j){if(type[j] in this.accept){flag=true;break;}}if(!flag){return false;}}return true;},copyState:function(_ed3,self){if(_ed3){return true;}if(arguments.length<2){self=this==_ecd.manager().target;}if(self){if(this.copyOnly){return this.selfCopy;}}else{return this.copyOnly;}return false;},destroy:function(){_ecf.superclass.destroy.call(this);_ec3.forEach(this.topics,function(t){t.remove();});this.targetAnchor=null;},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled"){return;}_ecf.superclass.onMouseMove.call(this,e);var m=_ecd.manager();if(!this.isDragging){if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)){var _ed4=this.getSelectedNodes();if(_ed4.length){m.startDrag(this,_ed4,this.copyState(dnd.getCopyKeyState(e),true));}}}if(this.isDragging){var _ed5=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current){this.targetBox=_ec8.position(this.current,true);}if(this.horizontal){_ed5=(e.pageX-this.targetBox.x<this.targetBox.w/2)==_ec8.isBodyLtr(this.current.ownerDocument);}else{_ed5=(e.pageY-this.targetBox.y)<(this.targetBox.h/2);}}if(this.current!=this.targetAnchor||_ed5!=this.before){this._markTargetAnchor(_ed5);m.canDrop(!this.current||m.source!=this||!(this.current.id in this.selection));}}},onMouseDown:function(e){if(!this.mouseDown&&this._legalMouseDown(e)&&(!this.skipForm||!dnd.isFormElement(e))){this.mouseDown=true;this._lastX=e.pageX;this._lastY=e.pageY;_ecf.superclass.onMouseDown.call(this,e);}},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;_ecf.superclass.onMouseUp.call(this,e);}},onDndSourceOver:function(_ed6){if(this!==_ed6){this.mouseDown=false;if(this.targetAnchor){this._unmarkTargetAnchor();}}else{if(this.isDragging){var m=_ecd.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)));}}},onDndStart:function(_ed7,_ed8,copy){if(this.autoSync){this.sync();}if(this.isSource){this._changeState("Source",this==_ed7?(copy?"Copied":"Moved"):"");}var _ed9=this.accept&&this.checkAcceptance(_ed7,_ed8);this._changeState("Target",_ed9?"":"Disabled");if(this==_ed7){_ecd.manager().overSource(this);}this.isDragging=true;},onDndDrop:function(_eda,_edb,copy,_edc){if(this==_edc){this.onDrop(_eda,_edb,copy);}this.onDndCancel();},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null;}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source","");this._changeState("Target","");},onDrop:function(_edd,_ede,copy){if(this!=_edd){this.onDropExternal(_edd,_ede,copy);}else{this.onDropInternal(_ede,copy);}},onDropExternal:function(_edf,_ee0,copy){var _ee1=this._normalizedCreator;if(this.creator){this._normalizedCreator=function(node,hint){return _ee1.call(this,_edf.getItem(node.id).data,hint);};}else{if(copy){this._normalizedCreator=function(node){var t=_edf.getItem(node.id);var n=node.cloneNode(true);n.id=dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}else{this._normalizedCreator=function(node){var t=_edf.getItem(node.id);_edf.delItem(node.id);return {node:node,data:t.data,type:t.type};};}}this.selectNone();if(!copy&&!this.creator){_edf.selectNone();}this.insertNodes(true,_ee0,this.before,this.current);if(!copy&&this.creator){_edf.deleteSelectedNodes();}this._normalizedCreator=_ee1;},onDropInternal:function(_ee2,copy){var _ee3=this._normalizedCreator;if(this.current&&this.current.id in this.selection){return;}if(copy){if(this.creator){this._normalizedCreator=function(node,hint){return _ee3.call(this,this.getItem(node.id).data,hint);};}else{this._normalizedCreator=function(node){var t=this.getItem(node.id);var n=node.cloneNode(true);n.id=dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}}else{if(!this.current){return;}this._normalizedCreator=function(node){var t=this.getItem(node.id);return {node:node,data:t.data,type:t.type};};}this._removeSelection();this.insertNodes(true,_ee2,this.before,this.current);this._normalizedCreator=_ee3;},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){_ecf.superclass.onOverEvent.call(this);_ecd.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOver();}},onOutEvent:function(){_ecf.superclass.onOutEvent.call(this);_ecd.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOut();}},_markTargetAnchor:function(_ee4){if(this.current==this.targetAnchor&&this.before==_ee4){return;}if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After");}this.targetAnchor=this.current;this.targetBox=null;this.before=_ee4;if(this.targetAnchor){this._addItemClass(this.targetAnchor,this.before?"Before":"After");}},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return;}this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true;},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved");},_legalMouseDown:function(e){if(e.type!="touchstart"&&!_ec9.isLeft(e)){return false;}if(!this.withHandles){return true;}for(var node=e.target;node&&node!==this.node;node=node.parentNode){if(_ec7.contains(node,"dojoDndHandle")){return true;}if(_ec7.contains(node,"dojoDndItem")||_ec7.contains(node,"dojoDndIgnore")){break;}}return false;}});return _ecf;});},"dijit/form/ValidationTextBox":function(){require({cache:{"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(_ee5,_ee6,i18n,_ee7,_ee8,_ee9){var _eea;return _eea=_ee5("dijit.form.ValidationTextBox",_ee7,{templateString:_ee9,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(attr,_eeb){if(_eeb!=_eea.prototype[attr]){_ee6.deprecated("ValidationTextBox id="+this.id+", set('"+attr+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");this.set("pattern",_eeb);}},_setRegExpGenAttr:function(_eec){this._deprecateRegExp("regExpGen",_eec);this.regExpGen=this._getPatternAttr;},_setRegExpAttr:function(_eed){this._deprecateRegExp("regExp",_eed);},_setValueAttr:function(){this.inherited(arguments);this.validate(this.focused);},validator:function(_eee,_eef){return (new RegExp("^(?:"+this._getPatternAttr(_eef)+")"+(this.required?"":"?")+"$")).test(_eee)&&(!this.required||!this._isEmpty(_eee))&&(this._isEmpty(_eee)||this.parse(_eee,_eef)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_ef0){return (this.trim?/^\s*$/:/^$/).test(_ef0);},getErrorMessage:function(){var _ef1=this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;var _ef2=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?_ef1:this.missingMessage;return (this.required&&this._isEmpty(this.textbox.value))?_ef2:_ef1;},getPromptMessage:function(){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_ef3){var _ef4="";var _ef5=this.disabled||this.isValid(_ef3);if(_ef5){this._maskValidSubsetError=true;}var _ef6=this._isEmpty(this.textbox.value);var _ef7=!_ef5&&_ef3&&this._isValidSubset();this._set("state",_ef5?"":(((((!this._hasBeenBlurred||_ef3)&&_ef6)||_ef7)&&(this._maskValidSubsetError||(_ef7&&!this._hasBeenBlurred&&_ef3)))?"Incomplete":"Error"));this.focusNode.setAttribute("aria-invalid",_ef5?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=_ef3&&_ef7;_ef4=this.getErrorMessage(_ef3);}else{if(this.state=="Incomplete"){_ef4=this.getPromptMessage(_ef3);this._maskValidSubsetError=!this._hasBeenBlurred||_ef3;}else{if(_ef6){_ef4=this.getPromptMessage(_ef3);}}}this.set("message",_ef4);return _ef5;},displayMessage:function(_ef8){if(_ef8&&this.focused){_ee8.show(_ef8,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_ee8.hide(this.domNode);}},_refreshState:function(){if(this._created){this.validate(this.focused);}this.inherited(arguments);},constructor:function(_ef9){this.constraints={};this.baseClass+=" dijitValidationTextBox";},startup:function(){this.inherited(arguments);this._refreshState();},_setConstraintsAttr:function(_efa){if(!_efa.locale&&this.lang){_efa.locale=this.lang;}this._set("constraints",_efa);this._refreshState();},_setPatternAttr:function(_efb){this._set("pattern",_efb);},_getPatternAttr:function(_efc){var p=this.pattern;var type=(typeof p).toLowerCase();if(type=="function"){p=this.pattern(_efc||this.constraints);}if(p!=this._lastRegExp){var _efd="";this._lastRegExp=p;if(p!=".*"){p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_efd+=re;break;case ")":_efd+="|$)";break;default:_efd+="(?:"+re+"|$)";break;}});}try{"".search(_efd);}catch(e){_efd=this.pattern;console.warn("RegExp error in "+this.declaredClass+": "+this.pattern);}this._partialre="^(?:"+_efd+")$";}return p;},postMixInProperties:function(){this.inherited(arguments);this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(_efe){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_eff){this._set("required",_eff);this.focusNode.setAttribute("aria-required",_eff);this._refreshState();},_setMessageAttr:function(_f00){this._set("message",_f00);this.displayMessage(_f00);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});});},"esri/toolbars/_VertexMover":function(){define("esri/toolbars/_VertexMover",["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/has","dojo/sniff","dojo/dom-style","dojox/gfx/Moveable","esri/kernel","esri/geometry/Point","esri/graphic","esri/geometry/webMercatorUtils"],function(_f01,lang,_f02,has,_f03,_f04,_f05,_f06,_f07,_f08,_f09){var VM=_f01(null,{declaredClass:"esri.toolbars.VertexMover",constructor:function(_f0a,_f0b,_f0c,_f0d,_f0e,_f0f,_f10,_f11){this.point=_f0a;this.symbol=_f0b;this.relatedGraphic=_f0c;this.segIndex=_f0d;this.ptIndex=_f0e;this.segLength=_f0f;this.editor=_f10;this.map=_f10.map;this._scratchGL=_f10.toolbar._scratchGL;this._placeholder=_f11||false;this._type=_f0c.geometry.type;this._init();this._enable();},refresh:function(_f12){if(_f12||this._needRefresh()){this._disable();this._enable();}},destroy:function(){this._disable();if(this.graphic){this._scratchGL.remove(this.graphic);}this.point=this.symbol=this.graphic=this.relatedGraphic=this.segIndex=this.ptIndex=this.segLength=this.editor=this.map=this._scratchGL=null;},_init:function(){var _f13=new _f07(this.point.toJson());var _f14=new _f08(_f13,this.symbol);switch(this._type){case "multipoint":_f14._shape=this.relatedGraphic.getDojoShape().children[this.ptIndex];break;case "polyline":case "polygon":this._scratchGL.add(_f14);break;}this.graphic=_f14;},_enable:function(){var _f15=this.graphic.getDojoShape();if(_f15){_f15._hasMover=true;this._moveable=this._getMoveable(_f15);var node=_f15.getEventSource();if(node){_f04.set(node,"cursor",this.editor.toolbar._cursors[this._placeholder?"move-gv":"move-v"]);}}},_disable:function(){var _f16=this._moveable;if(_f16){_f02.disconnect(this._startHandle);_f02.disconnect(this._firstHandle);_f02.disconnect(this._movingHandle);_f02.disconnect(this._stopHandle);var _f17=_f16.shape;if(_f17){var node=_f17.getEventSource();if(node){_f04.set(node,"cursor",null);}}_f16.destroy();this._moveable=null;}},_needRefresh:function(){var _f18=this.graphic.getDojoShape(),need=false;if(_f18){switch(this._type){case "multipoint":var _f19=this.relatedGraphic.getDojoShape();if(_f19){var _f1a=_f19.children[this.ptIndex];if(_f18!==_f1a){_f18=_f1a;this.graphic._shape=_f18;need=true;}}break;case "polyline":case "polygon":need=!_f18._hasMover;break;}}return need;},_getMoveable:function(_f1b){var _f1c=new _f05(_f1b,_f03("mac")&&_f03("ff")&&!has("esri-touch")&&{leftButtonOnly:true});this._startHandle=_f02.connect(_f1c,"onMoveStart",this,this._moveStartHandler);this._firstHandle=_f02.connect(_f1c,"onFirstMove",this,this._firstMoveHandler);this._movingHandle=_f02.connect(_f1c,"onMoving",this,this._movingHandler);this._stopHandle=_f02.connect(_f1c,"onMoveStop",this,this._moveStopHandler);return _f1c;},_getPtIndex:function(){return this.ptIndex+(this._placeholder?1:0);},_getInfo:function(){return {graphic:this.graphic,isGhost:this._placeholder,segmentIndex:this.segIndex,pointIndex:this._getPtIndex()};},_moveStartHandler:function(_f1d){var map=this.map;if(map.snappingManager){map.snappingManager._setUpSnapping();}_f1d.shape.moveToFront();this.constructor.onMoveStart(this);this.editor.toolbar.onVertexMoveStart(this.relatedGraphic,this._getInfo());},_firstMoveHandler:function(_f1e){var _f1f=_f1e.shape;var _f20=this._getControlEdges();var _f21=this._scratchGL._div;var i,_f22=[],_f23=_f1e.host.shape._wrapOffsets[0]||0;for(i=0;i<_f20.length;i++){var edge=_f20[i];edge.x1+=_f23;edge.x2+=_f23;_f22.push([_f21.createLine({x1:edge.x1,y1:edge.y1,x2:edge.x2,y2:edge.y2}).setStroke(this.editor._lineStroke),edge.x1,edge.y1,edge.x2,edge.y2]);}_f1f._lines=_f22;_f1e.shape.moveToFront();this.constructor.onFirstMove(this);this.editor.toolbar.onVertexFirstMove(this.relatedGraphic,this._getInfo());},_movingHandler:function(_f24){var _f25=_f24.shape,tx=_f25.getTransform();var i,_f26=_f25._lines;for(i=0;i<_f26.length;i++){var line=_f26[i];line[0].setShape({x1:line[1]+tx.dx,y1:line[2]+tx.dy,x2:line[3],y2:line[4]});}this.editor.toolbar.onVertexMove(this.relatedGraphic,this._getInfo(),tx);},_moveStopHandler:function(_f27){var _f28=_f27.shape,_f29=this.editor.toolbar,tx=_f28.getTransform(),map=this.map,host=this.graphic,_f2a=_f29._geo?_f09.geographicToWebMercator(host.geometry):host.geometry;var i,_f2b=_f28._lines;if(_f2b){for(i=0;i<_f2b.length;i++){_f2b[i][0].removeShape();}_f28._lines=null;}var ph=false,_f2c=true,info=this._getInfo();if(tx&&(tx.dx||tx.dy)){if(this._placeholder){this._placeholder=false;ph=true;}}else{_f2c=false;}var _f2d;if(map.snappingManager){_f2d=map.snappingManager._snappingPoint;}var _f2e=_f2d||map.toMap(map.toScreen(_f2a).offset(tx.dx,tx.dy));if(map.snappingManager){map.snappingManager._killOffSnapping();}_f28.setTransform(null);host.setGeometry(_f29._geo?_f09.webMercatorToGeographic(_f2e,true):_f2e);this.constructor.onMoveStop(this,tx);_f29.onVertexMoveStop(this.relatedGraphic,info,tx);if(!_f2c){_f29.onVertexClick(this.relatedGraphic,info);}if(ph){_f29.onVertexAdd(this.relatedGraphic,this._getInfo());}},_getControlEdges:function(){var map=this.map;var _f2f=this.relatedGraphic.geometry;var _f30=this.segIndex,_f31=this.ptIndex,_f32=this.segLength;var _f33=this._scratchGL._div;var _f34=_f33.getTransform();var sdx=_f34.dx,sdy=_f34.dy;var pt=map.toScreen(this.graphic.geometry);var x=pt.x-sdx,y=pt.y-sdy;var _f35=[];var _f36=this.editor._getControlPoints(this,_f2f,_f30,_f31,_f32);if(_f36[0]){_f35.push({x1:x,y1:y,x2:_f36[0].x-sdx,y2:_f36[0].y-sdy});}if(_f36[1]){_f35.push({x1:x,y1:y,x2:_f36[1].x-sdx,y2:_f36[1].y-sdy});}return _f35;}});if(has("extend-esri")){lang.setObject("toolbars.VertexMover",VM,_f06);}lang.mixin(VM,{onMoveStart:function(){},onFirstMove:function(){},onMoveStop:function(){}});return VM;});},"url:esri/dijit/editing/templates/Editor.html":"<div class=\"esriEditor\">\r\n    <div class=\"esriTemplatePicker\" dojoAttachPoint=\"templatePickerDiv\"></div>\r\n    <div class=\"esriDrawingToolbar\" dojoAttachPoint=\"drawingToolbarDiv\"></div>\r\n    <div class=\"progressBar\" dojoAttachPoint=\"progressBar\" indeterminate=\"true\" dojoType=\"dijit.ProgressBar\" />\r\n</div>","esri/tasks/OffsetParameters":function(){define("esri/tasks/OffsetParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_f37,lang,_f38,_f39,has,_f3a,_f3b){var _f3c=_f37(null,{declaredClass:"esri.tasks.OffsetParameters",geometries:null,bevelRatio:null,offsetDistance:null,offsetHow:null,offsetUnit:null,toJson:function(){var _f3d=_f38.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_f39.toJson({geometryType:_f3b.getJsonType(this.geometries[0]),geometries:_f3d});json.sr=_f39.toJson(this.geometries[0].spatialReference.toJson());}if(this.bevelRatio){json.bevelRatio=this.bevelRatio;}if(this.offsetDistance){json.offsetDistance=this.offsetDistance;}if(this.offsetHow){json.offsetHow=this.offsetHow;}if(this.offsetUnit){json.offsetUnit=this.offsetUnit;}return json;}});lang.mixin(_f3c,{OFFSET_BEVELLED:"esriGeometryOffsetBevelled",OFFSET_MITERED:"esriGeometryOffsetMitered",OFFSET_ROUNDED:"esriGeometryOffsetRounded"});if(has("extend-esri")){lang.setObject("tasks.OffsetParameters",_f3c,_f3a);}return _f3c;});},"esri/toolbars/edit":function(){define("esri/toolbars/edit",["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/Color","dojo/has","esri/kernel","esri/lang","esri/sniff","esri/toolbars/_toolbar","esri/toolbars/_Box","esri/toolbars/_GraphicMover","esri/toolbars/_VertexEditor","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_f3e,lang,_f3f,_f40,_f41,has,_f42,_f43,_f44,_f45,Box,_f46,_f47,_f48,_f49){var EDT=_f3e(_f45,{declaredClass:"esri.toolbars.Edit",constructor:function(map,_f4a){this._map=map;this._tool=0;this._scratchGL=map.graphics;var _f4b=has("esri-touch")||has("esri-pointer");this._defaultOptions=lang.mixin({vertexSymbol:new _f48(_f48.STYLE_CIRCLE,_f4b?20:12,new _f49(_f49.STYLE_SOLID,new _f41([0,0,0,0.5]),1),new _f41([128,128,128])),ghostVertexSymbol:new _f48(_f48.STYLE_CIRCLE,_f4b?18:10,new _f49(_f49.STYLE_SOLID,new _f41([0,0,0,0.5]),1),new _f41([255,255,255,0.75])),ghostLineSymbol:new _f49(_f49.STYLE_DOT,new _f41([128,128,128]),2),allowDeleteVertices:true,allowAddVertices:true,rotateHandleOffset:_f4b?24:16,boxLineSymbol:new _f49(_f49.STYLE_DASH,new _f41([64,64,64]),1),boxHandleSymbol:new _f48(_f48.STYLE_SQUARE,_f4b?16:9,new _f49(_f49.STYLE_SOLID,new _f41([0,0,0,0.5]),1),new _f41([255,255,255,0.75]))},_f4a||{});},activate:function(tool,_f4c,_f4d){this.deactivate();this._graphic=_f4c;this._options=lang.mixin(lang.mixin({},this._defaultOptions),_f4d||{});var MOVE=EDT.MOVE,EDIT=EDT.EDIT_VERTICES,_f4e=EDT.SCALE,_f4f=EDT.ROTATE,move=false,edit=false,box=false,map=this._map,_f50=map.spatialReference,_f51=_f4c.geometry.spatialReference;this._geo=!!(_f50&&_f51&&!_f50.equals(_f51)&&_f50.isWebMercator()&&_f51.wkid===4326);if((tool&MOVE)===MOVE){move=this._enableMove(_f4c);}var _f52=((tool&_f4e)===_f4e),_f53=((tool&_f4f)===_f4f);if(_f52||_f53){box=this._enableBoxEditing(_f4c,_f52,_f53);}if((tool&EDIT)===EDIT){edit=this._enableVertexEditing(_f4c);}if(!(move||edit||box)){throw new Error("[esri.toolbars.Edit::activate] Unable to activate the tool. Check if the tool is valid for the given geometry type.");}this._tool=tool;if(this._tool){this._mapPanEndHandle=_f3f.connect(map,"onPanEnd",this,this._mapPanEndHandler);this._mapExtChgHandle=_f3f.connect(map,"onExtentChange",this,this._mapExtentChangeHandler);this.onActivate(this._tool,_f4c);}if(map.snappingManager&&(move||edit)){map.snappingManager._startSelectionLayerQuery();}},deactivate:function(){var tool=this._tool,_f54=this._graphic;if(!tool){return;}var _f55=!!this._modified;this._clear();_f3f.disconnect(this._mapPanEndHandle);_f3f.disconnect(this._mapExtChgHandle);this._mapPanEndHandle=this._mapExtChgHandle=null;this._graphic=this._geo=null;this.onDeactivate(tool,_f54,{isModified:_f55});if(this._map.snappingManager){this._map.snappingManager._stopSelectionLayerQuery();}},refresh:function(){this._refreshMoveables(true);},getCurrentState:function(){return {tool:this._tool,graphic:this._graphic,isModified:!!this._modified};},onActivate:function(tool,_f56){},onDeactivate:function(tool,_f57,info){},onGraphicMoveStart:function(_f58){},onGraphicFirstMove:function(_f59){this._modified=true;},onGraphicMove:function(_f5a,_f5b){},onGraphicMoveStop:function(_f5c,_f5d){},onGraphicClick:function(_f5e,info){},onVertexMoveStart:function(_f5f,_f60){},onVertexFirstMove:function(_f61,_f62){this._modified=true;},onVertexMove:function(_f63,_f64,_f65){},onVertexMoveStop:function(_f66,_f67,_f68){},onVertexAdd:function(_f69,_f6a){this._modified=true;},onVertexClick:function(_f6b,_f6c){},onVertexMouseOver:function(_f6d,_f6e){},onVertexMouseOut:function(_f6f,_f70){},onVertexDelete:function(_f71,_f72){this._modified=true;},onScaleStart:function(_f73){},onScaleFirstMove:function(_f74){this._modified=true;},onScale:function(_f75,info){},onScaleStop:function(_f76,info){},onRotateStart:function(_f77){},onRotateFirstMove:function(_f78){this._modified=true;},onRotate:function(_f79,info){},onRotateStop:function(_f7a,info){},_enableMove:function(_f7b){var map=this._map,type=_f7b.geometry.type;switch(type){case "point":case "polyline":case "polygon":this._graphicMover=new _f46(_f7b,map,this);return true;case "multipoint":break;}return false;},_enableVertexEditing:function(_f7c){var map=this._map,type=_f7c.geometry.type;switch(type){case "point":break;case "multipoint":case "polyline":case "polygon":this._vertexEditor=_f47.create(_f7c,map,this);return true;}return false;},_enableBoxEditing:function(_f7d,_f7e,_f7f){var map=this._map,type=_f7d.geometry.type;switch(type){case "point":case "multipoint":break;case "polyline":case "polygon":this._boxEditor=new Box(_f7d,map,this,_f7e,_f7f,this._options.uniformScaling);return true;}return false;},_disableMove:function(){var _f80=this._graphicMover;if(_f80){_f80.destroy();this._graphicMover=null;}},_disableVertexEditing:function(){var _f81=this._vertexEditor;if(_f81){_f81.destroy();this._vertexEditor=null;}},_disableBoxEditing:function(){var box=this._boxEditor;if(box){box.destroy();this._boxEditor=null;}},_clear:function(){this._disableMove();this._disableVertexEditing();this._disableBoxEditing();this._tool=0;this._modified=false;},_mapPanEndHandler:function(){this._refreshMoveables();},_mapExtentChangeHandler:function(e,d,_f82){if(_f82){this._refreshMoveables();}},_refreshMoveables:function(_f83){var _f84=_f40.filter([this._graphicMover,this._vertexEditor,this._boxEditor],_f43.isDefined);_f40.forEach(_f84,function(mov){mov.refresh(_f83);});},_beginOperation:function(_f85){_f40.forEach(this._getAffectedTools(_f85),function(tool){tool.suspend();});},_endOperation:function(_f86){_f40.forEach(this._getAffectedTools(_f86),function(tool){tool.resume();});},_getAffectedTools:function(_f87){var _f88=[];switch(_f87){case "MOVE":_f88=[this._vertexEditor,this._boxEditor];break;case "VERTICES":_f88=[this._boxEditor];break;case "BOX":_f88=[this._vertexEditor];break;}_f88=_f40.filter(_f88,_f43.isDefined);return _f88;}});lang.mixin(EDT,{MOVE:1,EDIT_VERTICES:2,SCALE:4,ROTATE:8});if(has("extend-esri")){lang.setObject("toolbars.Edit",EDT,_f42);}return EDT;});},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(lang){var _f89={};lang.setObject("dojo.data.util.filter",_f89);_f89.patternToRegExp=function(_f8a,_f8b){var rxp="^";var c=null;for(var i=0;i<_f8a.length;i++){c=_f8a.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_f8a.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_f8b){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _f89;});},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(_f8c,_f8d,_f8e){return _f8d("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,_beforeFillContent:function(){if(this.widgetsInTemplate){var node=this.domNode;var cw=(this._startupWidgets=_f8e.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"}));if(!cw.isFulfilled()){throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}this._attachTemplateNodes(cw,function(n,p){return n[p];});}},startup:function(){_f8c.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"esri/dijit/editing/toolbars/Drawing":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/has","dijit/_CssStateMixin","esri/dijit/editing/Util","esri/dijit/editing/toolbars/ToolbarBase","esri/dijit/editing/tools/ButtonToolBase","esri/dijit/editing/tools/Cut","esri/dijit/editing/tools/Union","esri/dijit/editing/tools/Reshape","esri/dijit/editing/tools/Editing","esri/dijit/editing/tools/EditingTools","esri/dijit/editing/tools/Selection","esri/dijit/editing/tools/SelectionTools","esri/kernel"],function(_f8f,lang,_f90,_f91,has,_f92,_f93,_f94,_f95,Cut,_f96,_f97,_f98,_f99,_f9a,_f9b,_f9c){var _f9d=_f8f([_f94,_f92],{declaredClass:"esri.dijit.editing.toolbars.Drawing",onShowAttributeInspector:function(){},_activateTool:function(tool,_f9e){this._settings.editor._activeTool=tool;if(tool!=="EDITING"){this._settings.templatePicker.clearSelection();}if(tool!=="ATTRIBUTES"){this._settings.editor._hideAttributeInspector();}if(tool==="CLEAR"){return;}this.inherited(arguments);},_initializeToolbar:function(){var _f9f=this._settings.layers;_f90.forEach(_f9f,function(_fa0){this._tbConnects.push(_f91.connect(_fa0,"onSelectionComplete",this,"_updateUI"));},this);},activateEditing:function(_fa1,_fa2){this._tools.EDITING._activateTool(_fa1,_fa2.geometryType);this._activeTool=this._tools.EDITING;this._activeTool.setChecked(true);},_updateUI:function(){if(this._settings.undoManager){this._tools.UNDO.set("disabled",this._settings.undoManager.canUndo===false);this._tools.REDO.set("disabled",this._settings.undoManager.canRedo===false);}this._selectedFeatures=_f93.getSelection(this._settings.layers);var _fa3=this._selectedFeatures.length;if(this._tools.DELETE){this._tools.DELETE.set("disabled",_fa3<=0);}if(this._tools.CLEAR){this._tools.CLEAR.set("disabled",_fa3<=0);}if(this._tools.ATTRIBUTES){this._tools.ATTRIBUTES.set("disabled",_fa3<=0);}if(this._tools.UNION){this._tools.UNION.set("disabled",_fa3<2);}},_toolFinished:function(tool){if(tool==="ATTRIBUTES"&&(this._selectedFeatures&&this._selectedFeatures.length)){this.onShowAttributeInspector(this._selectedFeatures[0]);}if(tool==="SELECT"||tool==="CUT"||tool==="RESHAPING"||tool==="EDITING"){this._activeTool.deactivate();this._activeTool.setChecked(false);this._activeTool=null;}if(tool==="DELETE"){this.onDelete();}this._updateUI();},_createTools:function(){this._tools.SELECT=new _f9a({settings:this._settings,onClick:lang.hitch(this,"_activateTool","SELECT",true),onFinished:lang.hitch(this,"_toolFinished","SELECT")});this.addChild(this._tools.SELECT);this._tools.CLEAR=new _f95(lang.mixin(_f9b.selectClear,{settings:this._settings,onClick:lang.hitch(this._settings.editor,"_clearSelection",false)}));this.addChild(this._tools.CLEAR);this._createSeparator();this._tools.ATTRIBUTES=new _f95(lang.mixin(_f99.attributes,{settings:this._settings,onClick:lang.hitch(this,"_toolFinished","ATTRIBUTES")}));this.addChild(this._tools.ATTRIBUTES);this._createSeparator();this._tools.EDITING=new _f98({settings:this._settings,onClick:lang.hitch(this,"_activateTool","EDITING",true),onApplyEdits:lang.hitch(this,"onApplyEdits"),onFinished:lang.hitch(this,"_toolFinished","EDITING")});this.addChild(this._tools.EDITING);this._tools.DELETE=new _f95(lang.mixin(_f99.del,{settings:this._settings,onClick:lang.hitch(this,"_toolFinished","DELETE")}));this.addChild(this._tools.DELETE);if(this._settings.toolbarOptions){if(this._settings.toolbarOptions.cutVisible||this._settings.toolbarOptions.mergeVisible||this._settings.toolbarOptions.reshapeVisible){this._createSeparator();}if(this._settings.toolbarOptions.cutVisible){this._tools.CUT=new Cut({settings:this._settings,onFinished:lang.hitch(this,"_toolFinished","CUT"),onClick:lang.hitch(this,"_activateTool","CUT",true),onApplyEdits:lang.hitch(this,"onApplyEdits")});this.addChild(this._tools.CUT);}if(this._settings.toolbarOptions.mergeVisible){this._tools.UNION=new _f96({settings:this._settings,onFinished:lang.hitch(this,"_toolFinished","UNION"),onApplyEdits:lang.hitch(this,"onApplyEdits")});this.addChild(this._tools.UNION);}if(this._settings.toolbarOptions.reshapeVisible){this._tools.RESHAPING=new _f97({settings:this._settings,onClick:lang.hitch(this,"_activateTool","RESHAPING",true),onFinished:lang.hitch(this,"_toolFinished","RESHAPING"),onApplyEdits:lang.hitch(this,"onApplyEdits")});this.addChild(this._tools.RESHAPING);}}if(this._settings.enableUndoRedo){this._createSeparator();this._tools.UNDO=new _f95(lang.mixin(_f99.undo,{settings:this._settings,onClick:lang.hitch(this,function(){this._tools.UNDO.set("disabled",true);this._tools.REDO.set("disabled",true);this._settings.editor._undo();})}));this.addChild(this._tools.UNDO);this._tools.REDO=new _f95(lang.mixin(_f99.redo,{settings:this._settings,onClick:lang.hitch(this,function(){this._tools.UNDO.set("disabled",true);this._tools.REDO.set("disabled",true);this._settings.editor._redo();})}));this.addChild(this._tools.REDO);}}});if(has("extend-esri")){lang.setObject("dijit.editing.toolbars.Drawing",_f9d,_f9c);}return _f9d;});},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_fa4,_fa5,_fa6,lang){lang.extend(_fa5,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _fa6("dijit._FocusMixin",null,{_focusManager:_fa4});});},"esri/dijit/editing/tools/Reshape":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/has","esri/layers/FeatureLayer","esri/tasks/query","esri/toolbars/draw","esri/dijit/editing/tools/ToggleToolBase","esri/kernel"],function(_fa7,lang,_fa8,_fa9,has,_faa,_fab,Draw,_fac,_fad){var _fae=_fa7([_fac],{declaredClass:"esri.dijit.editing.tools.Reshape",id:"btnFeatureReshape",_enabledIcon:"toolbarIcon reshapeIcon",_disabledIcon:"toolbarIcon reshapeIcon",_drawType:Draw.POLYLINE,_enabled:true,_label:"NLS_reshapeLbl",activate:function(){_fa9.disconnect(this._rConnect);this._rConnect=_fa9.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd");this.inherited(arguments);},deactivate:function(){this.inherited(arguments);_fa9.disconnect(this._rConnect);delete this._rConnect;},_onDrawEnd:function(_faf){var _fb0=this._settings.layers;var _fb1=new _fab();_fb1.geometry=_faf;var _fb2=this._reshapeLayers=_fa8.filter(_fb0,function(_fb3){return (_fb3.geometryType==="esriGeometryPolygon"||"esriGeometryPolyline");});this._settings.editor._selectionHelper.selectFeatures(_fb2,_fb1,_faa.SELECTION_NEW,lang.hitch(this,"_reshape",_fb1));},_reshape:function(_fb4,_fb5){var _fb6=[];var _fb7=_fb5;if(_fb7.length!==1){return;}this._settings.geometryService.reshape(_fb7[0].geometry,_fb4.geometry,lang.hitch(this,function(_fb8){var _fb9=[_fb7[0].setGeometry(_fb8)];this.onApplyEdits([{layer:_fb7[0].getLayer(),updates:_fb9}],lang.hitch(this,function(){this._settings.editor._selectionHelper.clearSelection(false);this.onFinished();}));}));}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Reshape",_fae,_fad);}return _fae;});},"esri/dijit/editing/tools/ToggleToolBase":function(){define("esri/dijit/editing/tools/ToggleToolBase",["dojo/_base/declare","dojo/_base/lang","dojo/has","dijit/form/ToggleButton","esri/dijit/editing/tools/ToolBase","esri/kernel"],function(_fba,lang,has,_fbb,_fbc,_fbd){var TTB=_fba([_fbb,_fbc],{declaredClass:"esri.dijit.editing.tools.ToggleToolBase",postCreate:function(){this.inherited(arguments);if(this._setShowLabelAttr){this._setShowLabelAttr(false);}},destroy:function(){_fbb.prototype.destroy.apply(this,arguments);_fbc.prototype.destroy.apply(this,arguments);},setChecked:function(_fbe){_fbb.prototype.setChecked.apply(this,arguments);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.ToggleToolBase",TTB,_fbd);}return TTB;});},"dojox/grid/_Builder":function(){define("dojox/grid/_Builder",["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/window","dojo/_base/event","dojo/_base/sniff","dojo/_base/connect","dojo/dnd/Moveable","dojox/html/metrics","./util","dojo/_base/html"],function(_fbf,_fc0,lang,win,_fc1,has,_fc2,_fc3,_fc4,util,html){var dg=_fbf.grid;var _fc5=function(td){return td.cellIndex>=0?td.cellIndex:_fc0.indexOf(td.parentNode.cells,td);};var _fc6=function(tr){return tr.rowIndex>=0?tr.rowIndex:_fc0.indexOf(tr.parentNode.childNodes,tr);};var _fc7=function(_fc8,_fc9){return _fc8&&((_fc8.rows||0)[_fc9]||_fc8.childNodes[_fc9]);};var _fca=function(node){for(var n=node;n&&n.tagName!="TABLE";n=n.parentNode){}return n;};var _fcb=function(_fcc,_fcd){for(var n=_fcc;n&&_fcd(n);n=n.parentNode){}return n;};var _fce=function(_fcf){var name=_fcf.toUpperCase();return function(node){return node.tagName!=name;};};var _fd0=util.rowIndexTag;var _fd1=util.gridViewTag;var _fd2=dg._Builder=lang.extend(function(view){if(view){this.view=view;this.grid=view.grid;}},{view:null,_table:"<table class=\"dojoxGridRowTable\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"",getTableArray:function(){var html=[this._table];if(this.view.viewWidth){html.push([" style=\"width:",this.view.viewWidth,";\""].join(""));}html.push(">");return html;},generateCellMarkup:function(_fd3,_fd4,_fd5,_fd6){var _fd7=[],html;if(_fd6){var _fd8=_fd3.index!=_fd3.grid.getSortIndex()?"":_fd3.grid.sortInfo>0?"aria-sort=\"ascending\"":"aria-sort=\"descending\"";if(!_fd3.id){_fd3.id=this.grid.id+"Hdr"+_fd3.index;}html=["<th tabIndex=\"-1\" aria-readonly=\"true\" role=\"columnheader\"",_fd8,"id=\"",_fd3.id,"\""];}else{var _fd9=this.grid.editable&&!_fd3.editable?"aria-readonly=\"true\"":"";html=["<td tabIndex=\"-1\" role=\"gridcell\"",_fd9];}if(_fd3.colSpan){html.push(" colspan=\"",_fd3.colSpan,"\"");}if(_fd3.rowSpan){html.push(" rowspan=\"",_fd3.rowSpan,"\"");}html.push(" class=\"dojoxGridCell ");if(_fd3.classes){html.push(_fd3.classes," ");}if(_fd5){html.push(_fd5," ");}_fd7.push(html.join(""));_fd7.push("");html=["\" idx=\"",_fd3.index,"\" style=\""];if(_fd4&&_fd4[_fd4.length-1]!=";"){_fd4+=";";}html.push(_fd3.styles,_fd4||"",_fd3.hidden?"display:none;":"");if(_fd3.unitWidth){html.push("width:",_fd3.unitWidth,";");}_fd7.push(html.join(""));_fd7.push("");html=["\""];if(_fd3.attrs){html.push(" ",_fd3.attrs);}html.push(">");_fd7.push(html.join(""));_fd7.push("");_fd7.push(_fd6?"</th>":"</td>");return _fd7;},isCellNode:function(_fda){return Boolean(_fda&&_fda!=win.doc&&html.attr(_fda,"idx"));},getCellNodeIndex:function(_fdb){return _fdb?Number(html.attr(_fdb,"idx")):-1;},getCellNode:function(_fdc,_fdd){for(var i=0,row;((row=_fc7(_fdc.firstChild,i))&&row.cells);i++){for(var j=0,cell;(cell=row.cells[j]);j++){if(this.getCellNodeIndex(cell)==_fdd){return cell;}}}return null;},findCellTarget:function(_fde,_fdf){var n=_fde;while(n&&(!this.isCellNode(n)||(n.offsetParent&&_fd1 in n.offsetParent.parentNode&&n.offsetParent.parentNode[_fd1]!=this.view.id))&&(n!=_fdf)){n=n.parentNode;}return n!=_fdf?n:null;},baseDecorateEvent:function(e){e.dispatch="do"+e.type;e.grid=this.grid;e.sourceView=this.view;e.cellNode=this.findCellTarget(e.target,e.rowNode);e.cellIndex=this.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);},findTarget:function(_fe0,_fe1){var n=_fe0;while(n&&(n!=this.domNode)&&(!(_fe1 in n)||(_fd1 in n&&n[_fd1]!=this.view.id))){n=n.parentNode;}return (n!=this.domNode)?n:null;},findRowTarget:function(_fe2){return this.findTarget(_fe2,_fd0);},isIntraNodeEvent:function(e){try{return (e.cellNode&&e.relatedTarget&&html.isDescendant(e.relatedTarget,e.cellNode));}catch(x){return false;}},isIntraRowEvent:function(e){try{var row=e.relatedTarget&&this.findRowTarget(e.relatedTarget);return !row&&(e.rowIndex==-1)||row&&(e.rowIndex==row.gridRowIndex);}catch(x){return false;}},dispatchEvent:function(e){if(e.dispatch in this){return this[e.dispatch](e);}return false;},domouseover:function(e){if(e.cellNode&&(e.cellNode!=this.lastOverCellNode)){this.lastOverCellNode=e.cellNode;this.grid.onMouseOver(e);}this.grid.onMouseOverRow(e);},domouseout:function(e){if(e.cellNode&&(e.cellNode==this.lastOverCellNode)&&!this.isIntraNodeEvent(e,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(e);if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}},domousedown:function(e){if(e.cellNode){this.grid.onMouseDown(e);}this.grid.onMouseDownRow(e);}});var _fe3=dg._ContentBuilder=lang.extend(function(view){_fd2.call(this,view);},_fd2.prototype,{update:function(){this.prepareHtml();},prepareHtml:function(){var _fe4=this.grid.get,_fe5=this.view.structure.cells;for(var j=0,row;(row=_fe5[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.get=cell.get||(cell.value==undefined)&&_fe4;cell.markup=this.generateCellMarkup(cell,cell.cellStyles,cell.cellClasses,false);if(!this.grid.editable&&cell.editable){this.grid.editable=true;}}}},generateHtml:function(_fe6,_fe7){var html=this.getTableArray(),v=this.view,_fe8=v.structure.cells,item=this.grid.getItem(_fe7);util.fire(this.view,"onBeforeRow",[_fe7,_fe8]);for(var j=0,row;(row=_fe8[j]);j++){if(row.hidden||row.header){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,m,cc,cs;(cell=row[i]);i++){m=cell.markup;cc=cell.customClasses=[];cs=cell.customStyles=[];m[5]=cell.format(_fe7,item);m[1]=cc.join(" ");m[3]=cs.join(";");html.push.apply(html,m);}html.push("</tr>");}html.push("</table>");return html.join("");},decorateEvent:function(e){e.rowNode=this.findRowTarget(e.target);if(!e.rowNode){return false;}e.rowIndex=e.rowNode[_fd0];this.baseDecorateEvent(e);e.cell=this.grid.getCell(e.cellIndex);return true;}});var _fe9=dg._HeaderBuilder=lang.extend(function(view){this.moveable=null;_fd2.call(this,view);},_fd2.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap){this.tableMap.mapRows(this.view.structure.cells);}else{this.tableMap=new dg._TableMap(this.view.structure.cells);}},generateHtml:function(_fea,_feb){var html=this.getTableArray(),_fec=this.view.structure.cells;util.fire(this.view,"onBeforeRow",[-1,_fec]);for(var j=0,row;(row=_fec[j]);j++){if(row.hidden){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,_fed;(cell=row[i]);i++){cell.customClasses=[];cell.customStyles=[];if(this.view.simpleStructure){if(cell.draggable){if(cell.headerClasses){if(cell.headerClasses.indexOf("dojoDndItem")==-1){cell.headerClasses+=" dojoDndItem";}}else{cell.headerClasses="dojoDndItem";}}if(cell.attrs){if(cell.attrs.indexOf("dndType='gridColumn_")==-1){cell.attrs+=" dndType='gridColumn_"+this.grid.id+"'";}}else{cell.attrs="dndType='gridColumn_"+this.grid.id+"'";}}_fed=this.generateCellMarkup(cell,cell.headerStyles,cell.headerClasses,true);_fed[5]=(_feb!=undefined?_feb:_fea(cell));_fed[3]=cell.customStyles.join(";");_fed[1]=cell.customClasses.join(" ");html.push(_fed.join(""));}html.push("</tr>");}html.push("</table>");return html.join("");},getCellX:function(e){var n,x=e.layerX;if(has("mozilla")||has("ie")>=9){n=_fcb(e.target,_fce("th"));x-=(n&&n.offsetLeft)||0;var t=e.sourceView.getScrollbarWidth();if(!this.grid.isLeftToRight()){table=_fcb(n,_fce("table"));x-=(table&&table.offsetLeft)||0;}}n=_fcb(e.target,function(){if(!n||n==e.cellNode){return false;}x+=(n.offsetLeft<0?0:n.offsetLeft);return true;});return x;},decorateEvent:function(e){this.baseDecorateEvent(e);e.rowIndex=-1;e.cellX=this.getCellX(e);return true;},prepareResize:function(e,mod){do{var i=e.cellIndex;e.cellNode=(i?e.cellNode.parentNode.cells[i+mod]:null);e.cellIndex=(e.cellNode?this.getCellNodeIndex(e.cellNode):-1);}while(e.cellNode&&e.cellNode.style.display=="none");return Boolean(e.cellNode);},canResize:function(e){if(!e.cellNode||e.cellNode.colSpan>1){return false;}var cell=this.grid.getCell(e.cellIndex);return !cell.noresize&&cell.canResize();},overLeftResizeArea:function(e){if(html.hasClass(win.body(),"dojoDndMove")){return false;}if(has("ie")){var tN=e.target;if(html.hasClass(tN,"dojoxGridArrowButtonNode")||html.hasClass(tN,"dojoxGridArrowButtonChar")||html.hasClass(tN,"dojoxGridColCaption")){return false;}}if(this.grid.isLeftToRight()){return (e.cellIndex>0)&&(e.cellX>0&&e.cellX<this.overResizeWidth)&&this.prepareResize(e,-1);}var t=e.cellNode&&(e.cellX>0&&e.cellX<this.overResizeWidth);return t;},overRightResizeArea:function(e){if(html.hasClass(win.body(),"dojoDndMove")){return false;}if(has("ie")){var tN=e.target;if(html.hasClass(tN,"dojoxGridArrowButtonNode")||html.hasClass(tN,"dojoxGridArrowButtonChar")||html.hasClass(tN,"dojoxGridColCaption")){return false;}}if(this.grid.isLeftToRight()){return e.cellNode&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth);}return (e.cellIndex>0)&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth)&&this.prepareResize(e,-1);},domousemove:function(e){if(!this.moveable){var c=(this.overRightResizeArea(e)?"dojoxGridColResize":(this.overLeftResizeArea(e)?"dojoxGridColResize":""));if(c&&!this.canResize(e)){c="dojoxGridColNoResize";}html.toggleClass(e.sourceView.headerNode,"dojoxGridColNoResize",(c=="dojoxGridColNoResize"));html.toggleClass(e.sourceView.headerNode,"dojoxGridColResize",(c=="dojoxGridColResize"));if(c){_fc1.stop(e);}}},domousedown:function(e){if(!this.moveable){if((this.overRightResizeArea(e)||this.overLeftResizeArea(e))&&this.canResize(e)){this.beginColumnResize(e);}else{this.grid.onMouseDown(e);this.grid.onMouseOverRow(e);}}},doclick:function(e){if(this._skipBogusClicks){_fc1.stop(e);return true;}return false;},colResizeSetup:function(e,_fee){var _fef=html.contentBox(e.sourceView.headerNode);if(_fee){this.lineDiv=document.createElement("div");var vw=html.position(e.sourceView.headerNode,true);var _ff0=html.contentBox(e.sourceView.domNode);var l=e.pageX;if(!this.grid.isLeftToRight()&&has("ie")<8){l-=_fc4.getScrollbar().w;}html.style(this.lineDiv,{top:vw.y+"px",left:l+"px",height:(_ff0.h+_fef.h)+"px"});html.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=l;win.body().appendChild(this.lineDiv);}var _ff1=[],_ff2=this.tableMap.findOverlappingNodes(e.cellNode);for(var i=0,cell;(cell=_ff2[i]);i++){_ff1.push({node:cell,index:this.getCellNodeIndex(cell),width:cell.offsetWidth});}var view=e.sourceView;var adj=this.grid.isLeftToRight()?1:-1;var _ff3=e.grid.views.views;var _ff4=[];for(var j=view.idx+adj,_ff5;(_ff5=_ff3[j]);j=j+adj){_ff4.push({node:_ff5.headerNode,left:window.parseInt(_ff5.headerNode.style.left)});}var _ff6=view.headerContentNode.firstChild;var drag={scrollLeft:e.sourceView.headerNode.scrollLeft,view:view,node:e.cellNode,index:e.cellIndex,w:html.contentBox(e.cellNode).w,vw:_fef.w,table:_ff6,tw:html.contentBox(_ff6).w,spanners:_ff1,followers:_ff4};return drag;},beginColumnResize:function(e){this.moverDiv=document.createElement("div");html.style(this.moverDiv,{position:"absolute",left:0});win.body().appendChild(this.moverDiv);html.addClass(this.grid.domNode,"dojoxGridColumnResizing");var m=(this.moveable=new _fc3(this.moverDiv));var drag=this.colResizeSetup(e,true);m.onMove=lang.hitch(this,"doResizeColumn",drag);_fc2.connect(m,"onMoveStop",lang.hitch(this,function(){this.endResizeColumn(drag);if(drag.node.releaseCapture){drag.node.releaseCapture();}this.moveable.destroy();delete this.moveable;this.moveable=null;html.removeClass(this.grid.domNode,"dojoxGridColumnResizing");}));if(e.cellNode.setCapture){e.cellNode.setCapture();}m.onMouseDown(e);},doResizeColumn:function(_ff7,_ff8,_ff9){var _ffa=_ff9.l;var data={deltaX:_ffa,w:_ff7.w+(this.grid.isLeftToRight()?_ffa:-_ffa),vw:_ff7.vw+_ffa,tw:_ff7.tw+_ffa};this.dragRecord={inDrag:_ff7,mover:_ff8,leftTop:_ff9};if(data.w>=this.minColWidth){if(!_ff8){this.doResizeNow(_ff7,data);}else{html.style(this.lineDiv,"left",(this.lineDiv._origLeft+data.deltaX)+"px");}}},endResizeColumn:function(_ffb){if(this.dragRecord){var _ffc=this.dragRecord.leftTop;var _ffd=this.grid.isLeftToRight()?_ffc.l:-_ffc.l;_ffd+=Math.max(_ffb.w+_ffd,this.minColWidth)-(_ffb.w+_ffd);if(has("webkit")&&_ffb.spanners.length){_ffd+=html._getPadBorderExtents(_ffb.spanners[0].node).w;}var data={deltaX:_ffd,w:_ffb.w+_ffd,vw:_ffb.vw+_ffd,tw:_ffb.tw+_ffd};this.doResizeNow(_ffb,data);delete this.dragRecord;}html.destroy(this.lineDiv);html.destroy(this.moverDiv);html.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;_ffb.view.update();this._skipBogusClicks=false;this.grid.onResizeColumn(_ffb.index);},doResizeNow:function(_ffe,data){_ffe.view.convertColPctToFixed();if(_ffe.view.flexCells&&!_ffe.view.testFlexCells()){var t=_fca(_ffe.node);if(t){(t.style.width="");}}var i,s,sw,f,fl;for(i=0;(s=_ffe.spanners[i]);i++){sw=s.width+data.deltaX;if(sw>0){s.node.style.width=sw+"px";_ffe.view.setColWidth(s.index,sw);}}if(this.grid.isLeftToRight()||!has("ie")){for(i=0;(f=_ffe.followers[i]);i++){fl=f.left+data.deltaX;f.node.style.left=fl+"px";}}_ffe.node.style.width=data.w+"px";_ffe.view.setColWidth(_ffe.index,data.w);_ffe.view.headerNode.style.width=data.vw+"px";_ffe.view.setColumnsWidth(data.tw);if(!this.grid.isLeftToRight()){_ffe.view.headerNode.scrollLeft=_ffe.scrollLeft+data.deltaX;}}});dg._TableMap=lang.extend(function(rows){this.mapRows(rows);},{map:null,mapRows:function(_fff){var _1000=_fff.length;if(!_1000){return;}this.map=[];var row;for(var k=0;(row=_fff[k]);k++){this.map[k]=[];}for(var j=0;(row=_fff[j]);j++){for(var i=0,x=0,cell,_1001,_1002;(cell=row[i]);i++){while(this.map[j][x]){x++;}this.map[j][x]={c:i,r:j};_1002=cell.rowSpan||1;_1001=cell.colSpan||1;for(var y=0;y<_1002;y++){for(var s=0;s<_1001;s++){this.map[j+y][x+s]=this.map[j][x];}}x+=_1001;}}},dumpMap:function(){for(var j=0,row,h="";(row=this.map[j]);j++,h=""){for(var i=0,cell;(cell=row[i]);i++){h+=cell.r+","+cell.c+"   ";}}},getMapCoords:function(inRow,inCol){for(var j=0,row;(row=this.map[j]);j++){for(var i=0,cell;(cell=row[i]);i++){if(cell.c==inCol&&cell.r==inRow){return {j:j,i:i};}}}return {j:-1,i:-1};},getNode:function(_1003,inRow,inCol){var row=_1003&&_1003.rows[inRow];return row&&row.cells[inCol];},_findOverlappingNodes:function(_1004,inRow,inCol){var nodes=[];var m=this.getMapCoords(inRow,inCol);for(var j=0,row;(row=this.map[j]);j++){if(j==m.j){continue;}var rw=row[m.i];var n=(rw?this.getNode(_1004,rw.r,rw.c):null);if(n){nodes.push(n);}}return nodes;},findOverlappingNodes:function(_1005){return this._findOverlappingNodes(_fca(_1005),_fc6(_1005.parentNode),_fc5(_1005));}});return {_Builder:_fd2,_HeaderBuilder:_fe9,_ContentBuilder:_fe3};});},"dijit/form/FilteringSelect":function(){define("dijit/form/FilteringSelect",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(_1006,_1007,lang,when,_1008,_1009){return _1007("dijit.form.FilteringSelect",[_1008,_1009],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return !!this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_100a,query,_100b,_100c){if((query&&query[this.searchAttr]!==this._lastQuery)||(!query&&_100a.length&&this.store.getIdentity(_100a[0])!=this._lastQuery)){return;}if(!_100a.length){this.set("value","",_100c||(_100c===undefined&&!this.focused),this.textbox.value,null);}else{this.set("item",_100a[0],_100c);}},_openResultList:function(_100d,query,_100e){if(query[this.searchAttr]!==this._lastQuery){return;}this.inherited(arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(value,_100f,_1010,item){if(!this._onChangeActive){_100f=null;}if(item===undefined){if(value===null||value===""){value="";if(!lang.isString(_1010)){this._setDisplayedValueAttr(_1010||"",_100f);return;}}var self=this;this._lastQuery=value;when(this.store.get(value),function(item){self._callbackSetLabel(item?[item]:[],undefined,undefined,_100f);});}else{this.valueNode.value=value;this.inherited(arguments);}},_setItemAttr:function(item,_1011,_1012){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(label,_1013){if(label==null){label="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_1013=false;}if(this.store){this.closeDropDown();var query=lang.clone(this.query);var qs=this._getDisplayQueryString(label),q;if(this.store._oldAPI){q=qs;}else{q=_1006.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=query[this.searchAttr]=q;this.textbox.value=label;this._lastDisplayedValue=label;this._set("displayedValue",label);var _1014=this;var _1015={ignoreCase:this.ignoreCase,deep:true};lang.mixin(_1015,this.fetchProperties);this._fetchHandle=this.store.query(query,_1015);when(this._fetchHandle,function(_1016){_1014._fetchHandle=null;_1014._callbackSetLabel(_1016||[],query,_1015,_1013);},function(err){_1014._fetchHandle=null;if(!_1014._cancelingQuery){console.error("dijit.form.FilteringSelect: "+err.toString());}});}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});});},"dojox/grid/_EditManager":function(){define("dojox/grid/_EditManager",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect","dojo/_base/sniff","./util"],function(lang,array,_1017,_1018,has,util){return _1017("dojox.grid._EditManager",null,{constructor:function(_1019){this.grid=_1019;if(has("ie")){this.connections=[_1018.connect(document.body,"onfocus",lang.hitch(this,"_boomerangFocus"))];}else{this.connections=[_1018.connect(this.grid,"onBlur",this,"apply")];}},info:{},destroy:function(){array.forEach(this.connections,_1018.disconnect);},cellFocus:function(_101a,_101b){if(this.grid.singleClickEdit||this.isEditRow(_101b)){this.setEditCell(_101a,_101b);}else{this.apply();}if(this.isEditing()||(_101a&&_101a.editable&&_101a.alwaysEditing)){this._focusEditor(_101a,_101b);}},rowClick:function(e){if(this.isEditing()&&!this.isEditRow(e.rowIndex)){this.apply();}},styleRow:function(inRow){if(inRow.index==this.info.rowIndex){inRow.customClasses+=" dojoxGridRowEditing";}},dispatchEvent:function(e){var c=e.cell,ed=(c&&c["editable"])?c:0;return ed&&ed.dispatchEvent(e.dispatch,e);},isEditing:function(){return this.info.rowIndex!==undefined;},isEditCell:function(_101c,_101d){return (this.info.rowIndex===_101c)&&(this.info.cell.index==_101d);},isEditRow:function(_101e){return this.info.rowIndex===_101e;},setEditCell:function(_101f,_1020){if(!this.isEditCell(_1020,_101f.index)&&this.grid.canEdit&&this.grid.canEdit(_101f,_1020)){this.start(_101f,_1020,this.isEditRow(_1020)||_101f.editable);}},_focusEditor:function(_1021,_1022){util.fire(_1021,"focus",[_1022]);},focusEditor:function(){if(this.isEditing()){this._focusEditor(this.info.cell,this.info.rowIndex);}},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>new Date().getTime();},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0;}},_doCatchBoomerang:function(){if(has("ie")){this._catchBoomerang=new Date().getTime()+this._boomerangWindow;}},start:function(_1023,_1024,_1025){if(!this._isValidInput()){return;}this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(_1024)){this.applyRowEdit();this.grid.updateRow(_1024);}if(_1025){this.info={cell:_1023,rowIndex:_1024};this.grid.doStartEdit(_1023,_1024);this.grid.updateRow(_1024);}else{this.info={};}this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(_1023,_1024);this._doCatchBoomerang();},_editorDo:function(_1026){var c=this.info.cell;if(c&&c.editable){c[_1026](this.info.rowIndex);}},editorApply:function(){this._editorDo("apply");},editorCancel:function(){this._editorDo("cancel");},applyCellEdit:function(_1027,_1028,_1029){if(this.grid.canEdit(_1028,_1029)){this.grid.doApplyCellEdit(_1027,_1029,_1028.field);}},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field);},apply:function(){if(this.isEditing()&&this._isValidInput()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},save:function(_102a,_102b){var c=this.info.cell;if(this.isEditRow(_102a)&&(!_102b||c.view==_102b)&&c.editable){c.save(c,this.info.rowIndex);}},restore:function(_102c,_102d){var c=this.info.cell;if(this.isEditRow(_102d)&&c.view==_102c&&c.editable){c.restore(this.info.rowIndex);}},_isValidInput:function(){var w=(this.info.cell||{}).widget;if(!w||!w.isValid){return true;}w.focused=true;return w.isValid(true);}});});},"esri/OperationBase":function(){define("esri/OperationBase",["dojo/_base/declare","dojo/has","esri/kernel"],function(_102e,has,_102f){var _1030=_102e(null,{declaredClass:"esri.OperationBase",type:"not implemented",label:"not implemented",constructor:function(_1031){_1031=_1031||{};if(_1031.label){this.label=_1031.label;}},performUndo:function(){console.log("performUndo has not been implemented");},performRedo:function(){console.log("performRedo has not been implemented");}});if(has("extend-esri")){_102f.OperationBase=_1030;}return _1030;});},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(lang){var _1032={};lang.setObject("dojo.data.util.sorter",_1032);_1032.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_1032.createSortFunction=function(_1033,store){var _1034=[];function _1035(attr,dir,comp,s){return function(itemA,itemB){var a=s.getValue(itemA,attr);var b=s.getValue(itemB,attr);return dir*comp(a,b);};};var _1036;var map=store.comparatorMap;var bc=_1032.basicComparator;for(var i=0;i<_1033.length;i++){_1036=_1033[i];var attr=_1036.attribute;if(attr){var dir=(_1036.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_1034.push(_1035(attr,dir,comp,store));}}return function(rowA,rowB){var i=0;while(i<_1034.length){var ret=_1034[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _1032;});},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(_1037,dom,event,_1038){return _1037("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled){event.stop(e);return false;}var _1039=this.onClick(e)===false;if(!_1039&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _103a=_1038.byNode(node);if(_103a&&typeof _103a._onSubmit=="function"){_103a._onSubmit(e);_1039=true;break;}}}if(_1039){e.preventDefault();}return !_1039;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_103b){this._set("label",_103b);(this.containerNode||this.focusNode).innerHTML=_103b;}});});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,Color,_103c){var _103d={};lang.setObject("dojo.colors",_103d);var _103e=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=Color.fromRgb=function(color,obj){var m=color.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_103c.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return Color.fromArray(a,obj);}return Color.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_103e(m1,m2,H+1/3)*256,_103e(m1,m2,H)*256,_103e(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return Color.fromArray(a,obj);}}return null;};var _103f=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};Color.prototype.sanitize=function(){var t=this;t.r=Math.round(_103f(t.r,0,255));t.g=Math.round(_103f(t.g,0,255));t.b=Math.round(_103f(t.b,0,255));t.a=_103f(t.a,0,1);return this;};_103d.makeGrey=Color.makeGrey=function(g,a){return Color.fromArray([g,g,g,a]);};lang.mixin(Color.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return Color;});},"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n","url:dojox/grid/resources/View.html":"<div class=\"dojoxGridView\" role=\"presentation\">\n\t<div class=\"dojoxGridHeader\" dojoAttachPoint=\"headerNode\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"headerNodeContainer\" style=\"width:9000em\" role=\"presentation\">\n\t\t\t<div dojoAttachPoint=\"headerContentNode\" role=\"row\"></div>\n\t\t</div>\n\t</div>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" dojoAttachPoint=\"hiddenFocusNode\" role=\"presentation\" />\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" role=\"presentation\" />\n\t<div class=\"dojoxGridScrollbox\" dojoAttachPoint=\"scrollboxNode\" role=\"presentation\">\n\t\t<div class=\"dojoxGridContent\" dojoAttachPoint=\"contentNode\" hidefocus=\"hidefocus\" role=\"presentation\"></div>\n\t</div>\n</div>\n","dojox/date/islamic/Date":function(){define("dojox/date/islamic/Date",["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(lang,_1040,dd){var IDate=_1040("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){var len=arguments.length;if(!len){this.fromGregorian(new Date());}else{if(len==1){var arg0=arguments[0];if(typeof arg0=="number"){arg0=new Date(arg0);}if(arg0 instanceof Date){this.fromGregorian(arg0);}else{if(arg0==""){this._date=new Date("");}else{this._year=arg0._year;this._month=arg0._month;this._date=arg0._date;this._hours=arg0._hours;this._minutes=arg0._minutes;this._seconds=arg0._seconds;this._milliseconds=arg0._milliseconds;}}}else{if(len>=3){this._year+=arguments[0];this._month+=arguments[1];this._date+=arguments[2];this._hours+=arguments[3]||0;this._minutes+=arguments[4]||0;this._seconds+=arguments[5]||0;this._milliseconds+=arguments[6]||0;}}}},getDate:function(){return this._date;},getMonth:function(){return this._month;},getFullYear:function(){return this._year;},getDay:function(){return this.toGregorian().getDay();},getHours:function(){return this._hours;},getMinutes:function(){return this._minutes;},getSeconds:function(){return this._seconds;},getMilliseconds:function(){return this._milliseconds;},setDate:function(date){date=parseInt(date);if(date>0&&date<=this.getDaysInIslamicMonth(this._month,this._year)){this._date=date;}else{var mdays;if(date>0){for(mdays=this.getDaysInIslamicMonth(this._month,this._year);date>mdays;date-=mdays,mdays=this.getDaysInIslamicMonth(this._month,this._year)){this._month++;if(this._month>=12){this._year++;this._month-=12;}}this._date=date;}else{for(mdays=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1);date<=0;mdays=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1)){this._month--;if(this._month<0){this._year--;this._month+=12;}date+=mdays;}this._date=date;}}return this;},setFullYear:function(year){this._year=+year;},setMonth:function(month){this._year+=Math.floor(month/12);if(month>0){this._month=Math.floor(month%12);}else{this._month=Math.floor(((month%12)+12)%12);}},setHours:function(){var _1041=arguments.length;var hours=0;if(_1041>=1){hours=parseInt(arguments[0]);}if(_1041>=2){this._minutes=parseInt(arguments[1]);}if(_1041>=3){this._seconds=parseInt(arguments[2]);}if(_1041==4){this._milliseconds=parseInt(arguments[3]);}while(hours>=24){this._date++;var mdays=this.getDaysInIslamicMonth(this._month,this._year);if(this._date>mdays){this._month++;if(this._month>=12){this._year++;this._month-=12;}this._date-=mdays;}hours-=24;}this._hours=hours;},_addMinutes:function(_1042){_1042+=this._minutes;this.setMinutes(_1042);this.setHours(this._hours+parseInt(_1042/60));return this;},_addSeconds:function(_1043){_1043+=this._seconds;this.setSeconds(_1043);this._addMinutes(parseInt(_1043/60));return this;},_addMilliseconds:function(_1044){_1044+=this._milliseconds;this.setMilliseconds(_1044);this._addSeconds(parseInt(_1044/1000));return this;},setMinutes:function(_1045){this._minutes=_1045%60;return this;},setSeconds:function(_1046){this._seconds=_1046%60;return this;},setMilliseconds:function(_1047){this._milliseconds=_1047%1000;return this;},toString:function(){if(isNaN(this._date)){return "Invalidate Date";}else{var x=new Date();x.setHours(this._hours);x.setMinutes(this._minutes);x.setSeconds(this._seconds);x.setMilliseconds(this._milliseconds);return this._month+" "+this._date+" "+this._year+" "+x.toTimeString();}},toGregorian:function(){var hYear=this._year;var _1048=this._month;var hDate=this._date;var _1049=hDate+Math.ceil(29.5*_1048)+(hYear-1)*354+Math.floor((3+(11*hYear))/30)+this._ISLAMIC_EPOCH-1;var wjd=Math.floor(_1049-0.5)+0.5,_104a=wjd-this._GREGORIAN_EPOCH,_104b=Math.floor(_104a/146097),dqc=this._mod(_104a,146097),cent=Math.floor(dqc/36524),dcent=this._mod(dqc,36524),quad=Math.floor(dcent/1461),dquad=this._mod(dcent,1461),_104c=Math.floor(dquad/365),year=(_104b*400)+(cent*100)+(quad*4)+_104c;if(!(cent==4||_104c==4)){year++;}var _104d=this._GREGORIAN_EPOCH+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400);var _104e=wjd-_104d;var tjd=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((739/12)+((dd.isLeapYear(new Date(year,3,1))?-1:-2))+1);var _104f=((wjd<tjd)?0:(dd.isLeapYear(new Date(year,3,1))?1:2));var month=Math.floor((((_104e+_104f)*12)+373)/367);var tjd2=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((((367*month)-362)/12)+((month<=2)?0:(dd.isLeapYear(new Date(year,month,1))?-1:-2))+1);var day=(wjd-tjd2)+1;var gdate=new Date(year,(month-1),day,this._hours,this._minutes,this._seconds,this._milliseconds);return gdate;},fromGregorian:function(gdate){var date=new Date(gdate);var gYear=date.getFullYear(),_1050=date.getMonth(),gDay=date.getDate();var _1051=(this._GREGORIAN_EPOCH-1)+(365*(gYear-1))+Math.floor((gYear-1)/4)+(-Math.floor((gYear-1)/100))+Math.floor((gYear-1)/400)+Math.floor((((367*(_1050+1))-362)/12)+(((_1050+1)<=2)?0:(dd.isLeapYear(date)?-1:-2))+gDay);_1051=Math.floor(_1051)+0.5;var days=_1051-this._ISLAMIC_EPOCH;var hYear=Math.floor((30*days+10646)/10631);var _1052=Math.ceil((days-29-this._yearStart(hYear))/29.5);_1052=Math.min(_1052,11);var hDay=Math.ceil(days-this._monthStart(hYear,_1052))+1;this._date=hDay;this._month=_1052;this._year=hYear;this._hours=date.getHours();this._minutes=date.getMinutes();this._seconds=date.getSeconds();this._milliseconds=date.getMilliseconds();this._day=date.getDay();return this;},valueOf:function(){return this.toGregorian().valueOf();},_yearStart:function(year){return (year-1)*354+Math.floor((3+11*year)/30);},_monthStart:function(year,month){return Math.ceil(29.5*month)+(year-1)*354+Math.floor((3+11*year)/30);},_civilLeapYear:function(year){return (14+11*year)%30<11;},getDaysInIslamicMonth:function(month,year){var _1053=0;_1053=29+((month+1)%2);if(month==11&&this._civilLeapYear(year)){_1053++;}return _1053;},_mod:function(a,b){return a-(b*Math.floor(a/b));}});IDate.getDaysInIslamicMonth=function(month){return new IDate().getDaysInIslamicMonth(month.getMonth(),month.getFullYear());};return IDate;});},"esri/dijit/editing/TemplatePicker":function(){define(["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/html","dojo/_base/array","dojo/_base/json","dojo/_base/kernel","dojo/has","dojo/query","dojo/sniff","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/_Widget","dijit/_Templated","dojo/data/ItemFileReadStore","dojox/grid/DataGrid","dojox/gfx","esri/layers/FeatureLayer","esri/symbols/PictureMarkerSymbol","esri/dijit/editing/TemplatePickerItem","esri/kernel","esri/lang","esri/request","dojo/i18n!esri/nls/jsapi","dojo/text!esri/dijit/editing/templates/TemplatePicker.html"],function(_1054,_1055,lang,_1056,html,array,_1057,_1058,has,query,sniff,_1059,_105a,_105b,_105c,_105d,_105e,_105f,_1060,gfx,_1061,_1062,_1063,_1064,_1065,_1066,_1067,_1068){var TP=_1055([_105d,_105e],{declaredClass:"esri.dijit.editing.TemplatePicker",widgetsInTemplate:true,templateString:_1068,basePath:_1054.toUrl("esri/dijit/editing")+"/",featureLayers:null,items:null,grouping:true,showTooltip:false,maxLabelLength:0,rows:4,_rows:0,columns:3,surfaceWidth:30,surfaceHeight:30,emptyMessage:"",useLegend:true,legendCache:{},_uniqueId:{id:0},_assumedCellWidth:90,_initialAutoWidth:300,_initialAutoHeight:200,_ieTimer:150,constructor:function(_1069,_106a){_1069=_1069||{};if(!_1069.items&&!_1069.featureLayers){console.error("TemplatePicker: please provide 'featureLayers' or 'items' parameter in the constructor");}this._dojo14x=(_1058.version.minor>=4);this._itemWidgets={};if(_1069.featureLayers&&_1069.featureLayers.length){this._flChanged=1;}this._nls=_1067.widgets.templatePicker;this.emptyMessage=_1069.emptyMessage||(this._nls&&this._nls.creationDisabled)||"";},postMixInProperties:function(){this.inherited(arguments);this._preprocess();},startup:function(){this.inherited(arguments);if(this.rows==="auto"&&this.columns==="auto"){var box=_105b.getContentBox(this.domNode);if(!box.w){this.domNode.style.width=this._initialAutoWidth+"px";}if(!box.h){this.domNode.style.height=this._initialAutoHeight+"px";}box=_105b.getContentBox(this.domNode);this._columns=Math.floor(box.w/this._assumedCellWidth)||1;}this._applyGridPatches();this._setGridLayout();_1056.connect(this.grid,"onRowClick",this,this._rowClicked);this._setGridData();this._toggleTooltip();if(has("ie")<9){this._repaintItems=lang.hitch(this,this._repaintItems);setTimeout(this._repaintItems,this._ieTimer);}},destroy:function(){this.showTooltip=false;this._toggleTooltip();this._clearLegendInfo();this.featureLayers=this.items=this.grid=this._flItems=this._itItems=this._groupRowIndices=this._selectedCell=this._selectedInfo=this._selectedItem=null;this.inherited(arguments);},getSelected:function(){return this._selectedCell?this._selectedItem:null;},clearSelection:function(){var _106b=this._selectedCell,info=this._selectedInfo;if(_106b){this._rowClicked({cellNode:_106b,rowIndex:info.selRow,cellIndex:info.selCol});}},update:function(_106c){var _106d=(this.rows==="auto"&&this.columns==="auto"&&_106c)?true:false,grid=this.grid,box;if(_106d){var _106e=this.domNode,id=_106e.id,width,item=_1058.query("#"+id+".templatePicker div.item")[0];box=_105b.getContentBox(_106e);item=item&&item.parentNode;if(item){width=html.coords(item).w;}else{width=this._assumedCellWidth;}this._columns=Math.floor((box.w-grid.views.views[0].getScrollbarWidth())/width);this._columns=this._columns||1;}var _106f=this._rows;this._preprocess();var _1070=this._rows;this._setGridLayout();this._setGridData();if(_1070!==_106f){grid.set("autoHeight",this._rows,false);}if(_106d){grid._resize({w:box.w,h:box.h});grid.viewsHeaderNode.style.display="none";}else{grid.update();}this._toggleTooltip();var self=this,_1071=this.getSelected();if(_1071){grid.store.fetch({onComplete:function(its){var found=self._locate(_1071,self._selectedInfo,its);var _1072=found&&grid.views.views[0].getCellNode(found[0],found[1]);if(_1072){self._rowClicked({cellNode:_1072,rowIndex:found[0],cellIndex:found[1]},true);}}});}if(has("ie")<9){setTimeout(this._repaintItems,this._ieTimer);}var _1073=this.featureLayers,items=this.items;if((!_1073||!_1073.length)&&(!items||!items.length)&&grid&&this.emptyMessage){grid.showMessage(this.emptyMessage);}},onSelectionChange:function(){},_setUseLegendAttr:function(use){var _1074=this.useLegend;if(!this._started||_1074!==use){if(use){this._flChanged=1;}else{this._clearLegendInfo();}}this.useLegend=use;},_setFeatureLayersAttr:function(_1075){var _1076=this.featureLayers;if(!this._started||_1076!==_1075){this._flChanged=1;}this.featureLayers=_1075;},_adjustRowsCols:function(items){if(this.rows==="auto"&&this.columns==="auto"){if(!this._started){this._rows=false;this._columns=null;this._autoWidth=false;}return;}var len=0;this._rows=this.rows;this._columns=this.columns;if(this.rows==="auto"){if(this.featureLayers){if(this.grouping){len=items.length;array.forEach(items,function(_1077){len+=Math.ceil(_1077.length/this.columns);},this);}else{array.forEach(items,function(_1078){len+=_1078.length;},this);len=Math.ceil(len/this.columns);}}else{len=Math.ceil(items.length/this.columns);}this._rows=len;}else{if(this.columns==="auto"){if(this.featureLayers){if(this.grouping){len=3;}else{array.forEach(items,function(_1079){len+=_1079.length;},this);len=Math.ceil(len/this.rows);}}else{len=Math.ceil(items.length/this.rows);}this._columns=len;}}},_preprocess:function(){if(this.items){this.grouping=false;}this._autoWidth=false;if(this.rows==="auto"||this.columns==="auto"){this._autoWidth=true;}var items;if(this.featureLayers){if(this.useLegend&&this._flChanged){this._legendIndices=[];this._loadingIndices=[];this._legendSymbols={};this._ignoreLegends();this._loadingLegends=[];clearTimeout(this._legendTimer);this._legendTimer=null;this._processSelectionLayers();this._flChanged=0;}if(array.every(this.featureLayers,function(_107a){return _107a.loaded;})){items=this._flItems=this._getItemsFromLayers(this.featureLayers);this._adjustRowsCols(items);}else{var count=this.featureLayers.length;var _107b=[];array.forEach(this.featureLayers,function(_107c){if(_107c.loaded){count--;_107b.push(_107c);}else{var _107d=_1056.connect(_107c,"onLoad",this,function(layer){_1056.disconnect(_107d);_107d=null;count--;_107b.push(layer);if(!count){items=this._flItems=this._getItemsFromLayers(_107b);this._adjustRowsCols(items);this.update();}});}},this);}}else{items=this._itItems=this._getItemsFromItems(this.items);this._adjustRowsCols(items);}},_processSelectionLayers:function(){var map,_107e,info,_107f,key,_1080,_1081,_1082={};array.forEach(this.featureLayers,function(layer,idx){if(layer.mode===_1061.MODE_SELECTION&&layer._map&&layer.url&&layer._params.drawMode&&!layer.source){_107e=lang.trim(layer._url.path).replace(/\/(MapServer|FeatureServer).*/ig,"/MapServer").replace(/^https?:\/\//ig,"").toLowerCase();info=(_1082[_107e]=_1082[_107e]||{});_107f=(info.featureLayers=info.featureLayers||{});_1080=(info.indices=info.indices||[]);_107f[idx]=layer;_1080.push(idx);map=layer._map;}});if(map){array.forEach(map.layerIds,function(layer){layer=map.getLayer(layer);if(layer&&layer.url&&(layer.getImageUrl||layer.getTileUrl)&&layer.loaded&&layer.version>=10.1){_107e=lang.trim(layer._url.path).replace(/(\/MapServer).*/ig,"$1");key=_107e.replace(/^https?:\/\//ig,"").toLowerCase();if(_1082[key]&&(!_1082[key].mapServiceUrl)){info=_1082[key];info.mapServiceUrl=_107e;info.mapServiceLayer=layer;this._legendIndices=this._legendIndices.concat(info.indices);_1081=this._fetchLegend({pickerInstance:this,info:info},key);if(_1081.then){this._loadingIndices=this._loadingIndices.concat(info.indices);this._loadingLegends.push(_1081);}else{this._processLegendResponse(_1081,info);}}}},this);}},_fetchLegend:function(_1083,key){var proto=TP.prototype,_1084=proto.legendCache[key];if(!_1084){_1084=(proto.legendCache[key]=_1066({url:_1083.info.mapServiceUrl+"/legend",content:{f:"json"},callbackParamName:"callback"}));_1084._contexts=[_1083];_1084.addBoth(function(_1085){if(_1084.canceled){return;}proto.legendCache[key]=_1085;var _1086=_1084._contexts;_1084._contexts=null;array.forEach(_1086,function(ctxt){var _1087=ctxt.pickerInstance,info=ctxt.info,found;if(_1087._destroyed){return;}array.forEach(info.indices,function(idx){found=array.indexOf(_1087._loadingIndices,idx);if(found>-1){_1087._loadingIndices.splice(found,1);}});found=array.indexOf(_1087._loadingLegends,_1084);if(found>-1){_1087._loadingLegends.splice(found,1);}_1087._processLegendResponse(_1085,info);});});}else{if(_1084.then){_1084._contexts.push(_1083);}}return _1084;},_clearLegendInfo:function(){clearTimeout(this._legendTimer);this._ignoreLegends();this._legendIndices=this._loadingIndices=this._legendSymbols=this._loadingLegends=this._legendTimer=null;},_ignoreLegends:function(){if(this._loadingLegends){array.forEach(this._loadingLegends,function(_1088){var found=-1;array.some(_1088._contexts,function(ctxt,idx){if(ctxt.pickerInstance===this){found=idx;}return (found>-1);},this);if(found>-1){_1088._contexts.splice(found,1);}},this);}},_processLegendResponse:function(_1089,info){if(_1089&&!(_1089 instanceof Error)){array.forEach(info.indices,function(idx){var _108a=info.featureLayers[idx].layerId,i,_108b=info.mapServiceUrl+"/"+_108a+"/images/",token=info.mapServiceLayer._getToken(),found,obj,_108c,url;if(this._legendSymbols[idx]){return;}found=null;array.some(_1089.layers,function(_108d){if(_108d.layerId==_108a){found=_108d;}return !!found;});if(found){obj=(this._legendSymbols[idx]={});array.forEach(found.legend,function(_108e){_108c=_108e.values;if(_108c&&_108c.length){for(i=0;i<_108c.length;i++){obj[_108c[i]]=_108e;}}else{obj.defaultSymbol=_108e;}url=_108e.url;if(url&&!_108e._fixed){_108e._fixed=1;if((url.search(/https?\:/)===-1)){_108e.url=_108b+url;}if(token&&_108e.url.search(/https?\:/)!==-1){_108e.url+=(((_108e.url.indexOf("?")>-1)?"&":"?")+"token="+token);}}});}},this);}else{var found;array.forEach(info.indices,function(idx){found=array.indexOf(this._legendIndices,idx);if(found>-1){this._legendIndices.splice(found,1);}},this);}var self=this;if(self._started&&!self._legendTimer){self._legendTimer=setTimeout(function(){clearTimeout(self._legendTimer);self._legendTimer=null;if(!self._destroyed){self.update();}},0);}},_applyGridPatches:function(){var grid=this.grid;var _108f=grid.adaptWidth,views,i,view;grid.adaptWidth=function(){views=this.views.views;for(i=0;view=views[i];i++){_105c.set(view.headerNode,"display","block");}_108f.apply(this,arguments);for(i=0;view=views[i];i++){_105c.set(view.headerNode,"display","none");}};if(this._dojo14x){if(this.rows!=="auto"&&this.columns!=="auto"){var _1090=_1056.connect(grid,"_onFetchComplete",this,function(){_1056.disconnect(_1090);this.grid.set("autoHeight",this._rows);});}_1056.connect(grid,"_onDelete",this,this._destroyItems);_1056.connect(grid,"_clearData",this,this._destroyItems);_1056.connect(grid,"destroy",this,this._destroyItems);var focus=grid.focus;if(focus&&focus.findAndFocusGridCell){focus.findAndFocusGridCell=function(){return false;};}}},_setGridLayout:function(){var _1091=function(_1092){return function(_1093,_1094){return this._cellGet(_1092,_1093,_1094);};};var _1095=lang.hitch(this,this._cellFormatter),cells=[],cols=this._columns,i;for(i=0;i<cols;i++){cells.push({field:"cell"+i,get:lang.hitch(this,_1091(i)),formatter:_1095});}var _1096={cells:[cells]};if(this.grouping){var _1097={field:"groupName",colSpan:cols,get:lang.hitch(this,this._cellGetGroup),formatter:lang.hitch(this,this._cellGroupFormatter)};_1096.cells.push([_1097]);}var grid=this.grid,_1098=_1060.prototype.rowsPerPage;grid.set("rowsPerPage",(this._rows>_1098)?this._rows:_1098);grid.set("structure",_1096);},_setGridData:function(){var _1099=[];if(this.grouping){this._groupRowIndices=[];var _109a,_109b,cols=this._columns;array.forEach(this._flItems,function(_109c,idx){_1099.push({});var index=(idx===0)?0:(_109a+_109b+1);this._groupRowIndices.push(index);_109a=index;_109b=Math.ceil(_109c.length/cols);_1099=_1099.concat(this._getStoreItems(_109c));},this);}else{if(this.featureLayers){array.forEach(this._flItems,function(_109d){_1099=_1099.concat(_109d);});_1099=this._getStoreItems(_1099);}else{_1099=this._getStoreItems(this._itItems);}}var store=new _105f({data:{items:_1099}});this.grid.setStore(store);},_toggleTooltip:function(){if(this.showTooltip){if(this.tooltip){return;}this.tooltip=_105a.create("div",{"class":"tooltip"},this.domNode);this.tooltip.style.display="none";this.tooltip.style.position="fixed";var grid=this.grid;this._mouseOverConnect=_1056.connect(grid,"onCellMouseOver",this,this._cellMouseOver);this._mouseOutConnect=_1056.connect(grid,"onCellMouseOut",this,this._cellMouseOut);}else{if(this.tooltip){_1056.disconnect(this._mouseOverConnect);_1056.disconnect(this._mouseOutConnect);_105a.destroy(this.tooltip);this.tooltip=null;}}},_rowClicked:function(evt,_109e){var _109f=evt.cellNode,row=evt.rowIndex,col=evt.cellIndex;var cell=this._getCellInfo(_109f,row,col);if(!cell){return;}var store=this.grid.store;if(store.getValue(cell,"loadingCell")){return;}if(this._selectedCell){_1059.remove(this._selectedCell,"selectedItem");}if(_109f!==this._selectedCell){_1059.add(_109f,"selectedItem");this._selectedCell=_109f;this._selectedItem={featureLayer:store.getValue(cell,"layer"),type:store.getValue(cell,"type"),template:store.getValue(cell,"template"),symbolInfo:store.getValue(cell,"symbolInfo"),item:this._getItem(cell)};this._selectedInfo={selRow:row,selCol:col,index1:store.getValue(cell,"index1"),index2:store.getValue(cell,"index2"),index:store.getValue(cell,"index")};}else{this._selectedCell=this._selectedInfo=this._selectedItem=null;}if(!_109e){this.onSelectionChange();}},_locate:function(_10a0,info,_10a1){var store=this.grid.store,cols=new Array(this._columns);var found,_10a2=info.index1,_10a3=info.index2,index=info.index,item=_10a0.item;array.some(_10a1,function(_10a4,_10a5){return array.some(cols,function(_10a6,_10a7){var cell=store.getValue(_10a4,"cell"+_10a7);if(cell&&(item?(index===store.getValue(cell,"index")):(_10a2===store.getValue(cell,"index1")&&_10a3===store.getValue(cell,"index2")))){found=[_10a5,_10a7];return true;}else{return false;}});});return found;},_getCellInfo:function(_10a8,row,col){if(!_10a8){return;}var grid=this.grid;var item=grid.getItem(row);var cell=grid.store.getValue(item,"cell"+col);return cell;},_getItem:function(cell){var items=this.items;if(items){return items[this.grid.store.getValue(cell,"index")];}},_cellMouseOver:function(evt){var _10a9=this.tooltip;var _10aa=evt.cellNode,row=evt.rowIndex,col=evt.cellIndex;var cell=this._getCellInfo(_10aa,row,col);if(_10a9&&cell){var store=this.grid.store;var _10ab=store.getValue(cell,"template");var type=store.getValue(cell,"type");var _10ac=store.getValue(cell,"symbolInfo");var layer=store.getValue(cell,"layer");var item=this._getItem(cell);var label=(item&&(item.label+(item.description?(": "+item.description):"")))||(_10ab&&(_10ab.name+(_10ab.description?(": "+_10ab.description):"")))||(type&&type.name)||(_10ac&&(_10ac.label+(_10ac.description?(": "+_10ac.description):"")))||((layer&&layer.name+": ")+"Default");_10a9.style.display="none";_10a9.innerHTML=label;var _10ad=html.coords(_10aa.firstChild);_105c.set(_10a9,{left:(_10ad.x)+"px",top:(_10ad.y+_10ad.h+5)+"px"});_10a9.style.display="";}},_cellMouseOut:function(){var _10ae=this.tooltip;if(_10ae){_10ae.style.display="none";}},_destroyItems:function(){var _10af=this._itemWidgets,w;for(w in _10af){if(!_10af[w]){continue;}_10af[w].destroy();delete _10af[w];}},_repaintItems:function(){var _10b0=this._itemWidgets,w;for(w in _10b0){var _10b1=_10b0[w];if(_10b1){_10b1._repaint(_10b1._surface);}}},_getStoreItems:function(_10b2){var uid=this._uniqueId;_10b2=array.map(_10b2,function(item){return lang.mixin({"surfaceId":"tpick-surface-"+(uid.id++)},item);});var len=_10b2.length,index=0,obj={},k=0,prop,_10b3=[],flag=true,cols=this._columns;while(index<len){flag=true;prop="cell"+k;obj[prop]=_10b2[index];index++;k++;if(k%cols===0){flag=false;_10b3.push(obj);obj={};k=0;}}if(flag&&len){_10b3.push(obj);}return _10b3;},_getItemsFromLayers:function(_10b4){var items=[];array.forEach(_10b4,function(layer,_10b5){items.push(this._getItemsFromLayer(layer,_10b5));},this);return items;},_getItemsFromLayer:function(layer,_10b6){var items=[];if(this.useLegend&&array.indexOf(this._loadingIndices,_10b6)>-1){return [{label:(this._nls&&this._nls.loading)||"",symbol:null,layer:layer,type:null,template:null,index1:_10b6,index2:0,loadingCell:1}];}var _10b7=[];_10b7=_10b7.concat(layer.templates);array.forEach(layer.types,function(fType){var _10b8=fType.templates;array.forEach(_10b8,function(_10b9){_10b9._type_=fType;});_10b7=_10b7.concat(_10b8);});_10b7=array.filter(_10b7,_1065.isDefined);var _10ba=layer.renderer;if(_10ba){var _10bb=_10ba.declaredClass.replace("esri.renderer.","");if(_10b7.length>0){array.forEach(_10b7,function(_10bc){var proto=_10bc.prototype;if(proto){var _10bd=_10ba.getSymbol(proto);if(_10bd){var found=null,pms,_10be;if(this.useLegend&&array.indexOf(this._legendIndices,_10b6)>-1){_10be=this._legendSymbols&&this._legendSymbols[_10b6];if(_10be){switch(_10bb){case "SimpleRenderer":found=_10be.defaultSymbol;break;case "UniqueValueRenderer":array.some(_10ba.infos,function(info){if(info.symbol===_10bd){found=_10be[info.value];}return !!found;});break;case "ClassBreaksRenderer":array.some(_10ba.infos,function(info){if(info.symbol===_10bd){found=_10be[info.maxValue];}return !!found;});break;}}if(found){pms=_1057.fromJson(_1057.toJson(_1062.defaultProps));pms.url=found.url;pms.imageData=found.imageData;pms.contentType=found.contentType;pms.width=found.width;pms.height=found.height;if(!_1065.isDefined(pms.width)||!_1065.isDefined(pms.height)){pms.width=15;pms.height=15;}found=new _1062(pms);}}items.push({label:this._trimLabel(_10bc.name),symbol:found||_10bd,legendOverride:!!found,layer:layer,type:_10bc._type_,template:_10bc,index1:_10b6,index2:items.length});}}delete _10bc._type_;},this);}else{var infos=[];if(_10bb==="TemporalRenderer"){_10ba=_10ba.observationRenderer;if(_10ba){_10bb=_10ba.declaredClass.replace("esri.renderer.","");}}switch(_10bb){case "SimpleRenderer":infos=[{symbol:_10ba.symbol,label:_10ba.label,description:_10ba.description}];break;case "UniqueValueRenderer":case "ClassBreaksRenderer":infos=_10ba.infos;break;}items=array.map(infos,function(info,idx){return {label:this._trimLabel(info.label),description:info.description,symbolInfo:lang.mixin({constructor:function(){}},info),symbol:info.symbol,layer:layer,index1:_10b6,index2:idx};},this);}}return items;},_getItemsFromItems:function(_10bf){return array.map(_10bf,function(item,idx){item=lang.mixin({index:idx},item);item.label=this._trimLabel(item.label);return item;},this);},_trimLabel:function(label){var max=this.maxLabelLength;if(max&&label){if(label.length>max){label=label.substr(0,max)+"...";}}return label||"";},_cellGet:function(_10c0,_10c1,_10c2){if(!_10c2){return "";}return this.grid.store.getValue(_10c2,"cell"+_10c0);},_cellFormatter:function(value){if(value){var _10c3=this._itemWidgets,store=this.grid.store;var sid=store.getValue(value,"surfaceId");var w=_10c3[sid];if(!w){w=(_10c3[sid]=new _1063({id:sid,label:store.getValue(value,"label"),symbol:store.getValue(value,"symbol"),legendOverride:store.getValue(value,"legendOverride"),surfaceWidth:this.surfaceWidth,surfaceHeight:this.surfaceHeight,template:store.getValue(value,"template")}));}return w||"";}else{return "";}},_cellGetGroup:function(_10c4,_10c5){if(!this._groupRowIndices){return "";}var found=array.indexOf(this._groupRowIndices,_10c4);if(!_10c5||found===-1){return "";}return (this.featureLayers[found]&&this.featureLayers[found].name)||"";},_cellGroupFormatter:function(value){if(value){return "<div class='groupLabel'>"+value+"</div>";}else{return "";}}});if(has("extend-esri")){lang.setObject("dijit.editing.TemplatePicker",TP,_1064);}return TP;});},"dijit/_editor/range":function(){define("dijit/_editor/range",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","../main"],function(array,_10c6,lang,win,dijit){dijit.range={};dijit.range.getIndex=function(node,_10c7){var ret=[],retR=[];var onode=node;var pnode,n;while(node!=_10c7){var i=0;pnode=node.parentNode;while((n=pnode.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-pnode.childNodes.length);node=pnode;}if(ret.length>0&&onode.nodeType==3){n=onode.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=onode.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};dijit.range.getNode=function(index,_10c8){if(!lang.isArray(index)||index.length==0){return _10c8;}var node=_10c8;array.every(index,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};dijit.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _10c9=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_10c9(n1);var n2as=_10c9(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};dijit.range.getAncestor=function(node,regex,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(regex.test(name)){return node;}node=node.parentNode;}return null;};dijit.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;dijit.range.getBlockAncestor=function(node,regex,root){root=root||node.ownerDocument.body;regex=regex||dijit.range.BlockTagNames;var block=null,_10ca;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!block&&regex.test(name)){block=node;}if(!_10ca&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_10ca=node;}node=node.parentNode;}return {blockNode:block,blockContainer:_10ca||node.ownerDocument.body};};dijit.range.atBeginningOfContainer=function(_10cb,node,_10cc){var _10cd=false;var _10ce=(_10cc==0);if(!_10ce&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_10cc))){_10ce=true;}}if(_10ce){var cnode=node;_10cd=true;while(cnode&&cnode!==_10cb){if(cnode.previousSibling){_10cd=false;break;}cnode=cnode.parentNode;}}return _10cd;};dijit.range.atEndOfContainer=function(_10cf,node,_10d0){var atEnd=false;var _10d1=(_10d0==(node.length||node.childNodes.length));if(!_10d1&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_10d0))){_10d1=true;}}if(_10d1){var cnode=node;atEnd=true;while(cnode&&cnode!==_10cf){if(cnode.nextSibling){atEnd=false;break;}cnode=cnode.parentNode;}}return atEnd;};dijit.range.adjacentNoneTextNode=function(_10d2,next){var node=_10d2;var len=(0-_10d2.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};dijit.range.create=function(win){win=win||window;if(win.getSelection){return win.document.createRange();}else{return new dijit.range.W3CRange();}};dijit.range.getSelection=function(_10d3,_10d4){if(_10d3.getSelection){return _10d3.getSelection();}else{var s=new dijit.range.ie.selection(_10d3);if(!_10d4){s._getCurrentSelection();}return s;}};if(!window.getSelection){dijit.range.ie={cachedSelection:{},selection:function(_10d5){this._ranges=[];this.addRange=function(r,_10d6){this._ranges.push(r);if(!_10d6){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _10d7=function(){var r=_10d5.document.selection.createRange();var type=_10d5.document.selection.type.toUpperCase();if(type=="CONTROL"){return new dijit.range.W3CRange(dijit.range.ie.decomposeControlRange(r));}else{return new dijit.range.W3CRange(dijit.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_10d7();if(r){this.addRange(r,true);this.isCollapsed=r.collapsed;}else{this.isCollapsed=true;}};},decomposeControlRange:function(range){var _10d8=range.item(0),_10d9=range.item(range.length-1);var _10da=_10d8.parentNode,_10db=_10d9.parentNode;var _10dc=dijit.range.getIndex(_10d8,_10da).o[0];var _10dd=dijit.range.getIndex(_10d9,_10db).o[0]+1;return [_10da,_10dc,_10db,_10dd];},getEndPoint:function(range,end){var _10de=range.duplicate();_10de.collapse(!end);var _10df="EndTo"+(end?"End":"Start");var _10e0=_10de.parentElement();var _10e1,_10e2,_10e3;if(_10e0.childNodes.length>0){array.every(_10e0.childNodes,function(node,i){var _10e4;if(node.nodeType!=3){_10de.moveToElementText(node);if(_10de.compareEndPoints(_10df,range)>0){if(_10e3&&_10e3.nodeType==3){_10e1=_10e3;_10e4=true;}else{_10e1=_10e0;_10e2=i;return false;}}else{if(i==_10e0.childNodes.length-1){_10e1=_10e0;_10e2=_10e0.childNodes.length;return false;}}}else{if(i==_10e0.childNodes.length-1){_10e1=node;_10e4=true;}}if(_10e4&&_10e1){var _10e5=dijit.range.adjacentNoneTextNode(_10e1)[0];if(_10e5){_10e1=_10e5.nextSibling;}else{_10e1=_10e0.firstChild;}var _10e6=dijit.range.adjacentNoneTextNode(_10e1);_10e5=_10e6[0];var _10e7=_10e6[1];if(_10e5){_10de.moveToElementText(_10e5);_10de.collapse(false);}else{_10de.moveToElementText(_10e0);}_10de.setEndPoint(_10df,range);_10e2=_10de.text.length-_10e7;return false;}_10e3=node;return true;});}else{_10e1=_10e0;_10e2=0;}if(!end&&_10e1.nodeType==1&&_10e2==_10e1.childNodes.length){var _10e8=_10e1.nextSibling;if(_10e8&&_10e8.nodeType==3){_10e1=_10e8;_10e2=0;}}return [_10e1,_10e2];},setEndPoint:function(range,_10e9,_10ea){var _10eb=range.duplicate(),node,len;if(_10e9.nodeType!=3){if(_10ea>0){node=_10e9.childNodes[_10ea-1];if(node){if(node.nodeType==3){_10e9=node;_10ea=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_10e9=node.nextSibling;_10ea=0;}else{_10eb.moveToElementText(node.nextSibling?node:_10e9);var _10ec=node.parentNode;var _10ed=_10ec.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_10eb.collapse(false);_10ec.removeChild(_10ed);}}}}else{_10eb.moveToElementText(_10e9);_10eb.collapse(true);}}if(_10e9.nodeType==3){var _10ee=dijit.range.adjacentNoneTextNode(_10e9);var _10ef=_10ee[0];len=_10ee[1];if(_10ef){_10eb.moveToElementText(_10ef);_10eb.collapse(false);if(_10ef.contentEditable!="inherit"){len++;}}else{_10eb.moveToElementText(_10e9.parentNode);_10eb.collapse(true);_10eb.move("character",1);_10eb.move("character",-1);}_10ea+=len;if(_10ea>0){if(_10eb.move("character",_10ea)!=_10ea){console.error("Error when moving!");}}}return _10eb;},decomposeTextRange:function(range){var _10f0=dijit.range.ie.getEndPoint(range);var _10f1=_10f0[0],_10f2=_10f0[1];var _10f3=_10f0[0],_10f4=_10f0[1];if(range.htmlText.length){if(range.htmlText==range.text){_10f4=_10f2+range.text.length;}else{_10f0=dijit.range.ie.getEndPoint(range,true);_10f3=_10f0[0],_10f4=_10f0[1];}}return [_10f1,_10f2,_10f3,_10f4];},setRange:function(range,_10f5,_10f6,_10f7,_10f8,_10f9){var start=dijit.range.ie.setEndPoint(range,_10f5,_10f6);range.setEndPoint("StartToStart",start);if(!_10f9){var end=dijit.range.ie.setEndPoint(range,_10f7,_10f8);}range.setEndPoint("EndToEnd",end||start);return range;}};_10c6("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=dijit.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_10fa){_10fa=parseInt(_10fa);if(this.startContainer===node&&this.startOffset==_10fa){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_10fa;if(!this.endContainer){this.setEnd(node,_10fa);}else{this._updateInternal();}},setEnd:function(node,_10fb){_10fb=parseInt(_10fb);if(this.endContainer===node&&this.endOffset==_10fb){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_10fb;if(!this.startContainer){this.setStart(node,_10fb);}else{this._updateInternal();}},setStartAfter:function(node,_10fc){this._setPoint("setStart",node,_10fc,1);},setStartBefore:function(node,_10fd){this._setPoint("setStart",node,_10fd,0);},setEndAfter:function(node,_10fe){this._setPoint("setEnd",node,_10fe,1);},setEndBefore:function(node,_10ff){this._setPoint("setEnd",node,_10ff,0);},_setPoint:function(what,node,_1100,ext){var index=dijit.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,index.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();dijit.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var s=this.startContainer,r=this._getIERange();if(s.nodeType===3&&!this.startOffset){this.setStartBefore(s);}r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new dijit.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}return dijit.range;});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(array,lang,_1101){var _1102=function(_1103){if(!_1103){return _1103;}if(_1103.then){_1103=lang.delegate(_1103);}function _1104(_1105){if(!_1103[_1105]){_1103[_1105]=function(){var args=arguments;return _1101.when(_1103,function(_1106){Array.prototype.unshift.call(args,_1106);return _1102(array[_1105].apply(array,args));});};}};_1104("forEach");_1104("filter");_1104("map");if(!_1103.total){_1103.total=_1101.when(_1103,function(_1107){return _1107.length;});}return _1103;};lang.setObject("dojo.store.util.QueryResults",_1102);return _1102;});},"dijit/form/_ListBase":function(){define("dijit/form/_ListBase",["dojo/_base/declare","dojo/on","dojo/window"],function(_1108,on,_1109){return _1108("dijit.form._ListBase",null,{selected:null,_listConnect:function(_110a,_110b){var self=this;return self.own(on(self.containerNode,on.selector(function(_110c,_110d,_110e){return _110c.parentNode==_110e;},_110a),function(evt){evt.preventDefault();self[_110b](evt,this);}));},selectFirstNode:function(){var first=this.containerNode.firstChild;while(first&&first.style.display=="none"){first=first.nextSibling;}this._setSelectedAttr(first);},selectLastNode:function(){var last=this.containerNode.lastChild;while(last&&last.style.display=="none"){last=last.previousSibling;}this._setSelectedAttr(last);},selectNextNode:function(){var _110f=this.selected;if(!_110f){this.selectFirstNode();}else{var next=_110f.nextSibling;while(next&&next.style.display=="none"){next=next.nextSibling;}if(!next){this.selectFirstNode();}else{this._setSelectedAttr(next);}}},selectPreviousNode:function(){var _1110=this.selected;if(!_1110){this.selectLastNode();}else{var prev=_1110.previousSibling;while(prev&&prev.style.display=="none"){prev=prev.previousSibling;}if(!prev){this.selectLastNode();}else{this._setSelectedAttr(prev);}}},_setSelectedAttr:function(node){if(this.selected!=node){var _1111=this.selected;if(_1111){this.onDeselect(_1111);this.selected=null;}if(node){this.selected=node;_1109.scrollIntoView(node);this.onSelect(node);}}else{if(node){this.onSelect(node);}}}});});},"dijit/form/_FormWidget":function(){define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(_1112,has,_1113,ready,_1114,_1115,_1116,_1117){if(has("dijit-legacy-requires")){ready(0,function(){var _1118=["dijit/form/_FormValueWidget"];require(_1118);});}return _1112("dijit.form._FormWidget",[_1114,_1116,_1115,_1117],{setDisabled:function(_1119){_1113.deprecated("setDisabled("+_1119+") is deprecated. Use set('disabled',"+_1119+") instead.","","2.0");this.set("disabled",_1119);},setValue:function(value){_1113.deprecated("dijit.form._FormWidget:setValue("+value+") is deprecated.  Use set('value',"+value+") instead.","","2.0");this.set("value",value);},getValue:function(){_1113.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";this.inherited(arguments);},_setTypeAttr:null});});},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(dojo,_111a,_111b){dojo.DeferredList=function(list,_111c,_111d,_111e,_111f){var _1120=[];_111a.call(this);var self=this;if(list.length===0&&!_111c){this.resolve([0,[]]);}var _1121=0;_111b.forEach(list,function(item,i){item.then(function(_1122){if(_111c){self.resolve([i,_1122]);}else{_1123(true,_1122);}},function(error){if(_111d){self.reject(error);}else{_1123(false,error);}if(_111e){return null;}throw error;});function _1123(_1124,_1125){_1120[i]=[_1124,_1125];_1121++;if(_1121===list.length){self.resolve(_1120);}};});};dojo.DeferredList.prototype=new _111a();dojo.DeferredList.prototype.gatherResults=function(_1126){var d=new dojo.DeferredList(_1126,false,true,false);d.addCallback(function(_1127){var ret=[];_111b.forEach(_1127,function(_1128){ret.push(_1128[1]);});return ret;});return d;};return dojo.DeferredList;});},"dojo/dnd/common":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../dom"],function(_1129,_112a,lang,dom){var _112b=lang.getObject("dojo.dnd",true);_112b.getCopyKeyState=_1129.isCopyKey;_112b._uniqueId=0;_112b.getUniqueId=function(){var id;do{id=_112a._scopeName+"Unique"+(++_112b._uniqueId);}while(dom.byId(id));return id;};_112b._empty={};_112b.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};return _112b;});},"dijit/CalendarLite":function(){require({cache:{"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"}});define("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/event","dojo/_base/lang","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./hccss"],function(array,_112c,_112d,date,_112e,stamp,dom,_112f,event,lang,has,_1130,_1131,_1132,_1133){var _1134=_112c("dijit.CalendarLite",[_1131,_1132],{templateString:_1133,dowTemplateString:"<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\">${d}</span></th>",dateTemplateString:"<td class=\"dijitReset\" role=\"gridcell\" data-dojo-attach-point=\"dateCells\"><span class=\"dijitCalendarDateLabel\" data-dojo-attach-point=\"dateLabels\"></span></td>",weekTemplateString:"<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">${d}${d}${d}${d}${d}${d}${d}</tr>",value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",_isValidDate:function(value){return value&&!isNaN(value)&&typeof value=="object"&&value.toString()!=this.constructor.prototype.value.toString();},_getValueAttr:function(){if(this.value&&!isNaN(this.value)){var value=new this.dateClassObj(this.value);value.setHours(0,0,0,0);if(value.getDate()<this.value.getDate()){value=this.dateModule.add(value,"hour",1);}return value;}else{return null;}},_setValueAttr:function(value,_1135){if(typeof value=="string"){value=stamp.fromISOString(value);}value=this._patchDate(value);if(this._isValidDate(value)&&!this.isDisabledDate(value,this.lang)){this._set("value",value);this.set("currentFocus",value);this._markSelectedDates([value]);if(this._created&&(_1135||typeof _1135=="undefined")){this.onChange(this.get("value"));}}else{this._set("value",null);this._markSelectedDates([]);}},_patchDate:function(value){if(value){value=new this.dateClassObj(value);value.setHours(1,0,0,0);}return value;},_setText:function(node,text){while(node.firstChild){node.removeChild(node.firstChild);}node.appendChild(node.ownerDocument.createTextNode(text));},_populateGrid:function(){var month=new this.dateClassObj(this.currentFocus);month.setDate(1);var _1136=month.getDay(),_1137=this.dateModule.getDaysInMonth(month),_1138=this.dateModule.getDaysInMonth(this.dateModule.add(month,"month",-1)),today=new this.dateClassObj(),_1139=_112d.getFirstDayOfWeek(this.lang);if(_1139>_1136){_1139-=7;}this._date2cell={};array.forEach(this.dateCells,function(_113a,idx){var i=idx+_1139;var date=new this.dateClassObj(month),_113b,clazz="dijitCalendar",adj=0;if(i<_1136){_113b=_1138-_1136+i+1;adj=-1;clazz+="Previous";}else{if(i>=(_1136+_1137)){_113b=i-_1136-_1137+1;adj=1;clazz+="Next";}else{_113b=i-_1136+1;clazz+="Current";}}if(adj){date=this.dateModule.add(date,"month",adj);}date.setDate(_113b);if(!this.dateModule.compare(date,today,"date")){clazz="dijitCalendarCurrentDate "+clazz;}if(this.isDisabledDate(date,this.lang)){clazz="dijitCalendarDisabledDate "+clazz;_113a.setAttribute("aria-disabled","true");}else{clazz="dijitCalendarEnabledDate "+clazz;_113a.removeAttribute("aria-disabled");_113a.setAttribute("aria-selected","false");}var _113c=this.getClassForDate(date,this.lang);if(_113c){clazz=_113c+" "+clazz;}_113a.className=clazz+"Month dijitCalendarDateTemplate";var _113d=date.valueOf();this._date2cell[_113d]=_113a;_113a.dijitDateValue=_113d;this._setText(this.dateLabels[idx],date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate());},this);},_populateControls:function(){var month=new this.dateClassObj(this.currentFocus);month.setDate(1);this.monthWidget.set("month",month);var y=month.getFullYear()-1;var d=new this.dateClassObj();array.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_113e){this.dateModule=_113e.datePackage?lang.getObject(_113e.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_113e.datePackage?lang.getObject(_113e.datePackage+".locale",false):_112e;},_createMonthWidget:function(){return _1134._MonthWidget({id:this.id+"_mw",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},buildRendering:function(){var d=this.dowTemplateString,_113f=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),_1140=_112d.getFirstDayOfWeek(this.lang);this.dayCellsHtml=_1130.substitute([d,d,d,d,d,d,d].join(""),{d:""},function(){return _113f[_1140++%7];});var r=_1130.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[r,r,r,r,r,r].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);dom.setSelectable(this.domNode,false);var _1141=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",_1141,false);},postCreate:function(){this.inherited(arguments);this._connectControls();},_connectControls:function(){var _1142=lang.hitch(this,function(_1143,part,_1144){this.connect(this[_1143],"onclick",function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,part,_1144));});});_1142("incrementMonth","month",1);_1142("decrementMonth","month",-1);_1142("nextYearLabelNode","year",1);_1142("previousYearLabelNode","year",-1);},_setCurrentFocusAttr:function(date,_1145){var _1146=this.currentFocus,_1147=this._getNodeByDate(_1146);date=this._patchDate(date);this._set("currentFocus",date);if(!this._date2cell||this.dateModule.difference(_1146,date,"month")!=0){this._populateGrid();this._populateControls();this._markSelectedDates([this.value]);}var _1148=this._getNodeByDate(date);_1148.setAttribute("tabIndex",this.tabIndex);if(this.focused||_1145){_1148.focus();}if(_1147&&_1147!=_1148){if(has("webkit")){_1147.setAttribute("tabIndex","-1");}else{_1147.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onDayClick:function(evt){event.stop(evt);for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!_112f.contains(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}},_getNodeByDate:function(value){value=this._patchDate(value);return value&&this._date2cell?this._date2cell[value.valueOf()]:null;},_markSelectedDates:function(dates){function mark(_1149,cell){_112f.toggle(cell,"dijitCalendarSelectedDate",_1149);cell.setAttribute("aria-selected",_1149?"true":"false");};array.forEach(this._selectedCells||[],lang.partial(mark,false));this._selectedCells=array.filter(array.map(dates,this._getNodeByDate,this),function(n){return n;});array.forEach(this._selectedCells,lang.partial(mark,true));},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});_1134._MonthWidget=_112c("dijit.CalendarLite._MonthWidget",_1131,{_setMonthAttr:function(month){var _114a=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,month),_114b=(has("ie")==6?"":"<div class='dijitSpacer'>"+array.map(_114a,function(s){return "<div>"+s+"</div>";}).join("")+"</div>");this.domNode.innerHTML=_114b+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_114a[month.getMonth()]+"</div>";}});return _1134;});},"dijit/CheckedMenuItem":function(){require({cache:{"url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n"}});define("dijit/CheckedMenuItem",["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_114c,_114d,_114e,_114f){return _114c("dijit.CheckedMenuItem",_114e,{templateString:_114f,checked:false,_setCheckedAttr:function(_1150){_114d.toggle(this.domNode,"dijitCheckedMenuItemChecked",_1150);this.domNode.setAttribute("aria-checked",_1150?"true":"false");this._set("checked",_1150);},iconClass:"",onChange:function(){},_onClick:function(evt){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.onClick(evt);}});});},"esri/dijit/editing/Cut":function(){define("esri/dijit/editing/Cut",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/jsonUtils","esri/OperationBase"],function(_1151,lang,has,_1152,_1153,_1154){var Cut=_1151(_1154,{declaredClass:"esri.dijit.editing.Cut",type:"edit",label:"Cut Features",constructor:function(_1155){var i;_1155=_1155||{};if(!_1155.featureLayer){console.error("In constructor of 'esri.dijit.editing.Cut', featureLayer not provided");return;}this._featureLayer=_1155.featureLayer;if(!_1155.addedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', addedGraphics for cut not provided");return;}this._addedGraphics=_1155.addedGraphics;if(!_1155.preUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', preUpdatedGraphics not provided");return;}this._preUpdatedGraphicsGeometries=[];this._preUpdatedGraphicsAttributes=[];for(i=0;i<_1155.preUpdatedGraphics.length;i++){this._preUpdatedGraphicsGeometries.push(_1155.preUpdatedGraphics[i].geometry.toJson());this._preUpdatedGraphicsAttributes.push(_1155.preUpdatedGraphics[i].attributes);}if(!_1155.postUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', postUpdatedGraphics not provided");return;}this._postUpdatedGraphics=_1155.postUpdatedGraphics;this._postUpdatedGraphicsGeometries=[];this._postUpdatedGraphicsAttributes=[];for(i=0;i<_1155.postUpdatedGraphics.length;i++){this._postUpdatedGraphicsGeometries.push(_1155.postUpdatedGraphics[i].geometry.toJson());this._postUpdatedGraphicsAttributes.push(lang.clone(_1155.postUpdatedGraphics[i].attributes));}},performUndo:function(){var i;for(i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(_1153.fromJson(this._preUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._preUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,this._addedGraphics);},performRedo:function(){var i;for(i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(_1153.fromJson(this._postUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._postUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(this._addedGraphics,this._postUpdatedGraphics,null);}});if(has("extend-esri")){lang.setObject("dijit.editing.Cut",Cut,_1152);}return Cut;});},"dojox/grid/_Events":function(){define("dojox/grid/_Events",["dojo/keys","dojo/dom-class","dojo/_base/declare","dojo/_base/event","dojo/_base/sniff"],function(keys,_1156,_1157,event,has){return _1157("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(e){this.dispatchKeyEvent(e);},onContentEvent:function(e){this.dispatchContentEvent(e);},onHeaderEvent:function(e){this.dispatchHeaderEvent(e);},onStyleRow:function(inRow){var i=inRow;i.customClasses+=(i.odd?" dojoxGridRowOdd":"")+(i.selected?" dojoxGridRowSelected":"")+(i.over?" dojoxGridRowOver":"");this.focus.styleRow(inRow);this.edit.styleRow(inRow);},onKeyDown:function(e){if(e.altKey||e.metaKey){return;}var _1158;switch(e.keyCode){case keys.ESCAPE:this.edit.cancel();break;case keys.ENTER:if(!this.edit.isEditing()){_1158=this.focus.getHeaderIndex();if(_1158>=0){this.setSortIndex(_1158);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}event.stop(e);}if(!e.shiftKey){var _1159=this.edit.isEditing();this.edit.apply();if(!_1159){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex);}}if(!this.edit.isEditing()){var _115a=this.focus.focusView||this.views.views[0];_115a.content.decorateEvent(e);this.onRowClick(e);event.stop(e);}break;case keys.SPACE:if(!this.edit.isEditing()){_1158=this.focus.getHeaderIndex();if(_1158>=0){this.setSortIndex(_1158);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}event.stop(e);}break;case keys.TAB:this.focus[e.shiftKey?"previousKey":"nextKey"](e);break;case keys.LEFT_ARROW:case keys.RIGHT_ARROW:if(!this.edit.isEditing()){var _115b=e.keyCode;event.stop(e);_1158=this.focus.getHeaderIndex();if(_1158>=0&&(e.shiftKey&&e.ctrlKey)){this.focus.colSizeAdjust(e,_1158,(_115b==keys.LEFT_ARROW?-1:1)*5);}else{var _115c=(_115b==keys.LEFT_ARROW)?1:-1;if(this.isLeftToRight()){_115c*=-1;}this.focus.move(0,_115c);}}break;case keys.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){event.stop(e);this.focus.move(-1,0);}break;case keys.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){event.stop(e);this.focus.move(1,0);}break;case keys.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){event.stop(e);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1){this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0);}}break;case keys.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){event.stop(e);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1){this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0);}}break;default:break;}},onMouseOver:function(e){e.rowIndex==-1?this.onHeaderCellMouseOver(e):this.onCellMouseOver(e);},onMouseOut:function(e){e.rowIndex==-1?this.onHeaderCellMouseOut(e):this.onCellMouseOut(e);},onMouseDown:function(e){e.rowIndex==-1?this.onHeaderCellMouseDown(e):this.onCellMouseDown(e);},onMouseOverRow:function(e){if(!this.rows.isOver(e.rowIndex)){this.rows.setOverRow(e.rowIndex);e.rowIndex==-1?this.onHeaderMouseOver(e):this.onRowMouseOver(e);}},onMouseOutRow:function(e){if(this.rows.isOver(-1)){this.onHeaderMouseOut(e);}else{if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(e);}}},onMouseDownRow:function(e){if(e.rowIndex!=-1){this.onRowMouseDown(e);}},onCellMouseOver:function(e){if(e.cellNode){_1156.add(e.cellNode,this.cellOverClass);}},onCellMouseOut:function(e){if(e.cellNode){_1156.remove(e.cellNode,this.cellOverClass);}},onCellMouseDown:function(e){},onCellClick:function(e){this._click[0]=this._click[1];this._click[1]=e;if(!this.edit.isEditCell(e.rowIndex,e.cellIndex)){this.focus.setFocusCell(e.cell,e.rowIndex);}if(this._click.length>1&&this._click[0]==null){this._click.shift();}this.onRowClick(e);},onCellDblClick:function(e){var event;if(this._click.length>1&&has("ie")){event=this._click[1];}else{if(this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex){event=this._click[0];}else{event=e;}}this.focus.setFocusCell(event.cell,event.rowIndex);this.onRowClick(event);this.edit.setEditCell(event.cell,event.rowIndex);this.onRowDblClick(e);},onCellContextMenu:function(e){this.onRowContextMenu(e);},onCellFocus:function(_115d,_115e){this.edit.cellFocus(_115d,_115e);},onRowClick:function(e){this.edit.rowClick(e);this.selection.clickSelectEvent(e);},onRowDblClick:function(e){},onRowMouseOver:function(e){},onRowMouseOut:function(e){},onRowMouseDown:function(e){},onRowContextMenu:function(e){event.stop(e);},onHeaderMouseOver:function(e){},onHeaderMouseOut:function(e){},onHeaderCellMouseOver:function(e){if(e.cellNode){_1156.add(e.cellNode,this.cellOverClass);}},onHeaderCellMouseOut:function(e){if(e.cellNode){_1156.remove(e.cellNode,this.cellOverClass);}},onHeaderCellMouseDown:function(e){},onHeaderClick:function(e){},onHeaderCellClick:function(e){this.setSortIndex(e.cell.index);this.onHeaderClick(e);},onHeaderDblClick:function(e){},onHeaderCellDblClick:function(e){this.onHeaderDblClick(e);},onHeaderCellContextMenu:function(e){this.onHeaderContextMenu(e);},onHeaderContextMenu:function(e){if(!this.headerMenu){event.stop(e);}},onStartEdit:function(_115f,_1160){},onApplyCellEdit:function(_1161,_1162,_1163){},onCancelEdit:function(_1164){},onApplyEdit:function(_1165){},onCanSelect:function(_1166){return true;},onCanDeselect:function(_1167){return true;},onSelected:function(_1168){this.updateRowStyles(_1168);},onDeselected:function(_1169){this.updateRowStyles(_1169);},onSelectionChanged:function(){}});});},"dijit/Viewport":function(){define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/ready","dojo/sniff","dojo/_base/window","dojo/window"],function(_116a,on,ready,has,win,_116b){var _116c=new _116a();ready(200,function(){var _116d=_116b.getBox();_116c._rlh=on(win.global,"resize",function(){var _116e=_116b.getBox();if(_116d.h==_116e.h&&_116d.w==_116e.w){return;}_116d=_116e;_116c.emit("resize");});if(has("ie")==8){var _116f=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=_116f){_116f=screen.deviceXDPI;_116c.emit("resize");}},500);}});return _116c;});},"esri/tasks/geometry":function(){define("esri/tasks/geometry",["esri/tasks/GeometryService","esri/tasks/TrimExtendParameters","esri/tasks/BufferParameters","esri/tasks/AreasAndLengthsParameters","esri/tasks/LengthsParameters","esri/tasks/RelationParameters","esri/tasks/DensifyParameters","esri/tasks/GeneralizeParameters","esri/tasks/OffsetParameters","esri/tasks/DistanceParameters","esri/tasks/ProjectParameters"],function(){return {};});},"dojox/gfx/Mover":function(){define("dojox/gfx/Mover",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/on","dojo/touch","dojo/_base/event"],function(lang,arr,_1170,on,touch,event){return _1170("dojox.gfx.Mover",null,{constructor:function(shape,e,host){this.shape=shape;this.lastX=e.clientX;this.lastY=e.clientY;var h=this.host=host,d=document,_1171=on(d,touch.move,lang.hitch(this,"onFirstMove"));this.events=[on(d,touch.move,lang.hitch(this,"onMouseMove")),on(d,touch.release,lang.hitch(this,"destroy")),on(d,"dragstart",lang.hitch(event,"stop")),on(d,"selectstart",lang.hitch(event,"stop")),_1171];if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){var x=e.clientX;var y=e.clientY;this.host.onMove(this,{dx:x-this.lastX,dy:y-this.lastY});this.lastX=x;this.lastY=y;event.stop(e);},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove();},destroy:function(){arr.forEach(this.events,function(_1172){_1172.remove();});var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.shape=null;}});});},"esri/tasks/DistanceParameters":function(){define("esri/tasks/DistanceParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_1173,lang,_1174,has,_1175,_1176){var _1177=_1173(null,{declaredClass:"esri.tasks.DistanceParameters",geometry1:null,geometry2:null,distanceUnit:null,geodesic:null,toJson:function(){var json={};var _1178=this.geometry1;if(_1178){json.geometry1=_1174.toJson({geometryType:_1176.getJsonType(_1178),geometry:_1178});}var _1179=this.geometry2;if(_1179){json.geometry2=_1174.toJson({geometryType:_1176.getJsonType(_1179),geometry:_1179});}json.sr=_1174.toJson(this.geometry1.spatialReference.toJson());if(this.distanceUnit){json.distanceUnit=this.distanceUnit;}if(this.geodesic){json.geodesic=this.geodesic;}return json;}});if(has("extend-esri")){lang.setObject("tasks.DistanceParameters",_1177,_1175);}return _1177;});},"dojox/grid/util":function(){define("dojox/grid/util",["../main","dojo/_base/lang","dojo/dom"],function(dojox,lang,dom){var dgu=lang.getObject("grid.util",true,dojox);dgu.na="...";dgu.rowIndexTag="gridRowIndex";dgu.gridViewTag="gridView";dgu.fire=function(ob,ev,args){var fn=ob&&ev&&ob[ev];return fn&&(args?fn.apply(ob,args):ob[ev]());};dgu.setStyleHeightPx=function(_117a,_117b){if(_117b>=0){var s=_117a.style;var v=_117b+"px";if(_117a&&s["height"]!=v){s["height"]=v;}}};dgu.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];dgu.keyEvents=["keyup","keydown","keypress"];dgu.funnelEvents=function(_117c,_117d,_117e,_117f){var evts=(_117f?_117f:dgu.mouseEvents.concat(dgu.keyEvents));for(var i=0,l=evts.length;i<l;i++){_117d.connect(_117c,"on"+evts[i],_117e);}};dgu.removeNode=function(_1180){_1180=dom.byId(_1180);_1180&&_1180.parentNode&&_1180.parentNode.removeChild(_1180);return _1180;};dgu.arrayCompare=function(inA,inB){for(var i=0,l=inA.length;i<l;i++){if(inA[i]!=inB[i]){return false;}}return (inA.length==inB.length);};dgu.arrayInsert=function(_1181,_1182,_1183){if(_1181.length<=_1182){_1181[_1182]=_1183;}else{_1181.splice(_1182,0,_1183);}};dgu.arrayRemove=function(_1184,_1185){_1184.splice(_1185,1);};dgu.arraySwap=function(_1186,inI,inJ){var cache=_1186[inI];_1186[inI]=_1186[inJ];_1186[inJ]=cache;};return dgu;});},"dijit/form/_ComboBoxMenu":function(){define("dijit/form/_ComboBoxMenu",["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(_1187,_1188,_1189,keys,_118a,_118b,_118c,_118d){return _1187("dijit.form._ComboBoxMenu",[_118a,_118b,_118d,_118c],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div>"+"</div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);if(!this.isLeftToRight()){_1188.add(this.previousButton,"dijitMenuItemRtl");_1188.add(this.nextButton,"dijitMenuItemRtl");}},_createMenuItem:function(){var item=this.ownerDocument.createElement("div");item.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");item.setAttribute("role","option");return item;},onHover:function(node){_1188.add(node,"dijitMenuItemHover");},onUnhover:function(node){_1188.remove(node,"dijitMenuItemHover");},onSelect:function(node){_1188.add(node,"dijitMenuItemSelected");},onDeselect:function(node){_1188.remove(node,"dijitMenuItemSelected");},_page:function(up){var _118e=0;var _118f=this.domNode.scrollTop;var _1190=_1189.get(this.domNode,"height");if(!this.getHighlightedOption()){this.selectNextNode();}while(_118e<_1190){var _1191=this.getHighlightedOption();if(up){if(!_1191.previousSibling||_1191.previousSibling.style.display=="none"){break;}this.selectPreviousNode();}else{if(!_1191.nextSibling||_1191.nextSibling.style.display=="none"){break;}this.selectNextNode();}var _1192=this.domNode.scrollTop;_118e+=(_1192-_118f)*(up?-1:1);_118f=_1192;}},handleKey:function(evt){switch(evt.keyCode){case keys.DOWN_ARROW:this.selectNextNode();return false;case keys.PAGE_DOWN:this._page(false);return false;case keys.UP_ARROW:this.selectPreviousNode();return false;case keys.PAGE_UP:this._page(true);return false;default:return true;}}});});},"url:esri/dijit/editing/templates/AttachmentEditor.html":"<div class=\"attachmentEditor\">\r\n    <br />\r\n    <div>\r\n        <b>${NLS_attachments}</b>\r\n        <hr />\r\n        <div dojoAttachPoint=\"_attachmentError\" style='color:red;display:none'></div>\r\n        <br />\r\n        <span dojoAttachPoint='_attachmentList' style='word-wrap: break-word;'></span>\r\n        <br><br>\r\n        <form dojoAttachPoint='_uploadForm'> ${NLS_add}:&nbsp;&nbsp;<input type='file' name='attachment' dojoAttachPoint='_uploadField' /> </form>\r\n    </div>\r\n</div>","dojox/grid/cells/_base":function(){define("dojox/grid/cells/_base",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/event","dojo/_base/connect","dojo/_base/array","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dijit/_Widget","../util"],function(dojo,_1193,lang,event,_1194,array,has,dom,_1195,_1196,_1197,util){var _1198=_1193("dojox.grid._DeferredTextWidget",_1197,{deferred:null,_destroyOnRemove:true,postCreate:function(){if(this.deferred){this.deferred.addBoth(lang.hitch(this,function(text){if(this.domNode){this.domNode.innerHTML=text;}}));}}});var _1199=function(_119a){try{util.fire(_119a,"focus");util.fire(_119a,"select");}catch(e){}};var _119b=function(){setTimeout(lang.hitch.apply(dojo,arguments),0);};var _119c=_1193("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,draggable:true,_valueProp:"value",_formatPending:false,constructor:function(_119d){this._props=_119d||{};lang.mixin(this,_119d);if(this.draggable===undefined){this.draggable=true;}},_defaultFormat:function(_119e,_119f){var s=this.grid.formatterScope||this;var f=this.formatter;if(f&&s&&typeof f=="string"){f=this.formatter=s[f];}var v=(_119e!=this.defaultValue&&f)?f.apply(s,_119f):_119e;if(typeof v=="undefined"){return this.defaultValue;}if(v&&v.addBoth){v=new _1198({deferred:v},_1196.create("span",{innerHTML:this.defaultValue}));}if(v&&v.declaredClass&&v.startup){return "<div class='dojoxGridStubNode' linkWidget='"+v.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>";}return v;},format:function(_11a0,_11a1){var f,i=this.grid.edit.info,d=this.get?this.get(_11a0,_11a1):(this.value||this.defaultValue);d=(d&&d.replace&&this.grid.escapeHTMLInData)?d.replace(/&(?![a-z0-9]{1,8}\;)/ig,"&amp;").replace(/</g,"&lt;"):d;if(this.editable&&(this.alwaysEditing||(i.rowIndex==_11a0&&i.cell==this))){return this.formatEditing(d,_11a0);}else{return this._defaultFormat(d,[d,_11a0,this]);}},formatEditing:function(_11a2,_11a3){},getNode:function(_11a4){return this.view.getCellNode(_11a4,this.index);},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index);},getEditNode:function(_11a5){return (this.getNode(_11a5)||0).firstChild||0;},canResize:function(){var uw=this.unitWidth;return uw&&(uw!=="auto");},isFlex:function(){var uw=this.unitWidth;return uw&&lang.isString(uw)&&(uw=="auto"||uw.slice(-1)=="%");},applyEdit:function(_11a6,_11a7){if(this.getNode(_11a7)){this.grid.edit.applyCellEdit(_11a6,this,_11a7);}},cancelEdit:function(_11a8){this.grid.doCancelEdit(_11a8);},_onEditBlur:function(_11a9){if(this.grid.edit.isEditCell(_11a9,this.index)){this.grid.edit.apply();}},registerOnBlur:function(_11aa,_11ab){if(this.commitOnBlur){_1194.connect(_11aa,"onblur",function(e){setTimeout(lang.hitch(this,"_onEditBlur",_11ab),250);});}},needFormatNode:function(_11ac,_11ad){this._formatPending=true;_119b(this,"_formatNode",_11ac,_11ad);},cancelFormatNode:function(){this._formatPending=false;},_formatNode:function(_11ae,_11af){if(this._formatPending){this._formatPending=false;if(!has("ie")){dom.setSelectable(this.grid.domNode,true);}this.formatNode(this.getEditNode(_11af),_11ae,_11af);}},formatNode:function(_11b0,_11b1,_11b2){if(has("ie")){_119b(this,"focus",_11b2,_11b0);}else{this.focus(_11b2,_11b0);}},dispatchEvent:function(m,e){if(m in this){return this[m](e);}},getValue:function(_11b3){return this.getEditNode(_11b3)[this._valueProp];},setValue:function(_11b4,_11b5){var n=this.getEditNode(_11b4);if(n){n[this._valueProp]=_11b5;}},focus:function(_11b6,_11b7){_1199(_11b7||this.getEditNode(_11b6));},save:function(_11b8){this.value=this.value||this.getValue(_11b8);},restore:function(_11b9){this.setValue(_11b9,this.value);},_finish:function(_11ba){dom.setSelectable(this.grid.domNode,false);this.cancelFormatNode();},apply:function(_11bb){this.applyEdit(this.getValue(_11bb),_11bb);this._finish(_11bb);},cancel:function(_11bc){this.cancelEdit(_11bc);this._finish(_11bc);}});_119c.markupFactory=function(node,_11bd){var _11be=lang.trim(_1195.get(node,"formatter")||"");if(_11be){_11bd.formatter=lang.getObject(_11be)||_11be;}var get=lang.trim(_1195.get(node,"get")||"");if(get){_11bd.get=lang.getObject(get);}var _11bf=function(attr,cell,_11c0){var value=lang.trim(_1195.get(node,attr)||"");if(value){cell[_11c0||attr]=!(value.toLowerCase()=="false");}};_11bf("sortDesc",_11bd);_11bf("editable",_11bd);_11bf("alwaysEditing",_11bd);_11bf("noresize",_11bd);_11bf("draggable",_11bd);var value=lang.trim(_1195.get(node,"loadingText")||_1195.get(node,"defaultValue")||"");if(value){_11bd.defaultValue=value;}var _11c1=function(attr,cell,_11c2){var value=lang.trim(_1195.get(node,attr)||"")||undefined;if(value){cell[_11c2||attr]=value;}};_11c1("styles",_11bd);_11c1("headerStyles",_11bd);_11c1("cellStyles",_11bd);_11c1("classes",_11bd);_11c1("headerClasses",_11bd);_11c1("cellClasses",_11bd);};var Cell=_1193("dojox.grid.cells.Cell",_119c,{constructor:function(){this.keyFilter=this.keyFilter;},keyFilter:null,formatEditing:function(_11c3,_11c4){this.needFormatNode(_11c3,_11c4);return "<input class=\"dojoxGridInput\" type=\"text\" value=\""+_11c3+"\">";},formatNode:function(_11c5,_11c6,_11c7){this.inherited(arguments);this.registerOnBlur(_11c5,_11c7);},doKey:function(e){if(this.keyFilter){var key=String.fromCharCode(e.charCode);if(key.search(this.keyFilter)==-1){event.stop(e);}}},_finish:function(_11c8){this.inherited(arguments);var n=this.getEditNode(_11c8);try{util.fire(n,"blur");}catch(e){}}});Cell.markupFactory=function(node,_11c9){_119c.markupFactory(node,_11c9);var _11ca=lang.trim(_1195.get(node,"keyFilter")||"");if(_11ca){_11c9.keyFilter=new RegExp(_11ca);}};var _11cb=_1193("dojox.grid.cells.RowIndex",Cell,{name:"Row",postscript:function(){this.editable=false;},get:function(_11cc){return _11cc+1;}});_11cb.markupFactory=function(node,_11cd){Cell.markupFactory(node,_11cd);};var _11ce=_1193("dojox.grid.cells.Select",Cell,{options:null,values:null,returnIndex:-1,constructor:function(_11cf){this.values=this.values||this.options;},formatEditing:function(_11d0,_11d1){this.needFormatNode(_11d0,_11d1);var h=["<select class=\"dojoxGridSelect\">"];for(var i=0,o,v;((o=this.options[i])!==undefined)&&((v=this.values[i])!==undefined);i++){v=v.replace?v.replace(/&/g,"&amp;").replace(/</g,"&lt;"):v;o=o.replace?o.replace(/&/g,"&amp;").replace(/</g,"&lt;"):o;h.push("<option",(_11d0==v?" selected":"")," value=\""+v+"\"",">",o,"</option>");}h.push("</select>");return h.join("");},_defaultFormat:function(_11d2,_11d3){var v=this.inherited(arguments);if(!this.formatter&&this.values&&this.options){var i=array.indexOf(this.values,v);if(i>=0){v=this.options[i];}}return v;},getValue:function(_11d4){var n=this.getEditNode(_11d4);if(n){var i=n.selectedIndex,o=n.options[i];return this.returnIndex>-1?i:o.value||o.innerHTML;}}});_11ce.markupFactory=function(node,cell){Cell.markupFactory(node,cell);var _11d5=lang.trim(_1195.get(node,"options")||"");if(_11d5){var o=_11d5.split(",");if(o[0]!=_11d5){cell.options=o;}}var _11d6=lang.trim(_1195.get(node,"values")||"");if(_11d6){var v=_11d6.split(",");if(v[0]!=_11d6){cell.values=v;}}};var _11d7=_1193("dojox.grid.cells.AlwaysEdit",Cell,{alwaysEditing:true,_formatNode:function(_11d8,_11d9){this.formatNode(this.getEditNode(_11d9),_11d8,_11d9);},applyStaticValue:function(_11da){var e=this.grid.edit;e.applyCellEdit(this.getValue(_11da),this,_11da);e.start(this,_11da,true);}});_11d7.markupFactory=function(node,cell){Cell.markupFactory(node,cell);};var Bool=_1193("dojox.grid.cells.Bool",_11d7,{_valueProp:"checked",formatEditing:function(_11db,_11dc){return "<input class=\"dojoxGridInput\" type=\"checkbox\""+(_11db?" checked=\"checked\"":"")+" style=\"width: auto\" />";},doclick:function(e){if(e.target.tagName=="INPUT"){this.applyStaticValue(e.rowIndex);}}});Bool.markupFactory=function(node,cell){_11d7.markupFactory(node,cell);};return _119c;});},"dijit/form/_DateTimeTextBox":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(date,_11dd,stamp,_11de,lang,_11df,_11e0,_11e1){new Date("X");var _11e2=_11de("dijit.form._DateTimeTextBox",[_11df,_11e0],{templateString:_11e1,hasDownArrow:true,cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},pattern:_11dd.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},compare:function(val1,val2){var _11e3=this._isInvalidDate(val1);var _11e4=this._isInvalidDate(val2);return _11e3?(_11e4?0:-1):(_11e4?1:date.compare(val1,val2,this._selector));},forceWidth:true,format:function(value,_11e5){if(!value){return "";}return this.dateLocaleModule.format(value,_11e5);},"parse":function(value,_11e6){return this.dateLocaleModule.parse(value,_11e6)||(this._isEmpty(value)?null:undefined);},serialize:function(val,_11e7){if(val.toGregorian){val=val.toGregorian();}return stamp.toISOString(val,_11e7);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_11e8){this.dateModule=_11e8.datePackage?lang.getObject(_11e8.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_11e8.datePackage?lang.getObject(_11e8.datePackage+".locale",false):_11dd;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_11e9){_11e9.selector=this._selector;_11e9.fullYear=true;var _11ea=stamp.fromISOString;if(typeof _11e9.min=="string"){_11e9.min=_11ea(_11e9.min);}if(typeof _11e9.max=="string"){_11e9.max=_11ea(_11e9.max);}this.inherited(arguments);},_isInvalidDate:function(value){return !value||isNaN(value)||typeof value!="object"||value.toString()==this._invalidDate;},_setValueAttr:function(value,_11eb,_11ec){if(value!==undefined){if(typeof value=="string"){value=stamp.fromISOString(value);}if(this._isInvalidDate(value)){value=null;}if(value instanceof Date&&!(this.dateClassObj instanceof Date)){value=new this.dateClassObj(value);}}this.inherited(arguments);if(this.value instanceof Date){this.filterString="";}if(this.dropDown){this.dropDown.set("value",value,false);}},_set:function(attr,value){if(attr=="value"&&this.value instanceof Date&&this.compare(value,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){if(this._isInvalidDate(val)){val=new this.dateClassObj();}this.dropDownDefaultValue=val;},openDropDown:function(_11ed){if(this.dropDown){this.dropDown.destroy();}var _11ee=lang.isString(this.popupClass)?lang.getObject(this.popupClass,false):this.popupClass,_11ef=this,value=this.get("value");this.dropDown=new _11ee({onChange:function(value){_11ef.set("value",value,true);},id:this.id+"_popup",dir:_11ef.dir,lang:_11ef.lang,value:value,currentFocus:!this._isInvalidDate(value)?value:this.dropDownDefaultValue,constraints:_11ef.constraints,filterString:_11ef.filterString,datePackage:_11ef.params.datePackage,isDisabledDate:function(date){return !_11ef.rangeCheck(date,_11ef.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(value,_11f0){this._setValueAttr(this.parse(value,this.constraints),_11f0,value);}});return _11e2;});},"dijit/_base/focus":function(){define("dijit/_base/focus",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../main"],function(array,dom,lang,topic,win,focus,dijit){var _11f1={_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=win.doc.selection,cf=focus.curNode;if(win.global.getSelection){sel=win.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_11f2){var _11f3=win.doc,mark=_11f2.mark;if(mark){if(win.global.getSelection){var sel=win.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var n=mark.node;n.selectionStart=mark.start;n.selectionEnd=mark.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_11f3.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(lang.isArray(mark)){rg=_11f3.body.createControlRange();array.forEach(mark,function(n){rg.addElement(n);});}else{rg=_11f3.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_11f4){var node=!focus.curNode||(menu&&dom.isDescendant(focus.curNode,menu.domNode))?dijit._prevFocus:focus.curNode;return {node:node,bookmark:node&&(node==focus.curNode)&&win.withGlobal(_11f4||win.global,dijit.getBookmark),openedForWindow:_11f4};},_activeStack:[],registerIframe:function(_11f5){return focus.registerIframe(_11f5);},unregisterIframe:function(_11f6){_11f6&&_11f6.remove();},registerWin:function(_11f7,_11f8){return focus.registerWin(_11f7,_11f8);},unregisterWin:function(_11f9){_11f9&&_11f9.remove();}};focus.focus=function(_11fa){if(!_11fa){return;}var node="node" in _11fa?_11fa.node:_11fa,_11fb=_11fa.bookmark,_11fc=_11fa.openedForWindow,_11fd=_11fb?_11fb.isCollapsed:false;if(node){var _11fe=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_11fe&&_11fe.focus){try{_11fe.focus();}catch(e){}}focus._onFocusNode(node);}if(_11fb&&win.withGlobal(_11fc||win.global,dijit.isCollapsed)&&!_11fd){if(_11fc){_11fc.focus();}try{win.withGlobal(_11fc||win.global,dijit.moveToBookmark,null,[_11fb]);}catch(e2){}}};focus.watch("curNode",function(name,_11ff,_1200){dijit._curFocus=_1200;dijit._prevFocus=_11ff;if(_1200){topic.publish("focusNode",_1200);}});focus.watch("activeStack",function(name,_1201,_1202){dijit._activeStack=_1202;});focus.on("widget-blur",function(_1203,by){topic.publish("widgetBlur",_1203,by);});focus.on("widget-focus",function(_1204,by){topic.publish("widgetFocus",_1204,by);});lang.mixin(dijit,_11f1);return dijit;});},"url:esri/dijit/templates/AttributeInspector.html":"<div class=\"esriAttributeInspector\">\r\n    <div class=\"atiLayerName\" dojoAttachPoint=\"layerName\"></div>\r\n    <div class=\"atiAttributes\" dojoAttachPoint=\"attributeTable\"></div>\r\n    <div dojoAttachPoint=\"attachmentEditor\"></div>\r\n    <div class=\"atiEditorTrackingInfo\" dojoAttachPoint=\"editorTrackingInfoDiv\"></div>\r\n    <div class=\"atiButtons\" dojoAttachPoint=\"editButtons\">\r\n        <button  dojoType=\"dijit.form.Button\" class=\"atiButton atiDeleteButton\"  dojoAttachPoint=\"deleteBtn\" dojoAttachEvent=\"onClick: onDeleteBtn\" showLabel=\"true\" type=\"button\">${NLS_deleteFeature}</button>\r\n        <div class=\"atiNavButtons\" dojoAttachPoint=\"navButtons\">\r\n            <div class=\"atiNavMessage\" dojoAttachPoint=\"navMessage\"></div>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiFirstIcon\" dojoAttachPoint=\"firstFeatureButton\" dojoAttachEvent=\"onClick: onFirstFeature\" showLabel=\"false\" type=\"button\">${NLS_first}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiPrevIcon\" dojoAttachPoint=\"prevFeatureButton\" dojoAttachEvent=\"onClick: onPreviousFeature\" showLabel=\"false\" type=\"button\">${NLS_previous}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiNextIcon\" dojoAttachPoint=\"nextFeatureButton\" dojoAttachEvent=\"onClick: onNextFeature\" showLabel=\"false\" type=\"button\">${NLS_next}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiLastIcon\" dojoAttachPoint=\"lastFeatureButton\" dojoAttachEvent=\"onClick: onLastFeature\" showLabel=\"false\" type=\"button\">${NLS_last}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n","esri/dijit/editing/Delete":function(){define("esri/dijit/editing/Delete",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/OperationBase","esri/dijit/editing/Add"],function(_1205,lang,has,_1206,_1207,Add){var _1208=_1205(_1207,{declaredClass:"esri.dijit.editing.Delete",type:"edit",label:"Delete Features",constructor:function(_1209){_1209=_1209||{};this._add=new Add({featureLayer:_1209.featureLayer,addedGraphics:_1209.deletedGraphics});},performUndo:function(){this._add.performRedo();},performRedo:function(){this._add.performUndo();}});if(has("extend-esri")){lang.setObject("dijit.editing.Delete",_1208,_1206);}return _1208;});},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/sniff","./main"],function(array,_120a,_120b,dom,_120c,_120d,has,dijit){var shown=(dijit._isElementShown=function(elem){var s=_120d.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_120c.get(elem,"type")!="hidden");});dijit.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _120c.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _120e=elem.contentDocument;if("designMode" in _120e&&_120e.designMode=="on"){return true;}body=_120e.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}};var _120f=(dijit.isTabNavigable=function(elem){if(_120c.get(elem,"disabled")){return false;}else{if(_120c.has(elem,"tabIndex")){return _120c.get(elem,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(elem);}}});dijit._getTabNavigable=function(root){var first,last,_1210,_1211,_1212,_1213,_1214={};function _1215(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _1216=function(_1217){for(var child=_1217.firstChild;child;child=child.nextSibling){if(child.nodeType!=1||(has("ie")<=9&&child.scopeName!=="HTML")||!shown(child)){continue;}if(_120f(child)){var _1218=+_120c.get(child,"tabIndex");if(!_120c.has(child,"tabIndex")||_1218==0){if(!first){first=child;}last=child;}else{if(_1218>0){if(!_1210||_1218<_1211){_1211=_1218;_1210=child;}if(!_1212||_1218>=_1213){_1213=_1218;_1212=child;}}}var rn=_1215(child);if(_120c.get(child,"checked")&&rn){_1214[rn]=child;}}if(child.nodeName.toUpperCase()!="SELECT"){_1216(child);}}};if(shown(root)){_1216(root);}function rs(node){return _1214[_1215(node)]||node;};return {first:rs(first),last:rs(last),lowest:rs(_1210),highest:rs(_1212)};};dijit.getFirstInTabbingOrder=function(root,doc){var elems=dijit._getTabNavigable(dom.byId(root,doc));return elems.lowest?elems.lowest:elems.first;};dijit.getLastInTabbingOrder=function(root,doc){var elems=dijit._getTabNavigable(dom.byId(root,doc));return elems.last?elems.last:elems.highest;};return {hasDefaultTabStop:dijit.hasDefaultTabStop,isTabNavigable:dijit.isTabNavigable,_getTabNavigable:dijit._getTabNavigable,getFirstInTabbingOrder:dijit.getFirstInTabbingOrder,getLastInTabbingOrder:dijit.getLastInTabbingOrder};});},"dojox/grid/_Scroller":function(){define("dojox/grid/_Scroller",["dijit/registry","dojo/_base/declare","dojo/_base/lang","./util","dojo/_base/html"],function(_1219,_121a,lang,util,html){var _121b=function(_121c){var i=0,n,p=_121c.parentNode;while((n=p.childNodes[i++])){if(n==_121c){return i-1;}}return -1;};var _121d=function(_121e){if(!_121e){return;}dojo.forEach(_1219.toArray(),function(w){if(w.domNode&&html.isDescendant(w.domNode,_121e,true)){w.destroy();}});};var _121f=function(_1220){var node=html.byId(_1220);return (node&&node.tagName?node.tagName.toLowerCase():"");};var _1221=function(_1222,inTag){var _1223=[];var i=0,n;while((n=_1222.childNodes[i])){i++;if(_121f(n)==inTag){_1223.push(n);}}return _1223;};var _1224=function(_1225){return _1221(_1225,"div");};return _121a("dojox.grid._Scroller",null,{constructor:function(_1226){this.setContentNodes(_1226);this.pageHeights=[];this.pageNodes=[];this.stack=[];},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(_1227,_1228,_1229){switch(arguments.length){case 3:this.rowsPerPage=_1229;case 2:this.keepRows=_1228;case 1:this.rowCount=_1227;default:break;}this.defaultPageHeight=(this.grid.rowHeight>0?this.grid.rowHeight:this.defaultRowHeight)*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=lang.hitch(this,"onscroll");}},_getPageCount:function(_122a,_122b){return _122a?(Math.ceil(_122a/_122b)||1):0;},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode;},setKeepInfo:function(_122c){this.keepRows=_122c;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2);},setContentNodes:function(_122d){this.contentNodes=_122d;this.colCount=(this.contentNodes?this.contentNodes.length:0);this.pageNodes=[];for(var i=0;i<this.colCount;i++){this.pageNodes[i]=[];}},getDefaultNodes:function(){return this.pageNodes[0]||[];},invalidate:function(){this._invalidating=true;this.invalidateNodes();this.pageHeights=[];this.height=(this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0);this.resize();this._invalidating=false;},updateRowCount:function(_122e){this.invalidateNodes();this.rowCount=_122e;var _122f=this.pageCount;if(_122f===0){this.height=1;}this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<_122f){for(var i=_122f-1;i>=this.pageCount;i--){this.height-=this.getPageHeight(i);delete this.pageHeights[i];}}else{if(this.pageCount>_122f){this.height+=this.defaultPageHeight*(this.pageCount-_122f-1)+this.calcLastPageHeight();}}this.resize();},pageExists:function(_1230){return Boolean(this.getDefaultPageNode(_1230));},measurePage:function(_1231){if(this.grid.rowHeight){return ((_1231+1)*this.rowsPerPage>this.rowCount?this.rowCount-_1231*this.rowsPerPage:this.rowsPerPage)*this.grid.rowHeight;}var n=this.getDefaultPageNode(_1231);return (n&&n.innerHTML)?n.offsetHeight:undefined;},positionPage:function(_1232,inPos){for(var i=0;i<this.colCount;i++){this.pageNodes[i][_1232].style.top=inPos+"px";}},repositionPages:function(_1233){var nodes=this.getDefaultNodes();var last=0;for(var i=0;i<this.stack.length;i++){last=Math.max(this.stack[i],last);}var n=nodes[_1233];var y=(n?this.getPageNodePosition(n)+this.getPageHeight(_1233):0);for(var p=_1233+1;p<=last;p++){n=nodes[p];if(n){if(this.getPageNodePosition(n)==y){return;}this.positionPage(p,y);}y+=this.getPageHeight(p);}},installPage:function(_1234){for(var i=0;i<this.colCount;i++){this.contentNodes[i].appendChild(this.pageNodes[i][_1234]);}},preparePage:function(_1235,_1236){var p=(_1236?this.popPage():null);for(var i=0;i<this.colCount;i++){var nodes=this.pageNodes[i];var new_p=(p===null?this.createPageNode():this.invalidatePageNode(p,nodes));new_p.pageIndex=_1235;nodes[_1235]=new_p;}},renderPage:function(_1237){var nodes=[];var i,j;for(i=0;i<this.colCount;i++){nodes[i]=this.pageNodes[i][_1237];}for(i=0,j=_1237*this.rowsPerPage;(i<this.rowsPerPage)&&(j<this.rowCount);i++,j++){this.renderRow(j,nodes);}},removePage:function(_1238){for(var i=0,j=_1238*this.rowsPerPage;i<this.rowsPerPage;i++,j++){this.removeRow(j);}},destroyPage:function(_1239){for(var i=0;i<this.colCount;i++){var n=this.invalidatePageNode(_1239,this.pageNodes[i]);if(n){html.destroy(n);}}},pacify:function(_123a){},pacifying:false,pacifyTicks:200,setPacifying:function(_123b){if(this.pacifying!=_123b){this.pacifying=_123b;this.pacify(this.pacifying);}},startPacify:function(){this.startPacifyTicks=new Date().getTime();},doPacify:function(){var _123c=(new Date().getTime()-this.startPacifyTicks)>this.pacifyTicks;this.setPacifying(true);this.startPacify();return _123c;},endPacify:function(){this.setPacifying(false);},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight;}for(var i=0;i<this.colCount;i++){util.setStyleHeightPx(this.contentNodes[i],Math.max(1,this.height));}var _123d=(!this._invalidating);if(!_123d){var ah=this.grid.get("autoHeight");if(typeof ah=="number"&&ah<=Math.min(this.rowsPerPage,this.rowCount)){_123d=true;}}if(_123d){this.needPage(this.page,this.pageTop);}var _123e=(this.page<this.pageCount-1)?this.rowsPerPage:((this.rowCount%this.rowsPerPage)||this.rowsPerPage);var _123f=this.getPageHeight(this.page);this.averageRowHeight=(_123f>0&&_123e>0)?(_123f/_123e):0;},calcLastPageHeight:function(){if(!this.pageCount){return 0;}var _1240=this.pageCount-1;var _1241=((this.rowCount%this.rowsPerPage)||(this.rowsPerPage))*this.defaultRowHeight;this.pageHeights[_1240]=_1241;return _1241;},updateContentHeight:function(inDh){this.height+=inDh;this.resize();},updatePageHeight:function(_1242,_1243,_1244){if(this.pageExists(_1242)){var oh=this.getPageHeight(_1242);var h=(this.measurePage(_1242));if(h===undefined){h=oh;}this.pageHeights[_1242]=h;if(oh!=h){this.updateContentHeight(h-oh);var ah=this.grid.get("autoHeight");if((typeof ah=="number"&&ah>this.rowCount)||(ah===true&&!_1243)){if(!_1244){this.grid.sizeChange();}else{var ns=this.grid.viewsNode.style;ns.height=parseInt(ns.height)+h-oh+"px";this.repositionPages(_1242);}}else{this.repositionPages(_1242);}}return h;}return 0;},rowHeightChanged:function(_1245,_1246){this.updatePageHeight(Math.floor(_1245/this.rowsPerPage),false,_1246);},invalidateNodes:function(){while(this.stack.length){this.destroyPage(this.popPage());}},createPageNode:function(){var p=document.createElement("div");html.attr(p,"role","presentation");p.style.position="absolute";p.style[this.grid.isLeftToRight()?"left":"right"]="0";return p;},getPageHeight:function(_1247){var ph=this.pageHeights[_1247];return (ph!==undefined?ph:this.defaultPageHeight);},pushPage:function(_1248){return this.stack.push(_1248);},popPage:function(){return this.stack.shift();},findPage:function(inTop){var i=0,h=0;for(var ph=0;i<this.pageCount;i++,h+=ph){ph=this.getPageHeight(i);if(h+ph>=inTop){break;}}this.page=i;this.pageTop=h;},buildPage:function(_1249,_124a,inPos){this.preparePage(_1249,_124a);this.positionPage(_1249,inPos);this.installPage(_1249);this.renderPage(_1249);this.pushPage(_1249);},needPage:function(_124b,inPos){var h=this.getPageHeight(_124b),oh=h;if(!this.pageExists(_124b)){this.buildPage(_124b,(!this.grid._autoHeight&&this.keepPages&&(this.stack.length>=this.keepPages)),inPos);h=this.updatePageHeight(_124b,true);}else{this.positionPage(_124b,inPos);}return h;},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop);},scroll:function(inTop){this.grid.scrollTop=inTop;if(this.colCount){this.startPacify();this.findPage(inTop);var h=this.height;var b=this.getScrollBottom(inTop);for(var p=this.page,y=this.pageTop;(p<this.pageCount)&&((b<0)||(y<b));p++){y+=this.needPage(p,y);}this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,inTop);this.lastVisibleRow=this.getLastVisibleRow(p-1,y,b);if(h!=this.height){this.repositionPages(p-1);}this.endPacify();}},getScrollBottom:function(inTop){return (this.windowHeight>=0?inTop+this.windowHeight:-1);},processNodeEvent:function(e,_124c){var t=e.target;while(t&&(t!=_124c)&&t.parentNode&&(t.parentNode.parentNode!=_124c)){t=t.parentNode;}if(!t||!t.parentNode||(t.parentNode.parentNode!=_124c)){return false;}var page=t.parentNode;e.topRowIndex=page.pageIndex*this.rowsPerPage;e.rowIndex=e.topRowIndex+_121b(t);e.rowTarget=t;return true;},processEvent:function(e){return this.processNodeEvent(e,this.contentNode);},renderRow:function(_124d,_124e){},removeRow:function(_124f){},getDefaultPageNode:function(_1250){return this.getDefaultNodes()[_1250];},positionPageNode:function(_1251,inPos){},getPageNodePosition:function(_1252){return _1252.offsetTop;},invalidatePageNode:function(_1253,_1254){var p=_1254[_1253];if(p){delete _1254[_1253];this.removePage(_1253,p);_121d(p);p.innerHTML="";}return p;},getPageRow:function(_1255){return _1255*this.rowsPerPage;},getLastPageRow:function(_1256){return Math.min(this.rowCount,this.getPageRow(_1256+1))-1;},getFirstVisibleRow:function(_1257,_1258,_1259){if(!this.pageExists(_1257)){return 0;}var row=this.getPageRow(_1257);var nodes=this.getDefaultNodes();var rows=_1224(nodes[_1257]);for(var i=0,l=rows.length;i<l&&_1258<_1259;i++,row++){_1258+=rows[i].offsetHeight;}return (row?row-1:row);},getLastVisibleRow:function(_125a,_125b,_125c){if(!this.pageExists(_125a)){return 0;}var nodes=this.getDefaultNodes();var row=this.getLastPageRow(_125a);var rows=_1224(nodes[_125a]);for(var i=rows.length-1;i>=0&&_125b>_125c;i--,row--){_125b-=rows[i].offsetHeight;}return row+1;},findTopRow:function(_125d){var nodes=this.getDefaultNodes();var rows=_1224(nodes[this.page]);for(var i=0,l=rows.length,t=this.pageTop,h;i<l;i++){h=rows[i].offsetHeight;t+=h;if(t>=_125d){this.offset=h-(t-_125d);return i+this.page*this.rowsPerPage;}}return -1;},findScrollTop:function(inRow){var _125e=Math.floor(inRow/this.rowsPerPage);var t=0;var i,l;for(i=0;i<_125e;i++){t+=this.getPageHeight(i);}this.pageTop=t;this.page=_125e;this.needPage(_125e,this.pageTop);var nodes=this.getDefaultNodes();var rows=_1224(nodes[_125e]);var r=inRow-this.rowsPerPage*_125e;for(i=0,l=rows.length;i<l&&i<r;i++){t+=rows[i].offsetHeight;}return t;},dummy:0});});},"dijit/Calendar":function(){define("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(array,date,local,_125f,_1260,_1261,event,_1262,keys,lang,has,_1263,_1264,_1265,_1266,_1267){var _1268=_125f("dijit.Calendar",[_1263,_1264,_1265],{cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},setValue:function(value){_1262.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",value);},_createMonthWidget:function(){return new _1268._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:lang.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeydown","_onKeyDown");this.connect(this.dateRowsNode,"onmouseover","_onDayMouseOver");this.connect(this.dateRowsNode,"onmouseout","_onDayMouseOut");this.connect(this.dateRowsNode,"onmousedown","_onDayMouseDown");this.connect(this.dateRowsNode,"onmouseup","_onDayMouseUp");},_onMonthSelect:function(_1269){var date=new this.dateClassObj(this.currentFocus);date.setDate(1);date.setMonth(_1269);var _126a=this.dateModule.getDaysInMonth(date);var _126b=this.currentFocus.getDate();date.setDate(Math.min(_126b,_126a));this._setCurrentFocusAttr(date);},_onDayMouseOver:function(evt){var node=_1261.contains(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&((node.dijitDateValue&&!_1261.contains(node,"dijitCalendarDisabledDate"))||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){_1261.add(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(_1261.contains(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}_1261.remove(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue&&!_1261.contains(node,"dijitCalendarDisabledDate")){_1261.add(node,"dijitCalendarActiveDate");this._currentNode=node;}},_onDayMouseUp:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){_1261.remove(node,"dijitCalendarActiveDate");}},handleKey:function(evt){var _126c=-1,_126d,_126e=this.currentFocus;switch(evt.keyCode){case keys.RIGHT_ARROW:_126c=1;case keys.LEFT_ARROW:_126d="day";if(!this.isLeftToRight()){_126c*=-1;}break;case keys.DOWN_ARROW:_126c=1;case keys.UP_ARROW:_126d="week";break;case keys.PAGE_DOWN:_126c=1;case keys.PAGE_UP:_126d=evt.ctrlKey||evt.altKey?"year":"month";break;case keys.END:_126e=this.dateModule.add(_126e,"month",1);_126d="day";case keys.HOME:_126e=new this.dateClassObj(_126e);_126e.setDate(1);break;case keys.ENTER:case keys.SPACE:this.set("value",this.currentFocus);break;default:return true;}if(_126d){_126e=this.dateModule.add(_126e,_126d,_126c);}this._setCurrentFocusAttr(_126e);return false;},_onKeyDown:function(evt){if(!this.handleKey(evt)){event.stop(evt);}},onValueSelected:function(){},onChange:function(value){this.onValueSelected(value);},getClassForDate:function(){}});_1268._MonthDropDownButton=_125f("dijit.Calendar._MonthDropDownButton",_1267,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new _1268._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect});},_setMonthAttr:function(month){var _126f=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,month);this.dropDown.set("months",_126f);this.containerNode.innerHTML=(has("ie")==6?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_126f[month.getMonth()]+"</div>";}});_1268._MonthDropDown=_125f("dijit.Calendar._MonthDropDown",[_1264,_1266],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_1270){this.domNode.innerHTML=array.map(_1270,function(month,idx){return month?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+month+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(_1260.get(evt.target,"month"));},onChange:function(){},_onMenuHover:function(evt){_1261.toggle(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});return _1268;});},"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(_1271,_1272){return _1271("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){var _1273=this.checked;this._set("checked",!_1273);var ret=this.inherited(arguments);this.set("checked",ret?this.checked:_1273);return ret;},_setCheckedAttr:function(value,_1274){this._set("checked",value);var node=this.focusNode||this.domNode;_1272.set(node,"checked",!!value);if(value){node.setAttribute("checked","");}else{node.removeAttribute("checked");}node.setAttribute(this._aria_attr,String(value));this._handleOnChange(value,_1274);},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});});},"dojo/dnd/Container":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/kernel","../_base/lang","../_base/window","../dom","../dom-class","../dom-construct","../Evented","../has","../on","../query","../ready","../touch","./common"],function(array,_1275,event,_1276,lang,win,dom,_1277,_1278,_1279,has,on,query,ready,touch,dnd){var _127a=_1275("dojo.dnd.Container",_1279,{skipForm:false,allowNested:false,constructor:function(node,_127b){this.node=dom.byId(node);if(!_127b){_127b={};}this.creator=_127b.creator||null;this.skipForm=_127b.skipForm;this.parent=_127b.dropParent&&dom.byId(_127b.dropParent);this.map={};this.current=null;this.containerState="";_1277.add(this.node,"dojoDndContainer");if(!(_127b&&_127b._skipStartup)){this.startup();}this.events=[on(this.node,touch.over,lang.hitch(this,"onMouseOver")),on(this.node,touch.out,lang.hitch(this,"onMouseOut")),on(this.node,"dragstart",lang.hitch(this,"onSelectStart")),on(this.node,"selectstart",lang.hitch(this,"onSelectStart"))];},creator:function(){},getItem:function(key){return this.map[key];},setItem:function(key,data){this.map[key]=data;},delItem:function(key){delete this.map[key];},forInItems:function(f,o){o=o||_1276.global;var m=this.map,e=dnd._empty;for(var i in m){if(i in e){continue;}f.call(o,m[i],i,this);}return o;},clearItems:function(){this.map={};},getAllNodes:function(){return query((this.allowNested?"":"> ")+".dojoDndItem",this.parent);},sync:function(){var map={};this.getAllNodes().forEach(function(node){if(node.id){var item=this.getItem(node.id);if(item){map[node.id]=item;return;}}else{node.id=dnd.getUniqueId();}var type=node.getAttribute("dndType"),data=node.getAttribute("dndData");map[node.id]={data:data||node.innerHTML,type:type?type.split(/\s*,\s*/):["text"]};},this);this.map=map;return this;},insertNodes:function(data,_127c,_127d){if(!this.parent.firstChild){_127d=null;}else{if(_127c){if(!_127d){_127d=this.parent.firstChild;}}else{if(_127d){_127d=_127d.nextSibling;}}}var i,t;if(_127d){for(i=0;i<data.length;++i){t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});_127d.parentNode.insertBefore(t.node,_127d);}}else{for(i=0;i<data.length;++i){t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.appendChild(t.node);}}return this;},destroy:function(){array.forEach(this.events,function(_127e){_127e.remove();});this.clearItems();this.node=this.parent=this.current=null;},markupFactory:function(_127f,node,Ctor){_127f._skipStartup=true;return new Ctor(node,_127f);},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var c=this.parent.getElementsByTagName("tbody");if(c&&c.length){this.parent=c[0];}}}this.defaultCreator=dnd._defaultCreator(this.parent);this.sync();},onMouseOver:function(e){var n=e.relatedTarget;while(n){if(n==this.node){break;}try{n=n.parentNode;}catch(x){n=null;}}if(!n){this._changeState("Container","Over");this.onOverEvent();}n=this._getChildByEvent(e);if(this.current==n){return;}if(this.current){this._removeItemClass(this.current,"Over");}if(n){this._addItemClass(n,"Over");}this.current=n;},onMouseOut:function(e){for(var n=e.relatedTarget;n;){if(n==this.node){return;}try{n=n.parentNode;}catch(x){n=null;}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null;}this._changeState("Container","");this.onOutEvent();},onSelectStart:function(e){if(!this.skipForm||!dnd.isFormElement(e)){event.stop(e);}},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(type,_1280){var _1281="dojoDnd"+type;var state=type.toLowerCase()+"State";_1277.replace(this.node,_1281+_1280,_1281+this[state]);this[state]=_1280;},_addItemClass:function(node,type){_1277.add(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){_1277.remove(node,"dojoDndItem"+type);},_getChildByEvent:function(e){var node=e.target;if(node){for(var _1282=node.parentNode;_1282;node=_1282,_1282=node.parentNode){if((_1282==this.parent||this.allowNested)&&_1277.contains(node,"dojoDndItem")){return node;}}}return null;},_normalizedCreator:function(item,hint){var t=(this.creator||this.defaultCreator).call(this,item,hint);if(!lang.isArray(t.type)){t.type=["text"];}if(!t.node.id){t.node.id=dnd.getUniqueId();}_1277.add(t.node,"dojoDndItem");return t;}});dnd._createNode=function(tag){if(!tag){return dnd._createSpan;}return function(text){return _1278.create(tag,{innerHTML:text});};};dnd._createTrTd=function(text){var tr=_1278.create("tr");_1278.create("td",{innerHTML:text},tr);return tr;};dnd._createSpan=function(text){return _1278.create("span",{innerHTML:text});};dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dnd._defaultCreator=function(node){var tag=node.tagName.toLowerCase();var c=tag=="tbody"||tag=="thead"?dnd._createTrTd:dnd._createNode(dnd._defaultCreatorNodes[tag]);return function(item,hint){var isObj=item&&lang.isObject(item),data,type,n;if(isObj&&item.tagName&&item.nodeType&&item.getAttribute){data=item.getAttribute("dndData")||item.innerHTML;type=item.getAttribute("dndType");type=type?type.split(/\s*,\s*/):["text"];n=item;}else{data=(isObj&&item.data)?item.data:item;type=(isObj&&item.type)?item.type:["text"];n=(hint=="avatar"?dnd._createSpan:c)(String(data));}if(!n.id){n.id=dnd.getUniqueId();}return {node:n,data:data,type:type};};};return _127a;});},"dojox/date/islamic":function(){define("dojox/date/islamic",["..","dojo/_base/lang","dojo/date","./islamic/Date"],function(dojox,lang,dd,IDate){var _1283=lang.getObject("date.islamic",true,dojox);_1283.getDaysInMonth=function(month){return month.getDaysInIslamicMonth(month.getMonth(),month.getFullYear());};_1283.compare=function(date1,date2,_1284){if(date1 instanceof IDate){date1=date1.toGregorian();}if(date2 instanceof IDate){date2=date2.toGregorian();}return dd.compare.apply(null,arguments);};_1283.add=function(date,_1285,_1286){var _1287=new IDate(date);switch(_1285){case "day":_1287.setDate(date.getDate()+_1286);break;case "weekday":var day=date.getDay();if(((day+_1286)<5)&&((day+_1286)>0)){_1287.setDate(date.getDate()+_1286);}else{var _1288=0,_1289=0;if(day==5){day=4;_1289=(_1286>0)?-1:1;}else{if(day==6){day=4;_1289=(_1286>0)?-2:2;}}var add=(_1286>0)?(5-day-1):-day;var _128a=_1286-add;var div=parseInt(_128a/5);if(_128a%5!=0){_1288=(_1286>0)?2:-2;}_1288=_1288+div*7+_128a%5+add;_1287.setDate(date.getDate()+_1288+_1289);}break;case "year":_1287.setFullYear(date.getFullYear()+_1286);break;case "week":_1286*=7;_1287.setDate(date.getDate()+_1286);break;case "month":var month=date.getMonth();_1287.setMonth(month+_1286);break;case "hour":_1287.setHours(date.getHours()+_1286);break;case "minute":_1287._addMinutes(_1286);break;case "second":_1287._addSeconds(_1286);break;case "millisecond":_1287._addMilliseconds(_1286);break;}return _1287;};_1283.difference=function(date1,date2,_128b){date2=date2||new IDate();_128b=_128b||"day";var _128c=date2.getFullYear()-date1.getFullYear();var delta=1;switch(_128b){case "weekday":var days=Math.round(_1283.difference(date1,date2,"day"));var weeks=parseInt(_1283.difference(date1,date2,"week"));var mod=days%7;if(mod==0){days=weeks*5;}else{var adj=0;var aDay=date1.getDay();var bDay=date2.getDay();weeks=parseInt(days/7);mod=days%7;var _128d=new IDate(date1);_128d.setDate(_128d.getDate()+(weeks*7));var _128e=_128d.getDay();if(days>0){switch(true){case aDay==5:adj=-1;break;case aDay==6:adj=0;break;case bDay==5:adj=-1;break;case bDay==6:adj=-2;break;case (_128e+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==5:adj=0;break;case aDay==6:adj=1;break;case bDay==5:adj=2;break;case bDay==6:adj=1;break;case (_128e+mod)<0:adj=2;}}}days+=adj;days-=(weeks*2);}delta=days;break;case "year":delta=_128c;break;case "month":var _128f=(date2.toGregorian()>date1.toGregorian())?date2:date1;var _1290=(date2.toGregorian()>date1.toGregorian())?date1:date2;var _1291=_128f.getMonth();var _1292=_1290.getMonth();if(_128c==0){delta=_128f.getMonth()-_1290.getMonth();}else{delta=12-_1292;delta+=_1291;var i=_1290.getFullYear()+1;var e=_128f.getFullYear();for(i;i<e;i++){delta+=12;}}if(date2.toGregorian()<date1.toGregorian()){delta=-delta;}break;case "week":delta=parseInt(_1283.difference(date1,date2,"day")/7);break;case "day":delta/=24;case "hour":delta/=60;case "minute":delta/=60;case "second":delta/=1000;case "millisecond":delta*=date2.toGregorian().getTime()-date1.toGregorian().getTime();}return Math.round(delta);};return _1283;});},"dijit/_Widget":function(){define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_1293,_1294,_1295,_1296,has,_1297,lang,query,ready,_1298,_1299,_129a,_129b){function _129c(){};function _129d(_129e){return function(obj,event,scope,_129f){if(obj&&typeof event=="string"&&obj[event]==_129c){return obj.on(event.substring(2).toLowerCase(),lang.hitch(scope,_129f));}return _129e.apply(_1295,arguments);};};_1293.around(_1295,"connect",_129d);if(_1297.connect){_1293.around(_1297,"connect",_129d);}var _12a0=_1296("dijit._Widget",[_1299,_129a,_129b],{onClick:_129c,onDblClick:_129c,onKeyDown:_129c,onKeyPress:_129c,onKeyUp:_129c,onMouseDown:_129c,onMouseMove:_129c,onMouseOut:_129c,onMouseOver:_129c,onMouseLeave:_129c,onMouseEnter:_129c,onMouseUp:_129c,constructor:function(_12a1){this._toConnect={};for(var name in _12a1){if(this[name]===_129c){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_12a1[name];delete _12a1[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_129c){return _1295.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,value){_1297.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,value);},attr:function(name,value){if(_1294.isDebug){var _12a2=arguments.callee._ach||(arguments.callee._ach={}),_12a3=(arguments.callee.caller||"unknown caller").toString();if(!_12a2[_12a3]){_1297.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_12a3,"","2.0");_12a2[_12a3]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_1297.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?query("[widgetId]",this.containerNode).map(_1298.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(has("dijit-legacy-requires")){ready(0,function(){var _12a4=["dijit/_base"];require(_12a4);});}return _12a0;});},"dojo/touch":function(){define(["./_base/kernel","./aspect","./dom","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(dojo,_12a5,dom,lang,on,has,mouse,_12a6,win){var _12a7=navigator.msPointerEnabled;var _12a8;function _12a9(_12aa,_12ab,_12ac){if(_12a7&&_12ac){return function(node,_12ad){return on(node,_12ac,_12ad);};}else{if(has("touch")){return function(node,_12ae){var _12af=on(node,_12ab,_12ae),_12b0=on(node,_12aa,function(evt){if(!_12a8||(new Date()).getTime()>_12a8+1000){_12ae.call(this,evt);}});return {remove:function(){_12af.remove();_12b0.remove();}};};}else{return function(node,_12b1){return on(node,_12aa,_12b1);};}}};var _12b2,_12b3,_12b4;if(has("touch")&&!_12a7){_12a6(function(){_12b4=win.body();win.doc.addEventListener("touchstart",function(event){_12a8=(new Date()).getTime();var _12b5=_12b4;_12b4=event.target;if(_12b4.dojoElementFromPoint){_12b4=_12b4.dojoElementFromPoint(event.changedTouches[0].clientX,event.changedTouches[0].clientY);}if(_12b5){on.emit(_12b5,"dojotouchout",{target:_12b5,relatedTarget:_12b4,bubbles:true});}if(_12b4){on.emit(_12b4,"dojotouchover",{target:_12b4,relatedTarget:_12b5,bubbles:true});}},true);on(win.doc,"touchmove",function(event){_12a8=(new Date()).getTime();_12b3=event;var _12b6=win.doc.elementFromPoint(event.clientX,event.clientY);if(_12b6){var _12b7=_12b6;if(_12b6.dojoElementFromPoint){_12b6=_12b6.dojoElementFromPoint(event.clientX,event.clientY);}if(_12b4!==_12b6){if(_12b4){on.emit(_12b7,"dojotouchout",{target:_12b4,relatedTarget:_12b6,bubbles:true});}if(_12b6){on.emit(_12b7,"dojotouchover",{target:_12b6,relatedTarget:_12b4,bubbles:true});}_12b4=_12b6;}on.emit(_12b7,"dojotouchmove",{target:_12b6,bubbles:true});}});on(win.doc,"touchend",function(event){var node=win.doc.elementFromPoint(event.clientX,event.clientY);var _12b8=node;if(node.dojoElementFromPoint){node=node.dojoElementFromPoint(event.clientX,event.clientY);}if(node){on.emit(_12b8,"dojotouchend",lang.delegate(event,{target:node,bubbles:true}));}});});_12b2=function(node,_12b9){return on(node,"dojotouchmove",function(_12ba){_12b9(lang.delegate(_12b3,{target:_12ba.target,preventDefault:function(){_12b3.preventDefault();},stopPropagation:function(){_12ba.stopPropagation();}}));});};}var touch={press:_12a9("mousedown","touchstart","MSPointerDown"),move:_12a9("mousemove",_12b2,"MSPointerMove"),release:_12a9("mouseup","dojotouchend","MSPointerUp"),cancel:_12a9(mouse.leave,"touchcancel",has("touch")?"MSPointerCancel":null),over:_12a9("mouseover","dojotouchover","MSPointerOver"),out:_12a9("mouseout","dojotouchout","MSPointerOut"),enter:mouse._eventHandler(_12a9("mouseover","dojotouchover","MSPointerOver")),leave:mouse._eventHandler(_12a9("mouseout","dojotouchout","MSPointerOut"))};1&&(dojo.touch=touch);return touch;});},"dojox/grid/DataSelection":function(){define("dojox/grid/DataSelection",["dojo/_base/declare","./_SelectionPreserver","./Selection"],function(_12bb,_12bc,_12bd){return _12bb("dojox.grid.DataSelection",_12bd,{constructor:function(grid){if(grid.keepSelection){this.preserver=new _12bc(this);}},destroy:function(){if(this.preserver){this.preserver.destroy();}},getFirstSelected:function(){var idx=_12bd.prototype.getFirstSelected.call(this);if(idx==-1){return null;}return this.grid.getItem(idx);},getNextSelected:function(_12be){var _12bf=this.grid.getItemIndex(_12be);var idx=_12bd.prototype.getNextSelected.call(this,_12bf);if(idx==-1){return null;}return this.grid.getItem(idx);},getSelected:function(){var _12c0=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_12c0.push(this.grid.getItem(i));}}return _12c0;},addToSelection:function(_12c1){if(this.mode=="none"){return;}var idx=null;if(typeof _12c1=="number"||typeof _12c1=="string"){idx=_12c1;}else{idx=this.grid.getItemIndex(_12c1);}_12bd.prototype.addToSelection.call(this,idx);},deselect:function(_12c2){if(this.mode=="none"){return;}var idx=null;if(typeof _12c2=="number"||typeof _12c2=="string"){idx=_12c2;}else{idx=this.grid.getItemIndex(_12c2);}_12bd.prototype.deselect.call(this,idx);},deselectAll:function(_12c3){var idx=null;if(_12c3||typeof _12c3=="number"){if(typeof _12c3=="number"||typeof _12c3=="string"){idx=_12c3;}else{idx=this.grid.getItemIndex(_12c3);}_12bd.prototype.deselectAll.call(this,idx);}else{this.inherited(arguments);}}});});},"dijit/_editor/selection":function(){define("dijit/_editor/selection",["dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","../main"],function(dom,lang,has,win,dijit){var _12c4={getType:function(){if(win.doc.getSelection){var stype="text";var oSel;try{oSel=win.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _12c5=oSel.getRangeAt(0);if((_12c5.startContainer==_12c5.endContainer)&&((_12c5.endOffset-_12c5.startOffset)==1)&&(_12c5.startContainer.nodeType!=3)){stype="control";}}return stype;}else{return win.doc.selection.type.toLowerCase();}},getSelectedText:function(){if(win.doc.getSelection){var _12c6=win.global.getSelection();return _12c6?_12c6.toString():"";}else{if(dijit._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().text;}},getSelectedHtml:function(){if(win.doc.getSelection){var _12c7=win.global.getSelection();if(_12c7&&_12c7.rangeCount){var i;var html="";for(i=0;i<_12c7.rangeCount;i++){var frag=_12c7.getRangeAt(i).cloneContents();var div=win.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}else{if(dijit._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().htmlText;}},getSelectedElement:function(){if(dijit._editor.selection.getType()=="control"){if(win.doc.getSelection){var _12c8=win.global.getSelection();return _12c8.anchorNode.childNodes[_12c8.anchorOffset];}else{var range=win.doc.selection.createRange();if(range&&range.item){return win.doc.selection.createRange().item(0);}}}return null;},getParentElement:function(){if(dijit._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(win.doc.getSelection){var _12c9=win.global.getSelection();if(_12c9){var node=_12c9.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}else{var r=win.doc.selection.createRange();r.collapse(true);return r.parentElement();}}return null;},hasAncestorElement:function(_12ca){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_12cb){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _12cc=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _12cd=String(tags[i]).toLowerCase();if(_12cc==_12cd){return _12cd;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_12ce){if(win.doc.getSelection){var _12cf=win.global.getSelection();if(_12cf.removeAllRanges){if(_12ce){_12cf.collapseToStart();}else{_12cf.collapseToEnd();}}else{_12cf.collapse(_12ce);}}else{var range=win.doc.selection.createRange();range.collapse(_12ce);range.select();}},remove:function(){var sel=win.doc.selection;if(win.doc.getSelection){sel=win.global.getSelection();sel.deleteFromDocument();return sel;}else{if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}},selectElementChildren:function(_12d0,_12d1){var doc=win.doc;var range;_12d0=dom.byId(_12d0);if(win.doc.getSelection){var _12d2=win.global.getSelection();if(has("opera")){if(_12d2.rangeCount){range=_12d2.getRangeAt(0);}else{range=doc.createRange();}range.setStart(_12d0,0);range.setEnd(_12d0,(_12d0.nodeType==3)?_12d0.length:_12d0.childNodes.length);_12d2.addRange(range);}else{_12d2.selectAllChildren(_12d0);}}else{range=_12d0.ownerDocument.body.createTextRange();range.moveToElementText(_12d0);if(!_12d1){try{range.select();}catch(e){}}}},selectElement:function(_12d3,_12d4){var range;_12d3=dom.byId(_12d3);var doc=_12d3.ownerDocument;var _12d5=win.global;if(doc.getSelection){var _12d6=_12d5.getSelection();range=doc.createRange();if(_12d6.removeAllRanges){if(has("opera")){if(_12d6.getRangeAt(0)){range=_12d6.getRangeAt(0);}}range.selectNode(_12d3);_12d6.removeAllRanges();_12d6.addRange(range);}}else{try{var tg=_12d3.tagName?_12d3.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){range=win.body(doc).createControlRange();}else{range=win.body(doc).createRange();}range.addElement(_12d3);if(!_12d4){range.select();}}catch(e){this.selectElementChildren(_12d3,_12d4);}}},inSelection:function(node){if(node){var _12d7;var doc=win.doc;var range;if(win.doc.getSelection){var sel=win.global.getSelection();if(sel&&sel.rangeCount>0){range=sel.getRangeAt(0);}if(range&&range.compareBoundaryPoints&&doc.createRange){try{_12d7=doc.createRange();_12d7.setStart(node,0);if(range.compareBoundaryPoints(range.START_TO_END,_12d7)===1){return true;}}catch(e){}}}else{range=doc.selection.createRange();try{_12d7=node.ownerDocument.body.createControlRange();if(_12d7){_12d7.addElement(node);}}catch(e1){try{_12d7=node.ownerDocument.body.createTextRange();_12d7.moveToElementText(node);}catch(e2){}}if(range&&_12d7){if(range.compareEndPoints("EndToStart",_12d7)===1){return true;}}}}return false;}};lang.setObject("dijit._editor.selection",_12c4);return _12c4;});},"dojox/grid/_SelectionPreserver":function(){define("dojox/grid/_SelectionPreserver",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(_12d8,_12d9,lang,array){return _12d8("dojox.grid._SelectionPreserver",null,{constructor:function(_12da){this.selection=_12da;var grid=this.grid=_12da.grid;this.reset();this._connects=[_12d9.connect(grid,"_setStore",this,"reset"),_12d9.connect(grid,"_addItem",this,"_reSelectById"),_12d9.connect(_12da,"onSelected",lang.hitch(this,"_selectById",true)),_12d9.connect(_12da,"onDeselected",lang.hitch(this,"_selectById",false)),_12d9.connect(_12da,"deselectAll",this,"reset")];},destroy:function(){this.reset();array.forEach(this._connects,_12d9.disconnect);delete this._connects;},reset:function(){this._selectedById={};},_reSelectById:function(item,index){if(item&&this.grid._hasIdentity){this.selection.selected[index]=this._selectedById[this.grid.store.getIdentity(item)];}},_selectById:function(_12db,_12dc){if(this.selection.mode=="none"||!this.grid._hasIdentity){return;}var item=_12dc,g=this.grid;if(typeof _12dc=="number"||typeof _12dc=="string"){var entry=g._by_idx[_12dc];item=entry&&entry.item;}if(item){this._selectedById[g.store.getIdentity(item)]=!!_12db;}return item;}});});},"esri/tasks/DensifyParameters":function(){define("esri/tasks/DensifyParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_12dd,lang,array,_12de,has,_12df,_12e0){var _12e1=_12dd(null,{declaredClass:"esri.tasks.DensifyParameters",geometries:null,geodesic:null,lengthUnit:null,maxSegmentLength:null,toJson:function(){var geoms=array.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_12de.toJson({geometryType:_12e0.getJsonType(this.geometries[0]),geometries:geoms});json.sr=_12de.toJson(this.geometries[0].spatialReference.toJson());}if(this.geodesic){json.geodesic=this.geodesic;}if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.maxSegmentLength){json.maxSegmentLength=this.maxSegmentLength;}return json;}});if(has("extend-esri")){lang.setObject("tasks.DensifyParameters",_12e1,_12df);}return _12e1;});},"esri/layers/FeatureLayer":function(){define("esri/layers/FeatureLayer",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/_base/Deferred","dojo/date/locale","dojo/sniff","dojo/io-query","dojo/dom-construct","dojo/i18n","esri/kernel","esri/lang","esri/request","esri/deferredUtils","esri/SpatialReference","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/jsonUtils","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/jsonUtils","esri/tasks/QueryTask","esri/tasks/query","esri/tasks/FeatureSet","esri/geometry/Extent","esri/geometry/jsonUtils","esri/geometry/normalizeUtils","esri/layers/GraphicsLayer","esri/layers/Field","esri/layers/TimeInfo","esri/layers/FeatureType","esri/layers/FeatureTemplate","esri/layers/FeatureEditResult","esri/layers/SnapshotMode","esri/layers/OnDemandMode","esri/layers/SelectionMode","esri/layers/TrackManager","dojo/i18n!esri/nls/jsapi","dojo/has!extend-esri?esri/layers/agscommon"],function(_12e2,_12e3,lang,array,_12e4,_12e5,_12e6,has,ioq,_12e7,i18n,_12e8,_12e9,_12ea,_12eb,_12ec,_12ed,_12ee,_12ef,_12f0,_12f1,_12f2,_12f3,_12f4,Query,_12f5,_12f6,_12f7,_12f8,_12f9,Field,_12fa,_12fb,_12fc,_12fd,_12fe,_12ff,_1300,_1301){var _1302=_12e2(_12f9,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",constructor:function(url,_1303){this.i18n=i18n.getLocalization("esri","jsapi");this._outFields=_1303&&_1303.outFields;this._loadCallback=_1303&&_1303.loadCallback;var patch=_1303&&_1303._usePatch;this._usePatch=(patch===null||patch===undefined)?true:patch;this._trackIdField=_1303&&_1303.trackIdField;this.objectIdField=_1303&&_1303.objectIdField;this._maxOffset=_1303&&_1303.maxAllowableOffset;this._optEditable=_1303&&_1303.editable;this._optAutoGen=_1303&&_1303.autoGeneralize;this.editSummaryCallback=_1303&&_1303.editSummaryCallback;this.userId=_1303&&_1303.userId;this.userIsAdmin=_1303&&_1303.userIsAdmin;this.useMapTime=(_1303&&_1303.hasOwnProperty("useMapTime"))?(!!_1303.useMapTime):true;this.source=_1303&&_1303.source;this.gdbVersion=_1303&&_1303.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(_12e9.isDefined(_1303&&_1303.mode)?_1303.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new _12fe(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_1303&&_1303.tileWidth)||512;this._tileHeight=(_1303&&_1303.tileHeight)||512;this._mode=new _12ff(this);var _1304=_1303&&_1303.latticeTiling;this.latticeTiling=_1304;break;case ctor.MODE_SELECTION:this._mode=new _1300(this);this._isSelOnly=true;break;}this._initLayer=lang.hitch(this,this._initLayer);this._selectHandler=lang.hitch(this,this._selectHandler);this._editable=false;if(lang.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new _12f4(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _1305=this._url.path;this._fserver=false;if(_1305.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _1306=_1303&&_1303.resourceInfo;if(_1306){this._initLayer(_1306);}else{if(this.source){var layer={source:this.source.toJson()};this._url.query=lang.mixin(this._url.query,{layer:_12e4.toJson(layer)});}if(this.gdbVersion){this._url.query=lang.mixin(this._url.query,{gdbVersion:this.gdbVersion});}_12ea({url:_1305,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}this.registerConnectEvents("esri.layers.FeatureLayer",{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error","info"]});},_initLayer:function(_1307,io){if(_1307||io){this._json=_1307;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_1307&&_1307._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new _12fe(this);this._isSnapshot=true;this._featureSet=_1307.featureSet;this._nextId=_1307.nextObjectId;_1307=_1307.layerDefinition;}if(_1307.hasOwnProperty("capabilities")){var _1308=(this.capabilities=_1307.capabilities);if(_1308&&_1308.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(_12e9.isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=_12e4.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_1307.geometryType==="esriGeometryPolyline")||(_1307.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_12e9.isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}var _1309=_1307.effectiveMinScale||_1307.minScale,_130a=_1307.effectiveMaxScale||_1307.maxScale;if(!this._hasMin&&_1309){this.setMinScale(_1309);}if(!this._hasMax&&_130a){this.setMaxScale(_130a);}this.layerId=_1307.id;this.name=_1307.name;this.description=_1307.description;this.copyright=_1307.copyrightText;this.type=_1307.type;this.geometryType=_1307.geometryType;this.displayField=_1307.displayField;this.defaultDefinitionExpression=_1307.definitionExpression;this.fullExtent=new _12f6(_1307.extent);this.initialExtent=new _12f6(this.fullExtent.toJson());if(this.fullExtent.spatialReference){this.spatialReference=new _12ec(this.fullExtent.spatialReference.toJson());}this.defaultVisibility=_1307.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_1307.indexedFields;this.maxRecordCount=_1307.maxRecordCount;this.canModifyLayer=_1307.canModifyLayer;this.supportsStatistics=_1307.supportsStatistics;this.supportsAdvancedQueries=_1307.supportsAdvancedQueries;this.hasLabels=_1307.hasLabels;this.canScaleSymbols=_1307.canScaleSymbols;this.supportsRollbackOnFailure=_1307.supportsRollbackOnFailure;this.syncCanReturnChanges=_1307.syncCanReturnChanges;this.isDataVersioned=_1307.isDataVersioned;this.editFieldsInfo=_1307.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_1307.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_1307.relationships;this.allowGeometryUpdates=_12e9.isDefined(_1307.allowGeometryUpdates)?_1307.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _130b=(this.fields=[]),_130c=_1307.fields,i;for(i=0;i<_130c.length;i++){_130b.push(new Field(_130c[i]));}if(!this.objectIdField){this.objectIdField=_1307.objectIdField;if(!this.objectIdField){_130c=_1307.fields;for(i=0;i<_130c.length;i++){var field=_130c[i];if(field.type==="esriFieldTypeOID"){this.objectIdField=field.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+_12e9.substitute({url:this.url},"objectIdField is not set [url: ${url}]"));}}if(!_12e9.isDefined(this._nextId)){var _130d=this.objectIdField,maxId=-1;if(this._collection&&_130d){var fset=this._featureSet,_130e=fset&&fset.features,il=_130e?_130e.length:0,oid,attr;for(i=0;i<il;i++){attr=_130e[i].attributes;oid=attr&&attr[_130d];if(oid>maxId){maxId=oid;}}}this._nextId=(maxId+1);}this.globalIdField=_1307.globalIdField;var _130f=(this.typeIdField=_1307.typeIdField),_1310;if(_130f){_1310=!this._getField(_130f)&&this._getField(_130f,true);if(_1310){this.typeIdField=_1310.name;}}this.visibilityField=_1307.visibilityField;var _1311=_1307.defaultSymbol;if(_1311){this.defaultSymbol=_12f0.fromJson(_1311);}var _1312=this.types=[],types=_1307.types,fType,_1313,_1314,_1315=this.editFieldsInfo,_1316=_1315&&_1315.creatorField,_1317=_1315&&_1315.editorField,fix=(_1316||_1317),_1318=[];if(types){for(i=0;i<types.length;i++){fType=new _12fb(types[i]);_1313=fType.templates;if(fix&&_1313&&_1313.length){_1318=_1318.concat(_1313);}_1312.push(fType);}}var _1319=_1307.templates,_131a,_131b=this.templates=[];if(_1319){for(i=0;i<_1319.length;i++){_131a=new _12fc(_1319[i]);if(fix){_1318.push(_131a);}_131b.push(_131a);}}for(i=0;i<_1318.length;i++){_1314=lang.getObject("prototype.attributes",false,_1318[i]);if(_1314){if(_1316){delete _1314[_1316];}if(_1317){delete _1314[_1317];}}}var _131c=_1307.timeInfo;if(_131c){this.timeInfo=new _12fa(_131c);this._startTimeField=_131c.startTimeField;this._endTimeField=_131c.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_131c.trackIdField=this._trackIdField;}else{this._trackIdField=_131c.trackIdField;}}this.hasAttachments=(!this._collection&&_1307.hasAttachments)?true:false;this.htmlPopupType=_1307.htmlPopupType;var _131d=_1307.drawingInfo,_131e;if(!this.renderer){if(_131d&&_131d.renderer){_131e=_131d.renderer;this.setRenderer(_12f3.fromJson(_131e));if(_131e.type==="classBreaks"){this.renderer.setMaxInclusive(true);}if(!this._collection){var _131f=_131e.type,_1320=[];_131e=this.renderer;switch(_131f){case "simple":_1320.push(_131e.symbol);break;case "uniqueValue":case "classBreaks":_1320.push(_131e.defaultSymbol);_1320=_1320.concat(array.map(_131e.infos,function(info){return info.symbol;}));break;}_1320=array.filter(_1320,_12e9.isDefined);var _1321=this._url.path+"/images/",token=this._getToken();array.forEach(_1320,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_1321+url;}if(token&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+token);}}});}}else{if(_1311){types=this.types;if(types.length>0){_131e=new _12f2(this.defaultSymbol,this.typeIdField);array.forEach(types,function(type){_131e.addValue(type.id,type.symbol);});}else{_131e=new _12f1(this.defaultSymbol);}this.setRenderer(_131e);}else{if(!this._isTable){var _1322;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_1322=new _12ed();break;case "esriGeometryPolyline":_1322=new _12ee();break;case "esriGeometryPolygon":_1322=new _12ef();break;}this.setRenderer(_1322?new _12f1(_1322):null);}}}}var _1323=(_131d&&_131d.transparency)||0;if(!_12e9.isDefined(this.opacity)&&_1323>0){this.opacity=1-(_1323/100);}this.version=_1307.currentVersion;if(!this.version){var ver;if("capabilities" in _1307||"drawingInfo" in _1307||"hasAttachments" in _1307||"htmlPopupType" in _1307||"relationships" in _1307||"timeInfo" in _1307||"typeIdField" in _1307||"types" in _1307){ver=10;}else{ver=9.3;}this.version=ver;}if((has("ie")||has("safari"))&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();var _1324=function(){this.onLoad(this);var _1325=this._loadCallback;if(_1325){delete this._loadCallback;_1325(this);}};if(this._collection){this._fireUpdateStart();var _1326=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new _12f5(_1326));this._fcAdded=true;_1324.call(this);}else{this._forceIdentity(_1324);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _1327=this.renderer;if(_1327){this._ager=(_1327.declaredClass.indexOf("TemporalRenderer")!==-1&&_1327.observationAger&&_1327.observationRenderer);var _1328=array.filter([_1327,_1327.observationRenderer,_1327.latestObservationRenderer,_1327.trackRenderer],_12e9.isDefined);var _1329=[];array.forEach(_1328,function(rnd){if(!lang.isFunction(rnd.attributeField)){_1329.push(rnd.attributeField);}_1329.push(rnd.attributeField2);_1329.push(rnd.attributeField3);},this);this._rendererFields=array.filter(_1329,_12e9.isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map){var div=this.inherited(arguments),mode=this._mode;if(mode){mode.initialize(map);}return div;},_unsetMap:function(map){var mode=this._mode;if(mode){mode.suspend();}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}_12e3.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},getOutFields:function(){return array.filter(this._getOutFields(),function(field){return (field==="*"||!!this._getField(field));},this);},setEditable:function(_132a){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_132a;return this;}var _132b=this._editable;this._editable=_132a;this._updateCaps();if(_132b!==_132a){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_132c){var _132d={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _132d;}var _132e=_132c&&_132c.feature,_132f=_132c&&_132c.userId,caps=array.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),lang.trim),_1330=array.indexOf(caps,"editing")>-1,_1331=_1330&&(array.indexOf(caps,"create")>-1),_1332=_1330&&(array.indexOf(caps,"update")>-1),_1333=_1330&&(array.indexOf(caps,"delete")>-1),_1334=this.ownershipBasedAccessControlForFeatures,_1335=this.editFieldsInfo,_1336=_1335&&_1335.creatorField,realm=_1335&&_1335.realm,_1337=_132e&&_132e.attributes,_1338=(_1337&&_1336)?_1337[_1336]:undefined,_1339,_133a=!!this.userIsAdmin,_133b=!_1334||_133a||!!(_1334.allowOthersToUpdate||_1334.allowUpdateToOthers),_133c=!_1334||_133a||!!(_1334.allowOthersToDelete||_1334.allowDeleteToOthers);if(_133a||(_1330&&!(_1331||_1332||_1333))){_1331=_1332=_1333=true;}_1339={"canCreate":_1331,"canUpdate":_1332,"canDelete":_1333};if(_1338===null){_1339.canUpdate=_1332&&_133b;_1339.canDelete=_1333&&_133c;}else{if(_1338===""){return _1339;}else{if(_1338){_132f=_132f||this.getUserId();if(_132f&&realm){_132f=_132f+"@"+realm;}if(_132f.toLowerCase()===_1338.toLowerCase()){return _1339;}else{_1339.canUpdate=_1332&&_133b;_1339.canDelete=_1333&&_133c;}}}}return _1339;},getUserId:function(){var _133d;if(this.loaded){_133d=(this.credential&&this.credential.userId)||this.userId||"";}return _133d;},setUserIsAdmin:function(_133e){this.userIsAdmin=_133e;},setEditSummaryCallback:function(_133f){this.editSummaryCallback=_133f;},getEditSummary:function(_1340,_1341,_1342){_1342=_12e9.isDefined(_1342)?_1342:(new Date()).getTime();var _1343="",info=this.getEditInfo(_1340,_1341,_1342),_1344=(_1341&&_1341.callback)||this.editSummaryCallback;if(_1344){info=_1344(_1340,info)||"";}if(lang.isString(info)){_1343=info;}else{if(info){var _1345=info.action,_1346=info.userId,_1347=info.timeValue,count=0;if(_1345){count++;}if(_1346){count++;}if(_12e9.isDefined(_1347)){count++;}if(count>1){_1343=(_1345==="edit"?"edit":"create")+(_1346?"User":"")+(_12e9.isDefined(_1347)?info.displayPattern:"");}}_1343=_1343&&_12e9.substitute(info,this.i18n.layers.FeatureLayer[_1343]);}return _1343;},getEditInfo:function(_1348,_1349,_134a){if(!this.loaded){return;}_134a=_12e9.isDefined(_134a)?_134a:(new Date()).getTime();var _134b=(_1349&&_1349.action)||"last",_134c=this.editFieldsInfo,_134d=_134c&&_134c.creatorField,_134e=_134c&&_134c.creationDateField,_134f=_134c&&_134c.editorField,_1350=_134c&&_134c.editDateField,realm=_134c&&_134c.realm,_1351=_1348&&_1348.attributes,_1352=(_1351&&_134d)?_1351[_134d]:undefined,_1353=(_1351&&_134e)?_1351[_134e]:null,_1354=(_1351&&_134f)?_1351[_134f]:undefined,_1355=(_1351&&_1350)?_1351[_1350]:null,_1356=this._getEditData(_1352,_1353,_134a),_1357=this._getEditData(_1354,_1355,_134a),_1358;switch(_134b){case "creation":_1358=_1356;break;case "edit":_1358=_1357;break;case "last":_1358=_1357||_1356;break;}if(_1358){_1358.action=(_1358===_1357)?"edit":"creation";}return _1358;},_getEditData:function(_1359,_135a,_135b){var data,_135c,_135d,_135e=60000,_135f=3600000,_1360=2*_135f,_1361=24*_135f,days7=7*_1361;if(_12e9.isDefined(_135a)){_135c=_135b-_135a;if(_135c<0){_135d="Full";}else{if(_135c<_135e){_135d="Seconds";}else{if(_135c<(2*_135e)){_135d="Minute";}else{if(_135c<_135f){_135d="Minutes";}else{if(_135c<_1360){_135d="Hour";}else{if(_135c<_1361){_135d="Hours";}else{if(_135c<days7){_135d="WeekDay";}else{_135d="Full";}}}}}}}}if((_1359!==undefined)||_135d){data=data||{};data.userId=_1359;if(_135d){var _1362=_12e6.format,_1363=new Date(_135a);data.minutes=Math.floor(_135c/_135e);data.hours=Math.floor(_135c/_135f);data.weekDay=_1362(_1363,{datePattern:"EEEE",selector:"date"});data.formattedDate=_1362(_1363,{selector:"date"});data.formattedTime=_1362(_1363,{selector:"time"});data.displayPattern=_135d;data.timeValue=_135a;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_1364){if(!this.isEditable()){this._maxOffset=_1364;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_1365){if(!this.loaded){this._optAutoGen=_1365;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_1365;if(_1365){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setGDBVersion:function(_1366){if(!this._collection&&(_1366!==this.gdbVersion)&&(_1366||this.gdbVersion)){this.gdbVersion=_1366;this._task.gdbVersion=_1366;this._url.query=lang.mixin(this._url.query,{gdbVersion:_1366});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_1367){if(this._isSnapshot){this._timeDefn=_1367;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}else{console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id = "+this.id+", Layer URL = "+this.url);}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_1368,_1369){this._timeOffset=_1368;this._timeOffsetUnits=_1369;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this.suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(query,_136a,_136b,_136c){_136a=_136a||this.constructor.SELECTION_NEW;var _136d=this._getShallowClone(query),map=this._map,_136e,dfd=_12eb._fixDfd(new _12e5(_12eb._dfdCanceller));_136d.outFields=this.getOutFields();_136d.returnGeometry=true;if(map){_136d.outSpatialReference=new _12ec(map.spatialReference.toJson());}if(!this._applyQueryFilters(_136d)){_136e={features:[]};this._selectHandler(_136e,_136a,_136b,_136c,dfd);return dfd;}var _136f=this._canDoClientSideQuery(_136d);if(_136f){_136e={features:this._doQuery(_136d,_136f)};this._selectHandler(_136e,_136a,_136b,_136c,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+this.invalidParams);this._resolve([err],null,_136c,dfd,true);return dfd;}var self=this;if(this._ts){_136d._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_136d);temp.addCallbacks(function(_1370){self._selectHandler(_1370,_136a,_136b,_136c,dfd);},function(err){self._resolve([err],null,_136c,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _1371=this._selectedFeatures,_1372=[],item;for(item in _1371){if(_1371.hasOwnProperty(item)){_1372.push(_1371[item]);}}return _1372;},clearSelection:function(_1373){var _1374=this._selectedFeatures,mode=this._mode,item;for(item in _1374){if(_1374.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_1373){this.onSelectionClear();}return this;},setSelectionSymbol:function(_1375){this._selectionSymbol=_1375;if(_1375){var _1376=this._selectedFeatures,item;for(item in _1376){if(_1376.hasOwnProperty(item)){_1376[item].setSymbol(_1375);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_1377,_1378,_1379,_137a,_137b){var _137c=_137b.assembly,dfd=_137b.dfd;this._applyNormalized(adds,_137c&&_137c[0]);this._applyNormalized(_1377,_137c&&_137c[1]);this.onBeforeApplyEdits(adds,_1377,_1378);var i,_137d={},_137e=this.objectIdField,_137f={f:"json"},dirty=false;if(this._collection){var _1380={};_1380.addResults=adds?array.map(adds,function(){dirty=true;return {objectId:this._nextId++,success:true};},this):null;_1380.updateResults=_1377?array.map(_1377,function(_1381){dirty=true;var oid=_1381.attributes[_137e];_137d[oid]=_1381;return {objectId:oid,success:true};},this):null;_1380.deleteResults=_1378?array.map(_1378,function(_1382){dirty=true;return {objectId:_1382.attributes[_137e],success:true};},this):null;if(dirty){this._editHandler(_1380,adds,_137d,_1379,_137a,dfd);}return;}if(adds&&adds.length>0){_137f.adds=this._convertFeaturesToJson(adds,0,1);dirty=true;}if(_1377&&_1377.length>0){for(i=0;i<_1377.length;i++){var _1383=_1377[i];_137d[_1383.attributes[_137e]]=_1383;}_137f.updates=this._convertFeaturesToJson(_1377,0,0,1);dirty=true;}if(_1378&&_1378.length>0){var ids=[];for(i=0;i<_1378.length;i++){ids.push(_1378[i].attributes[_137e]);}_137f.deletes=ids.join(",");dirty=true;}if(dirty){var self=this;return _12ea({url:this._url.path+"/applyEdits",content:lang.mixin(_137f,this._url.query),callbackParamName:"callback",load:function(_1384){self._editHandler(_1384,adds,_137d,_1379,_137a,dfd);},error:function(err){self._resolve([err],null,_137a,dfd,true);}},{usePost:true});}},queryFeatures:function(query,_1385,_1386){return this._query("execute","onQueryFeaturesComplete",query,_1385,_1386);},queryRelatedFeatures:function(query,_1387,_1388){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",query,_1387,_1388);},queryIds:function(query,_1389,_138a){return this._query("executeForIds","onQueryIdsComplete",query,_1389,_138a);},queryCount:function(query,_138b,_138c){return this._query("executeForCount","onQueryCountComplete",query,_138b,_138c);},queryAttachmentInfos:function(_138d,_138e,_138f){var url=this._url.path+"/"+_138d+"/attachments",dfd=new _12e5(_12eb._dfdCanceller),self=this;dfd._pendingDfd=_12ea({url:url,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_1390){var infos=_1390.attachmentInfos,_1391;array.forEach(infos,function(info){_1391=ioq.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_1391?("?"+_1391):"");info.objectId=_138d;});self._resolve([infos],"onQueryAttachmentInfosComplete",_138e,dfd);},error:function(err){self._resolve([err],null,_138f,dfd,true);}});return dfd;},addAttachment:function(_1392,_1393,_1394,_1395){return this._sendAttachment("add",_1392,_1393,_1394,_1395);},updateAttachment:function(_1396,_1397,_1398,_1399,_139a){_1398.appendChild(_12e7.create("input",{type:"hidden",name:"attachmentId",value:_1397}));return this._sendAttachment("update",_1396,_1398,_1399,_139a);},deleteAttachments:function(_139b,_139c,_139d,_139e){var url=this._url.path+"/"+_139b+"/deleteAttachments",dfd=new _12e5(_12eb._dfdCanceller),self=this,_139f={f:"json",attachmentIds:_139c.join(",")};dfd._pendingDfd=_12ea({url:url,content:lang.mixin(_139f,this._url.query),callbackParamName:"callback",load:lang.hitch(this,function(_13a0){var _13a1=_13a0.deleteAttachmentResults;_13a1=array.map(_13a1,function(_13a2){var res=new _12fd(_13a2);res.attachmentId=res.objectId;res.objectId=_139b;return res;});self._resolve([_13a1],"onDeleteAttachmentsComplete",_139d,dfd);}),error:function(err){self._resolve([err],null,_139e,dfd,true);}},{usePost:true});return dfd;},addType:function(_13a3){var types=this.types;if(types){var found=array.some(types,function(type){if(type.id==_13a3.id){return true;}return false;});if(found){return false;}else{types.push(_13a3);}}else{this.types=[_13a3];}this._typesDirty=true;return true;},deleteType:function(_13a4){if(!this._collection){return;}var types=this.types;if(types){var found=-1;array.some(types,function(type,index){if(type.id==_13a4){found=index;return true;}return false;});if(found>-1){this._typesDirty=true;return types.splice(found,1)[0];}}},toJson:function(){var _13a5=this._json,json=lang.isString(_13a5)?_12e4.fromJson(_13a5):lang.clone(_13a5);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _13a6=json.layerDefinition,_13a7=this._collection;if(_13a7&&this._typesDirty){_13a6.types=array.map(this.types||[],function(type){return type.toJson();});var _13a8=this.renderer,_13a9=_13a6.drawingInfo;if(_13a9&&_13a8&&_13a8.declaredClass.indexOf("TemporalRenderer")===-1){_13a9.renderer=_13a8.toJson();}}var _13aa=null;if(!(_13a7&&!this._fcAdded)){_13aa={geometryType:_13a6.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=lang.mixin({},json.featureSet||{},_13aa);if(_13a7){json.nextObjectId=this._nextId;_13a6.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_forceIdentity:function(_13ab){var self=this,path=this._url&&this._url.path;if((this.ownershipBasedAccessControlForFeatures||this.userIsAdmin)&&!this._getToken()&&path&&_12e8.id&&_12e8.id._hasPortalSession()&&_12e8.id._doPortalSignIn(path)){_12e8.id.getCredential(path).then(function(){self._findCredential();_13ab.call(self);},function(){_13ab.call(self);});}else{_13ab.call(this);}},_updateCaps:function(){var _13ac=this._editable,_13ad=lang.trim(this.capabilities||""),_13ae=array.map((_13ad?_13ad.split(","):[]),lang.trim),caps=array.map((_13ad?_13ad.toLowerCase().split(","):[]),lang.trim),found=array.indexOf(caps,"editing"),cap,i,_13af,_13b0={"Create":array.indexOf(caps,"create"),"Update":array.indexOf(caps,"update"),"Delete":array.indexOf(caps,"delete")};if(_13ac&&found===-1){_13ae.push("Editing");}else{if(!_13ac&&found>-1){_13af=[found];for(cap in _13b0){if(_13b0[cap]>-1){_13af.push(_13b0[cap]);}}_13af.sort();for(i=_13af.length-1;i>=0;i--){_13ae.splice(_13af[i],1);}}}this.capabilities=_13ae.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},onSuspend:function(){this.inherited(arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},onResume:function(evt){this.inherited(arguments);this._toggleTime(true);this._updateMaxOffset();var mode=this._mode,map=this._map,_13b1=this.renderer;if(evt.firstOccurrence){this.clearSelection();if(this.timeInfo){if(this._trackIdField||(_13b1&&(_13b1.latestObservationRenderer||_13b1.trackRenderer))){this._trackManager=new _1301(this);this._trackManager.initialize(map);}}this._zoomConnect=_12e3.connect(map,"onZoomEnd",this,this._updateMaxOffset);}if(mode){evt.firstOccurrence?mode.startup():mode.resume();}},_updateMaxOffset:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}},_toggleTime:function(_13b2){var map=this._map;if(_13b2&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=_12e3.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;_12e3.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_13b3){this._mapTimeExtent=_13b3;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_13b4){var _13b5=this._timeOffset,units=this._timeOffsetUnits;return (_13b4&&_13b5&&units)?_13b4.offset(-1*_13b5,units):_13b4;},_getTimeOverlap:function(_13b6,_13b7){if(_13b6&&_13b7){return _13b6.intersection(_13b7);}else{return _13b6||_13b7;}},_getTimeFilter:function(_13b8){var _13b9=this.getTimeDefinition(),_13ba=null,_13bb;if(_13b9||_13ba){_13bb=this._getTimeOverlap(_13b9,_13ba);if(!_13bb){return [false];}}if(_13b8){_13b8=_13bb?this._getTimeOverlap(_13b8,_13bb):_13b8;if(!_13b8){return [false];}}else{_13b8=_13bb;}return [true,_13b8];},_getAttributeFilter:function(_13bc){var _13bd=this.getDefinitionExpression();if(_13bc){_13bc=_13bd?"("+_13bd+") AND ("+_13bc+")":_13bc;}else{_13bc=_13bd;}return _13bc;},_applyQueryFilters:function(query){query.where=this._getAttributeFilter(query.where);query.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _13be=this._getTimeFilter(query.timeExtent);if(!_13be[0]){return false;}else{query.timeExtent=_13be[1];}}return true;},_add:function(_13bf){var _13c0=this._selectionSymbol,attr=_13bf.attributes,_13c1=this.visibilityField;if(_13c0&&this._isSelOnly){_13bf.setSymbol(_13c0);}if(_13c1&&attr&&attr.hasOwnProperty(_13c1)){_13bf[attr[_13c1]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(query){var _13c2=[],map=this._map;if(this._isTable||!map){return;}if(query.text||(query.where&&query.where!==this.getDefinitionExpression())){return;}var _13c3=this._isSnapshot,_13c4=this._isSelOnly;var _13c5=query.geometry;if(_13c5){if(!_13c4&&query.spatialRelationship===Query.SPATIAL_REL_INTERSECTS&&(_13c5.type==="extent"&&(_13c3||map.extent.contains(_13c5)))){_13c2.push(1);}else{return;}}var ids=query.objectIds;if(ids){if(_13c3){_13c2.push(2);}else{var len=ids.length,mode=this._mode,_13c6=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_13c6++;}}if(_13c6===len){_13c2.push(2);}else{return;}}}if(this.timeInfo){var _13c7=query.timeExtent,_13c8=this._mapTimeExtent;if(_13c3){if(_13c7){_13c2.push(3);}}else{if(_13c4){if(_13c7){return;}}else{if(_13c8){if(array.indexOf(_13c2,2)!==-1){if(_13c7){_13c2.push(3);}}else{return;}}else{if(_13c2.length>0){if(_13c7){_13c2.push(3);}}else{if(_13c7){return;}}}}}}return _13c2.length>0?_13c2:null;},_doQuery:function(query,_13c9,_13ca){var _13cb=[],mode=this._mode,_13cc=this.objectIdField,i,len,_13cd;if(array.indexOf(_13c9,2)!==-1){_13cb=[];var ids=query.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_13cb.push(obj);}}if(_13cb.length===0){return [];}}if(array.indexOf(_13c9,1)!==-1){_13cd=_13cb.length>0?_13cb:this.graphics;len=_13cd.length;var _13ce=query.geometry._normalize(null,true);_13cb=[];for(i=0;i<len;i++){var _13cf=_13cd[i],_13d0=_13cf.geometry;if(_13d0){if(this.normalization&&_13ce.length){if(_13ce[0].intersects(_13d0)||_13ce[1].intersects(_13d0)){_13cb.push(_13cf);}}else{if(_13ce.intersects(_13d0)){_13cb.push(_13cf);}}}}if(_13cb.length===0){return [];}}if(array.indexOf(_13c9,3)!==-1){if(this.timeInfo){_13cd=_13cb.length>0?_13cb:this.graphics;var time=query.timeExtent,_13d1=this._filterByTime(_13cd,time.startTime,time.endTime);_13cb=_13d1.match;}}if(_13ca){return array.map(_13cb,function(obj){return obj.attributes[_13cc];},this);}else{return _13cb;}},_filterByTime:function(_13d2,_13d3,_13d4){var _13d5=this._startTimeField,_13d6=this._endTimeField,_13d7;if(!this._twoTimeFields){_13d7=_13d5||_13d6;}var isDef=_12e9.isDefined,yea=[],nay=[],i,len=_13d2.length,_13d8,_13d9;_13d3=_13d3?_13d3.getTime():-Infinity;_13d4=_13d4?_13d4.getTime():Infinity;if(_13d7){for(i=0;i<len;i++){_13d8=_13d2[i];_13d9=_13d8.attributes;var time=_13d9[_13d7];if(time>=_13d3&&time<=_13d4){yea.push(_13d8);}else{nay.push(_13d8);}}}else{for(i=0;i<len;i++){_13d8=_13d2[i];_13d9=_13d8.attributes;var start=_13d9[_13d5],end=_13d9[_13d6];start=isDef(start)?start:-Infinity;end=isDef(end)?end:Infinity;if((start>=_13d3&&start<=_13d4)||(end>=_13d3&&end<=_13d4)||(_13d3>=start&&_13d4<=end)){yea.push(_13d8);}else{nay.push(_13d8);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_13da,_13db,dfd,_13dc){if(_13da){this[_13da].apply(this,args);}if(_13db){_13db.apply(null,args);}if(dfd){_12eb._resDfd(dfd,args,_13dc);}},_getShallowClone:function(query){var _13dd=new Query(),prop;for(prop in query){if(query.hasOwnProperty(prop)){_13dd[prop]=query[prop];}}return _13dd;},_query:function(type,_13de,query,_13df,_13e0){var that=this,map=this._map,dfd=new _12e5(_12eb._dfdCanceller),_13e1=query;var _13e2=function(_13e3,_13e4){if(!_13e4&&type==="execute"&&!that._isTable){var _13e5=_13e3.features,mode=that._mode,_13e6=that.objectIdField,il=_13e5.length,i;for(i=il-1;i>=0;i--){var oid=_13e5[i].attributes[_13e6];var _13e7=mode._getFeature(oid);if(_13e7){_13e5.splice(i,1,_13e7);}}}that._resolve([_13e3],_13de,_13df,dfd);};if(type!=="executeRelationshipQuery"){_13e1=this._getShallowClone(query);_13e1.outFields=this.getOutFields();_13e1.returnGeometry=query.hasOwnProperty("returnGeometry")?query.returnGeometry:true;var _13e8;if(map){_13e1.outSpatialReference=new _12ec(map.spatialReference.toJson());}if(!this._applyQueryFilters(_13e1)){switch(type){case "execute":_13e8=new _12f5({features:[]});break;case "executeForIds":_13e8=[];break;case "executeForCount":_13e8=0;break;}_13e2(_13e8,true);return dfd;}var _13e9=this._canDoClientSideQuery(_13e1);if(_13e9){var _13ea=this._doQuery(_13e1,_13e9,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_13e8=new _12f5();_13e8.features=_13ea;break;case "executeForIds":_13e8=_13ea;break;case "executeForCount":_13e8=_13ea.length;break;}_13e2(_13e8,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+this.invalidParams);this._resolve([err],null,_13e0,dfd,true);return dfd;}if(this._ts){_13e1._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_13e1);temp.addCallbacks(_13e2,function(err){that._resolve([err],null,_13e0,dfd,true);});return dfd;},_convertFeaturesToJson:function(_13eb,_13ec,isAdd,_13ed){var json=[],_13ee=this._selectionSymbol,_13ef=this.visibilityField,i,_13f0,_13f1=this.objectIdField;if(this.loaded&&(isAdd||_13ed)){_13f0=array.filter(this.fields,function(field){return (field.editable===false)&&(!_13ed||(field.name!==_13f1));});}for(i=0;i<_13eb.length;i++){var _13f2=_13eb[i],_13f3={},_13f4=_13f2.geometry,attr=_13f2.attributes,_13f5=_13f2.symbol;if(_13f4&&(!_13ed||!this.loaded||this.allowGeometryUpdates)){_13f3.geometry=_13f4.toJson();}if(_13ef){_13f3.attributes=attr=lang.mixin({},attr);attr[_13ef]=_13f2.visible?1:0;}else{if(attr){_13f3.attributes=lang.mixin({},attr);}}if(_13f3.attributes&&_13f0&&_13f0.length){array.forEach(_13f0,function(field){delete _13f3.attributes[field.name];});}if(_13f5&&(_13f5!==_13ee)){_13f3.symbol=_13f5.toJson();}json.push(_13f3);}return _13ec?json:_12e4.toJson(json);},_selectHandler:function(_13f6,_13f7,_13f8,_13f9,dfd){var _13fa,ctor=this.constructor;switch(_13f7){case ctor.SELECTION_NEW:this.clearSelection(true);_13fa=true;break;case ctor.SELECTION_ADD:_13fa=true;break;case ctor.SELECTION_SUBTRACT:_13fa=false;break;}var i,_13fb=_13f6.features,mode=this._mode,_13fc=[],_13fd=this.objectIdField,_13fe,oid;if(_13fa){for(i=0;i<_13fb.length;i++){_13fe=_13fb[i];oid=_13fe.attributes[_13fd];var added=mode._addFeatureIIf(oid,_13fe);_13fc.push(added);this._selectFeatureIIf(oid,added,mode);}}else{for(i=0;i<_13fb.length;i++){_13fe=_13fb[i];oid=_13fe.attributes[_13fd];this._unSelectFeatureIIf(oid,mode);var _13ff=mode._removeFeatureIIf(oid);_13fc.push(_13ff||_13fe);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_13fc,_13f7,_13f6.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_13f8,dfd);if(_13f6.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_1400,mode){var _1401=this._selectedFeatures,found=_1401[oid];if(!found){mode._incRefCount(oid);_1401[oid]=_1400;if(!this._isTable){this._setSelectSymbol(_1400);}}return found||_1400;},_unSelectFeatureIIf:function(oid,mode){var found=this._selectedFeatures[oid];if(found){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(found);}}return found;},_isSelected:function(_1402){},_setSelectSymbol:function(_1403){var _1404=this._selectionSymbol;if(_1404&&!this._isSelOnly){_1403.setSymbol(_1404);}},_setUnSelectSymbol:function(_1405){var _1406=this._selectionSymbol;if(_1406&&!this._isSelOnly){if(_1406===_1405.symbol){_1405.setSymbol(null,true);}}},_getOutFields:function(){var _1407=array.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(field,index,arr){return !!field&&(array.indexOf(arr,field)===index);});var _1408=lang.clone(this._outFields);if(_1408){if(array.indexOf(_1408,"*")!==-1){return _1408;}array.forEach(_1407,function(field){if(array.indexOf(_1408,field)===-1){_1408.push(field);}});return _1408;}else{return _1407;}},_checkFields:function(_1409){var _140a=_1409||this._getOutFields();array.forEach(_140a,function(_140b){if(_140b==="*"){return;}if(!this._getField(_140b)){console.debug("esri.layers.FeatureLayer: "+_12e9.substitute({url:this.url,field:_140b},"unable to find '${field}' field in the layer 'fields' information [url: ${url}]"));}},this);if(!_1409&&!this._isTable&&!this._fserver&&!this._collection){var found=array.some(this.fields,function(_140c){return (_140c&&_140c.type==="esriFieldTypeGeometry")?true:false;});if(!found){console.debug("esri.layers.FeatureLayer: "+_12e9.substitute({url:this.url},"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]"));}}},_fixRendererFields:function(){var _140d=this.renderer;if(_140d&&this.fields.length>0){var _140e=array.filter([_140d,_140d.observationRenderer,_140d.latestObservationRenderer,_140d.trackRenderer],_12e9.isDefined);var _140f=[];array.forEach(_140e,function(rnd){var _1410,_1411;_1411=rnd.attributeField;if(_1411&&!lang.isFunction(_1411)){_1410=!this._getField(_1411)&&this._getField(_1411,true);if(_1410){rnd.attributeField=_1410.name;}}_1411=rnd.attributeField2;if(_1411){_1410=!this._getField(_1411)&&this._getField(_1411,true);if(_1410){rnd.attributeField2=_1410.name;}}_1411=rnd.attributeField3;if(_1411){_1410=!this._getField(_1411)&&this._getField(_1411,true);if(_1410){rnd.attributeField3=_1410.name;}}if(!lang.isFunction(rnd.attributeField)){_140f.push(rnd.attributeField);}_140f.push(rnd.attributeField2);_140f.push(rnd.attributeField3);},this);this._rendererFields=array.filter(_140f,_12e9.isDefined);}},_getField:function(_1412,_1413){var _1414=this.fields;if(!_1414||_1414.length===0){return null;}var _1415;if(_1413){_1412=_1412.toLowerCase();}array.some(_1414,function(_1416){var found=false;if(_1413){found=(_1416&&_1416.name.toLowerCase()===_1412)?true:false;}else{found=(_1416&&_1416.name===_1412)?true:false;}if(found){_1415=_1416;}return found;});return _1415;},_getDateOpts:function(){if(!this._dtOpts){var props=array.map(array.filter(this.fields,function(_1417){return !!(_1417&&_1417.type==="esriFieldTypeDate");}),function(_1418){return _1418.name;});this._dtOpts={properties:props};}return this._dtOpts;},_applyNormalized:function(_1419,_141a){if(_1419&&_141a){array.forEach(_1419,function(_141b,index){if(_141b&&_141a[index]){_141b.setGeometry(_141a[index]);}});}},_editHandler:function(_141c,adds,_141d,_141e,_141f,dfd){var _1420=_141c.addResults,_1421=_141c.updateResults,_1422=_141c.deleteResults,i,_1423,oid,_1424,attr,_1425=this.objectIdField,mode=this._mode,_1426=this._isTable;var _1427=this.editFieldsInfo,_1428=this.getOutFields()||[],_1429=_1427&&_1427.creatorField,_142a=_1427&&_1427.creationDateField,_142b=_1427&&_1427.editorField,_142c=_1427&&_1427.editDateField,realm=_1427&&_1427.realm;if(array.indexOf(_1428,"*")===-1){if(_1429&&array.indexOf(_1428,_1429)===-1){_1429=null;}if(_142a&&array.indexOf(_1428,_142a)===-1){_142a=null;}if(_142b&&array.indexOf(_1428,_142b)===-1){_142b=null;}if(_142c&&array.indexOf(_1428,_142c)===-1){_142c=null;}}var _142d=(_142a||_142c)?(new Date()).getTime():null,_142e=(_1429||_142b)?this.getUserId():undefined;if(_142e&&realm){_142e=_142e+"@"+realm;}if(_1420){for(i=0;i<_1420.length;i++){_1420[i]=new _12fd(_1420[i]);if(_1426){continue;}_1423=_1420[i];if(_1423.success){oid=_1423.objectId;_1424=adds[i];var gl=_1424._graphicsLayer;if(gl&&gl!==this){gl.remove(_1424);}attr=_1424.attributes||{};attr[_1425]=oid;if(_1429){attr[_1429]=_142e;}if(_142b){attr[_142b]=_142e;}if(_142a){attr[_142a]=_142d;}if(_142c){attr[_142c]=_142d;}_1424.setAttributes(attr);if(mode._init){mode.drawFeature(_1424);}}}}if(_1421){for(i=0;i<_1421.length;i++){_1421[i]=new _12fd(_1421[i]);if(_1426){continue;}_1423=_1421[i];if(_1423.success){oid=_1423.objectId;_1424=_141d[oid];var found=mode._getFeature(oid);if(found){if(found.geometry!==_1424.geometry){found.setGeometry(_12f7.fromJson(_1424.geometry.toJson()));}this._repaint(found,oid);}_1424=found||_1424;attr=_1424.attributes||{};if(_142b){attr[_142b]=_142e;}if(_142c){attr[_142c]=_142d;}_1424.setAttributes(attr);}}}if(_1422){var _142f=[];for(i=0;i<_1422.length;i++){_1422[i]=new _12fd(_1422[i]);if(_1426){continue;}_1423=_1422[i];if(_1423.success){oid=_1423.objectId;_1424=mode._getFeature(oid);if(_1424){if(this._unSelectFeatureIIf(oid,mode)){_142f.push(_1424);}_1424._count=0;mode._removeFeatureIIf(oid);}}}if(_142f.length>0){this.onSelectionComplete(_142f,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_1420,_1421,_1422],"onEditsComplete",_141e,dfd);},_sendAttachment:function(type,_1430,_1431,_1432,_1433){var _1434=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_1430+"/"+_1434,self=this;var dfd=_12ea({url:url,form:_1431,content:lang.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_1435){var _1436=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_1437=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_1438=new _12fd(_1435[_1436]);_1438.attachmentId=_1438.objectId;_1438.objectId=_1430;self._resolve([_1438],_1437,_1432);return _1438;}).addErrback(function(error){self._resolve([error],null,_1433,null,true);});return dfd;},_repaint:function(_1439,oid,force){oid=_12e9.isDefined(oid)?oid:_1439.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_1439.setSymbol(_1439.symbol,force);}},_getKind:function(_143a){var _143b=this._trackManager;if(_143b){return _143b.isLatestObservation(_143a)?1:0;}return 0;}});lang.mixin(_1302,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});_12f8._createWrappers(_1302);if(has("extend-esri")){lang.setObject("layers.FeatureLayer",_1302,_12e8);}return _1302;});},"esri/dijit/editing/toolbars/ToolbarBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/has","dijit/Toolbar","dijit/ToolbarSeparator","esri/kernel","esri/lang"],function(_143c,lang,array,_143d,has,_143e,_143f,_1440,_1441){var TBB=_143c([_143e],{declaredClass:"esri.dijit.editing.toolbars.ToolbarBase",_enabled:true,graphicsAdded:function(){},drawEnd:function(){},onApplyEdits:function(){},onDelete:function(){},constructor:function(_1442,_1443){if(!_1442||!_1442.settings){return;}this._tools=[];this._tbConnects=[];this._initialize(_1442.settings);},postCreate:function(){this._createTools();this.deactivate();},destroy:function(){var tool;var tools=this._tools;for(tool in tools){if(tools.hasOwnProperty(tool)&&_1441.isDefined(this._tools[tool])){this._tools[tool].destroy();}}array.forEach(this._tbConnects,_143d.disconnect);this.inherited(arguments);},activate:function(_1444){this._enabled=true;},deactivate:function(){var tool;this._enabled=false;this._layer=null;this._geometryType=null;var tools=this._tools;for(tool in tools){if(tools.hasOwnProperty(tool)){this._tools[tool].deactivate();this._tools[tool].setChecked(false);}}},isEnabled:function(){return this._enabled;},setActiveSymbol:function(_1445){this._activeSymbol=_1445;},_getSymbol:function(){},_createTools:function(){},_initialize:function(_1446){this._settings=_1446;this._toolbar=_1446.drawToolbar;this._editToolbar=_1446.editToolbar;this._initializeToolbar();},_activateTool:function(tool,_1447){if(this._activeTool){this._activeTool.deactivate();}if(_1447===true&&this._activeTool==this._tools[tool]){this._activeTool.setChecked(false);this._activeTool=null;}else{this._activeTool=this._tools[tool];this._activeTool.setChecked(true);this._activeTool.activate(null);}},_createSeparator:function(){this.addChild(new _143f());}});if(has("extend-esri")){lang.setObject("dijit.editing.toolbars.ToolbarBase",TBB,_1440);}return TBB;});},"dijit/form/_FormValueWidget":function(){define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_1448,has,_1449,_144a){return _1448("dijit.form._FormValueWidget",[_1449,_144a],{_layoutHackIE7:function(){if(has("ie")==7){var _144b=this.domNode;var _144c=_144b.parentNode;var _144d=_144b.firstChild||_144b;var _144e=_144d.style.filter;var _144f=this;while(_144c&&_144c.clientHeight==0){(function ping(){var _1450=_144f.connect(_144c,"onscroll",function(){_144f.disconnect(_1450);_144d.style.filter=(new Date()).getMilliseconds();_144f.defer(function(){_144d.style.filter=_144e;});});})();_144c=_144c.parentNode;}}}});});},"*now":function(r){r(["dojo/i18n!*preload*esri/dijit/editing/nls/Editor-all*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/dijit/editing/Editor-all",["esri/layers/FeatureLayer","esri/toolbars/_toolbar","esri/toolbars/draw","esri/toolbars/edit","esri/tasks/geometry","esri/dijit/AttributeInspector","esri/dijit/editing/AttachmentEditor","esri/dijit/editing/Editor","esri/dijit/editing/TemplatePicker","esri/dijit/editing/Util","esri/dijit/editing/SelectionHelper"],function(_1451,_1452,Draw,Edit,_1453,_1454,_1455,_1456,_1457,Util,_1458){return {};});